!function(e){"use strict";function t(){function e(e){o=e}function t(){return void 0!=typeof o?o:void 0}function i(e){s=e}function a(){return void 0!=typeof s?s:void 0}function r(e){u=e}function l(){return void 0!=typeof u?u:void 0}function n(e,t){var i;return i=t?_.find(e,function(e){return 1==e.IsSystemDefault}):_.find(e,function(e){return 0==e.IsSystemDefault&&(1==e.isDefault||1==e.IsDefaultView)})}var o,s,u,c={setColDef:e,getColDef:t,setFilterDef:i,getFilterDef:a,setGroupDef:r,getGroupDef:l,getDefaultSavedView:n};return c}e.module("SMART2").service("cacheHelperService",[t])}(angular),function(){"use strict";angular.module("SMART2").factory("cellTemplateProvider",["$filter","$translate","smartDateFormatFilter",function(e,t,i){function a(t,i){if("calculated"==t.type)return t.field&&"IsCloseForReceiving"!=t.field&&"IsCloseForInvoicing"!=t.field?'<div ng-class="{\'text-strikethrough\': row.entity.ItemStatus.id===121}"><div ng-if="!row.groupHeader" >{{'+t.attributes.rule+"|  minPrecisionHandler:"+t.attributes.minmaxprecisionfilter+"}}</div></div>":'<div ng-class="{\'text-strikethrough\': row.entity.ItemStatus.id===121}"><div ng-if="!row.groupHeader" >{{'+t.attributes.rule+"}}</div></div>";if("editable"==t.type){if(t.attributes&&t.attributes.type&&"number"==t.attributes.type){if("cellTemplate"==i)return"<div ng-class=\"{'text-strikethrough': row.entity.ItemStatus.id===121, 'ui-grid-cell-contents right-align paddingRight5': true}\" ng-style=\"{color: COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? 'transparent' : ''}\" title=\"{{COL_FIELD}}\">{{COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? '-' : row.entity."+(void 0!=t.data?t.data:t.field)+"}}</div>";if("editableCellTemplate"==i){var a="";void 0!=t.attributes.minmaxprecision&&(a='minmaxprecision="'+t.attributes.minmaxprecision+'"');var r="";return void 0!=t.attributes.maxlength&&(r='maxlength="'+t.attributes.maxlength+'"'),'<div title="{{COL_FIELD }}"><div><smart-textfield  class="ui-grid-cell-contents" type="number" focus="true" '+a+' ng-model="row.entity.'+t.field+'" '+r+' on-key-up="grid.appScope.textOrNumberKeyUp($event,col,row)" zero-case-handler uigrid-compatible></smart-textfield></div></div>'}}else if(t.attributes&&t.attributes.type&&"autocomplete"==t.attributes.type){if("cellTemplate"==i)return"<div ng-class=\"{'text-strikethrough': row.entity.ItemStatus.id===121, 'padding0': true}\" ng-style=\"{color: COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? 'transparent' : ''}\" title=\"{{COL_FIELD}}\">{{COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? '-' : COL_FIELD}}</div>";if("editableCellTemplate"==i)return'<div class="padding0" title="{{COL_FIELD}}"><div><smart-textfield class="ui-grid-cell-contents" type="autocomplete" width="230px"  displayformat="'+t.attributes.displayformat+'" optionformat="'+t.attributes.optionformat+'" filterkeys="'+("['"+t.attributes.filterkeys.join("','")+"']")+'" ng-model="row.entity.'+t.attributes.model+'" options="grid.appScope.autoSuggestOptions"  on-change="grid.appScope.autoSuggestOnChange($event,col,row)" on-select="grid.appScope.autoSuggestOnSelect($event,row.entity.'+t.attributes.model+',row,col)" uigrid-compatible></smart-textfield></div></div>'}else if(t.attributes&&t.attributes.type&&"date"==t.attributes.type){if("cellTemplate"==i)return'<div  ng-class=\'{"text-strikethrough": row.entity.ItemStatus.id===121}\' ng-style=\'{color: COL_FIELD === "" || COL_FIELD == undefined || COL_FIELD == null ? "transparent" : "", height: "100%"}\'>{{COL_FIELD === \'\' || COL_FIELD == undefined || COL_FIELD == null ? \'-\' : (COL_FIELD | smartDateFormat:\''+t.attributes.format+"')}}</div>";if("editableCellTemplate"==i)return"<div grid-date-template-provider></div>"}var r="";if(void 0!=t.attributes.maxlength&&(r='maxlength="'+t.attributes.maxlength+'"'),"cellTemplate"==i)return"<div ng-class=\"{'text-strikethrough': row.entity.ItemStatus.id===121, 'padding0': true}\" ng-style=\"{color: COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? 'transparent' : ''}\" title=\"{{COL_FIELD | translate}}\">{{COL_FIELD === '' || COL_FIELD == undefined || COL_FIELD == null ? '-' : (row.entity."+(void 0!=t.data?t.data:t.field)+" | translate)}}</div>";if("editableCellTemplate"==i)return'<div title="{{COL_FIELD}}"><div><smart-textfield class="ui-grid-cell-contents" type="text" ng-model="row.entity.'+t.field+'" '+r+' on-key-up="grid.appScope.textOrNumberKeyUp($event,col,row)" uigrid-compatible></smart-textfield></div></div>'}else if("dropdown"==t.type){if(t.attributes.options.map(function(i){i[t.attributes.datakey]=e("translate")(i[t.attributes.datakey])}),"cellTemplate"==i)return"<div ng-class='{\"text-strikethrough\": row.entity.ItemStatus.id===121}'><div ng-if='grid.appScope.isObject(COL_FIELD)' style='height:100%;' uigrid-compatible>{{COL_FIELD."+t.attributes.dataKey+" | translate}}</div><div ng-if='!grid.appScope.isObject(COL_FIELD)' IDK={{"+t.attributes.idKey+"}} style='height:100%;' uigrid-compatible>{{COL_FIELD | translate}}</div></div>";if("editableCellTemplate"==i)return"<div class='ui-grid-cell-contents'><form name='inputForm'><select model = {{row.entity."+t.attributes.model+"}} ui-grid-edit-dropdown ng-model='row.entity."+t.attributes.model+"' ng-change='grid.appScope.dropDownOnChange(row.entity, col , row.entity."+t.field+")' ng-options='option."+t.attributes.dataKey+" for option in grid.appScope.dropDownOptions track by option."+t.attributes.idKey+"' uigrid-compatible></select></form></div>"}else if("checkbox"==t.type){if("cellTemplate"==i)return'<div title="{{COL_FIELD}}"><div><smart-checkbox fill="true" class="ui-grid-cell-contents" ng-model="row.entity.'+t.attributes.model+'" on-change="grid.appScope.checkBoxOnChange(row.entity, col , row.entity.'+t.field+')"  uigrid-compatible></smart-checkbox></div></div>'}else if("popup"==t.type){var l="",n='+"-"+';if("undefined"!=typeof t.appendedLabels){for(var o=0;o<t.appendedLabels.length;o++)l=l+"row.entity."+t.appendedLabels[o]+n;l="("+l.slice(0,-n.length)+")"}else l="cellTemplate"==i?"row.entity."+t.field:"COL_FIELD";var s='"'+t.attributes.defaultTitle+'"';if("undefined"!=typeof t.attributes.defaultLabelCondition)var s=t.attributes.defaultLabelCondition;if("cellTemplate"==i)return"categoryPopup"===t.attributes.type?'<div title = "{{COL_FIELD}}" class="ui-grid-cell-contents padding0"><a ng-if="!row.groupHeader" ng-class="{\'waves-effect waves-light btn-flat\': true, \'disabled\': row.entity.source.id!==1,\'text-strikethrough\': row.entity.ItemStatus.id===121}">{{(COL_FIELD != undefined && (COL_FIELD != "") && (COL_FIELD != "1")) ?'+l+" : "+s+"}}</a></div>":'<div title = "{{COL_FIELD}}" class="ui-grid-cell-contents padding0"><a ng-if="!row.groupHeader" ng-class="{\'waves-effect waves-light btn-flat\': true, \'disabled\': '+!t.enableCellEdit+',\'text-strikethrough\': row.entity.ItemStatus.id===121}">{{(COL_FIELD != undefined && (COL_FIELD != "") && (COL_FIELD != "1")) ?'+l+" : "+s+"}}</a></div>";if("editableCellTemplate"==i)return'<div title="{{COL_FIELD}}"><smart-button flat="true"  config=\'{"title": (row.entity.'+t.field+" != undefined && row.entity."+t.field+' != "1" && row.entity.'+t.field+' != "")?'+l+" : "+s+' }\' on-click="grid.appScope.popUpButtonClickCallback(row,col)" uigrid-compatible></smart-button></div>'}else if("subsection"==t.type&&"notes"==t.data){if(t.data&&t.attributes&&void 0!==t.attributes.readonly)return'<div><smart-button flat="true" disable="grid.appScope.IsCellReadOnly(row.entity,\''+t.data+"',"+t.attributes.readonly+')" config=\'{"title":grid.appScope.getCommentText(row.entity.notes)}\' callback-params="row.entity"} callback="grid.appScope.showCommentsPopupCallback"  uigrid-compatible></smart-button><div>'}else if("subsection"==t.type&&"manufacturer"==t.data){if(t.data&&t.attributes&&void 0!==t.attributes.readonly)return'<div title="{{COL_FIELD}}"><smart-button flat="true" disable="grid.appScope.IsCellReadOnly(row.entity,\''+t.data+"',"+t.attributes.readonly+')" config=\'{"title":grid.appScope.setManufacturerDisplayName(row.entity)}\' callback-params="row.entity" callback="grid.appScope.showManufacturerPopupCallback"  uigrid-compatible></smart-button><div>'}else{if("splitType"==t.data)return t.data&&t.attributes&&void 0!==t.attributes.readonly?'<div title="{{COL_FIELD}}"><smart-button flat="true" disable="grid.appScope.IsCellReadOnly(row.entity,\''+t.data+"',"+t.attributes.readonly+')"  config=\'{"title":grid.appScope.splitType(row.entity.splitType)}\'  callback-params="row.entity"} callback="grid.appScope.showSplitsPopup"  uigrid-compatible></smart-button><div>':'<div title="{{COL_FIELD}}"><smart-button flat="true" config=\'{"title":grid.appScope.splitType(row.entity.splitType)}\'  callback-params="row.entity"} callback="grid.appScope.showSplitsPopup"  uigrid-compatible></smart-button><div>';if("splitValue"==t.data)return'<div title="{{COL_FIELD | minPrecisionHandler: '+t.attributes.minmaxprecisionfilter+'}}" class="ui-grid-cell-contents">{{grid.appScope.getSplitValue(row.entity) | minPrecisionHandler: '+t.attributes.minmaxprecisionfilter+"}}</div>";if("taxes"==t.data){if(t.data&&t.attributes&&void 0!==t.attributes.readonly)return'<div title="{{COL_FIELD}}"><smart-button flat="true" disable="grid.appScope.IsCellReadOnly(row.entity,\''+t.data+"',"+t.attributes.readonly+')" config=\'{"title":grid.appScope.showExempted(row.entity)}\' callback-params="row.entity"} callback="grid.appScope.openTaxPopup"  uigrid-compatible></smart-button></div>'}else if("total"==t.data)return'<div title="{{COL_FIELD | minPrecisionHandler:'+t.attributes.minmaxprecisionfilter+'}}" class="ui-grid-cell-contents">{{grid.appScope.getTotal(row.entity) | minPrecisionHandler:'+t.attributes.minmaxprecisionfilter+"}}</div>"}}var r={getCellTemplate:a};return r}]),angular.module("SMART2").directive("gridDateTemplateProvider",["$rootScope","$timeout","$filter",function($rootScope,$timeout,$filter){return{restrict:"A",link:function(scope,element,attrs){function getServerDateFormat(e){e||(e=0);var t=getServerDateInNumber(e);return t?"/Date("+t+")/":t}function getServerDateInNumber(value){var IS_UNEXPECTED_DATE_VALUE=!1;if(value){if("string"===(typeof value).toLowerCase())if(value.indexOf("Date")>-1){var a=(value+"").replace(new RegExp("/","ig"),"");a=a.split("+");var b=eval("new "+a[0]+(a.length>1?")":""))}else IS_UNEXPECTED_DATE_VALUE=!0;else IS_UNEXPECTED_DATE_VALUE=!0;if(IS_UNEXPECTED_DATE_VALUE){if(isNaN(new Date(value)))return new Date(0).getTime();var b=new Date(value)}return b.getTime()}return null}scope.onDateChange=function(e){""!=e&&(scope.row.entity[scope.col.colDef.field]=getServerDateFormat(e),$rootScope.$broadcast("closedPopup"))}},template:'<div style="width:100%;height:100%" ><smart-textfield focus="" set-from-grid=true on-date-change="onDateChange($date)" type="date" ng-model="row.entity[col.colDef.field]" format="{{col.colDef.attributes.format}}" uigrid-compatible></smart-textfield></div>'}}]),angular.module("SMART2").filter("smartDateFormat",["$filter","Common",function(e,t){return function(i,a){var r;try{if(i){var l=t.convertServerDateTimeToNormalDateTime(i);_.contains(a.split(" "),"hh:mm")||(l=new Date(l.getFullYear(),l.getMonth(),l.getDate())),r=e("date")(l,a)}else r=""}catch(n){r=i}return r}}]),angular.module("SMART2").directive("zeroCaseHandler",[function(){return{require:"ngModel",link:function(e,t,i,a){a.$parsers.push(function(e){return isNaN(e)?0:e})}}}])}(),function(){"use strict";angular.module("SMART2").service("Common",[function(){this.convertServerDateTimeToNormalDateTime=function(input){var IS_UNEXPECTED_DATE_INPUT=!1;if("string"===(typeof input).toLowerCase())if(input.indexOf("Date")>-1){var a=(input+"").replace(new RegExp("/","ig"),"");a=a.split("+");var b=eval("new "+a[0]+(a.length>1?")":""))}else IS_UNEXPECTED_DATE_INPUT=!0;else IS_UNEXPECTED_DATE_INPUT=!0;if(IS_UNEXPECTED_DATE_INPUT){if(isNaN(new Date(input)))return input;var b=new Date(input)}return b},this.uniqueIDGenerator=function(){var e=(new Date).getTime(),t="xxx2xxxpxxxoxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t}}]),angular.module("SMART2").filter("minPrecisionHandler",["$filter",function(e){var t=0;return function(i,a,r,l){if("undefined"==typeof RegionalSettingEnable||!RegionalSettingEnable){if(void 0!=i){if(0==i)return e("number")(0,a);if(0!=i){if(t=void 0!=(i+"").split(".")[1]?(i+"").split(".")[1].length:0,t>r){var n=Math.pow(10,r),o=Math.round(i*n)/n,s=void 0!=(o+"").split(".")[1]?(o+"").split(".")[1].length:0;return a>s?e("number")(o,a):e("addCommasToNumbers")(o)}if(t>a&&r>t)return e("addCommasToNumbers")(i);if(a>=t)return e("number")(i,a)}return l&&1==l&&0!=i?"":i}return l&&1==l?"":0}var u="";if(isNaN(i))return u+i;var c=i;try{var d,p,f,m=$("<input>"),g=void 0!=a?a:MinPrecessionValue?MinPrecessionValue:2,b=void 0!=r?r:MaxPrecessionValue?MaxPrecessionValue:4;if(g=parseInt(g),b=parseInt(b),g>b&&(b=g),f=Math.round(c*Math.pow(10,b))/Math.pow(10,b),Number.isInteger(f))p=g;else{if(Number.isNaN(f))throw"Value cannot change to number.";p=f.toString().split(".")[1].length}d=g>=p?g:p>=b?b:p,m.autoNumeric("init",{mDec:d,aPad:!0}),m.autoNumeric("set",f);var h=m.val();return u+h}catch(v){return console.log(v),console.log("error happend at numberformat filter. value : ("+c+") minPrecessionValue : "+g+" maxPrecessionValue : "+b),u+c}}}]),angular.module("SMART2").service("SmartToast",[function(){this.show=function(e){Materialize.toast(e.message,e.duration?e.duration:500)}}]),angular.module("SMART2").filter("addCommasToNumbers",["$filter",function(e){return function(t){var i=void 0!=(t+"").split(".")[1]?(t+"").split(".")[1]:0,a=void 0!=(t+"").split(".")[0]?(t+"").split(".")[0]:0;return a=e("number")(a),a+"."+i}}]),angular.module("SMART2").service("smartPaginate",[function(){var e,t=[],i=10,a=function(e){t=e},r=function(e,i){return t.slice(e,i)},l=function(t){e=t},n=function(){return e},o=function(){return t},s=function(){return t.length},u=function(){return Math.ceil(t.length/i)-1};return{externalPaginationThreshold:300,setLineItems:a,getLineItems:r,getAllLineItems:o,getLineItemsCount:s,getLineItemsPagesCount:u,setSmartTableInstance:l,getSmartTableInstance:n}}])}(),function(){"use strict";angular.module("SMART2").service("debouncer",["$timeout",function(e){var t;this.add=function(i,a){t&&e.cancel(t),t=e(function(){angular.isFunction(i)&&i()},a?a:1e3)},this.cancel=function(){e.cancel(t),t=null}}])}(),function(){"use strict";angular.module("SMART2").service("formWidgetUtils",[function(){var _this=this;this.getColspanClass=function(e){switch(e){case 1:return"col s12 m6 l4 xl3 xxl2";case 2:return"col s12 m12 l8 xl6 xxl4";case 3:return"col s12 m12 l12 xl9 xxl6";case 4:return"col s12 m12 l12 xl12 xxl8";case 5:return"col s12 m12 l12 xl12 xxl10";case 6:return"col s12 m12 l12 xl12 xxl12";default:return"col s12 m6 l4 xl3 xxl2"}},this.convertAndGetValue=function(val,scope,property){if(""==val||void 0==val||null==val)return!1;var dataType;try{dataType=typeof eval(val)}catch(e){}if(void 0==dataType){if(val.indexOf(")")==val.length-1)return eval(this.generateFunctionWithParams(val,"scope.$parent"));var result=eval("scope.$parent."+val);if(dataType=typeof result,"boolean"==dataType)return result;dataType="function"==dataType?"function":"string"}return"function"==dataType?eval(this.generateFunctionWithParams(val,"scope.$parent")):"string"==dataType?eval("scope.$parent."+val):eval(val)},this.mapEvents=function(e){if("object"==typeof e){for(var t="",i=e.length,a=0;i>a;a++){var r=e[a];r.listener&&(t=t+" "+r.type+'="'+r.listener+'"')}return t+" "}return""},this.getParamsFromEvents=function(event,scopeString){var params=event.split("(");if(params.length>1){params=params[1].trim().split(")"),params=params[0].split(",");for(var arrIndexesToBeDeleted=[],tLen=params.length,i=0;tLen>i;i++)if(params[i]=params[i].trim(),"$event"!=params[i])if(""==params[i])arrIndexesToBeDeleted.push(params[i]);else{var paramValue=void 0;try{paramValue=eval(params[i])}catch(e){}angular.isDefined(paramValue)?params[i]=params[i].trim():params[i]=(""==scopeString||void 0==scopeString||null==scopeString?"":scopeString+".")+params[i].trim()}for(var deleteLength=arrIndexesToBeDeleted.length,i=0;deleteLength>i;i++)params.splice(arrIndexesToBeDeleted[i],1)}else params=[];return params},this.generateFunctionWithParams=function(e,t,i){var a="";if(!e)return a;var r=this.getParamsFromEvents(e,t);return a=e.split("(")[0].trim(),r.length>0?(r.push(i?"section":"property"),a=t+"."+a+"("+r.join(",")+")"):a=t+"."+a+(i?"(section)":"(property)"),a},this.convertAndGetAttributeMapping=function(attributeType,key,attr,bindingType,scope,isSection){var str=attr+'="'+("@"==bindingType?"{{":"")+(isSection?"section.":"primary"==attributeType?"property.":"property.attributes.")+key+("@"==bindingType?"}}":"")+'"',dataType,objProperty;objProperty="primary"==attributeType&&isSection?scope.section:"primary"!=attributeType||isSection?scope.property.attributes:scope.property;try{dataType=typeof eval(objProperty[key])}catch(e){}return void 0==dataType&&(dataType=typeof eval("scope.parentScope."+objProperty[key]),str="function"==dataType?attr+'="'+("@"==bindingType?"{{":"")+this.generateFunctionWithParams(objProperty[key],"parentScope",isSection)+("@"==bindingType?"}}":"")+'"':attr+'="'+("@"==bindingType?"{{":"")+"parentScope."+objProperty[key]+("@"==bindingType?"}}":"")+'"')," "+str+" "},this.getAttributesMapping=function(attributeType,attrs,scope,isSection){var str="";if("primary"==attributeType)for(var key in attrs)switch(key){case"isMandatory":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-mandatory","@",scope,isSection);break;case"isVisible":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-visible","=",scope,isSection);break;case"isCollapsible":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-collapsible","@",scope,isSection);break;case"isDraggable":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-draggable","@",scope,isSection);break;case"isActive":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-active","=",scope,isSection);break;case"isHeader":str+=this.convertAndGetAttributeMapping(attributeType,key,"is-header","@",scope,isSection);break;case"headerTemplate":str+=' header-template="{{section.'+key+'}}" ';break;case"modelOptions":str+=this.convertAndGetAttributeMapping(attributeType,key,"model-options","=",scope,isSection);break;case"rules":str+=this.convertAndGetAttributeMapping(attributeType,key,"rules","@",scope,isSection);break;case"errorModel":str+=this.convertAndGetAttributeMapping(attributeType,key,"error-model","=",scope,isSection);break;case"clienterror":str+=this.convertAndGetAttributeMapping(attributeType,key,"clienterror","=",scope,isSection)}else for(var key in attrs)switch(key){case"type":if("textfield"==scope.property.type){var textfieldTypes=["text","number","date","time","dateTime","area","autocomplete"];if(-1==textfieldTypes.indexOf(scope.property.attributes.type)){var arrSplitFunction=scope.property.attributes.type.split("("),evalResult,property=scope.property;arrSplitFunction.length>1?evalResult=eval("scope."+this.generateFunctionWithParams(scope.property.attributes.type,"parentScope")):(evalResult=eval("scope.parentScope."+scope.property.attributes.type),"function"==typeof evalResult&&(evalResult=eval("scope."+this.generateFunctionWithParams(scope.property.attributes.type,"parentScope")))),str+=' type="'+evalResult+'"'}else str+=' type="{{property.attributes.type}}" '}break;case"options":str+="string"==typeof eval("scope.property.attributes.options")?' options="parentScope.'+scope.property.attributes.options+'" ':' options="property.attributes.options" ';break;case"readonly":case"disable":str+=this.convertAndGetAttributeMapping(attributeType,key,key,"@",scope,isSection);break;case"ngModelOptions":str+=' ng-model-options="property.attributes.ngModelOptions" ';break;case"validateOn":str+=' validate-on="{{property.attributes.validateOn}}" ';break;default:var attrList=[];"textfield"==scope.property.type?attrList=["validate","focus","parentelement","errormessage","setfromgrid","align","datanumeric","spinner","patternreg","step","format","timepicker","isvaluedateobj","prefixicon","suffixicon","maxlength","min","max","timepicker12hour","minuteincrement","charactercounter","decimalprecision","minmaxprecision","placeholder","autocomplete","removable","datakey","filterkeys","optionformat","displayformat","width","minchars","loading","count","nosuggestionnotice","shownosuggestion","ngmodel","smart-character-restrict","showinfo","showwarning","allowpaste"]:"select"==scope.property.type||"dropdown"==scope.property.type?attrList=["label","ngmodelcopy","validate","focus","parentelement","multiple","datakey","displaykey","removable","preview","customoption","ngmodel","config","show","stopprog","showinfo","showwarning"]:"radio"==scope.property.type?attrList=["label","ngmodelcopy","layout","validate","focus","parentelement","errormessage","datakey","optionid","removable","groupid","ngmodel"]:"checkbox"==scope.property.type?attrList=["label","minheight","fill","validate","focus","parentelement","errormessage","removable","ngmodel","showinfo"]:"switch"==scope.property.type&&(attrList=["label","rightlabel","leftlabel","validate","focus","parentelement","errormessage","removable","minheight","fill","ngmodel"]),attrList.indexOf(key.toLowerCase())>-1&&(str+=" "+key+'="{{property.attributes.'+key+'}}" ')}return str};var arrEvents=[],eventCounter=0;this.removeEventListener=function(e){for(var t=arrEvents.length,i=0;t>i;i++){var a=arrEvents[i];if(a.eventName==e.eventName&&a.eventId==e.eventId){a.callback=null,arrEvents.splice(i,1);break}}},this.on=function(e,t){eventCounter++,arrEvents.push({eventName:e,callback:t,eventId:"smart-broadcast-event-"+eventCounter});var i={eventName:e,eventId:"smart-broadcast-event-"+eventCounter};return function(){_this.removeEventListener(i)}},this.broadcast=function(e,t){for(var i=arrEvents.length,a=0;i>a;a++){var r=arrEvents[a];e==r.eventName&&angular.isFunction(r.callback)&&r.callback({},t)}},this.watch=function(e,t,i){Object.defineProperty(angular.isDefined(e)&&angular.isObject(e)?e:window,t,{get:function(){return this["custom_watcher_"+t]},set:function(e){if(!angular.equals(this["custom_watcher_"+t],e)){var a=this["custom_watcher_"+t];this["custom_watcher_"+t]=e,angular.isFunction(i)&&i(e,a)}},enumerable:!0,configurable:!0})},this.showPleaseWait=function(){angular.element("#divPleaseWait").css("display","table")},this.hidePleaseWait=function(){angular.element("#divPleaseWait").css("display","none")}}])}(),function(){"use strict";angular.module("SMART2").service("gridConfigProvider",["cellTemplateProvider","$filter","formWidgetUtils",function(cellTemplateProvider,$filter,formWidgetUtils){function getDefaultGridConfigObject(){return{field:"",displayName:"",groupingShowAggregationMenu:!1,enableHiding:!1,groupingShowGroupingMenu:!1,enablePinning:!1}}function getGridConfig(conf,scope,cellClassFunction,cellEditableConditionFunction){var finalObject=_.extend(new getDefaultGridConfigObject,conf);if(void 0!=finalObject.isVisible&&(finalObject.visible=formWidgetUtils.convertAndGetValue(finalObject.isVisible,scope,finalObject)),finalObject.enableCellEdit=!0,void 0!=finalObject.isReadOnly&&(finalObject.enableCellEdit=!formWidgetUtils.convertAndGetValue(finalObject.isReadOnly,scope,finalObject)),finalObject.isFixed&&("Left"==finalObject.isFixed&&(finalObject.pinnedLeft=!0),"Right"==finalObject.isFixed&&(finalObject.pinnedRight=!0),finalObject.maxWidth=260),finalObject.isGrouped&&(finalObject.grouping={groupPriority:0}),finalObject.aggregation&&(finalObject.treeAggregationType=2),finalObject.displayKey=finalObject.displayName,finalObject.isMandatory?finalObject.displayName=$filter("translate")(finalObject.displayName)+" *":finalObject.displayName=$filter("translate")(finalObject.displayName),finalObject.type)switch(finalObject.type){case"popup":finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate"),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate");break;case"editable":finalObject.attributes&&"date"==finalObject.attributes.type&&(finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate"),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate")),finalObject.attributes&&"autocomplete"==finalObject.attributes.type&&((void 0==finalObject.cellTemplate||null==finalObject.cellTemplate)&&(finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate")),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate")),finalObject.attributes&&"number"==finalObject.attributes.type&&(finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate"),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate")),!finalObject.attributes||"text"!=finalObject.attributes.type&&void 0!=finalObject.attributes.type||(finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate"),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate"));break;case"dropdown":finalObject.attributes.idKey||(finalObject.attributes.idKey="id"),finalObject.editableCellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"editableCellTemplate"),finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate");break;case"calculated":finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject),finalObject.enableCellEdit&&(finalObject.enableCellEdit=!1);break;case"checkbox":finalObject.cellTemplate=cellTemplateProvider.getCellTemplate(finalObject,"cellTemplate")}return finalObject.cellClass=cellClassFunction,finalObject.cellEditableCondition=cellEditableConditionFunction,finalObject.hasOwnProperty("filterObject")?(finalObject.enableFiltering=finalObject.filterObject.enableFiltering,finalObject.enableFiltering&&(finalObject.filter={placeholder:"Search"},finalObject.filterObject.hasOwnProperty("filterKeys")?finalObject.filter.condition=function(searchTerm,cellValue,row,col){var result=!1;("object"!=typeof finalObject.filterObject.filterKeys||"object"!=typeof cellValue||"object"==typeof finalObject.filterObject.filterKeys&&0==finalObject.filterObject.filterKeys.length)&&(result=!0);for(var key in cellValue)finalObject.filterObject.filterKeys.indexOf(key)>-1&&"string"==typeof cellValue[key]&&cellValue[key].toLowerCase().indexOf(searchTerm.toLowerCase())>-1&&(result=!0);var cellConditionResult=!0;if(angular.isDefined(finalObject.filterObject.cellCondition))try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult}:finalObject.filterObject.isDate?finalObject.filter.condition=function(searchTerm,cellValue,row,col){var result=!1;if((void 0==searchTerm||null==searchTerm||angular.isDefined(searchTerm)&&""==searchTerm.trim())&&(result=!0),!angular.isDefined(searchTerm)||void 0!=cellValue&&null!=cellValue||(result=!1),angular.isDefined(searchTerm)&&angular.isDefined(cellValue)){var formattedDate=cellValue.replace(new RegExp("/","ig"),"");formattedDate=formattedDate.split("+"),formattedDate=eval("new "+formattedDate[0]+(formattedDate.length>1?")":""));var month=formattedDate.getMonth()+1+"";1===month.length&&(month="0"+month),formattedDate=formattedDate.getDate()+"/"+month+"/"+formattedDate.getFullYear(),result=formattedDate.toLowerCase().trim().indexOf(escape(searchTerm).replace(/%5C/g,"").trim())>-1;var cellConditionResult=!0;try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult}}:finalObject.filterObject.hasOwnProperty("cellCondition")&&(finalObject.filter.condition=function(searchTerm,cellValue,row,col){var result=!1;result=cellValue&&cellValue.toLocaleLowerCase().indexOf(searchTerm)>-1?!0:!1;var cellConditionResult=!0;try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult}))):finalObject.enableFiltering=!1,finalObject.uiType=finalObject.type,delete finalObject.type,finalObject}function getSmartTableConfig(conf,scope,cellClassFunction,cellEditableConditionFunction){var finalObject=_.extend(new getDefaultGridConfigObject,conf);if(void 0!=finalObject.isVisible&&(finalObject.visible=formWidgetUtils.convertAndGetValue(finalObject.isVisible,scope,finalObject)),finalObject.enableCellEdit=!0,void 0!=finalObject.isReadOnly&&(finalObject.enableCellEdit=!formWidgetUtils.convertAndGetValue(finalObject.isReadOnly,scope,finalObject)),finalObject.isFixed&&("Left"==finalObject.isFixed&&(finalObject.pinnedLeft=!0),"Right"==finalObject.isFixed&&(finalObject.pinnedRight=!0),finalObject.maxWidth=260),finalObject.isGrouped&&(finalObject.grouping={groupPriority:0}),finalObject.aggregation&&(finalObject.treeAggregationType=2),finalObject.displayKey=finalObject.displayName,finalObject.isMandatory?finalObject.displayName=$filter("translate")(finalObject.displayName)+" *":finalObject.displayName=$filter("translate")(finalObject.displayName),finalObject.type)switch(finalObject.type){case"dropdown":finalObject.attributes.idKey||(finalObject.attributes.idKey="id");break;case"calculated":finalObject.cellTemplate=function(row,column){return column.colDef.field&&"IsCloseForReceiving"!=column.colDef.field&&"IsCloseForInvoicing"!=column.colDef.field?$filter("minPrecisionHandler")(eval(column.colDef.attributes.rule),column.colDef.attributes.minmaxprecisionfilter.split(":")[0],column.colDef.attributes.minmaxprecisionfilter.split(":")[1],!1):eval(column.colDef.attributes.rule)},finalObject.enableCellEdit=!1;break;case"popup":switch(finalObject.attributes.type){case"splitsPopup":finalObject.cellTemplate=function(e,t){return 0==e.entity.splitType?1==e.entity.type.id?$filter("translate")("P2P_Common_Quantity"):$filter("translate")("P2P_Common_Amount"):$filter("translate")("P2P_Common_Percentage")};break;case"commentsAndAttachmentsPopup":finalObject.cellTemplate=function(e,t){return e.entity.notes&&e.entity.notes.length>0?$filter("translate")("P2P_Common_View"):$filter("translate")("P2P_Common_Add")};break;case"customAttributesPopup":finalObject.placeHolder=$filter("translate")("P2P_Common_View");break;case"manufacturerPopup":finalObject.cellTemplate=function(e,t){return e.entity.manufacturerName?e.entity.manufacturerName:$filter("translate")("P2P_Common_Add")};break;case"categoryPopup":finalObject.debounce=250;break;case"taxesPopup":finalObject.cellTemplate=function(e,t){return e.entity.isTaxExempt?"Exempt":e.entity.taxes}}}switch(finalObject.cellClass=cellClassFunction,finalObject.cellEditableCondition=cellEditableConditionFunction,finalObject.hasOwnProperty("filterObject")?(finalObject.enableFiltering=finalObject.filterObject.enableFiltering,finalObject.enableFiltering&&(finalObject.filter={placeholder:"Search"},finalObject.filterObject.hasOwnProperty("filterKeys")?finalObject.filter.condition=function(searchTerm,cellValue,row,col){var result=!1;("object"!=typeof finalObject.filterObject.filterKeys||"object"!=typeof cellValue||"object"==typeof finalObject.filterObject.filterKeys&&0==finalObject.filterObject.filterKeys.length)&&(result=!0);for(var key in cellValue)finalObject.filterObject.filterKeys.indexOf(key)>-1&&"string"==typeof cellValue[key]&&cellValue[key].toLowerCase().indexOf(searchTerm.toLowerCase())>-1&&(result=!0);var cellConditionResult=!0;if(angular.isDefined(finalObject.filterObject.cellCondition))try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult}:finalObject.filterObject.isDate?finalObject.filter.condition=function(searchTerm,cellValue,row,col){
var result=!1;if((void 0==searchTerm||null==searchTerm||angular.isDefined(searchTerm)&&""==searchTerm.trim())&&(result=!0),!angular.isDefined(searchTerm)||void 0!=cellValue&&null!=cellValue||(result=!1),angular.isDefined(searchTerm)&&angular.isDefined(cellValue)){var formattedDate=cellValue.replace(new RegExp("/","ig"),"");formattedDate=formattedDate.split("+"),formattedDate=eval("new "+formattedDate[0]+(formattedDate.length>1?")":""));var month=formattedDate.getMonth()+1+"";1===month.length&&(month="0"+month),formattedDate=formattedDate.getDate()+"/"+month+"/"+formattedDate.getFullYear(),result=formattedDate.toLowerCase().trim().indexOf(escape(searchTerm).replace(/%5C/g,"").trim())>-1;var cellConditionResult=!0;try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult}}:finalObject.filterObject.hasOwnProperty("cellCondition")&&(finalObject.filter.condition=function(searchTerm,cellValue,row,col){var result=!1;result=cellValue&&cellValue.toLocaleLowerCase().indexOf(searchTerm)>-1?!0:!1;var cellConditionResult=!0;try{cellConditionResult=eval(finalObject.filterObject.cellCondition)}catch(e){}return result&&cellConditionResult})),"splitsPopup"==finalObject.attributes.type&&(finalObject.filter.condition=function(e,t,i){return(0==t.splitType?1==t.type.id?"Quantity":"Amount":"Percentage").toLowerCase().indexOf(e.toLowerCase())>-1})):finalObject.enableFiltering=!1,finalObject.field){case"total":finalObject.sortCondition=function(data,column,isAscending){return angular.isDefined(column.attributes.rule)?data.sort(function(a,b){return a=eval(column.attributes.rule.replace(/row.entity/g,"a")),b=eval(column.attributes.rule.replace(/row.entity/g,"b")),a>b?isAscending?-1:1:b>a?isAscending?1:-1:0}):data}}return finalObject.uiType=finalObject.type,delete finalObject.type,finalObject}this.getMassagedGirdConfig=function(e,t,i,a){var r=[];return _.each(e,function(e){r.push(getGridConfig(e,t,i,a))}),r},this.getMassagedSmartTableConfig=function(e,t,i,a){var r=[];return _.each(e,function(e){r.push(getSmartTableConfig(e,t,i,a))}),r},this.eavluateScopeBindedExpressions=function(e,t,i){return formWidgetUtils.convertAndGetValue(e,t,i)}}])}(),function(){"use strict";angular.module("SMART2").service("httpService",["$http","$q","APPCONSTANTS",function(e,t,i){delete e.defaults.headers.common["X-Requested-With"];var a=this,r=[];a.isNetworkOnline=!0,a.massageResultData=function(e){return e.success=!0,e.config.timeout&&angular.isDefined(e.config.timeout.status)?(e.status=e.config.timeout.status,e.statusText=e.config.timeout.statusText,e.success=!1):-1==[200,201,202,203].indexOf(e.status)&&(e.statusText="An error occured while fetching data.",e.success=!1),e},a.abortAll=function(e){angular.forEach(r,function(t){t.canceller.promise.status=e?0:499,t.canceller.promise.statusText=e?"The Internet connection appears to be offline.":"Request cancelled.",t.canceller.resolve()}),r=[]},a.abort=function(e){if(e){var t=void 0;t=_.find(r,function(t){return t.url==e.url&&angular.equals(t.requestArgs,e.params?e.params:e.data?e.data:{})}),t.canceller.promise.status=499,t.canceller.promise.statusText="Request cancelled.",t.canceller.resolve(),r=_.filter(r,function(t){return t.url!=e.url&&!angular.equals(t.requestArgs,e.params?e.params:e.data?e.data:{})})}},a.directhttp=function(l){var n,o=t.defer(),s=t.defer(),u=angular.isDefined(l.abortable)&&0==l.abortable?!1:!0,c=setTimeout(function(){s.promise.status=408,s.promise.statusText="Request timed out.",s.resolve()},angular.isDefined(l.timeout)?l.timeout:12e4);u&&r.push({url:l.url,requestArgs:l.params||l.data,canceller:s});var d={url:l.url,method:l.method?l.method.toUpperCase():"POST",cache:!1,timeout:s.promise,headers:{"Content-Type":"application/json",UserExecutionContext:JSON.stringify(i.userPreferences.UserBasicDetails)}};return angular.merge(d,l),n=e(d).then(function(e){e=a.massageResultData(e),e.success?o.resolve(e.data):o.reject(e)},function(e){e=a.massageResultData(e),o.reject(e)}),n["finally"](function(){clearTimeout(c),u&&(r=_.filter(r,function(e){return e.url!=l.url&&!angular.equals(e.requestArgs,l.params?l.params:l.data?l.data:{})}))}),o.promise}}])}(),function(){"use strict";angular.module("SMART2").service("menuListItemServ",[function(){return function(e){var t=e;null==t.parent().attr("role")&&t.parent().attr("role","listbox"),null==t.attr("isItemList")&&0!=t.length&&t.on("keydown",function(e){40==e.keyCode?$(this).next().focus():38==e.keyCode?$(this).prev().focus():13==e.keyCode&&(void 0!=t.find("[ng-click]")?t.find("[ng-click]").trigger("click"):void 0!=t.attr("ng-click")&&t.trigger("click")),e.preventDefault()}),t.attr("role","option").attr("isItemList","").attr("tabindex","0").children().attr("tabindex","-1")}}])}(),function(){"use strict";angular.module("SMART2").service("NoolsEngine",[function(){this.execute=function(e){var t=[],i=[],a=e.uiConfig,r=e.dataModel,l=e.type,n=e.rules,o=e.scope;"grid"==l?_.each(a[0].cloumnDefs,function(e){t.push({field:e.field,type:e.type})}):"header"==l&&_.each(a.sections,function(e){_.each(e.rows[0].properties,function(e){t.push({field:e.data,type:e.type,attributes:e.attributes})})});var s=nools.compile(n,{name:"totalErrors"}),u=s.getDefined("message");return r="grid"==l?r.orderData.items[0]:r,_.each(t,function(e){var t=[new u({ui:e,dataModel:r,scope:o})],a=s.getSession.apply(s,t).focus("empty");a.on("error",function(e){i.push(e.errors[0])}).on("fire",function(e){}),a.match(function(e){a.dispose(),nools.deleteFlow("totalErrors")})}),0==i.length?angular.isFunction(e.success)&&e.success():angular.isFunction(e.error)&&e.error({data:i}),r}}])}(),function(){"use strict";function e(){var e=!1;return{getProperty:function(){return e},setProperty:function(t){e=t}}}angular.module("SMART2").service("requestClicked",e)}(),function(){"use strict";window.isObject=function(e){return angular.isObject(e)},window.isDate=function(e){return angular.isDate(e)},window.isNumber=function(e){return angular.isNumber(e)},window.isDefined=function(e){return angular.isDefined(e)},window.isUndefined=function(e){return angular.isUndefined(e)},window.isString=function(e){return angular.isString(e)},window.isUndefinedOrEmptyOrNull=function(m){if(isObject(m)&&m.hasOwnProperty("ui")){var result;try{result=eval("m.dataModel."+m.ui.field)}catch(e){}return""===result||void 0===result||null===result}return""===m||void 0===m||null===m},window.isEmptyOrNull=function(m){if(isObject(m)&&m.hasOwnProperty("ui")){var result;try{result=eval("m.dataModel."+m.ui.field)}catch(e){}return""===result||null===result}return""===m||null===m},window.isUndefinedOrNull=function(m){if(isObject(m)&&m.hasOwnProperty("ui")){var result;try{result=eval("m.dataModel."+m.ui.field)}catch(e){}return void 0===result||null===result}return void 0===m||null===m},angular.module("SMART2").service("RuleEngine",["$translate",function($translate){function changeDateFormatForNools(colDefs,virtualDatamodel,type){if(""!=colDefs&&"cell"==type)_.each(colDefs.cloumnDefs,function(colDef){if("date"==colDef.attributes.type){var field=colDef.field,fieldVal=field.split(".");if(fieldVal.length>1){var fieldzeroval=eval("virtualDatamodel."+fieldVal[0]);if(void 0!==fieldzeroval&&null!==fieldzeroval){var dateVar=eval("virtualDatamodel."+fieldVal[1]);void 0!=dateVar&""!=dateVar?virtualDatamodel[field]=convertDate(dateVar):virtualDatamodel[field]=""}}else{var dateVar=eval("virtualDatamodel."+fieldVal[0]);void 0!=dateVar&""!=dateVar?virtualDatamodel[field]=convertDate(dateVar):virtualDatamodel[field]=""}}});else if(""!=colDefs&&"grid"==type){var field=colDefs.field,fieldVal=field.split(".");if(fieldVal.length>1){var fieldzeroval=eval("virtualDatamodel."+fieldVal[0]);if(void 0!==fieldzeroval&&null!==fieldzeroval){var dateVar=eval("virtualDatamodel."+fieldVal[1]);void 0!=dateVar&""!=dateVar?virtualDatamodel[field]=convertDate(dateVar):virtualDatamodel[field]=""}}else{var dateVar=eval("virtualDatamodel."+fieldVal[0]);void 0!=dateVar&""!=dateVar?virtualDatamodel[field]=convertDate(dateVar):virtualDatamodel[field]=""}}}function convertDate(e){if("undefined"!=typeof e&&null!=e&&isNaN(e)&&e.indexOf("/Date(")>-1){var t=e.replace("/Date(",""),i=t.replace(")/",""),a=new Date(parseInt(i));return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}if("undefined"!=typeof e&&null!=e&&!isNaN(e)&&angular.isFunction(e.getFullYear)){var a=new Date(e);return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}if("undefined"!=typeof e&&null!=e&&!isNaN(e)){var a=new Date(parseInt(e));return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}}var service=this;this.utils={},this.setRules=function(e,t,i,a,r){this.dataConfig=e,this.dataModel=t,this.cumulativeRules=i,this.rules=a,this.type=angular.isDefined(r)?r:"header",this.isNoolsEnabled=!angular.isObject(a)},this.setDocumentRules=function(e){this.documentRules=e},this.setUtils=function(e){this.utils=e},this.executeNools=function(e,t){var i,a,r,l=[],n=this.dataConfig,o=this.dataModel,s=this.type,u=this.rules,c=this.isNoolsEnabled,d=[],p=[],f=[];if("grid"==s)_.each(o,function(e,t){var o=angular.copy(e);_.each(angular.isArray(n)?n[0].cloumnDefs:n.cloumnDefs,function(e,n){if(e.hasOwnProperty("rules")&&e.rules.length>0)if(angular.extend(e,{fieldName:e.field,errorFieldDisplayName:$translate.instant(e.displayName)}),"date"==e.attributes.type&&changeDateFormatForNools(e,o,"grid"),c){for(var s=[new Message({ui:angular.extend(e,{data:e.field}),dataModel:o,scope:""})],m=s[0].ui.rules,g=flow.getSession.apply(flow,s),b=0;b<m.length;b++)g.focus(""+m[b]);g.on("error",function(e){void 0!==e.errors[0].rowColIndex?"invalid"==e.errors[0].state?(d.push(e.errors[0].rowColIndex),f.push(e.errors[0]),g.dispose()):"disable"==e.errors[0].state&&p.push(e.errors[0].rowColIndex):"invalid"==e.errors[0].state&&(l.push(e.errors[0]),g.dispose())}),g.match()}else{var s={ui:angular.extend(e,{data:e.field,errorFieldDisplayName:$translate.instant(e.displayName)}),dataModel:o,index:{row:t,column:n},scope:""};i=u.get(s);for(var b=0;b<e.rules.length;b++)if(a=i[e.rules[b]],angular.isDefined(a)&&angular.isFunction(a.condition)&&a.condition()){r=a.result(),angular.isDefined(r.rowColIndex)?"invalid"==r.state?(d.push(r.rowColIndex),f.push(r)):"disable"==r.state&&p.push(r.rowColIndex):"invalid"==r.state&&l.push(r);break}}})}),(d.length>0||p.length>0||f.length>0)&&(l.push(d),l.push(p),l.push(f));else if("cell"==s&&n.colDef.hasOwnProperty("rules")&&n.colDef.rules.length>0){n.colDef.fieldName=n.colDef.field;var m=angular.copy(o.entity);if("date"==n.colDef.attributes.type&&changeDateFormatForNools(t,m,"cell"),c){for(var g=[new Message({ui:n.colDef,dataModel:m,scope:""})],b=flow.getSession.apply(flow,g),h=n.colDef.rules,v=0;v<h.length;v++)b.focus(""+h[v]);b.on("error",function(e){l.push(e.errors[0]),b.dispose()}),b.match()}else{var g={ui:angular.extend(n.colDef,{errorFieldDisplayName:$translate.instant(n.colDef.displayKey)}),dataModel:m,scope:""};i=u.get(g);for(var v=0;v<n.colDef.rules.length;v++)if(a=i[n.colDef.rules[v]],angular.isDefined(a)&&angular.isFunction(a.condition)&&a.condition()){l.push(a.result());break}}}else"chargeGrid"==s&&(o=o.orderData.ItemChargesForHeader,_.each(o,function(e){var t=angular.copy(e),i=[];_.each(n[0].cloumnDefs,function(e){if(angular.extend(e,{fieldName:e.field}),e.hasOwnProperty("rules")){"date"==e.attributes.type&&changeDateFormatForNools(e,t);var a=[new Message({ui:angular.extend(e,{data:e.field}),dataModel:t,scope:""})];i.push(a)}}),_.each(i,function(e){for(var t=e[0].ui.rules,i=flow.getSession.apply(flow,e),a=0;a<t.length;a++)i.focus(""+t[a]);i.on("error",function(e){"invalid"==e.errors[0].state&&(l.push(e.errors[0]),i.dispose())}),i.match()})}));return angular.isFunction(e)?void e({success:0==l.length,failedRules:l}):{success:0==l.length,failedRules:l}},this.isValid=function(e,t){if("undefined"==typeof Header){var i=this.documentRules.get({ui:"",dataModel:this.dataModel,scope:"",utils:this.utils}),a=i[e];angular.isDefined(a)&&angular.isFunction(a.condition)&&a.condition()&&angular.isFunction(t)&&t({success:!1,errorData:a.result()})}else{var r=[new Header({ui:"",dataModel:this.dataModel,scope:"",utils:this.utils})],l=headerFlow.getSession.apply(headerFlow,r).focus(e);l.on("error",function(e){angular.isFunction(t)&&t({success:!1,errorData:e.errors[0]}),l.dispose()}),l.match()}},this.execute=function(callback,currentScope){if(angular.isDefined(this.type)&&"header"!=this.type)return void this.executeNools(callback,currentScope);for(var isValid=!0,tmpPropertyValue,failedRules=[],rulesObj=this.rules,isNoolsEnabled=this.isNoolsEnabled,tmpRules,tmpRule,tmpRuleResult,i=0;i<this.dataConfig.length;i++)if(!this.dataConfig[i].isHidden)for(var j=0;j<this.dataConfig[i].rows.length;j++)for(var k=0;k<this.dataConfig[i].rows[j].properties.length;k++)if(!(this.dataConfig[i].rows[j].properties[k].isHidden||Object(this.dataConfig[i].rows[j].properties[k]).hasOwnProperty("attributes")&&this.dataConfig[i].rows[j].properties[k].attributes.readonly)){if(tmpPropertyValue=void 0,this.dataConfig[i].rows[j].properties[k].attributes&&this.dataConfig[i].rows[j].properties[k].attributes.hasOwnProperty("ngModelOptions")&&this.dataConfig[i].rows[j].properties[k].attributes.ngModelOptions.getterSetter)tmpPropertyValue=eval("currentScope."+this.dataConfig[i].rows[j].properties[k].data+"()");else try{if("object"==typeof eval("this.dataModel."+this.dataConfig[i].rows[j].properties[k].data)&&"subsection"!=this.dataConfig[i].rows[j].properties[k].type){if(void 0!=this.dataConfig[i].rows[j].properties[k].attributes)var datakey=void 0!=this.dataConfig[i].rows[j].properties[k].attributes.displayformat?this.dataConfig[i].rows[j].properties[k].attributes.displayformat:this.dataConfig[i].rows[j].properties[k].attributes.datakey;else if(void 0!=this.dataConfig[i].rows[j].properties[k].ui)var datakey=this.dataConfig[i].rows[j].properties[k].ui.displayformat?this.dataConfig[i].rows[j].properties[k].ui.displayformat:this.dataConfig[i].rows[j].properties[k].ui.datakey;datakey=datakey.split("-"),tmpPropertyValue="";for(var m=0;m<datakey.length;m++)datakey[m].indexOf("{")>-1&&(datakey[m]=datakey[m].replace("{","").replace("}","")),tmpPropertyValue+=eval("this.dataModel."+this.dataConfig[i].rows[j].properties[k].data+"."+datakey[m]).trim()}else tmpPropertyValue=eval("this.dataModel."+this.dataConfig[i].rows[j].properties[k].data)}catch(e){}var isValidated=!1;if(Object(this.dataConfig[i].rows[j].properties[k]).hasOwnProperty("attributes")&&(Object(this.dataConfig[i].rows[j].properties[k].attributes).hasOwnProperty("type")&&"number"==this.dataConfig[i].rows[j].properties[k].attributes.type?(isValidated=!0,(this.dataConfig[i].rows[j].properties[k].isMandatory&&(void 0==tmpPropertyValue||""===tmpPropertyValue||null==tmpPropertyValue||isNaN(tmpPropertyValue))||!this.dataConfig[i].rows[j].properties[k].isMandatory&&isNaN(tmpPropertyValue)&&void 0!=tmpPropertyValue)&&failedRules.push({type:"required",section:this.dataConfig[i],uiConfig:this.dataConfig[i].rows[j].properties[k],rule:"isNaN(this)",error:$translate.instant("PLATFORM_ThisFieldShouldBeNumber")})):Object(this.dataConfig[i].rows[j].properties[k].attributes).hasOwnProperty("type")&&"autocomplete"==this.dataConfig[i].rows[j].properties[k].attributes.type&&(isValidated=!0,!this.dataConfig[i].rows[j].properties[k].isMandatory||tmpPropertyValue+""!=""&&null!=tmpPropertyValue&&void 0!=tmpPropertyValue||failedRules.push({type:"required",section:this.dataConfig[i],uiConfig:this.dataConfig[i].rows[j].properties[k],rule:"this == ''",error:$translate.instant("PLATFORM_ThisFieldShouldNotBeBlank")}))),isValidated||"subsection"==this.dataConfig[i].rows[j].properties[k].type||"checkbox"==this.dataConfig[i].rows[j].properties[k].type||"switch"==this.dataConfig[i].rows[j].properties[k].type||!this.dataConfig[i].rows[j].properties[k].isMandatory||""!=tmpPropertyValue&&void 0!=tmpPropertyValue&&null!=tmpPropertyValue||failedRules.push({type:"required",section:this.dataConfig[i],uiConfig:this.dataConfig[i].rows[j].properties[k],rule:"this == ''",error:$translate.instant("PLATFORM_ThisFieldShouldNotBeBlank")}),Object(this.dataConfig[i].rows[j].properties[k]).hasOwnProperty("rules")&&this.dataConfig[i].rows[j].properties[k].rules)for(var l=0;l<this.dataConfig[i].rows[j].properties[k].rules.length;l++)if("string"!=typeof this.dataConfig[i].rows[j].properties[k].rules[l])eval(this.dataConfig[i].rows[j].properties[k].rules[l].rule.replace(/this/g,"tmpPropertyValue"))&&failedRules.push({type:"inline",section:this.dataConfig[i],uiConfig:this.dataConfig[i].rows[j].properties[k],rule:this.dataConfig[i].rows[j].properties[k].rules[l].rule,error:this.dataConfig[i].rows[j].properties[k].rules[l].error});else if(isNoolsEnabled){var messageModel=[new Header({ui:this.dataConfig[i].rows[j].properties[k],dataModel:this.dataModel,scope:currentScope,utils:this.utils})],session=headerFlow.getSession.apply(headerFlow,messageModel).focus(this.dataConfig[i].rows[j].properties[k].rules[l]),_section=this.dataConfig[i],_uiElement=_section.rows[j].properties[k];session.on("error",function(e){e.errors[0].uiConfig=_uiElement,e.errors[0].section=_section,failedRules.push(e.errors[0]),session.dispose()}),session.match()}else{var messageModel={ui:{section:this.dataConfig[i],property:this.dataConfig[i].rows[j].properties[k]},dataModel:this.dataModel,scope:currentScope,utils:this.utils};if(tmpRules=rulesObj.get(messageModel),tmpRule=tmpRules[this.dataConfig[i].rows[j].properties[k].rules[l]],angular.isDefined(tmpRule)&&angular.isFunction(tmpRule.condition)&&tmpRule.condition()){this.dataConfig[i].rows[j].properties[k].validate=!0,failedRules.push(tmpRule.result());break}}}if(angular.isDefined(this.cumulativeRules)&&angular.isArray(this.cumulativeRules)&&this.cumulativeRules.length>0){tmpRules=angular.isDefined(this.rules)&&angular.isFunction(this.rules.get)&&this.rules.get({ui:{},dataModel:this.dataModel,scope:currentScope,utils:this.utils});for(var i=0;i<this.cumulativeRules.length;i++)if("string"!=typeof this.cumulativeRules[i]&&eval(this.cumulativeRules[i].rule.replace(/this/g,"this.dataModel")))failedRules.push({type:"cumulative",rule:this.cumulativeRules[i].rule,error:this.cumulativeRules[i].error});else if(isNoolsEnabled){var messageModel=[new Header({ui:{},dataModel:this.dataModel,scope:currentScope,utils:this.utils})],session=headerFlow.getSession.apply(headerFlow,messageModel).focus(this.cumulativeRules[i]);session.on("error",function(e){failedRules.push(e.errors[0]),session.dispose()}),session.match()}else if(tmpRule=tmpRules[this.cumulativeRules[i]],angular.isDefined(tmpRule)&&angular.isFunction(tmpRule.condition)&&tmpRule.condition()){failedRules.push(tmpRule.result());break}}failedRules.length>0&&failedRules[0].section&&(failedRules[0].section.isContentLoaded=!0,failedRules[0].section.isActive=!0),angular.forEach(failedRules,function(e,t){e.uiConfig&&(e.uiConfig.validate=!0)}),failedRules.length>0&&(failedRules[0].hasOwnProperty("uiConfig")&&void 0!=failedRules[0].uiConfig||failedRules[0].hasOwnProperty("property")&&""!=failedRules[0].property&&void 0!=failedRules[0].property)&&("undefined"!=typeof failedRules[0].uiConfig?failedRules[0].uiConfig.focus=!0:failedRules[0].property.focus=!0),tmpRules=null,tmpRule=null,tmpRuleResult=null,angular.isFunction(callback)&&callback({success:0==failedRules.length,failedRules:failedRules})},this.executeOnStaticForm=function(callback){var isValid=!0,failedRules=[];for(var key in this.dataConfig)for(var i=0;i<this.dataConfig[key].rules.length;i++)eval(this.dataConfig[key].rules[i].rule.replace(/this/g,"this.dataModel."+key))&&(failedRules.push({type:"inline",rule:this.dataConfig[key].rules[i].rule,error:this.dataConfig[key].rules[i].error}),this.dataConfig[key].validate=!0,1==failedRules.length&&(this.dataConfig[key].focus=!0),isValid=!1);if(this.cumulativeRules)for(var i=0;i<this.cumulativeRules.length;i++)eval(this.cumulativeRules[i].rule.replace(/this/g,"this.dataModel"))&&(failedRules.push({type:"cumulative",rule:this.cumulativeRules[i].rule,error:this.cumulativeRules[i].error}),isValid=!1);angular.isFunction(callback)&&callback({success:isValid,data:failedRules})}}])}(),function(){"use strict";angular.module("SMART2").service("scrollPosition",["$filter",function(e){var t,i=[];this.setEnableScroll=function(e){t=e},this.getEnableScroll=function(){return t},this.set=function(t,a){if(0===i.length)i.push({scroll:t,currentUrl:a});else{var r=e("filter")(i,{currentUrl:a},!0)[0],l=i.indexOf(r);r?(i.splice(l,1),i.push({scroll:t,currentUrl:a})):i.push({scroll:t,currentUrl:a})}},this.get=function(){return i},this.performScroll=function(e,t,i){angular.element("body,html").animate({scrollTop:e},3500,"linear")}}])}(),function(){"use strict";angular.module("SMART2").service("ScrollTo",[function(){var e=0;this.setScrollingTopMargin=function(t){e=t},this.perform=function(t,i,a){try{angular.element(t.closest(".modal").length>0?t.closest(".modal"):"body,html").animate({scrollTop:t.offset().top-i.offset().top+e},400,function(){"undefined"!=typeof a&&a()})}catch(r){}}}])}();
//# sourceMappingURL=services.min.js.map
