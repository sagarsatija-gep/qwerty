if("undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function i(e,t){return U(new(U(function(){},{prototype:e})),t)}function r(e){return B(arguments,function(t){t!==e&&B(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var i in e.path){if(e.path[i]!==t.path[i])break;n.push(e.path[i])}return n}function s(e){if(Object.keys)return Object.keys(e);var t=[];return B(e,function(e,n){t.push(n)}),t}function a(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,i=Number(arguments[2])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in e&&e[i]===t)return i;return-1}function l(e,t,n,i){var r,l=o(n,i),c={},u=[];for(var h in l)if(l[h]&&l[h].params&&(r=s(l[h].params),r.length))for(var p in r)a(u,r[p])>=0||(u.push(r[p]),c[r[p]]=e[r[p]]);return U({},c,t)}function c(e,t,n){if(!n){n=[];for(var i in e)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(e[o]!=t[o])return!1}return!0}function u(e,t){var n={};return B(e,function(e){n[e]=t[e]}),n}function h(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return B(n,function(n){n in e&&(t[n]=e[n])}),t}function p(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in e)-1==a(n,i)&&(t[i]=e[i]);return t}function d(e,t){var n=V(e),i=n?[]:{};return B(e,function(e,r){t(e,r)&&(i[n?i.length:r]=e)}),i}function f(e,t){var n=V(e)?[]:{};return B(e,function(e,i){n[i]=t(e,i)}),n}function g(e,t){var i=1,o=2,l={},c=[],u=l,h=U(e.when(l),{$$promises:l,$$values:l});this.study=function(l){function d(e,n){if(y[n]!==o){if(v.push(n),y[n]===i)throw v.splice(0,a(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(y[n]=i,L(e))m.push(n,[function(){return t.get(e)}],c);else{var r=t.annotate(e);B(r,function(e){e!==n&&l.hasOwnProperty(e)&&d(l[e],e)}),m.push(n,e,r)}v.pop(),y[n]=o}}function f(e){return H(e)&&e.then&&e.$$promises}if(!H(l))throw new Error("'invocables' must be an object");var g=s(l||{}),m=[],v=[],y={};return B(l,d),l=v=y=null,function(i,o,s){function a(){--w||(b||r(_,o.$$values),v.$$values=_,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,d.resolve(_))}function l(e){v.$$failure=e,d.reject(e)}function c(n,r,o){function c(e){h.reject(e),l(e)}function u(){if(!F(v.$$failure))try{h.resolve(t.invoke(r,s,_)),h.promise.then(function(e){_[n]=e,a()},c)}catch(e){c(e)}}var h=e.defer(),p=0;B(o,function(e){y.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(p++,y[e].then(function(t){_[e]=t,--p||u()},c))}),p||u(),y[n]=h.promise}if(f(i)&&s===n&&(s=o,o=i,i=null),i){if(!H(i))throw new Error("'locals' must be an object")}else i=u;if(o){if(!f(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=h;var d=e.defer(),v=d.promise,y=v.$$promises={},_=U({},i),w=1+m.length/3,b=!1;if(F(o.$$failure))return l(o.$$failure),v;o.$$inheritedValues&&r(_,p(o.$$inheritedValues,g)),U(y,o.$$promises),o.$$values?(b=r(_,p(o.$$values,g)),v.$$inheritedValues=p(o.$$values,g),a()):(o.$$inheritedValues&&(v.$$inheritedValues=p(o.$$inheritedValues,g)),o.then(a,l));for(var C=0,x=m.length;x>C;C+=3)i.hasOwnProperty(m[C])?a():c(m[C],m[C+1],m[C+2]);return v}},this.resolve=function(e,t,n,i){return this.study(e)(t,n,i)}}function m(e,t,n){this.fromConfig=function(e,t,n){return F(e.template)?this.fromString(e.template,t):F(e.templateUrl)?this.fromUrl(e.templateUrl,t):F(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return N(e)?e(t):e},this.fromUrl=function(n,i){return N(n)&&(n=n(i)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,i){return n.invoke(e,null,i||{params:t})}}function v(e,t,r){function o(t,n,i,r){if(m.push(t),f[t])return f[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(g[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return g[t]=new q.Param(t,n,i,r),g[t]}function s(e,t,n,i){var r=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:o=o.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+n+"|",")?"]}return o+r[0]+t+r[1]}function a(r,o){var s,a,l,c,u;return s=r[2]||r[3],u=t.params[s],l=e.substring(p,r.index),a=o?r[4]:r[4]||("*"==r[1]?".*":null),a&&(c=q.type(a)||i(q.type("string"),{pattern:new RegExp(a,t.caseInsensitive?"i":n)})),{id:s,regexp:a,segment:l,type:c,cfg:u}}t=U({params:{}},H(t)?t:{});var l,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h="^",p=0,d=this.segments=[],f=r?r.params:{},g=this.params=r?r.params.$$new():new q.ParamSet,m=[];this.source=e;for(var v,y,_;(l=c.exec(e))&&(v=a(l,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),h+=s(v.segment,y.type.pattern.source,y.squash,y.isOptional),d.push(v.segment),p=c.lastIndex;_=e.substring(p);var w=_.indexOf("?");if(w>=0){var b=this.sourceSearch=_.substring(w);if(_=_.substring(0,w),this.sourcePath=e.substring(0,p+w),b.length>0)for(p=0;l=u.exec(b);)v=a(l,!0),y=o(v.id,v.type,v.cfg,"search"),p=c.lastIndex}else this.sourcePath=e,this.sourceSearch="";h+=s(_)+(t.strict===!1?"/?":"")+"$",d.push(_),this.regexp=new RegExp(h,t.caseInsensitive?"i":n),this.prefix=d[0],this.$$paramNames=m}function y(e){U(this,e)}function _(){function e(e){return null!=e?e.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):e}function r(e){return null!=e?e.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):e}function o(){return{strict:g,caseInsensitive:p}}function l(e){return N(e)||V(e)&&N(e[e.length-1])}function c(){for(;C.length;){var e=C.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(w[e.name],h.invoke(e.def))}}function u(e){U(this,e||{})}q=this;var h,p=!1,g=!0,m=!1,w={},b=!0,C=[],x={string:{encode:e,decode:r,is:function(e){return null==e||!F(e)||"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return F(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};_.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!h)throw new Error("Injectable functions cannot be called at configuration time");return h.invoke(e.value)},this.caseInsensitive=function(e){return F(e)&&(p=e),p},this.strictMode=function(e){return F(e)&&(g=e),g},this.defaultSquashPolicy=function(e){if(!F(e))return m;if(e!==!0&&e!==!1&&!L(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return m=e,e},this.compile=function(e,t){return new v(e,U(o(),t))},this.isMatcher=function(e){if(!H(e))return!1;var t=!0;return B(v.prototype,function(n,i){N(n)&&(t=t&&F(e[i])&&N(e[i]))}),t},this.type=function(e,t,n){if(!F(t))return w[e];if(w.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return w[e]=new y(U({name:e},t)),n&&(C.push({name:e,def:n}),b||c()),this},B(x,function(e,t){w[t]=new y(U({name:t},e))}),w=i(w,{}),this.$get=["$injector",function(e){return h=e,b=!1,c(),B(x,function(e,t){w[t]||(w[t]=new y(e))}),this}],this.Param=function(e,i,r,o){function c(e){var t=H(e)?s(e):[],n=-1===a(t,"value")&&-1===a(t,"type")&&-1===a(t,"squash")&&-1===a(t,"array");return n&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function u(n,i,r){if(n.type&&i)throw new Error("Param '"+e+"' has two type configurations.");return i?i:n.type?t.isString(n.type)?w[n.type]:n.type instanceof y?n.type:new y(n.type):"config"===r?w.any:w.string}function p(){var t={array:"search"===o?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return U(t,n,r).array}function g(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!F(n)||null==n)return m;if(n===!0||L(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function v(e,t,i,r){var o,s,l=[{from:"",to:i||t?n:""},{from:null,to:i||t?n:""}];return o=V(e.replace)?e.replace:[],L(r)&&o.push({from:r,to:n}),s=f(o,function(e){return e.from}),d(l,function(e){return-1===a(s,e.from)}).concat(o)}function _(){if(!h)throw new Error("Injectable functions cannot be called at configuration time");var e=h.invoke(r.$$fn);if(null!==e&&e!==n&&!x.type.is(e))throw new Error("Default value ("+e+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function n(e){var n=f(d(x.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),F(e)?x.type.$normalize(e):_()}function C(){return"{Param:"+e+" "+i+" squash: '"+P+"' optional: "+E+"}"}var x=this;r=c(r),i=u(r,i,o);var S=p();i=S?i.$asArray(S,"search"===o):i,"string"!==i.name||S||"path"!==o||r.value!==n||(r.value="");var E=r.value!==n,P=g(r,E),k=v(r,S,E,P);U(this,{id:e,type:i,location:o,array:S,squash:P,replace:k,isOptional:E,value:b,dynamic:n,config:r,toString:C})},u.prototype={$$new:function(){return i(this,U(new u,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,i=s(u.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),B(t,function(t){B(s(t),function(t){-1===a(e,t)&&-1===a(i,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return B(n.$$keys(),function(i){t[i]=n[i].value(e&&e[i])}),t},$$equals:function(e,t){var n=!0,i=this;return B(i.$$keys(),function(r){var o=e&&e[r],s=t&&t[r];i[r].type.equals(o,s)||(n=!1)}),n},$$validates:function(e){var i,r,o,s,a,l=this.$$keys();for(i=0;i<l.length&&(r=this[l[i]],o=e[l[i]],o!==n&&null!==o||!r.isOptional);i++){if(s=r.type.$normalize(o),!r.type.is(s))return!1;if(a=r.type.encode(s),t.isString(a)&&!r.type.pattern.exec(a))return!1}return!0},$$parent:n},this.ParamSet=u}function w(e,i){function r(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function s(e,t,n){if(!n)return!1;var i=e.invoke(t,t,{$match:n});return F(i)?i:!0}function a(i,r,o,s,a){function p(e,t,n){return"/"===m?e:t?m.slice(0,-1)+e:n?m.slice(1)+e:e}function d(e){function t(e){var t=e(o,i);return t?(L(t)&&i.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){g&&i.url()===g;g=n;var r,s=c.length;for(r=0;s>r;r++)if(t(c[r]))return;u&&t(u)}}function f(){return l=l||r.$on("$locationChangeSuccess",d)}var g,m=s.baseHref(),v=i.url();return h||f(),{sync:function(){d()},listen:function(){return f()},update:function(e){return e?void(v=i.url()):void(i.url()!==v&&(i.url(v),i.replace()))},push:function(e,t,r){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),i.url(o),g=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var s=e.html5Mode();t.isObject(s)&&(s=s.enabled),s=s&&a.history;var l=n.format(r);if(o=o||{},s||null===l||(l="#"+e.hashPrefix()+l),null!==l&&r&&r["#"]&&(l+="#"+r["#"]),l=p(l,s,o.absolute),!o.absolute||!l)return l;var c=!s&&l?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,c,l].join("")}}}var l,c=[],u=null,h=!1;this.rule=function(e){if(!N(e))throw new Error("'rule' must be a function");return c.push(e),this},this.otherwise=function(e){if(L(e)){var t=e;e=function(){return t}}else if(!N(e))throw new Error("'rule' must be a function");return u=e,this},this.when=function(e,t){var n,a=L(t);if(L(e)&&(e=i.compile(e)),!a&&!N(t)&&!V(t))throw new Error("invalid 'handler' in when()");var l={matcher:function(e,t){return a&&(n=i.compile(t),t=["$match",function(e){return n.format(e)}]),U(function(n,i){return s(n,t,e.exec(i.path(),i.search()))},{prefix:L(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(n=t,t=["$match",function(e){return o(n,e)}]),U(function(n,i){return s(n,t,e.exec(i.path()))},{prefix:r(e)})}},c={matcher:i.isMatcher(e),regex:e instanceof RegExp};for(var u in c)if(c[u])return this.rule(l[u](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),h=e},this.$get=a,a.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function b(e,r){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function p(e,t){if(!e)return n;var i=L(e),r=i?e:e.name,s=o(r);if(s){if(!t)throw new Error("No reference point given for path '"+r+"'");t=p(t);for(var a=r.split("."),l=0,c=a.length,u=t;c>l;l++)if(""!==a[l]||0!==l){if("^"!==a[l])break;if(!u.parent)throw new Error("Path '"+r+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;a=a.slice(l).join("."),r=u.name+(u.name&&a?".":"")+a}var h=E[r];return!h||!i&&(i||h!==e&&h.self!==e)?n:h}function d(e,t){P[e]||(P[e]=[]),P[e].push(t)}function g(e){for(var t=P[e]||[];t.length;)m(t.shift())}function m(t){t=i(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!L(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(E.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var r=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):L(t.parent)?t.parent:H(t.parent)&&L(t.parent.name)?t.parent.name:"";if(r&&!E[r])return d(r,t.self);for(var o in T)N(T[o])&&(t[o]=T[o](t,T.$delegates[o]));return E[n]=t,!t[k]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){S.$current.navigable==t&&c(e,n)||S.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function v(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),n=S.$current.name.split("."),i=0,r=t.length;r>i;i++)"*"===t[i]&&(n[i]="*");return"**"===t[0]&&(n=n.slice(a(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(a(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length?!1:n.join("")===t.join("")}function _(e,t){return L(e)&&!F(t)?T[e]:N(t)&&L(e)?(T[e]&&!T.$delegates[e]&&(T.$delegates[e]=T[e]),T[e]=t,this):this}function w(e,t){return H(e)?t=e:t.name=e,m(t),this}function b(e,r,o,a,h,d,g,m,_){function w(t,n,i,o){var s=e.$broadcast("$stateNotFound",t,n,i);if(s.defaultPrevented)return g.update(),$;if(!s.retry)return null;if(o.$retry)return g.update(),D;var a=S.transition=r.when(s.retry);return a.then(function(){return a!==S.transition?P:(t.options.$retry=!0,S.transitionTo(t.to,t.toParams,t.options))},function(){return $}),g.update(),a}function b(e,n,i,s,l,c){function p(){var n=[];return B(e.views,function(i,r){var s=i.resolve&&i.resolve!==e.resolve?i.resolve:{};s.$template=[function(){return o.load(r,{view:i,locals:l.globals,params:d,notify:c.notify})||""}],n.push(h.resolve(s,l.globals,l.resolve,e).then(function(n){if(N(i.controllerProvider)||V(i.controllerProvider)){var o=t.extend({},s,l.globals);n.$$controller=a.invoke(i.controllerProvider,null,o)}else n.$$controller=i.controller;n.$$state=e,n.$$controllerAs=i.controllerAs,l[r]=n}))}),r.all(n).then(function(){return l.globals})}var d=i?n:u(e.params.$$keys(),n),f={$stateParams:d};l.resolve=h.resolve(e.resolve,f,l.resolve,e);var g=[l.resolve.then(function(e){l.globals=e})];return s&&g.push(s),r.all(g).then(p).then(function(e){return l})}var P=r.reject(new Error("transition superseded")),T=r.reject(new Error("transition prevented")),$=r.reject(new Error("transition aborted")),D=r.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},S={params:{},current:x.self,$current:x,transition:null},S.reload=function(e){return S.transitionTo(S.current,d,{reload:e||!0,inherit:!1,notify:!0})},S.go=function(e,t,n){return S.transitionTo(e,t,U({inherit:!0,relative:S.$current},n))},S.transitionTo=function(t,n,o){n=n||{},o=U({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var s,c=S.$current,h=S.params,f=c.path,m=p(t,o.relative),v=n["#"];if(!F(m)){var y={to:t,toParams:n,options:o},_=w(y,c.self,h,o);if(_)return _;if(t=y.to,n=y.toParams,o=y.options,m=p(t,o.relative),!F(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[k])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=l(d,n||{},S.$current,m)),!m.params.$$validates(n))return D;n=m.params.$$values(n),t=m;var E=t.path,$=0,A=E[$],R=x.locals,j=[];if(o.reload){if(L(o.reload)||H(o.reload)){if(H(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var M=o.reload===!0?f[0]:p(o.reload);if(o.reload&&!M)throw new Error("No such reload state '"+(L(o.reload)?o.reload:o.reload.name)+"'");for(;A&&A===f[$]&&A!==M;)R=j[$]=A.locals,$++,A=E[$]}}else for(;A&&A===f[$]&&A.ownParams.$$equals(n,h);)R=j[$]=A.locals,$++,A=E[$];if(C(t,n,c,h,R,o))return v&&(n["#"]=v),S.params=n,z(S.params,d),z(u(t.params.$$keys(),d),t.locals.globals.$stateParams),o.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),S.transition=null,r.when(S.current);if(n=u(t.params.$$keys(),n||{}),v&&(n["#"]=v),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,c.self,h,o).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,c.self,h),null==S.transition&&g.update(),T;for(var O=r.when(R),I=$;I<E.length;I++,A=E[I])R=j[I]=i(R),O=b(A,n,A===t,O,R,o);var N=S.transition=O.then(function(){var i,r,s;if(S.transition!==N)return P;for(i=f.length-1;i>=$;i--)s=f[i],s.self.onExit&&a.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(i=$;i<E.length;i++)r=E[i],r.locals=j[i],r.self.onEnter&&a.invoke(r.self.onEnter,r.self,r.locals.globals);return S.transition!==N?P:(S.$current=t,S.current=t.self,S.params=n,z(S.params,d),S.transition=null,o.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,c.self,h),g.update(!0),S.current)},function(i){return S.transition!==N?P:(S.transition=null,s=e.$broadcast("$stateChangeError",t.self,n,c.self,h,i),s.defaultPrevented||g.update(),r.reject(i))});return N},S.is=function(e,t,i){i=U({relative:S.$current},i||{});var r=p(e,i.relative);return F(r)?S.$current!==r?!1:t?c(r.params.$$values(t),d):!0:n},S.includes=function(e,t,i){if(i=U({relative:S.$current},i||{}),L(e)&&v(e)){if(!y(e))return!1;e=S.$current.name}var r=p(e,i.relative);return F(r)?F(S.$current.includes[r.name])?t?c(r.params.$$values(t),d,s(t)):!0:!1:n},S.href=function(e,t,i){i=U({lossy:!0,inherit:!0,absolute:!1,relative:S.$current},i||{});var r=p(e,i.relative);if(!F(r))return null;i.inherit&&(t=l(d,t||{},S.$current,r));var o=r&&i.lossy?r.navigable:r;return o&&o.url!==n&&null!==o.url?g.href(o.url,u(r.params.$$keys().concat("#"),t||{}),{absolute:i.absolute}):null},S.get=function(e,t){if(0===arguments.length)return f(s(E),function(e){return E[e].self});var n=p(e,t||S.$current);return n&&n.self?n.self:null},S}function C(e,t,n,i,r,o){function s(e,t,n){function i(t){return"search"!=e.params[t].location}var r=e.params.$$keys().filter(i),o=h.apply({},[e.params].concat(r)),s=new q.ParamSet(o);return s.$$equals(t,n)}return!o.reload&&e===n&&(r===n.locals||e.self.reloadOnSearch===!1&&s(n,i,t))?!0:void 0}var x,S,E={},P={},k="abstract",T={parent:function(e){if(F(e.parent)&&e.parent)return p(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?p(t[1]):x},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=i(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(L(t))return"^"==t.charAt(0)?r.compile(t.substring(1),n):(e.parent.navigable||x).url.concat(t,n);if(!t||r.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new q.ParamSet;return B(e.params||{},function(e,n){t[n]||(t[n]=new q.Param(n,null,e,"config"))}),t},params:function(e){var t=h(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?U(e.parent.params.$$new(),t):new q.ParamSet},views:function(e){var t={};return B(F(e.views)?e.views:{"":e},function(n,i){i.indexOf("@")<0&&(i+="@"+e.parent.name),t[i]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?U({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};x=m({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=_,this.state=w,this.$get=b,b.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function C(){function e(e,t){return{load:function(e,n){var i,r={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=U(r,n),n.view&&(i=t.fromConfig(n.view,n.params,n.locals)),i}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function x(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function S(e,n,i,r){function o(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function s(e,n){function i(e){return 1===G&&K>=4?!!c.enabled(e):1===G&&K>=2?!!c.enabled():!!l}var r={enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}};if(e.noanimation)return r;if(c)return{enter:function(e,n,o){i(e)?t.version.minor>2?c.enter(e,null,n).then(o):c.enter(e,null,n,o):r.enter(e,n,o)},leave:function(e,n){i(e)?t.version.minor>2?c.leave(e).then(n):c.leave(e,n):r.leave(e,n)}};if(l){var o=l&&l(n,e);return{enter:function(e,t,n){o.enter(e,null,t),n()},leave:function(e,t){o.leave(e),t()}}}return r}var a=o(),l=a("$animator"),c=a("$animate"),u={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,a){return function(n,o,l){function c(){function e(){t&&t.remove(),n&&n.$destroy()}var t=h,n=d;n&&(n._willBeDestroyed=!0),p?(v.leave(p,function(){e(),h=null}),h=p):(e(),h=null),p=null,d=null}function u(s){var u,h=P(n,l,o,r),y=h&&e.$current&&e.$current.locals[h];if((s||y!==f)&&!n._willBeDestroyed){u=n.$new(),f=e.$current.locals[h],u.$emit("$viewContentLoading",h);var _=a(u,function(e){v.enter(e,o,function(){d&&d.$emit("$viewContentAnimationEnded"),(t.isDefined(m)&&!m||n.$eval(m))&&i(e)}),c()});p=_,d=u,d.$emit("$viewContentLoaded",h),d.$eval(g)}}var h,p,d,f,g=l.onload||"",m=l.autoscroll,v=s(l,n);n.$on("$stateChangeSuccess",function(){u(!1)}),u(!0)}}};return u}function E(e,t,n,i){return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return function(r,s,a){var l=n.$current,c=P(r,a,s,i),u=l&&l.locals[c];if(u){s.data("$uiView",{name:c,state:u.$$state}),s.html(u.$template?u.$template:o);var h=e(s.contents());if(u.$$controller){u.$scope=r,u.$element=s;var p=t(u.$$controller,u);u.$$controllerAs&&(r[u.$$controllerAs]=p),s.data("$ngControllerController",p),s.children().data("$ngControllerController",p)}h(r)}}}}}function P(e,t,n,i){var r=i(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function k(e,t){var n,i=e.match(/^\s*({[^}]*})\s*$/);if(i&&(e=t+"("+i[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function T(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function $(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function D(e,t,n,i,r){return function(o){var s=o.which||o.button,a=r();if(!(s>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var l=n(function(){t.go(a.state,a.params,a.options)});o.preventDefault();var c=i.isAnchor&&!a.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(l)}}}}function A(e,t){return{relative:T(e)||t.$current,inherit:!0}}function R(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,o,s){var a=k(o.uiSref,e.current.name),l={state:a.state,href:null,params:null},c=$(r),u=s[1]||s[0];l.options=U(A(r,e),o.uiSrefOpts?i.$eval(o.uiSrefOpts):{});var h=function(n){n&&(l.params=t.copy(n)),l.href=e.href(a.state,l.params,l.options),u&&u.$$addStateInfo(a.state,l.params),null!==l.href&&o.$set(c.attr,l.href)};a.paramExpr&&(i.$watch(a.paramExpr,function(e){e!==l.params&&h(e)},!0),l.params=t.copy(i.$eval(a.paramExpr))),h(),c.clickable&&r.bind("click",D(r,e,n,c,function(){return l}))}}}function j(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,r,o){function s(t){h.state=t[0],h.params=t[1],h.options=t[2],h.href=e.href(h.state,h.params,h.options),l&&l.$$addStateInfo(h.state,h.params),h.href&&r.$set(a.attr,h.href)}var a=$(i),l=o[1]||o[0],c=[r.uiState,r.uiStateParams||null,r.uiStateOpts||null],u="["+c.map(function(e){return e||"null"}).join(", ")+"]",h={state:null,params:null,options:null,href:null};n.$watch(u,s,!0),s(n.$eval(u)),a.clickable&&i.bind("click",D(i,e,t,a,function(){return h}))}}}function M(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,i,r,o){function s(t,n,r){var o=e.get(t,T(i)),s=a(t,n);g.push({state:o||{name:t},params:n,hash:s}),m[s]=r}function a(e,n){if(!L(e))throw new Error("state should be a string");return H(n)?e+W(n):(n=t.$eval(n),H(n)?e+W(n):e)}function l(){for(var e=0;e<g.length;e++)h(g[e].state,g[e].params)?c(i,m[g[e].hash]):u(i,m[g[e].hash]),p(g[e].state,g[e].params)?c(i,d):u(i,d)}function c(e,t){o(function(){e.addClass(t)})}function u(e,t){e.removeClass(t)}function h(t,n){return e.includes(t.name,n)}function p(t,n){return e.is(t.name,n)}var d,f,g=[],m={};d=n(r.uiSrefActiveEq||"",!1)(t);try{f=t.$eval(r.uiSrefActive)}catch(v){}f=f||n(r.uiSrefActive||"",!1)(t),H(f)&&B(f,function(n,i){if(L(n)){var r=k(n,e.current.name);s(r.state,t.$eval(r.paramExpr),i)}}),this.$$addStateInfo=function(e,t){H(f)&&g.length>0||(s(e,t,f),l())},t.$on("$stateChangeSuccess",l),l()}]}}function O(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function I(e){var t=function(t,n,i){return e.includes(t,n,i)};return t.$stateful=!0,t}var F=t.isDefined,N=t.isFunction,L=t.isString,H=t.isObject,V=t.isArray,B=t.forEach,U=t.extend,z=t.copy,W=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),m.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",m);var q;v.prototype.concat=function(e,t){var n={caseInsensitive:q.caseInsensitive(),strict:q.strictMode(),squash:q.defaultSquashPolicy()};return new v(this.sourcePath+e+this.sourceSearch,U(n,t),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var i=t(e).split(/-(?!\\)/),r=f(i,t);return f(r,n).reverse()}var i=this.regexp.exec(e);if(!i)return null;t=t||{};var r,o,s,a=this.parameters(),l=a.length,c=this.segments.length-1,u={};if(c!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var h,p;for(r=0;c>r;r++){for(s=a[r],h=this.params[s],p=i[r+1],o=0;o<h.replace.length;o++)h.replace[o].from===p&&(p=h.replace[o].to);p&&h.array===!0&&(p=n(p)),F(p)&&(p=h.type.decode(p)),u[s]=h.value(p)}for(;l>r;r++){for(s=a[r],u[s]=this.params[s].value(t[s]),h=this.params[s],p=t[s],o=0;o<h.replace.length;o++)h.replace[o].from===p&&(p=h.replace[o].to);F(p)&&(p=h.type.decode(p)),u[s]=h.value(p)}return u},v.prototype.parameters=function(e){return F(e)?this.params[e]||null:this.$$paramNames},v.prototype.validates=function(e){return this.params.$$validates(e)},v.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(e))return null;var o,s=!1,a=n.length-1,l=i.length,c=n[0];for(o=0;l>o;o++){var u=a>o,h=i[o],p=r[h],d=p.value(e[h]),g=p.isOptional&&p.type.equals(p.value(),d),m=g?p.squash:!1,v=p.type.encode(d);if(u){var y=n[o+1],_=o+1===a;if(m===!1)null!=v&&(c+=V(v)?f(v,t).join("-"):encodeURIComponent(v)),c+=y;else if(m===!0){var w=c.match(/\/$/)?/\/?(.*)/:/(.*)/;c+=y.match(w)[1]}else L(m)&&(c+=m+y);_&&p.squash===!0&&"/"===c.slice(-1)&&(c=c.slice(0,-1))}else{if(null==v||g&&m!==!1)continue;if(V(v)||(v=[v]),0===v.length)continue;v=f(v,encodeURIComponent).join("&"+h+"="),c+=(s?"&":"?")+(h+"="+v),s=!0}}return c},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function i(e,t){function i(e,t){return function(){return e[t].apply(e,arguments)}}function r(e){return V(e)?e:F(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function s(e){return!e}function a(e,t){return function(n){if(V(n)&&0===n.length)return n;n=r(n);var i=f(n,e);return t===!0?0===d(i,s).length:o(i)}}function l(e){return function(t,n){var i=r(t),o=r(n);if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!e(i[s],o[s]))return!1;return!0}}this.encode=a(i(e,"encode")),this.decode=a(i(e,"decode")),this.is=a(i(e,"is"),!0),this.equals=l(i(e,"equals")),this.pattern=e.pattern,this.$normalize=a(i(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new i(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",_),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),b.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",b),C.$inject=[],t.module("ui.router.state").provider("$view",C),t.module("ui.router.state").provider("$uiViewScroll",x);var G=t.version.major,K=t.version.minor;S.$inject=["$state","$injector","$uiViewScroll","$interpolate"],E.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",S),t.module("ui.router.state").directive("uiView",E),R.$inject=["$state","$timeout"],j.$inject=["$state","$timeout"],M.$inject=["$state","$stateParams","$interpolate"],
t.module("ui.router.state").directive("uiSref",R).directive("uiSrefActive",M).directive("uiSrefActiveEq",M).directive("uiState",j),O.$inject=["$state"],I.$inject=["$state"],t.module("ui.router.state").filter("isState",O).filter("includedByState",I)}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=e(o);t&&t.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,o)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),s="string"==typeof t?t:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof t?r.to(t):s?r[s]():o.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,o=(n+r)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(t,r),s=this.interval,a="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([t,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),o=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=e.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),t.call(o,s),a&&o.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&o.toggle&&"show"==t&&(o.toggle=!1),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.2",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var o=t(r),s=o.data("bs.collapse"),a=s?"toggle":e.extend({},r.data(),{trigger:this});n.call(o,a)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(r).remove(),e(o).each(function(){var i=e(this),r=n(i),o={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.2",s.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var o=n(r),s=o.hasClass("open");if(t(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(o.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s&&27!=t.which||s&&27==t.which)return 27==t.which&&r.find(o).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(t.target);38==t.which&&c>0&&c--,40==t.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);o||r.data("bs.modal",o=new n(this,s)),"string"==typeof t?o[t](i):s.show&&o.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),o=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(o,s,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof t&&t;(r||"destroy"!=t)&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var u=this.getPosition(),h=o[0].offsetWidth,p=o[0].offsetHeight;if(c){var d=a,f=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(f);a="bottom"==a&&u.bottom+p>g.bottom?"top":"top"==a&&u.top-p<g.top?"bottom":"right"==a&&u.right+h>g.width?"left":"left"==a&&u.left-h<g.left?"right":a,o.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,u,h,p);this.applyPlacement(m,a);var v=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top=t.top+s,t.left=t.left+a,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var h=/top|bottom/.test(n),p=h?2*u.left-r+l:2*u.top-o+c,d=h?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,o=this.tip(),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,a,o)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-s.scroll,l=t.top+o-s.scroll+i;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var c=t.left-o,u=t.left+o+n;c<s.left?r.left=s.left-c:u>s.width&&(r.left=s.left+s.width-u)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof t&&t;(r||"destroy"!=t)&&(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){var r=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.2",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[t]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return s!=(e=o[o.length-1])&&this.activate(e);if(s&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)s!=o[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),s=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){
var a=e(i);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=i.find("> .active"),a=r&&e.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.2",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=o.top?!1:"bottom":e-i>=r+s?!1:"bottom";var a=null==this.affixed,l=a?r:o.top,c=a?s:t;return null!=n&&n>=r?"top":null!=i&&l+c>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,s=e("body").height();"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var a=this.getState(s,t,r,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-t-o})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var t="undefined"!=typeof window?window:self,n=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=n,this}}}(function(){"use strict";function e(e){return function(){return K.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof z}function i(e,t){if(V&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ie)){for(var n=[],i=t;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(e.stack);var o=n.join("\n"+ie+"\n");e.stack=r(o)}}function r(e){for(var t=e.split("\n"),n=[],i=0;i<t.length;++i){var r=t[i];a(r)||o(r)||!r||n.push(r)}return n.join("\n")}function o(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function a(e){var t=s(e);if(!t)return!1;var n=t[0],i=t[1];return n===U&&i>=W&&le>=i}function l(){if(V)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],i=s(n);if(!i)return;return U=i[0],i[1]}}function c(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function u(e){return e instanceof f?e:y(e)?k(e):P(e)}function h(){function e(e){t=e,o.source=e,J(n,function(t,n){u.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,i=void 0}var t,n=[],i=[],r=Z(h.prototype),o=Z(f.prototype);if(o.promiseDispatch=function(e,r,o){var s=Y(arguments);n?(n.push(s),"when"===r&&o[1]&&i.push(o[1])):u.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(n)return o;var e=m(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},u.longStackSupport&&V)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return r.promise=o,r.resolve=function(n){t||e(u(n))},r.fulfill=function(n){t||e(P(n))},r.reject=function(n){t||e(E(n))},r.notify=function(e){t||J(i,function(t,n){u.nextTick(function(){n(e)})},void 0)},r}function p(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=h();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function d(e){return p(function(t,n){for(var i=0,r=e.length;r>i;i++)u(e[i]).then(t,n)})}function f(e,t,n){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=Z(f.prototype);if(i.promiseDispatch=function(n,r,o){var s;try{s=e[r]?e[r].apply(i,o):t.call(i,r,o)}catch(a){s=E(a)}n&&n(s)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function g(e,t,n,i){return u(e).then(t,n,i)}function m(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof f}function y(e){return t(e)&&"function"==typeof e.then}function _(e){return v(e)&&"pending"===e.inspect().state}function w(e){return!v(e)||"fulfilled"===e.inspect().state}function b(e){return v(e)&&"rejected"===e.inspect().state}function C(){re.length=0,oe.length=0,ae||(ae=!0)}function x(e,t){ae&&("object"==typeof process&&"function"==typeof process.emit&&u.nextTick.runAfter(function(){-1!==X(oe,e)&&(process.emit("unhandledRejection",t,e),se.push(e))}),oe.push(e),t&&"undefined"!=typeof t.stack?re.push(t.stack):re.push("(no stack) "+t))}function S(e){if(ae){var t=X(oe,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&u.nextTick.runAfter(function(){var n=X(se,e);-1!==n&&(process.emit("rejectionHandled",re[t],e),se.splice(n,1))}),oe.splice(t,1),re.splice(t,1))}}function E(e){var t=f({when:function(t){return t&&S(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return x(t,e),t}function P(e){return f({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=h();return u.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function T(e){return f({isDef:function(){}},function(t,n){return M(e,t,n)},function(){return u(e).inspect()})}function $(e,t,n){return u(e).spread(t,n)}function D(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=i[e](t)}catch(a){return E(a)}return s.done?u(s.value):g(s.value,r,o)}try{s=i[e](t)}catch(a){return n(a)?u(a.value):E(a)}return g(s,r,o)}var i=e.apply(this,arguments),r=t.bind(t,"next"),o=t.bind(t,"throw");return r()}}function A(e){u.done(u.async(e)())}function R(e){throw new z(e)}function j(e){return function(){return $([this,O(arguments)],function(t,n){return e.apply(t,n)})}}function M(e,t,n){return u(e).dispatch(t,n)}function O(e){return g(e,function(e){var t=0,n=h();return J(e,function(i,r,o){var s;v(r)&&"fulfilled"===(s=r.inspect()).state?e[o]=s.value:(++t,g(r,function(i){e[o]=i,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function I(e){if(0===e.length)return u.resolve();var t=u.defer(),n=0;return J(e,function(i,r,o){function s(e){t.resolve(e)}function a(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function l(e){t.notify({index:o,value:e})}var c=e[o];n++,g(c,s,a,l)},void 0),t.promise}function F(e){return g(e,function(e){return e=Q(e,u),g(O(Q(e,function(e){return g(e,q,q)})),function(){return e})})}function N(e){return u(e).allSettled()}function L(e,t){return u(e).then(void 0,void 0,t)}function H(e,t){return u(e).nodeify(t)}var V=!1;try{throw new Error}catch(B){V=!!B.stack}var U,z,W=l(),q=function(){},G=function(){function e(){for(var e,i;n.next;)n=n.next,e=n.task,n.task=void 0,i=n.domain,i&&(n.domain=void 0,i.enter()),t(e,i);for(;a.length;)e=a.pop(),t(e);r=!1}function t(t,n){try{t()}catch(i){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}var n={task:void 0,next:null},i=n,r=!1,o=void 0,s=!1,a=[];if(G=function(e){i=i.next={task:e,domain:s&&process.domain,next:null},r||(r=!0,o())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,o=function(){process.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){o=c,l.port1.onmessage=e,e()};var c=function(){l.port2.postMessage(0)};o=function(){setTimeout(e,0),c()}}else o=function(){setTimeout(e,0)};return G.runAfter=function(e){a.push(e),r||(r=!0,o())},G}(),K=Function.call,Y=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(e,t){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(t=e(t,this[n],n));return t}),X=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Q=e(Array.prototype.map||function(e,t){var n=this,i=[];return J(n,function(r,o,s){i.push(e.call(t,o,s,n))},void 0),i}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var n in e)ee(e,n)&&t.push(n);return t},ne=e(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";u.resolve=u,u.nextTick=G,u.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(u.longStackSupport=!0),u.defer=h,h.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},u.Promise=p,u.promise=p,p.race=d,p.all=O,p.reject=E,p.resolve=u,u.passByCopy=function(e){return e},f.prototype.passByCopy=function(){return this},u.join=function(e,t){return u(e).join(t)},f.prototype.join=function(e){return u([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},u.race=d,f.prototype.race=function(){return this.then(u.race)},u.makePromise=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return E(n)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(n){return E(n)}}return E(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,l=h(),c=!1;return u.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,l.resolve(r(e)))},"when",[function(e){c||(c=!0,l.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(i){if(n=!0,!u.onerror)throw i;u.onerror(i)}n||l.notify(t)}]),l.promise},u.tap=function(e,t){return u(e).tap(t)},f.prototype.tap=function(e){return e=u(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},u.when=g,f.prototype.thenResolve=function(e){return this.then(function(){return e})},u.thenResolve=function(e,t){return u(e).thenResolve(t)},f.prototype.thenReject=function(e){return this.then(function(){throw e})},u.thenReject=function(e,t){return u(e).thenReject(t)},u.nearer=m,u.isPromise=v,u.isPromiseAlike=y,u.isPending=_,f.prototype.isPending=function(){return"pending"===this.inspect().state},u.isFulfilled=w,f.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},u.isRejected=b,f.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],oe=[],se=[],ae=!0;u.resetUnhandledRejections=C,u.getUnhandledReasons=function(){return re.slice()},u.stopUnhandledRejectionTracking=function(){C(),ae=!1},C(),u.reject=E,u.fulfill=P,u.master=T,u.spread=$,f.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},u.async=D,u.spawn=A,u["return"]=R,u.promised=j,u.dispatch=M,f.prototype.dispatch=function(e,t){var n=this,i=h();return u.nextTick(function(){n.promiseDispatch(i.resolve,e,t)}),i.promise},u.get=function(e,t){return u(e).dispatch("get",[t])},f.prototype.get=function(e){return this.dispatch("get",[e])},u.set=function(e,t,n){return u(e).dispatch("set",[t,n])},f.prototype.set=function(e,t){return this.dispatch("set",[e,t])},u.del=u["delete"]=function(e,t){return u(e).dispatch("delete",[t])},f.prototype.del=f.prototype["delete"]=function(e){return this.dispatch("delete",[e])},u.mapply=u.post=function(e,t,n){return u(e).dispatch("post",[t,n])},f.prototype.mapply=f.prototype.post=function(e,t){return this.dispatch("post",[e,t])},u.send=u.mcall=u.invoke=function(e,t){return u(e).dispatch("post",[t,Y(arguments,2)])},f.prototype.send=f.prototype.mcall=f.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},u.fapply=function(e,t){return u(e).dispatch("apply",[void 0,t])},f.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},u["try"]=u.fcall=function(e){return u(e).dispatch("apply",[void 0,Y(arguments,1)])},f.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},u.fbind=function(e){var t=u(e),n=Y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Y(arguments))])}},f.prototype.fbind=function(){var e=this,t=Y(arguments);return function(){return e.dispatch("apply",[this,t.concat(Y(arguments))])}},u.keys=function(e){return u(e).dispatch("keys",[])},f.prototype.keys=function(){return this.dispatch("keys",[])},u.all=O,f.prototype.all=function(){return O(this)},u.any=I,f.prototype.any=function(){return I(this)},u.allResolved=c(F,"allResolved","allSettled"),f.prototype.allResolved=function(){return F(this)},u.allSettled=N,f.prototype.allSettled=function(){return this.then(function(e){return O(Q(e,function(e){function t(){return e.inspect()}return e=u(e),e.then(t,t)}))})},u.fail=u["catch"]=function(e,t){return u(e).then(void 0,t)},f.prototype.fail=f.prototype["catch"]=function(e){return this.then(void 0,e)},u.progress=L,f.prototype.progress=function(e){return this.then(void 0,void 0,e)},u.fin=u["finally"]=function(e,t){return u(e)["finally"](t)},f.prototype.fin=f.prototype["finally"]=function(e){return e=u(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},u.done=function(e,t,n,i){return u(e).done(t,n,i)},f.prototype.done=function(e,t,n){var r=function(e){u.nextTick(function(){if(i(e,o),!u.onerror)throw e;u.onerror(e)})},o=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},u.timeout=function(e,t,n){return u(e).timeout(t,n)},f.prototype.timeout=function(e,t){var n=h(),i=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(i),n.resolve(e)},function(e){clearTimeout(i),n.reject(e)},n.notify),n.promise},u.delay=function(e,t){return void 0===t&&(t=e,e=void 0),u(e).delay(t)},f.prototype.delay=function(e){return this.then(function(t){var n=h();return setTimeout(function(){n.resolve(t)},e),n.promise})},u.nfapply=function(e,t){return u(e).nfapply(t)},f.prototype.nfapply=function(e){var t=h(),n=Y(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},u.nfcall=function(e){var t=Y(arguments,1);return u(e).nfapply(t)},f.prototype.nfcall=function(){var e=Y(arguments),t=h();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},u.nfbind=u.denodeify=function(e){var t=Y(arguments,1);return function(){var n=t.concat(Y(arguments)),i=h();return n.push(i.makeNodeResolver()),u(e).fapply(n).fail(i.reject),i.promise}},f.prototype.nfbind=f.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),u.denodeify.apply(void 0,e)},u.nbind=function(e,t){var n=Y(arguments,2);return function(){function i(){return e.apply(t,arguments)}var r=n.concat(Y(arguments)),o=h();return r.push(o.makeNodeResolver()),u(i).fapply(r).fail(o.reject),o.promise}},f.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),u.nbind.apply(void 0,e)},u.nmapply=u.npost=function(e,t,n){return u(e).npost(t,n)},f.prototype.nmapply=f.prototype.npost=function(e,t){var n=Y(t||[]),i=h();return n.push(i.makeNodeResolver()),this.dispatch("post",[e,n]).fail(i.reject),i.promise},u.nsend=u.nmcall=u.ninvoke=function(e,t){var n=Y(arguments,2),i=h();return n.push(i.makeNodeResolver()),u(e).dispatch("post",[t,n]).fail(i.reject),i.promise},f.prototype.nsend=f.prototype.nmcall=f.prototype.ninvoke=function(e){var t=Y(arguments,1),n=h();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},u.nodeify=H,f.prototype.nodeify=function(e){return e?void this.then(function(t){u.nextTick(function(){e(null,t)})},function(t){u.nextTick(function(){e(t)})}):this},u.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var le=l();return u}),function(e,t){var n={Identity:function(e){return e},True:function(){return!0},Blank:function(){}},i={Boolean:typeof!0,Number:"number",String:"string",Object:typeof{},Undefined:typeof t,Function:"function"},r={"":n.Identity},o={createLambda:function(e){if(null==e)return n.Identity;if(typeof e===i.String){var t=r[e];if(null!=t)return t;if(-1===e.indexOf("=>")){for(var o,s=new RegExp("[$]+","g"),a=0;null!=(o=s.exec(e));){var l=o[0].length;l>a&&(a=l)}for(var c=[],u=1;a>=u;u++){for(var h="",p=0;u>p;p++)h+="$";c.push(h)}var d=Array.prototype.join.call(c,",");return t=new Function(d,"return "+e),r[e]=t,t}var f=e.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return t=new Function(f[1],"return "+f[2]),r[e]=t,t}return e},isIEnumerable:function(e){if(typeof Enumerator!==i.Undefined)try{return new Enumerator(e),!0}catch(t){}return!1},defineProperty:null!=Object.defineProperties?function(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}:function(e,t,n){e[t]=n},compare:function(e,t){return e===t?0:e>t?1:-1},dispose:function(e){null!=e&&e.dispose()}},s={Before:0,Running:1,After:2},a=function(e,t,n){var i=new l,r=s.Before;this.current=i.current,this.moveNext=function(){try{switch(r){case s.Before:r=s.Running,e();case s.Running:return t.apply(i)?!0:(this.dispose(),!1);case s.After:return!1}}catch(n){throw this.dispose(),n}},this.dispose=function(){if(r==s.Running)try{n()}finally{r=s.After}}},l=function(){var e=null;this.current=function(){return e},this.yieldReturn=function(t){return e=t,!0},this.yieldBreak=function(){return!1}},c=function(e){this.getEnumerator=e};c.Utils={},c.Utils.createLambda=function(e){return o.createLambda(e)},c.Utils.createEnumerable=function(e){return new c(e)},c.Utils.createEnumerator=function(e,t,n){return new a(e,t,n)},c.Utils.extendTo=function(e){var t,n=e.prototype;e===Array?(t=d.prototype,o.defineProperty(n,"getSource",function(){return this})):(t=c.prototype,o.defineProperty(n,"getEnumerator",function(){return c.from(this).getEnumerator()}));for(var i in t){var r=t[i];n[i]!=r&&(null==n[i]||(i+="ByLinq",n[i]!=r))&&r instanceof Function&&o.defineProperty(n,i,r)}},c.choice=function(){var e=arguments;return new c(function(){return new a(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return this.yieldReturn(e[Math.floor(Math.random()*e.length)])},n.Blank)})},c.cycle=function(){var e=arguments;return new c(function(){var t=0;return new a(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return t>=e.length&&(t=0),this.yieldReturn(e[t++])},n.Blank)})},c.empty=function(){return new c(function(){return new a(n.Blank,function(){return!1},n.Blank)})},c.from=function(e){if(null==e)return c.empty();if(e instanceof c)return e;if(typeof e==i.Number||typeof e==i.Boolean)return c.repeat(e,1);if(typeof e==i.String)return new c(function(){var t=0;return new a(n.Blank,function(){return t<e.length?this.yieldReturn(e.charAt(t++)):!1},n.Blank)});if(typeof e!=i.Function){if(typeof e.length==i.Number)return new d(e);if(!(e instanceof Object)&&o.isIEnumerable(e))return new c(function(){var t,i=!0;return new a(function(){t=new Enumerator(e)},function(){return i?i=!1:t.moveNext(),t.atEnd()?!1:this.yieldReturn(t.item())},n.Blank)});if(typeof Windows===i.Object&&typeof e.first===i.Function)return new c(function(){var t,i=!0;return new a(function(){t=e.first()},function(){return i?i=!1:t.moveNext(),t.hasCurrent?this.yieldReturn(t.current):this.yieldBreak()},n.Blank)})}return new c(function(){var t=[],i=0;return new a(function(){for(var n in e){var i=e[n];i instanceof Function||!Object.prototype.hasOwnProperty.call(e,n)||t.push({key:n,value:i})}},function(){return i<t.length?this.yieldReturn(t[i++]):!1},n.Blank)})},c.make=function(e){return c.repeat(e,1)},c.matches=function(e,t,i){return null==i&&(i=""),t instanceof RegExp&&(i+=t.ignoreCase?"i":"",i+=t.multiline?"m":"",t=t.source),-1===i.indexOf("g")&&(i+="g"),new c(function(){var r;return new a(function(){r=new RegExp(t,i)},function(){var t=r.exec(e);return t?this.yieldReturn(t):!1},n.Blank)})},c.range=function(e,t,i){return null==i&&(i=1),new c(function(){var r,o=0;return new a(function(){r=e-i},function(){return o++<t?this.yieldReturn(r+=i):this.yieldBreak()},n.Blank)})},c.rangeDown=function(e,t,i){return null==i&&(i=1),new c(function(){var r,o=0;return new a(function(){r=e+i},function(){return o++<t?this.yieldReturn(r-=i):this.yieldBreak()},n.Blank)})},c.rangeTo=function(e,t,i){return null==i&&(i=1),new c(t>e?function(){var r;return new a(function(){r=e-i},function(){var e=r+=i;return t>=e?this.yieldReturn(e):this.yieldBreak()},n.Blank)}:function(){var r;return new a(function(){r=e+i},function(){var e=r-=i;return e>=t?this.yieldReturn(e):this.yieldBreak()},n.Blank)})},c.repeat=function(e,t){return null!=t?c.repeat(e).take(t):new c(function(){return new a(n.Blank,function(){return this.yieldReturn(e)},n.Blank)})},c.repeatWithFinalize=function(e,t){return e=o.createLambda(e),t=o.createLambda(t),new c(function(){var n;return new a(function(){n=e()},function(){return this.yieldReturn(n)},function(){null!=n&&(t(n),n=null)})})},c.generate=function(e,t){return null!=t?c.generate(e).take(t):(e=o.createLambda(e),new c(function(){return new a(n.Blank,function(){return this.yieldReturn(e())},n.Blank)}))},c.toInfinity=function(e,t){return null==e&&(e=0),null==t&&(t=1),new c(function(){var i;return new a(function(){i=e-t},function(){return this.yieldReturn(i+=t)},n.Blank)})},c.toNegativeInfinity=function(e,t){return null==e&&(e=0),null==t&&(t=1),new c(function(){var i;return new a(function(){i=e+t},function(){return this.yieldReturn(i-=t)},n.Blank)})},c.unfold=function(e,t){return t=o.createLambda(t),new c(function(){var i,r=!0;return new a(n.Blank,function(){return r?(r=!1,i=e,this.yieldReturn(i)):(i=t(i),this.yieldReturn(i))},n.Blank)})},c.defer=function(e){return new c(function(){var t;return new a(function(){t=c.from(e()).getEnumerator()},function(){return t.moveNext()?this.yieldReturn(t.current()):this.yieldBreak()},function(){o.dispose(t)})})},c.prototype.traverseBreadthFirst=function(e,t){var n=this;return e=o.createLambda(e),t=o.createLambda(t),new c(function(){var i,r=0,s=[];return new a(function(){i=n.getEnumerator()},function(){for(;;){if(i.moveNext())return s.push(i.current()),this.yieldReturn(t(i.current(),r));var n=c.from(s).selectMany(function(t){return e(t)});if(!n.any())return!1;r++,s=[],o.dispose(i),i=n.getEnumerator()}},function(){o.dispose(i)})})},c.prototype.traverseDepthFirst=function(e,t){var n=this;return e=o.createLambda(e),t=o.createLambda(t),new c(function(){var i,r=[];return new a(function(){i=n.getEnumerator()},function(){for(;;){if(i.moveNext()){var n=t(i.current(),r.length);return r.push(i),i=c.from(e(i.current())).getEnumerator(),this.yieldReturn(n)}if(r.length<=0)return!1;o.dispose(i),i=r.pop()}},function(){try{o.dispose(i)}finally{c.from(r).forEach(function(e){e.dispose()})}})})},c.prototype.flatten=function(){var e=this;return new c(function(){var t,i=null;return new a(function(){t=e.getEnumerator()},function(){for(;;){if(null!=i){if(i.moveNext())return this.yieldReturn(i.current());i=null}if(t.moveNext()){if(t.current()instanceof Array){o.dispose(i),i=c.from(t.current()).selectMany(n.Identity).flatten().getEnumerator();continue}return this.yieldReturn(t.current())}return!1}},function(){try{o.dispose(t)}finally{o.dispose(i)}})})},c.prototype.pairwise=function(e){var t=this;return e=o.createLambda(e),new c(function(){var n;return new a(function(){n=t.getEnumerator(),n.moveNext()},function(){var t=n.current();return n.moveNext()?this.yieldReturn(e(t,n.current())):!1},function(){o.dispose(n)})})},c.prototype.scan=function(e,t){var n;null==t?(t=o.createLambda(e),n=!1):(t=o.createLambda(t),n=!0);var i=this;return new c(function(){var r,s,l=!0;return new a(function(){r=i.getEnumerator()},function(){if(l){if(l=!1,n)return this.yieldReturn(s=e);if(r.moveNext())return this.yieldReturn(s=r.current())}return r.moveNext()?this.yieldReturn(s=t(s,r.current())):!1},function(){o.dispose(r)})})},c.prototype.select=function(e){if(e=o.createLambda(e),e.length<=1)return new g(this,null,e);var t=this;return new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){return n.moveNext()?this.yieldReturn(e(n.current(),i++)):!1},function(){o.dispose(n)})})},c.prototype.selectMany=function(e,n){var i=this;return e=o.createLambda(e),null==n&&(n=function(e,t){return t}),n=o.createLambda(n),new c(function(){var r,s=t,l=0;return new a(function(){r=i.getEnumerator()},function(){if(s===t&&!r.moveNext())return!1;do{if(null==s){var i=e(r.current(),l++);s=c.from(i).getEnumerator()}if(s.moveNext())return this.yieldReturn(n(r.current(),s.current()));o.dispose(s),s=null}while(r.moveNext());return!1},function(){try{o.dispose(r)}finally{o.dispose(s)}})})},c.prototype.where=function(e){if(e=o.createLambda(e),e.length<=1)return new f(this,e);var t=this;return new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)if(e(n.current(),i++))return this.yieldReturn(n.current());return!1},function(){o.dispose(n)})})},c.prototype.choose=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current(),i++);if(null!=t)return this.yieldReturn(t)}return this.yieldBreak()},function(){o.dispose(n)})})},c.prototype.ofType=function(e){var t;switch(e){case Number:t=i.Number;break;case String:t=i.String;break;case Boolean:t=i.Boolean;break;case Function:t=i.Function;break;default:t=null}return null===t?this.where(function(t){return t instanceof e}):this.where(function(e){return typeof e===t})},c.prototype.zip=function(){var e=arguments,t=o.createLambda(arguments[arguments.length-1]),n=this;if(2==arguments.length){var i=arguments[0];return new c(function(){var e,r,s=0;return new a(function(){e=n.getEnumerator(),r=c.from(i).getEnumerator()},function(){return e.moveNext()&&r.moveNext()?this.yieldReturn(t(e.current(),r.current(),s++)):!1},function(){try{o.dispose(e)}finally{o.dispose(r)}})})}return new c(function(){var i,r=0;return new a(function(){var t=c.make(n).concat(c.from(e).takeExceptLast().select(c.from)).select(function(e){return e.getEnumerator()}).toArray();i=c.from(t)},function(){if(i.all(function(e){return e.moveNext()})){var e=i.select(function(e){return e.current()}).toArray();return e.push(r++),this.yieldReturn(t.apply(null,e))}return this.yieldBreak()},function(){c.from(i).forEach(o.dispose)})})},c.prototype.merge=function(){var e=arguments,t=this;return new c(function(){var n,i=-1;return new a(function(){n=c.make(t).concat(c.from(e).select(c.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;n.length>0;){i=i>=n.length-1?0:i+1;var e=n[i];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),n.splice(i--,1)}return this.yieldBreak()},function(){c.from(n).forEach(o.dispose)})})},c.prototype.join=function(e,i,r,s,l){i=o.createLambda(i),r=o.createLambda(r),s=o.createLambda(s),l=o.createLambda(l);var u=this;return new c(function(){var h,p,d=null,f=0;return new a(function(){h=u.getEnumerator(),p=c.from(e).toLookup(r,n.Identity,l)},function(){for(;;){if(null!=d){var e=d[f++];if(e!==t)return this.yieldReturn(s(h.current(),e));e=null,f=0}if(!h.moveNext())return!1;var n=i(h.current());d=p.get(n).toArray()}},function(){o.dispose(h)})})},c.prototype.groupJoin=function(e,t,i,r,s){t=o.createLambda(t),i=o.createLambda(i),r=o.createLambda(r),s=o.createLambda(s);var l=this;return new c(function(){var u=l.getEnumerator(),h=null;return new a(function(){u=l.getEnumerator(),h=c.from(e).toLookup(i,n.Identity,s)},function(){if(u.moveNext()){var e=h.get(t(u.current()));return this.yieldReturn(r(u.current(),e))}return!1},function(){o.dispose(u)})})},c.prototype.all=function(e){e=o.createLambda(e);var t=!0;return this.forEach(function(n){return e(n)?void 0:(t=!1,!1)}),t},c.prototype.any=function(e){e=o.createLambda(e);var t=this.getEnumerator();try{if(0==arguments.length)return t.moveNext();for(;t.moveNext();)if(e(t.current()))return!0;return!1}finally{o.dispose(t)}},c.prototype.isEmpty=function(){return!this.any()},c.prototype.concat=function(){var e=this;if(1==arguments.length){var t=arguments[0];return new c(function(){var n,i;return new a(function(){n=e.getEnumerator()},function(){if(null==i){if(n.moveNext())return this.yieldReturn(n.current());i=c.from(t).getEnumerator()}return i.moveNext()?this.yieldReturn(i.current()):!1},function(){try{o.dispose(n)}finally{o.dispose(i)}})})}var n=arguments;return new c(function(){
var t;return new a(function(){t=c.make(e).concat(c.from(n).select(c.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;t.length>0;){var e=t[0];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),t.splice(0,1)}return this.yieldBreak()},function(){c.from(t).forEach(o.dispose)})})},c.prototype.insert=function(e,t){var n=this;return new c(function(){var i,r,s=0,l=!1;return new a(function(){i=n.getEnumerator(),r=c.from(t).getEnumerator()},function(){return s==e&&r.moveNext()?(l=!0,this.yieldReturn(r.current())):i.moveNext()?(s++,this.yieldReturn(i.current())):!l&&r.moveNext()?this.yieldReturn(r.current()):!1},function(){try{o.dispose(i)}finally{o.dispose(r)}})})},c.prototype.alternate=function(e){var t=this;return new c(function(){var n,i,r,s;return new a(function(){r=e instanceof Array||null!=e.getEnumerator?c.from(c.from(e).toArray()):c.make(e),i=t.getEnumerator(),i.moveNext()&&(n=i.current())},function(){for(;;){if(null!=s){if(s.moveNext())return this.yieldReturn(s.current());s=null}{if(null!=n||!i.moveNext()){if(null!=n){var e=n;return n=null,this.yieldReturn(e)}return this.yieldBreak()}n=i.current(),s=r.getEnumerator()}}},function(){try{o.dispose(i)}finally{o.dispose(s)}})})},c.prototype.contains=function(e,t){t=o.createLambda(t);var n=this.getEnumerator();try{for(;n.moveNext();)if(t(n.current())===e)return!0;return!1}finally{o.dispose(n)}},c.prototype.defaultIfEmpty=function(e){var n=this;return e===t&&(e=null),new c(function(){var t,i=!0;return new a(function(){t=n.getEnumerator()},function(){return t.moveNext()?(i=!1,this.yieldReturn(t.current())):i?(i=!1,this.yieldReturn(e)):!1},function(){o.dispose(t)})})},c.prototype.distinct=function(e){return this.except(c.empty(),e)},c.prototype.distinctUntilChanged=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n,i,r;return new a(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current());if(r)return r=!1,i=t,this.yieldReturn(n.current());if(i!==t)return i=t,this.yieldReturn(n.current())}return this.yieldBreak()},function(){o.dispose(n)})})},c.prototype.except=function(e,t){t=o.createLambda(t);var n=this;return new c(function(){var i,r;return new a(function(){i=n.getEnumerator(),r=new m(t),c.from(e).forEach(function(e){r.add(e)})},function(){for(;i.moveNext();){var e=i.current();if(!r.contains(e))return r.add(e),this.yieldReturn(e)}return!1},function(){o.dispose(i)})})},c.prototype.intersect=function(e,t){t=o.createLambda(t);var n=this;return new c(function(){var i,r,s;return new a(function(){i=n.getEnumerator(),r=new m(t),c.from(e).forEach(function(e){r.add(e)}),s=new m(t)},function(){for(;i.moveNext();){var e=i.current();if(!s.contains(e)&&r.contains(e))return s.add(e),this.yieldReturn(e)}return!1},function(){o.dispose(i)})})},c.prototype.sequenceEqual=function(e,t){t=o.createLambda(t);var n=this.getEnumerator();try{var i=c.from(e).getEnumerator();try{for(;n.moveNext();)if(!i.moveNext()||t(n.current())!==t(i.current()))return!1;return i.moveNext()?!1:!0}finally{o.dispose(i)}}finally{o.dispose(n)}},c.prototype.union=function(e,n){n=o.createLambda(n);var i=this;return new c(function(){var r,s,l;return new a(function(){r=i.getEnumerator(),l=new m(n)},function(){var n;if(s===t){for(;r.moveNext();)if(n=r.current(),!l.contains(n))return l.add(n),this.yieldReturn(n);s=c.from(e).getEnumerator()}for(;s.moveNext();)if(n=s.current(),!l.contains(n))return l.add(n),this.yieldReturn(n);return!1},function(){try{o.dispose(r)}finally{o.dispose(s)}})})},c.prototype.orderBy=function(e){return new u(this,e,!1)},c.prototype.orderByDescending=function(e){return new u(this,e,!0)},c.prototype.reverse=function(){var e=this;return new c(function(){var t,i;return new a(function(){t=e.toArray(),i=t.length},function(){return i>0?this.yieldReturn(t[--i]):!1},n.Blank)})},c.prototype.shuffle=function(){var e=this;return new c(function(){var t;return new a(function(){t=e.toArray()},function(){if(t.length>0){var e=Math.floor(Math.random()*t.length);return this.yieldReturn(t.splice(e,1)[0])}return!1},n.Blank)})},c.prototype.weightedSample=function(e){e=o.createLambda(e);var t=this;return new c(function(){var i,r=0;return new a(function(){i=t.choose(function(t){var n=e(t);return 0>=n?null:(r+=n,{value:t,bound:r})}).toArray()},function(){if(i.length>0){for(var e=Math.floor(Math.random()*r)+1,t=-1,n=i.length;n-t>1;){var o=Math.floor((t+n)/2);i[o].bound>=e?n=o:t=o}return this.yieldReturn(i[n].value)}return this.yieldBreak()},n.Blank)})},c.prototype.groupBy=function(e,t,n,i){var r=this;return e=o.createLambda(e),t=o.createLambda(t),null!=n&&(n=o.createLambda(n)),i=o.createLambda(i),new c(function(){var s;return new a(function(){s=r.toLookup(e,t,i).toEnumerable().getEnumerator()},function(){for(;s.moveNext();)return null==n?this.yieldReturn(s.current()):this.yieldReturn(n(s.current().key(),s.current()));return!1},function(){o.dispose(s)})})},c.prototype.partitionBy=function(e,t,n,i){var r=this;e=o.createLambda(e),t=o.createLambda(t),i=o.createLambda(i);var s;return null==n?(s=!1,n=function(e,t){return new y(e,t)}):(s=!0,n=o.createLambda(n)),new c(function(){var l,u,h,p=[];return new a(function(){l=r.getEnumerator(),l.moveNext()&&(u=e(l.current()),h=i(u),p.push(t(l.current())))},function(){for(var r;1==(r=l.moveNext())&&h===i(e(l.current()));)p.push(t(l.current()));if(p.length>0){var o=s?n(u,c.from(p)):n(u,p);return r?(u=e(l.current()),h=i(u),p=[t(l.current())]):p=[],this.yieldReturn(o)}return!1},function(){o.dispose(l)})})},c.prototype.buffer=function(e){var t=this;return new c(function(){var n;return new a(function(){n=t.getEnumerator()},function(){for(var t=[],i=0;n.moveNext();)if(t.push(n.current()),++i>=e)return this.yieldReturn(t);return t.length>0?this.yieldReturn(t):!1},function(){o.dispose(n)})})},c.prototype.aggregate=function(e,t,n){return(n=o.createLambda(n))(this.scan(e,t,n).last())},c.prototype.average=function(e){e=o.createLambda(e);var t=0,n=0;return this.forEach(function(i){t+=e(i),++n}),t/n},c.prototype.count=function(e){e=null==e?n.True:o.createLambda(e);var t=0;return this.forEach(function(n,i){e(n,i)&&++t}),t},c.prototype.max=function(e){return null==e&&(e=n.Identity),this.select(e).aggregate(function(e,t){return e>t?e:t})},c.prototype.min=function(e){return null==e&&(e=n.Identity),this.select(e).aggregate(function(e,t){return t>e?e:t})},c.prototype.maxBy=function(e){return e=o.createLambda(e),this.aggregate(function(t,n){return e(t)>e(n)?t:n})},c.prototype.minBy=function(e){return e=o.createLambda(e),this.aggregate(function(t,n){return e(t)<e(n)?t:n})},c.prototype.sum=function(e){return null==e&&(e=n.Identity),this.select(e).aggregate(0,function(e,t){return e+t})},c.prototype.elementAt=function(e){var t,n=!1;if(this.forEach(function(i,r){return r==e?(t=i,n=!0,!1):void 0}),!n)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return t},c.prototype.elementAtOrDefault=function(e,n){n===t&&(n=null);var i,r=!1;return this.forEach(function(t,n){return n==e?(i=t,r=!0,!1):void 0}),r?i:n},c.prototype.first=function(e){if(null!=e)return this.where(e).first();var t,n=!1;if(this.forEach(function(e){return t=e,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return t},c.prototype.firstOrDefault=function(e,n){if(n===t&&(n=null),null!=e)return this.where(e).firstOrDefault(null,n);var i,r=!1;return this.forEach(function(e){return i=e,r=!0,!1}),r?i:n},c.prototype.last=function(e){if(null!=e)return this.where(e).last();var t,n=!1;if(this.forEach(function(e){n=!0,t=e}),!n)throw new Error("last:No element satisfies the condition.");return t},c.prototype.lastOrDefault=function(e,n){if(n===t&&(n=null),null!=e)return this.where(e).lastOrDefault(null,n);var i,r=!1;return this.forEach(function(e){r=!0,i=e}),r?i:n},c.prototype.single=function(e){if(null!=e)return this.where(e).single();var t,n=!1;if(this.forEach(function(e){if(n)throw new Error("single:sequence contains more than one element.");n=!0,t=e}),!n)throw new Error("single:No element satisfies the condition.");return t},c.prototype.singleOrDefault=function(e,n){if(n===t&&(n=null),null!=e)return this.where(e).singleOrDefault(null,n);var i,r=!1;return this.forEach(function(e){if(r)throw new Error("single:sequence contains more than one element.");r=!0,i=e}),r?i:n},c.prototype.skip=function(e){var t=this;return new c(function(){var n,i=0;return new a(function(){for(n=t.getEnumerator();i++<e&&n.moveNext(););},function(){return n.moveNext()?this.yieldReturn(n.current()):!1},function(){o.dispose(n)})})},c.prototype.skipWhile=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n,i=0,r=!1;return new a(function(){n=t.getEnumerator()},function(){for(;!r;){if(!n.moveNext())return!1;if(!e(n.current(),i++))return r=!0,this.yieldReturn(n.current())}return n.moveNext()?this.yieldReturn(n.current()):!1},function(){o.dispose(n)})})},c.prototype.take=function(e){var t=this;return new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){return i++<e&&n.moveNext()?this.yieldReturn(n.current()):!1},function(){o.dispose(n)})})},c.prototype.takeWhile=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){return n.moveNext()&&e(n.current(),i++)?this.yieldReturn(n.current()):!1},function(){o.dispose(n)})})},c.prototype.takeExceptLast=function(e){null==e&&(e=1);var t=this;return new c(function(){if(0>=e)return t.getEnumerator();var n,i=[];return new a(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){if(i.length==e)return i.push(n.current()),this.yieldReturn(i.shift());i.push(n.current())}return!1},function(){o.dispose(n)})})},c.prototype.takeFromLast=function(e){if(0>=e||null==e)return c.empty();var t=this;return new c(function(){var n,i,r=[];return new a(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)r.length==e&&r.shift(),r.push(n.current());return null==i&&(i=c.from(r).getEnumerator()),i.moveNext()?this.yieldReturn(i.current()):!1},function(){o.dispose(i)})})},c.prototype.indexOf=function(e){var t=null;return typeof e===i.Function?this.forEach(function(n,i){return e(n,i)?(t=i,!1):void 0}):this.forEach(function(n,i){return n===e?(t=i,!1):void 0}),null!==t?t:-1},c.prototype.lastIndexOf=function(e){var t=-1;return typeof e===i.Function?this.forEach(function(n,i){e(n,i)&&(t=i)}):this.forEach(function(n,i){n===e&&(t=i)}),t},c.prototype.cast=function(){return this},c.prototype.asEnumerable=function(){return c.from(this)},c.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},c.prototype.toLookup=function(e,n,i){e=o.createLambda(e),n=o.createLambda(n),i=o.createLambda(i);var r=new m(i);return this.forEach(function(i){var o=e(i),s=n(i),a=r.get(o);a!==t?a.push(s):r.add(o,[s])}),new v(r)},c.prototype.toObject=function(e,t){e=o.createLambda(e),t=o.createLambda(t);var n={};return this.forEach(function(i){n[e(i)]=t(i)}),n},c.prototype.toDictionary=function(e,t,n){e=o.createLambda(e),t=o.createLambda(t),n=o.createLambda(n);var i=new m(n);return this.forEach(function(n){i.add(e(n),t(n))}),i},c.prototype.toJSONString=function(e,t){if(typeof JSON===i.Undefined||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),e,t)},c.prototype.toJoinedString=function(e,t){return null==e&&(e=""),null==t&&(t=n.Identity),this.select(t).toArray().join(e)},c.prototype.doAction=function(e){var t=this;return e=o.createLambda(e),new c(function(){var n,i=0;return new a(function(){n=t.getEnumerator()},function(){return n.moveNext()?(e(n.current(),i++),this.yieldReturn(n.current())):!1},function(){o.dispose(n)})})},c.prototype.forEach=function(e){e=o.createLambda(e);var t=0,n=this.getEnumerator();try{for(;n.moveNext()&&e(n.current(),t++)!==!1;);}finally{o.dispose(n)}},c.prototype.write=function(e,t){null==e&&(e=""),t=o.createLambda(t);var n=!0;this.forEach(function(i){n?n=!1:document.write(e),document.write(t(i))})},c.prototype.writeLine=function(e){e=o.createLambda(e),this.forEach(function(t){document.writeln(e(t)+"<br />")})},c.prototype.force=function(){var e=this.getEnumerator();try{for(;e.moveNext(););}finally{o.dispose(e)}},c.prototype.letBind=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n;return new a(function(){n=c.from(e(t)).getEnumerator()},function(){return n.moveNext()?this.yieldReturn(n.current()):!1},function(){o.dispose(n)})})},c.prototype.share=function(){var e,t=this,i=!1;return new p(function(){return new a(function(){null==e&&(e=t.getEnumerator())},function(){if(i)throw new Error("enumerator is disposed");return e.moveNext()?this.yieldReturn(e.current()):!1},n.Blank)},function(){i=!0,o.dispose(e)})},c.prototype.memoize=function(){var e,t,i=this,r=!1;return new p(function(){var o=-1;return new a(function(){null==t&&(t=i.getEnumerator(),e=[])},function(){if(r)throw new Error("enumerator is disposed");return o++,e.length<=o?t.moveNext()?this.yieldReturn(e[o]=t.current()):!1:this.yieldReturn(e[o])},n.Blank)},function(){r=!0,o.dispose(t),e=null})},c.prototype.catchError=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n;return new a(function(){n=t.getEnumerator()},function(){try{return n.moveNext()?this.yieldReturn(n.current()):!1}catch(t){return e(t),!1}},function(){o.dispose(n)})})},c.prototype.finallyAction=function(e){e=o.createLambda(e);var t=this;return new c(function(){var n;return new a(function(){n=t.getEnumerator()},function(){return n.moveNext()?this.yieldReturn(n.current()):!1},function(){try{o.dispose(n)}finally{e()}})})},c.prototype.log=function(e){return e=o.createLambda(e),this.doAction(function(t){typeof console!==i.Undefined&&console.log(e(t))})},c.prototype.trace=function(e,t){return null==e&&(e="Trace"),t=o.createLambda(t),this.doAction(function(n){typeof console!==i.Undefined&&console.log(e,t(n))})};var u=function(e,t,n,i){this.source=e,this.keySelector=o.createLambda(t),this.descending=n,this.parent=i};u.prototype=new c,u.prototype.createOrderedEnumerable=function(e,t){return new u(this.source,e,t,this)},u.prototype.thenBy=function(e){return this.createOrderedEnumerable(e,!1)},u.prototype.thenByDescending=function(e){return this.createOrderedEnumerable(e,!0)},u.prototype.getEnumerator=function(){var e,t,i=this,r=0;return new a(function(){e=[],t=[],i.source.forEach(function(n,i){e.push(n),t.push(i)});var n=h.create(i,null);n.GenerateKeys(e),t.sort(function(e,t){return n.compare(e,t)})},function(){return r<t.length?this.yieldReturn(e[t[r++]]):!1},n.Blank)};var h=function(e,t,n){this.keySelector=e,this.descending=t,this.child=n,this.keys=null};h.create=function(e,t){var n=new h(e.keySelector,e.descending,t);return null!=e.parent?h.create(e.parent,n):n},h.prototype.GenerateKeys=function(e){for(var t=e.length,n=this.keySelector,i=new Array(t),r=0;t>r;r++)i[r]=n(e[r]);this.keys=i,null!=this.child&&this.child.GenerateKeys(e)},h.prototype.compare=function(e,t){var n=o.compare(this.keys[e],this.keys[t]);return 0==n?null!=this.child?this.child.compare(e,t):o.compare(e,t):this.descending?-n:n};var p=function(e,t){this.dispose=t,c.call(this,e)};p.prototype=new c;var d=function(e){this.getSource=function(){return e}};d.prototype=new c,d.prototype.any=function(e){return null==e?this.getSource().length>0:c.prototype.any.apply(this,arguments)},d.prototype.count=function(e){return null==e?this.getSource().length:c.prototype.count.apply(this,arguments)},d.prototype.elementAt=function(e){var t=this.getSource();return e>=0&&e<t.length?t[e]:c.prototype.elementAt.apply(this,arguments)},d.prototype.elementAtOrDefault=function(e,n){n===t&&(n=null);var i=this.getSource();return e>=0&&e<i.length?i[e]:n},d.prototype.first=function(e){var t=this.getSource();return null==e&&t.length>0?t[0]:c.prototype.first.apply(this,arguments)},d.prototype.firstOrDefault=function(e,n){if(n===t&&(n=null),null!=e)return c.prototype.firstOrDefault.apply(this,arguments);var i=this.getSource();return i.length>0?i[0]:n},d.prototype.last=function(e){var t=this.getSource();return null==e&&t.length>0?t[t.length-1]:c.prototype.last.apply(this,arguments)},d.prototype.lastOrDefault=function(e,n){if(n===t&&(n=null),null!=e)return c.prototype.lastOrDefault.apply(this,arguments);var i=this.getSource();return i.length>0?i[i.length-1]:n},d.prototype.skip=function(e){var t=this.getSource();return new c(function(){var i;return new a(function(){i=0>e?0:e},function(){return i<t.length?this.yieldReturn(t[i++]):!1},n.Blank)})},d.prototype.takeExceptLast=function(e){return null==e&&(e=1),this.take(this.getSource().length-e)},d.prototype.takeFromLast=function(e){return this.skip(this.getSource().length-e)},d.prototype.reverse=function(){var e=this.getSource();return new c(function(){var t;return new a(function(){t=e.length},function(){return t>0?this.yieldReturn(e[--t]):!1},n.Blank)})},d.prototype.sequenceEqual=function(e,t){return(e instanceof d||e instanceof Array)&&null==t&&c.from(e).count()!=this.count()?!1:c.prototype.sequenceEqual.apply(this,arguments)},d.prototype.toJoinedString=function(e,t){var n=this.getSource();return null==t&&n instanceof Array?(null==e&&(e=""),n.join(e)):c.prototype.toJoinedString.apply(this,arguments)},d.prototype.getEnumerator=function(){var e=this.getSource(),t=-1;return{current:function(){return e[t]},moveNext:function(){return++t<e.length},dispose:n.Blank}};var f=function(e,t){this.prevSource=e,this.prevPredicate=t};f.prototype=new c,f.prototype.where=function(e){if(e=o.createLambda(e),e.length<=1){var t=this.prevPredicate,n=function(n){return t(n)&&e(n)};return new f(this.prevSource,n)}return c.prototype.where.call(this,e)},f.prototype.select=function(e){return e=o.createLambda(e),e.length<=1?new g(this.prevSource,this.prevPredicate,e):c.prototype.select.call(this,e)},f.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSource;return new a(function(){e=n.getEnumerator()},function(){for(;e.moveNext();)if(t(e.current()))return this.yieldReturn(e.current());return!1},function(){o.dispose(e)})};var g=function(e,t,n){this.prevSource=e,this.prevPredicate=t,this.prevSelector=n};g.prototype=new c,g.prototype.where=function(e){return e=o.createLambda(e),e.length<=1?new f(this,e):c.prototype.where.call(this,e)},g.prototype.select=function(e){if(e=o.createLambda(e),e.length<=1){var t=this.prevSelector,n=function(n){return e(t(n))};return new g(this.prevSource,this.prevPredicate,n)}return c.prototype.select.call(this,e)},g.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSelector,i=this.prevSource;return new a(function(){e=i.getEnumerator()},function(){for(;e.moveNext();)if(null==t||t(e.current()))return this.yieldReturn(n(e.current()));return!1},function(){o.dispose(e)})};var m=function(){var e=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r=function(e){return null===e?"null":e===t?"undefined":typeof e.toString===i.Function?e.toString():Object.prototype.toString.call(e)},o=function(e,t){this.key=e,this.value=t,this.prev=null,this.next=null},s=function(){this.first=null,this.last=null};s.prototype={addLast:function(e){null!=this.last?(this.last.next=e,e.prev=this.last,this.last=e):this.first=this.last=e},replace:function(e,t){null!=e.prev?(e.prev.next=t,t.prev=e.prev):this.first=t,null!=e.next?(e.next.prev=t,t.next=e.next):this.last=t},remove:function(e){null!=e.prev?e.prev.next=e.next:this.first=e.next,null!=e.next?e.next.prev=e.prev:this.last=e.prev}};var l=function(e){this.countField=0,this.entryList=new s,this.buckets={},this.compareSelector=null==e?n.Identity:e};return l.prototype={add:function(t,n){var i=this.compareSelector(t),s=r(i),a=new o(t,n);if(e(this.buckets,s)){for(var l=this.buckets[s],c=0;c<l.length;c++)if(this.compareSelector(l[c].key)===i)return this.entryList.replace(l[c],a),void(l[c]=a);l.push(a)}else this.buckets[s]=[a];this.countField++,this.entryList.addLast(a)},get:function(n){var i=this.compareSelector(n),o=r(i);if(!e(this.buckets,o))return t;for(var s=this.buckets[o],a=0;a<s.length;a++){var l=s[a];if(this.compareSelector(l.key)===i)return l.value}return t},set:function(t,n){var i=this.compareSelector(t),s=r(i);if(e(this.buckets,s))for(var a=this.buckets[s],l=0;l<a.length;l++)if(this.compareSelector(a[l].key)===i){var c=new o(t,n);return this.entryList.replace(a[l],c),a[l]=c,!0}return!1},contains:function(t){var n=this.compareSelector(t),i=r(n);if(!e(this.buckets,i))return!1;for(var o=this.buckets[i],s=0;s<o.length;s++)if(this.compareSelector(o[s].key)===n)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new s},remove:function(t){var n=this.compareSelector(t),i=r(n);if(e(this.buckets,i))for(var o=this.buckets[i],s=0;s<o.length;s++)if(this.compareSelector(o[s].key)===n)return this.entryList.remove(o[s]),o.splice(s,1),0==o.length&&delete this.buckets[i],void this.countField--},count:function(){return this.countField},toEnumerable:function(){var e=this;return new c(function(){var t;return new a(function(){t=e.entryList.first},function(){if(null!=t){var e={key:t.key,value:t.value};return t=t.next,this.yieldReturn(e)}return!1},n.Blank)})}},l}(),v=function(e){this.count=function(){return e.count()},this.get=function(t){return c.from(e.get(t))},this.contains=function(t){return e.contains(t)},this.toEnumerable=function(){return e.toEnumerable().select(function(e){return new y(e.key,e.value)})}},y=function(e,t){this.key=function(){return e},d.call(this,t)};y.prototype=new d,typeof define===i.Function&&define.amd?define("linqjs",[],function(){return c}):typeof module!==i.Undefined&&module.exports?module.exports=c:e.Enumerable=c}(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define("angular-cache",["angular"],t):"object"==typeof exports?exports.angularCacheModuleName=t(require("angular")):e.angularCacheModuleName=t(e.angular)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(){this.$get=function(){return s.BinaryHeap}}function r(){this.defaults=s.defaults,this.defaults.storagePrefix="angular-cache.caches.",this.$get=["$q",function(e){return s.utils.Promise=e,s}]}var o=n(1),s=n(2);s.utils.equals=o.equals,s.utils.isObject=o.isObject,s.utils.fromJson=o.fromJson,o.module("angular-cache",[]).provider("BinaryHeap",i).provider("CacheFactory",r),e.exports="angular-cache";try{e.exports.name="angular-cache"}catch(a){}},function(t,n){t.exports=e},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){var t=[],n=void 0;if(!d.isObject(e))return t;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t}function r(e){return e&&"function"==typeof e.then}function o(e){return d.isNumber(e)?e.toString():e}function s(e){var t={},n=void 0;if(!d.isObject(e))return t;for(n in e)e.hasOwnProperty(n)&&(t[n]=n);return t}function a(e,t){if(e in g)throw new Error(e+" already exists!");if(!d.isString(e))throw new Error("cacheId must be a string!");var n={},a={},l=null,h=new u(function(e){return e.expires},d.equals),p=new u(function(e){return e.accessed},d.equals),m=g[e]={$$id:e,destroy:function(){clearInterval(this.$$cacheFlushIntervalId),clearInterval(this.$$recycleFreqId),this.removeAll(),l&&(l().removeItem(this.$$prefix+".keys"),l().removeItem(this.$$prefix)),l=null,n=null,p=null,h=null,this.$$prefix=null,delete g[this.$$id]},disable:function(){this.$$disabled=!0},enable:function(){delete this.$$disabled},get:function(e,t){var i=this;if(Array.isArray(e)){var r=function(){var n=e,r=[];return n.forEach(function(e){var n=i.get(e,t);null!==n&&void 0!==n&&r.push(n)}),{v:r}}();if("object"===("undefined"==typeof r?"undefined":c(r)))return r.v}else if(e=o(e),this.$$disabled)return;if(t=t||{},!d.isString(e))throw new Error("key must be a string!");if(t&&!d.isObject(t))throw new Error("options must be an object!");if(t.onExpire&&!d.isFunction(t.onExpire))throw new Error("options.onExpire must be a function!");var s=void 0;if(l){if(a[e])return a[e];var u=l().getItem(this.$$prefix+".data."+e);if(!u)return;s=d.fromJson(u)}else if(d.isObject(n)){if(!(e in n))return;s=n[e]}var h=s.value,f=(new Date).getTime();return l?(p.remove({key:e,accessed:s.accessed}),s.accessed=f,p.push({key:e,accessed:f})):(p.remove(s),s.accessed=f,p.push(s)),"passive"===this.$$deleteOnExpire&&"expires"in s&&s.expires<f?(this.remove(e),this.$$onExpire?this.$$onExpire(e,s.value,t.onExpire):t.onExpire&&t.onExpire.call(this,e,s.value),h=void 0):l&&l().setItem(this.$$prefix+".data."+e,JSON.stringify(s)),h},info:function(e){if(e){var t=void 0;if(l){var i=l().getItem(this.$$prefix+".data."+e);return i?(t=d.fromJson(i),{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):void 0}return d.isObject(n)&&e in n?(t=n[e],{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):void 0}return{id:this.$$id,capacity:this.$$capacity,maxAge:this.$$maxAge,deleteOnExpire:this.$$deleteOnExpire,onExpire:this.$$onExpire,cacheFlushInterval:this.$$cacheFlushInterval,recycleFreq:this.$$recycleFreq,storageMode:this.$$storageMode,storageImpl:l?l():void 0,disabled:!!this.$$disabled,size:p&&p.size()||0}},keys:function(){if(l){var e=l().getItem(this.$$prefix+".keys");return e?d.fromJson(e):[]}return i(n)},keySet:function(){if(l){var e=l().getItem(this.$$prefix+".keys"),t={};if(e)for(var i=d.fromJson(e),r=0;r<i.length;r++)t[i[r]]=i[r];return t}return s(n)},put:function(e,t,i){var s=this;i||(i={});var c="storeOnResolve"in i?!!i.storeOnResolve:this.$$storeOnResolve,u="storeOnReject"in i?!!i.storeOnReject:this.$$storeOnReject,f=function(t,n){return function(i){if(t&&(delete a[e],d.isObject(i)&&"status"in i&&"data"in i?(i=[i.status,i.data,i.headers(),i.statusText],s.put(e,i)):s.put(e,i)),n){if(d.Promise)return d.Promise.reject(i);throw i}return i}};if(!this.$$disabled&&d.isObject(n)&&null!==t&&void 0!==t){if(e=o(e),!d.isString(e))throw new Error("key must be a string!");var g=(new Date).getTime(),m={key:e,value:r(t)?t.then(f(c,!1),f(u,!0)):t,created:void 0===i.created?g:i.created,accessed:void 0===i.accessed?g:i.accessed};if(i.maxAge&&(m.maxAge=i.maxAge),void 0===i.expires?m.expires=m.created+(m.maxAge||this.$$maxAge):m.expires=i.expires,l){if(r(m.value))return a[e]=m.value,a[e];var v=l().getItem(this.$$prefix+".keys"),y=v?d.fromJson(v):[],_=l().getItem(this.$$prefix+".data."+e);_&&this.remove(e),h.push({key:e,expires:m.expires}),p.push({key:e,accessed:m.accessed}),l().setItem(this.$$prefix+".data."+e,JSON.stringify(m));for(var w=!1,b=0;b<y.length;b++)if(y[b]===e){w=!0;break}w||y.push(e),l().setItem(this.$$prefix+".keys",JSON.stringify(y))}else n[e]&&this.remove(e),h.push(m),p.push(m),n[e]=m,delete a[e];return p.size()>this.$$capacity&&this.remove(p.peek().key),t}},remove:function(e){if(e+="",delete a[e],l){var t=l().getItem(this.$$prefix+".data."+e);if(t){var i=d.fromJson(t);p.remove({key:e,accessed:i.accessed}),h.remove({key:e,expires:i.expires}),l().removeItem(this.$$prefix+".data."+e);var r=l().getItem(this.$$prefix+".keys"),o=r?d.fromJson(r):[],s=o.indexOf(e);return s>=0&&o.splice(s,1),l().setItem(this.$$prefix+".keys",JSON.stringify(o)),i.value}}else if(d.isObject(n)){var c=n[e]?n[e].value:void 0;return p.remove(n[e]),h.remove(n[e]),n[e]=null,delete n[e],c}},removeAll:function(){if(l){p.removeAll(),h.removeAll();var e=l().getItem(this.$$prefix+".keys");if(e)for(var t=d.fromJson(e),i=0;i<t.length;i++)this.remove(t[i]);l().setItem(this.$$prefix+".keys",JSON.stringify([]))}else if(d.isObject(n)){p.removeAll(),h.removeAll();for(var r in n)n[r]=null;n={}}else p.removeAll(),h.removeAll(),n={};a={}},removeExpired:function(){for(var e=(new Date).getTime(),t={},n=void 0,i=void 0;(i=h.peek())&&i.expires<=e;)t[i.key]=i.value?i.value:null,h.pop();if(l)for(n in t){var r=l().getItem(this.$$prefix+".data."+n);r&&(t[n]=d.fromJson(r).value,this.remove(n))}else for(n in t)this.remove(n);if(this.$$onExpire)for(n in t)this.$$onExpire(n,t[n]);return t},setCacheFlushInterval:function(e){var t=this;if(null===e)delete t.$$cacheFlushInterval;else{if(!d.isNumber(e))throw new Error("cacheFlushInterval must be a number!");if(0>e)throw new Error("cacheFlushInterval must be greater than zero!");e!==t.$$cacheFlushInterval&&(t.$$cacheFlushInterval=e,clearInterval(t.$$cacheFlushIntervalId),t.$$cacheFlushIntervalId=setInterval(function(){t.removeAll()},t.$$cacheFlushInterval))}},setCapacity:function(e){if(null===e)delete this.$$capacity;else{if(!d.isNumber(e))throw new Error("capacity must be a number!");if(0>e)throw new Error("capacity must be greater than zero!");this.$$capacity=e}for(var t={};p.size()>this.$$capacity;)t[p.peek().key]=this.remove(p.peek().key);return t},setDeleteOnExpire:function(e,t){if(null===e)delete this.$$deleteOnExpire;else{if(!d.isString(e))throw new Error("deleteOnExpire must be a string!");if("none"!==e&&"passive"!==e&&"aggressive"!==e)throw new Error('deleteOnExpire must be "none", "passive" or "aggressive"!');this.$$deleteOnExpire=e}t!==!1&&this.setRecycleFreq(this.$$recycleFreq)},setMaxAge:function(e){if(null===e)this.$$maxAge=Number.MAX_VALUE;else{if(!d.isNumber(e))throw new Error("maxAge must be a number!");if(0>e)throw new Error("maxAge must be greater than zero!");this.$$maxAge=e}var t=void 0,r=void 0,o=void 0;if(h.removeAll(),l){var s=l().getItem(this.$$prefix+".keys");for(r=s?d.fromJson(s):[],t=0;t<r.length;t++){o=r[t];var a=l().getItem(this.$$prefix+".data."+o);if(a){var c=d.fromJson(a);this.$$maxAge===Number.MAX_VALUE?c.expires=Number.MAX_VALUE:c.expires=c.created+(c.maxAge||this.$$maxAge),h.push({key:o,expires:c.expires})}}}else for(r=i(n),t=0;t<r.length;t++)o=r[t],this.$$maxAge===Number.MAX_VALUE?n[o].expires=Number.MAX_VALUE:n[o].expires=n[o].created+(n[o].maxAge||this.$$maxAge),h.push(n[o]);return"aggressive"===this.$$deleteOnExpire?this.removeExpired():{}},setOnExpire:function(e){if(null===e)delete this.$$onExpire;else{if(!d.isFunction(e))throw new Error("onExpire must be a function!");this.$$onExpire=e}},setOptions:function(e,t){if(e=e||{},t=!!t,!d.isObject(e))throw new Error("cacheOptions must be an object!");"storagePrefix"in e?this.$$storagePrefix=e.storagePrefix:t&&(this.$$storagePrefix=f.storagePrefix),this.$$prefix=this.$$storagePrefix+this.$$id,"disabled"in e?this.$$disabled=!!e.disabled:t&&(this.$$disabled=f.disabled),"deleteOnExpire"in e?this.setDeleteOnExpire(e.deleteOnExpire,!1):t&&this.setDeleteOnExpire(f.deleteOnExpire,!1),"recycleFreq"in e?this.setRecycleFreq(e.recycleFreq):t&&this.setRecycleFreq(f.recycleFreq),"maxAge"in e?this.setMaxAge(e.maxAge):t&&this.setMaxAge(f.maxAge),"storeOnResolve"in e?this.$$storeOnResolve=!!e.storeOnResolve:t&&(this.$$storeOnResolve=f.storeOnResolve),"storeOnReject"in e?this.$$storeOnReject=!!e.storeOnReject:t&&(this.$$storeOnReject=f.storeOnReject),"capacity"in e?this.setCapacity(e.capacity):t&&this.setCapacity(f.capacity),"cacheFlushInterval"in e?this.setCacheFlushInterval(e.cacheFlushInterval):t&&this.setCacheFlushInterval(f.cacheFlushInterval),"onExpire"in e?this.setOnExpire(e.onExpire):t&&this.setOnExpire(f.onExpire),"storageMode"in e||"storageImpl"in e?this.setStorageMode(e.storageMode||f.storageMode,e.storageImpl||f.storageImpl):t&&this.setStorageMode(f.storageMode,f.storageImpl)},setRecycleFreq:function(e){if(null===e)delete this.$$recycleFreq;else{if(!d.isNumber(e))throw new Error("recycleFreq must be a number!");
if(0>e)throw new Error("recycleFreq must be greater than zero!");this.$$recycleFreq=e}clearInterval(this.$$recycleFreqId),"aggressive"===this.$$deleteOnExpire?!function(e){e.$$recycleFreqId=setInterval(function(){e.removeExpired()},e.$$recycleFreq)}(this):delete this.$$recycleFreqId},setStorageMode:function(e,t){function i(e,t){var n=this.keys(),i=n.length;if(i){for(var r=void 0,o=d.isObject(t),l=0;i>l;l++){if(r=n[l],e){var c=e().getItem(this.$$prefix+".data."+r);c&&(a[r]=d.fromJson(c))}else o&&(a[r]=t[r]);this.remove(r)}s=!0}}if(!d.isString(e))throw new Error("storageMode must be a string!");if("memory"!==e&&"localStorage"!==e&&"sessionStorage"!==e)throw new Error('storageMode must be "memory", "localStorage" or "sessionStorage"!');var r=l,o=n,s=!1,a={};if(this.$$initializing||i.call(this,r,o),this.$$storageMode=e,t){if(!d.isObject(t))throw new Error("storageImpl must be an object!");if(!("setItem"in t&&"function"==typeof t.setItem))throw new Error('storageImpl must implement "setItem(key, value)"!');if(!("getItem"in t&&"function"==typeof t.getItem))throw new Error('storageImpl must implement "getItem(key)"!');if(!("removeItem"in t)||"function"!=typeof t.removeItem)throw new Error('storageImpl must implement "removeItem(key)"!');l=function(){return t}}else if("localStorage"===this.$$storageMode)try{localStorage.setItem("cachefactory","cachefactory"),localStorage.removeItem("cachefactory"),l=function(){return localStorage}}catch(c){l=null,this.$$storageMode="memory"}else if("sessionStorage"===this.$$storageMode)try{sessionStorage.setItem("cachefactory","cachefactory"),sessionStorage.removeItem("cachefactory"),l=function(){return sessionStorage}}catch(c){l=null,this.$$storageMode="memory"}else l=null,this.$$storageModel="memory";if(this.$$initializing&&i.call(this,l,n),s){var u=void 0;for(var h in a)u=a[h],this.put(h,u.value,{created:u.created,accessed:u.accessed,expires:u.expires})}},touch:function(e){var t=this;if(e){var n=this.get(e,{onExpire:function(e,n){return t.put(e,n)}});n&&this.put(e,n)}else for(var i=this.keys(),r=0;r<i.length;r++)this.touch(i[r])},values:function(){for(var e=this.keys(),t=[],n=0;n<e.length;n++)t.push(this.get(e[n]));return t}};return m.$$initializing=!0,m.setOptions(t,!0),m.$$initializing=!1,m}function l(e,t){return a(e,t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=n(1),h=null;try{h=window.Promise}catch(p){}var d={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isObject:function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":c(e))},isFunction:function(e){return"function"==typeof e},fromJson:function(e){return JSON.parse(e)},equals:function(e,t){return e===t},Promise:h},f={capacity:Number.MAX_VALUE,maxAge:Number.MAX_VALUE,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1e3,storageMode:"memory",storageImpl:null,disabled:!1,storagePrefix:"cachefactory.caches.",storeOnResolve:!1,storeOnReject:!1},g={};l.createCache=a,l.defaults=f,l.info=function(){var e=i(g),t={size:e.length,caches:{}};for(var n in f)f.hasOwnProperty(n)&&(t[n]=f[n]);for(var r=0;r<e.length;r++){var o=e[r];t.caches[o]=g[o].info()}return t},l.get=function(e){return g[e]},l.keySet=function(){return s(g)},l.keys=function(){return i(g)},l.destroy=function(e){g[e]&&(g[e].destroy(),delete g[e])},l.destroyAll=function(){for(var e in g)g[e].destroy();g={}},l.clearAll=function(){for(var e in g)g[e].removeAll()},l.removeExpiredFromAll=function(){var e={};for(var t in g)e[t]=g[t].removeExpired();return e},l.enableAll=function(){for(var e in g)g[e].$$disabled=!1},l.disableAll=function(){for(var e in g)g[e].$$disabled=!0},l.touchAll=function(){for(var e in g)g[e].touch()},l.utils=d,l.BinaryHeap=u,e.exports=l},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e,t,n){for(var i=e[n],r=t(i);n>0;){var o=Math.floor((n+1)/2)-1,s=e[o];if(r>=t(s))break;e[o]=i,e[n]=s,n=o}}function r(e,t){if(e||(e=function(e){return e}),t||(t=function(e,t){return e===t}),"function"!=typeof e)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if("function"!=typeof t)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');this.weightFunc=e,this.compareFunc=t,this.heap=[]}var o=function(e,t,n){for(var i=e.length,r=e[n],o=t(r);;){var s=2*(n+1),a=s-1,l=null;if(i>a){var c=e[a],u=t(c);o>u&&(l=a)}if(i>s){var h=e[s],p=t(h);p<(null===l?o:t(e[a]))&&(l=s)}if(null===l)break;e[n]=e[l],e[l]=r,n=l}},s=r.prototype;s.push=function(e){this.heap.push(e),i(this.heap,this.weightFunc,this.heap.length-1)},s.peek=function(){return this.heap[0]},s.pop=function(){var e=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,o(this.heap,this.weightFunc,0)),e},s.remove=function(e){for(var t=this.heap.length,n=0;t>n;n++)if(this.compareFunc(this.heap[n],e)){var r=this.heap[n],s=this.heap.pop();return n!==t-1&&(this.heap[n]=s,i(this.heap,this.weightFunc,n),o(this.heap,this.weightFunc,n)),r}return null},s.removeAll=function(){this.heap=[]},s.size=function(){return this.heap.length},e.exports=r}])})}])})}])}),function(){function e(n,i){t(n),i=i||{};var r=this;this.key=n,this.config=e.Util.extend(e.getGlobalConfig(),i.cluster?e.getClusterConfig(i.cluster):{},i),this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new e.Timeline(this.key,this.sessionID,{cluster:this.config.cluster,features:e.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e.Timeline.INFO,version:e.VERSION}),this.config.disableStats||(this.timelineSender=new e.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/jsonp"}));var o=function(t){var n=e.Util.extend({},r.config,t);return e.StrategyBuilder.build(e.getDefaultStrategy(n),n)};this.connection=new e.ConnectionManager(this.key,e.Util.extend({getStrategy:o,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||r.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&r.connect()}function t(t){(null===t||void 0===t)&&e.warn("Warning","You must pass your app key when you instantiate Pusher.")}var n=e.prototype;e.instances=[],e.isReady=!1,e.debug=function(){e.log&&e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){var t=e.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(t):window.console.log&&window.console.log(t)),e.log&&e.log(t)},e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;n>t;t++)e.instances[t].connect()},n.channel=function(e){return this.channels.find(e)},n.allChannels=function(){return this.channels.all()},n.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),n=this.timelineSender;this.timelineSenderTimer=new e.PeriodicTimer(6e4,function(){n.send(t)})}},n.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},n.bind=function(e,t){return this.global_emitter.bind(e,t),this},n.bind_all=function(e){return this.global_emitter.bind_all(e),this},n.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},n.subscribe=function(e){var t=this.channels.add(e,this);return"connected"===this.connection.state&&t.subscribe(),t},n.unsubscribe=function(e){var t=this.channels.remove(e);"connected"===this.connection.state&&t.unsubscribe()},n.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},n.isEncrypted=function(){return"https:"===e.Util.getDocument().location.protocol?!0:Boolean(this.config.encrypted)},e.HTTP={},this.Pusher=e}.call(this),function(){function e(e){window.clearTimeout(e)}function t(e){window.clearInterval(e)}function n(e,t,n,i){var r=this;this.clear=t,this.timer=e(function(){null!==r.timer&&(r.timer=i(r.timer))},n)}var i=n.prototype;i.isRunning=function(){return null!==this.timer},i.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Pusher.Timer=function(t,i){return new n(setTimeout,e,t,function(e){return i(),null})},Pusher.PeriodicTimer=function(e,i){return new n(setInterval,t,e,function(e){return i(),e})}}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new Pusher.Timer(0,e)},extend:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?e[i]=Pusher.Util.extend(e[i]||{},n[i]):e[i]=n[i]}return e},stringify:function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):void 0===window.JSON?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var i=0,r=e.length;r>i;i++)if(e[i]===t)return i;return-1},objectApply:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},keys:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push(n)}),t},values:function(e){var t=[];return Pusher.Util.objectApply(e,function(e){t.push(e)}),t},apply:function(e,t,n){for(var i=0;i<e.length;i++)t.call(n||window,e[i],i,e)},map:function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i,e,n));return n},mapObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(e,i){n[i]=t(e)}),n},filter:function(e,t){t=t||function(e){return!!e};for(var n=[],i=0;i<e.length;i++)t(e[i],i,e,n)&&n.push(e[i]);return n},filterObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(i,r){(t&&t(i,r,e,n)||Boolean(i))&&(n[r]=i)}),n},flatten:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push([n,e])}),t},any:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},all:function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}},getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(e){return e.isSupported({})}))},addWindowListener:function(e,t){var n=Pusher.Util.getWindow();void 0!==n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent("on"+e,t)},removeWindowListener:function(e,t){var n=Pusher.Util.getWindow();void 0!==n.addEventListener?n.removeEventListener(e,t,!1):n.detachEvent("on"+e,t)},isXHRSupported:function(){var e=window.XMLHttpRequest;return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=Pusher.Util.getDocument().location.protocol;return Boolean(window.XDomainRequest)&&n===t}}}.call(this),function(){Pusher.VERSION="2.2.4",Pusher.PROTOCOL=7,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://js.pusher.com/",Pusher.dependency_suffix="",Pusher.getDefaultStrategy=function(e){var t;return t=e.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":http_fallback_loop"]]],[":http_fallback_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}.call(this),function(){function e(e){var t=function(t){Error.call(this,t),this.name=e};return Pusher.Util.extend(t.prototype,Error.prototype),t}Pusher.Errors={BadEventName:e("BadEventName"),RequestTimedOut:e("RequestTimedOut"),TransportPriorityTooLow:e("TransportPriorityTooLow"),TransportClosed:e("TransportClosed"),UnsupportedTransport:e("UnsupportedTransport"),UnsupportedStrategy:e("UnsupportedStrategy")}}.call(this),function(){function e(e){this.callbacks=new t,this.global_callbacks=[],this.failThrough=e}function t(){this._callbacks={}}function n(e){return"_"+e}var i=e.prototype;i.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},i.bind_all=function(e){return this.global_callbacks.push(e),this},i.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},i.unbind_all=function(e,t){return this.callbacks.remove(e,t),this},i.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var i=this.callbacks.get(e);if(i&&i.length>0)for(n=0;n<i.length;n++)i[n].fn.call(i[n].context||window,t);else this.failThrough&&this.failThrough(e,t);return this},t.prototype.get=function(e){return this._callbacks[n(e)]},t.prototype.add=function(e,t,i){var r=n(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:i})},t.prototype.remove=function(e,t,i){if(!e&&!t&&!i)return void(this._callbacks={});var r=e?[n(e)]:Pusher.Util.keys(this._callbacks);t||i?Pusher.Util.apply(r,function(e){this._callbacks[e]=Pusher.Util.filter(this._callbacks[e]||[],function(e){return t&&t!==e.fn||i&&i!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this):Pusher.Util.apply(r,function(e){delete this._callbacks[e]},this)},Pusher.EventsDispatcher=e}.call(this),function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}var t=e.prototype;t.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,i=this.name+"["+t+"]",r=!1,o=function(){r||(e.apply(null,arguments),r=!0)};return this[t]=o,{number:t,id:n,name:i,callback:o}},t.remove=function(e){delete this[e.number]},Pusher.ScriptReceiverFactory=e,Pusher.ScriptReceivers=new e("_pusher_script_","Pusher.ScriptReceivers")}.call(this),function(){function e(e){this.src=e}var t=e.prototype;t.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){("loaded"===t.script.readyState||"complete"===t.script.readyState)&&e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(t.script,i.firstChild),t.errorScript&&i.insertBefore(t.errorScript,t.script.nextSibling)},t.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},Pusher.ScriptRequest=e}.call(this),function(){function e(e){this.options=e,this.receivers=e.receivers||Pusher.ScriptReceivers,this.loading={}}var t=e.prototype;t.load=function(e,t,n){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(n);else{i.loading[e]=[n];var r=new Pusher.ScriptRequest(i.getPath(e,t)),o=i.receivers.create(function(t){if(i.receivers.remove(o),i.loading[e]){var n=i.loading[e];delete i.loading[e];for(var s=function(e){e||r.cleanup()},a=0;a<n.length;a++)n[a](t,s)}});r.send(o)}},t.getRoot=function(e){var t,n=Pusher.Util.getDocument().location.protocol;return t=e&&e.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version},t.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},Pusher.DependencyLoader=e}.call(this),function(){function e(){Pusher.ready()}function t(e){document.body?e():setTimeout(function(){t(e)},0)}function n(){t(e)}Pusher.DependenciesReceivers=new Pusher.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix,receivers:Pusher.DependenciesReceivers}),window.JSON?n():Pusher.Dependencies.load("json2",{},n)}(),function(){for(var e={encode:function(e){return c(a(e))}},t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={},r=0,o=n.length;o>r;r++)i[n.charAt(r)]=r;var s=function(e){var n=e.charCodeAt(0);return 128>n?e:2048>n?t(192|n>>>6)+t(128|63&n):t(224|n>>>12&15)+t(128|n>>>6&63)+t(128|63&n)},a=function(e){return e.replace(/[^\x00-\x7F]/g,s)},l=function(e){var t=[0,2,1][e.length%3],i=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[n.charAt(i>>>18),n.charAt(i>>>12&63),t>=2?"=":n.charAt(i>>>6&63),t>=1?"=":n.charAt(63&i)];return r.join("")},c=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,l)};Pusher.Base64=e}.call(this),function(){function e(e,t){this.url=e,this.data=t}function t(e){return Pusher.Util.mapObject(e,function(e){return"object"==typeof e&&(e=JSON.stringify(e)),encodeURIComponent(Pusher.Base64.encode(e.toString()))})}var n=e.prototype;n.send=function(e){if(!this.request){var n=Pusher.Util.filterObject(this.data,function(e){return void 0!==e}),i=Pusher.Util.map(Pusher.Util.flatten(t(n)),Pusher.Util.method("join","=")).join("&"),r=this.url+"/"+e.number+"?"+i;this.request=new Pusher.ScriptRequest(r),this.request.send(e)}},n.cleanup=function(){this.request&&this.request.cleanup()},Pusher.JSONPRequest=e}.call(this),function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}var t=e.prototype;e.ERROR=3,e.INFO=6,e.DEBUG=7,t.log=function(e,t){e<=this.options.level&&(this.events.push(Pusher.Util.extend({},t,{timestamp:Pusher.Util.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.error=function(t){this.log(e.ERROR,t)},t.info=function(t){this.log(e.INFO,t)},t.debug=function(t){this.log(e.DEBUG,t)},t.isEmpty=function(){return 0===this.events.length},t.send=function(e,t){var n=this,i=Pusher.Util.extend({session:n.session,bundle:n.sent+1,key:n.key,lib:"js",version:n.options.version,cluster:n.options.cluster,features:n.options.features,timeline:n.events},n.options.params);return n.events=[],e(i,function(e,i){e||n.sent++,t&&t(e,i)}),!0},t.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=e}.call(this),function(){function e(e,t){this.timeline=e,this.options=t||{}}var t=e.prototype;t.send=function(e,t){var n=this;if(!n.timeline.isEmpty()){var i=function(t,i){var r="http"+(e?"s":"")+"://",o=r+(n.host||n.options.host)+n.options.path,s=new Pusher.JSONPRequest(o,t),a=Pusher.ScriptReceivers.create(function(e,t){Pusher.ScriptReceivers.remove(a),s.cleanup(),t&&t.host&&(n.host=t.host),i&&i(e,t)});s.send(a)};n.timeline.send(i,t)}},Pusher.TimelineSender=e}.call(this),function(){function e(e){this.strategies=e}function t(e,t,n){var r=Pusher.Util.map(e,function(e,i,r,o){return e.connect(t,n(i,o))});return{abort:function(){Pusher.Util.apply(r,i)},forceMinPriority:function(e){Pusher.Util.apply(r,function(t){t.forceMinPriority(e)})}}}function n(e){return Pusher.Util.all(e,function(e){return Boolean(e.error)})}function i(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var r=e.prototype;r.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},r.connect=function(e,i){return t(this.strategies,e,function(e,t){return function(r,o){return t[e].error=r,r?void(n(t)&&i(!0)):(Pusher.Util.apply(t,function(e){e.forceMinPriority(o.transport.priority)}),void i(null,o))}})},Pusher.BestConnectedEverStrategy=e}.call(this),function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}function t(e){return"pusherTransport"+(e?"Encrypted":"Unencrypted")}function n(e){var n=Pusher.Util.getLocalStorage();if(n)try{var i=n[t(e)];if(i)return JSON.parse(i)}catch(o){r(e)}return null}function i(e,n,i){var r=Pusher.Util.getLocalStorage();if(r)try{r[t(e)]=JSON.stringify({timestamp:Pusher.Util.now(),transport:n,latency:i})}catch(o){}}function r(e){var n=Pusher.Util.getLocalStorage();if(n)try{delete n[t(e)]}catch(i){}}var o=e.prototype;o.isSupported=function(){return this.strategy.isSupported()},o.connect=function(e,t){var o=this.encrypted,s=n(o),a=[this.strategy];if(s&&s.timestamp+this.ttl>=Pusher.Util.now()){var l=this.transports[s.transport];l&&(this.timeline.info({cached:!0,transport:s.transport,latency:s.latency}),a.push(new Pusher.SequentialStrategy([l],{timeout:2*s.latency+1e3,failFast:!0})))}var c=Pusher.Util.now(),u=a.pop().connect(e,function h(n,s){n?(r(o),a.length>0?(c=Pusher.Util.now(),u=a.pop().connect(e,h)):t(n)):(i(o,s.transport.name,Pusher.Util.now()-c),t(null,s))});return{abort:function(){u.abort()},forceMinPriority:function(t){e=t,u&&u.forceMinPriority(t)}}},Pusher.CachedStrategy=e}.call(this),function(){function e(e,t){this.strategy=e,this.options={delay:t.delay}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n,i=this.strategy,r=new Pusher.Timer(this.options.delay,function(){n=i.connect(e,t)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},Pusher.DelayedStrategy=e}.call(this),function(){function e(e){this.strategy=e}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy.connect(e,function(e,i){i&&n.abort(),t(e,i)});return n},Pusher.FirstConnectedStrategy=e}.call(this),function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}var t=e.prototype;t.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},t.connect=function(e,t){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(e,t)},Pusher.IfStrategy=e}.call(this),function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){var n=this,i=this.strategies,r=0,o=this.timeout,s=null,a=function(l,c){c?t(null,c):(r+=1,n.loop&&(r%=i.length),r<i.length?(o&&(o=2*o,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),s=n.tryStrategy(i[r],e,{timeout:o,failFast:n.failFast},a)):t(!0))};return s=this.tryStrategy(i[r],e,{timeout:o,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},t.tryStrategy=function(e,t,n,i){var r=null,o=null;return n.timeout>0&&(r=new Pusher.Timer(n.timeout,function(){o.abort(),i(!0)})),o=e.connect(t,function(e,t){e&&r&&r.isRunning()&&!n.failFast||(r&&r.ensureAborted(),i(e,t))}),{abort:function(){r&&r.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},Pusher.SequentialStrategy=e}.call(this),function(){function e(e,t,n,i){this.name=e,this.priority=t,this.transport=n,this.options=i||{}}function t(e,t){return Pusher.Util.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var n=e.prototype;n.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},n.connect=function(e,n){if(!this.isSupported())return t(new Pusher.Errors.UnsupportedStrategy,n);if(this.priority<e)return t(new Pusher.Errors.TransportPriorityTooLow,n);var i=this,r=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,a=function(){o.unbind("initialized",a),o.connect()},l=function(){s=new Pusher.Handshake(o,function(e){r=!0,h(),n(null,e)})},c=function(e){h(),n(e)},u=function(){h(),n(new Pusher.Errors.TransportClosed(o))},h=function(){o.unbind("initialized",a),o.unbind("open",l),o.unbind("error",c),o.unbind("closed",u)};return o.bind("initialized",a),o.bind("open",l),o.bind("error",c),o.bind("closed",u),o.initialize(),{abort:function(){r||(h(),s?s.close():o.close())},forceMinPriority:function(e){r||i.priority<e&&(s?s.close():o.close())}}},Pusher.TransportStrategy=e}.call(this),function(){function e(e,t,n){var i=e+(t.encrypted?"s":""),r=t.encrypted?t.hostEncrypted:t.hostUnencrypted;return i+"://"+r+n}function t(e,t){var n="/app/"+e,i="?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION+(t?"&"+t:"");return n+i}Pusher.URLSchemes={ws:{getInitial:function(n,i){return e("ws",i,t(n,"flash=false"))}},flash:{getInitial:function(n,i){return e("ws",i,t(n,"flash=true"))}},sockjs:{getInitial:function(t,n){return e("http",n,n.httpPath||"/pusher","")},getPath:function(e,n){return t(e)}},http:{getInitial:function(n,i){var r=(i.httpPath||"/pusher")+t(n);return e("http",i,r)}}}}.call(this),function(){function e(e,t,n,i,r){Pusher.EventsDispatcher.call(this),this.hooks=e,this.name=t,this.priority=n,this.key=i,this.options=r,this.state="new",this.timeline=r.timeline,this.activityTimeout=r.activityTimeout,this.id=this.timeline.generateUniqueID()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.initialize=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.encrypted?"s":"")})),e.hooks.beforeInitialize&&e.hooks.beforeInitialize.call(e),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),Pusher.Dependencies.load(e.hooks.file,{encrypted:e.options.encrypted},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},t.connect=function(){var e=this;if(e.socket||"initialized"!==e.state)return!1;var t=e.hooks.urls.getInitial(e.key,e.options);try{e.socket=e.hooks.getSocket(t,e.options)}catch(n){return Pusher.Util.defer(function(){e.onError(n),e.changeState("closed")}),!1}return e.bindListeners(),Pusher.debug("Connecting",{transport:e.name,url:t}),e.changeState("connecting"),!0},t.close=function(){return this.socket?(this.socket.close(),!0):!1},t.send=function(e){var t=this;return"open"===t.state?(Pusher.Util.defer(function(){t.socket&&t.socket.send(e)}),!0):!1},t.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.onMessage=function(e){this.emit("message",e)},t.onActivity=function(){this.emit("activity")},t.bindListeners=function(){var e=this;e.socket.onopen=function(){e.onOpen()},e.socket.onerror=function(t){e.onError(t)},e.socket.onclose=function(t){e.onClose(t)},e.socket.onmessage=function(t){e.onMessage(t)},e.supportsPing()&&(e.socket.onactivity=function(){e.onActivity()})},t.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.buildTimelineMessage=function(e){return Pusher.Util.extend({cid:this.id},e)},Pusher.TransportConnection=e}.call(this),function(){function e(e){this.hooks=e}var t=e.prototype;
t.isSupported=function(e){return this.hooks.isSupported(e)},t.createConnection=function(e,t,n,i){return new Pusher.TransportConnection(this.hooks,e,t,n,i)},Pusher.Transport=e}.call(this),function(){Pusher.WSTransport=new Pusher.Transport({urls:Pusher.URLSchemes.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(window.WebSocket||window.MozWebSocket)},isSupported:function(){return Boolean(window.WebSocket||window.MozWebSocket)},getSocket:function(e){var t=window.WebSocket||window.MozWebSocket;return new t(e)}}),Pusher.FlashTransport=new Pusher.Transport({file:"flashfallback",urls:Pusher.URLSchemes.flash,handlesActivityChecks:!1,supportsPing:!1,isSupported:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){try{var t=Pusher.Util.getNavigator();return Boolean(t&&t.mimeTypes&&void 0!==t.mimeTypes["application/x-shockwave-flash"])}catch(n){return!1}}},beforeInitialize:function(){void 0===window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot({encrypted:this.options.encrypted})+"/WebSocketMain.swf"},isInitialized:function(){return void 0!==window.FlashWebSocket},getSocket:function(e){return new FlashWebSocket(e)}}),Pusher.SockJSTransport=new Pusher.Transport({file:"sockjs",urls:Pusher.URLSchemes.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new SockJS(e,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:t.encrypted}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}});var e={urls:Pusher.URLSchemes.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return Boolean(Pusher.HTTP.Socket)}},t=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getStreamingSocket(e)}},e),n=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getPollingSocket(e)}},e),i={file:"xhr",isSupported:Pusher.Util.isXHRSupported},r={file:"xdr",isSupported:function(e){return Pusher.Util.isXDRSupported(e.encrypted)}};Pusher.XHRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,i)),Pusher.XDRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,r)),Pusher.XHRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,i)),Pusher.XDRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,r))}.call(this),function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}var t=e.prototype;t.createConnection=function(e,t,n,i){var r=this;i=Pusher.Util.extend({},i,{activityTimeout:r.pingDelay});var o=r.transport.createConnection(e,t,n,i),s=null,a=function(){o.unbind("open",a),o.bind("closed",l),s=Pusher.Util.now()},l=function(e){if(o.unbind("closed",l),1002===e.code||1003===e.code)r.manager.reportDeath();else if(!e.wasClean&&s){var t=Pusher.Util.now()-s;t<2*r.maxPingDelay&&(r.manager.reportDeath(),r.pingDelay=Math.max(t/2,r.minPingDelay))}};return o.bind("open",a),o},t.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},Pusher.AssistantToTheTransportManager=e}.call(this),function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}var t=e.prototype;t.getAssistant=function(e){return new Pusher.AssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.isAlive=function(){return this.livesLeft>0},t.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=e}.call(this),function(){function e(e){return function(t){return[e.apply(this,arguments),t]}}function t(e){return"string"==typeof e&&":"===e.charAt(0)}function n(e,t){return t[e.slice(1)]}function i(e,t){if(0===e.length)return[[],t];var n=s(e[0],t),r=i(e.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function r(e,i){if(!t(e))return[e,i];var r=n(e,i);if(void 0===r)throw"Undefined symbol "+e;return[r,i]}function o(e,r){if(t(e[0])){var o=n(e[0],r);if(e.length>1){if("function"!=typeof o)throw"Calling non-function "+e[0];var a=[Pusher.Util.extend({},r)].concat(Pusher.Util.map(e.slice(1),function(e){return s(e,Pusher.Util.extend({},r))[0]}));return o.apply(this,a)}return[o,r]}return i(e,r)}function s(e,t){return"string"==typeof e?r(e,t):"object"==typeof e&&e instanceof Array&&e.length>0?o(e,t):[e,t]}var a={build:function(e,t){var n=Pusher.Util.extend({},u,t);return s(e,n)[1].strategy}},l={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport,xhr_streaming:Pusher.XHRStreamingTransport,xdr_streaming:Pusher.XDRStreamingTransport,xhr_polling:Pusher.XHRPollingTransport,xdr_polling:Pusher.XDRPollingTransport},c={isSupported:function(){return!1},connect:function(e,t){var n=Pusher.Util.defer(function(){t(new Pusher.Errors.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},u={extend:function(e,t,n){return[Pusher.Util.extend({},t,n),e]},def:function(e,t,n){if(void 0!==e[t])throw"Redefining symbol "+t;return e[t]=n,[void 0,e]},def_transport:function(e,t,n,i,r,o){var s=l[n];if(!s)throw new Pusher.Errors.UnsupportedTransport(n);var a,u=!(e.enabledTransports&&-1===Pusher.Util.arrayIndexOf(e.enabledTransports,t)||e.disabledTransports&&-1!==Pusher.Util.arrayIndexOf(e.disabledTransports,t)||"flash"===t&&e.disableFlash===!0);a=u?new Pusher.TransportStrategy(t,i,o?o.getAssistant(s):s,Pusher.Util.extend({key:e.key,encrypted:e.encrypted,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},r)):c;var h=e.def(e,t,a)[1];return h.transports=e.transports||{},h.transports[t]=a,[void 0,h]},transport_manager:e(function(e,t){return new Pusher.TransportManager(t)}),sequential:e(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,t)}),cached:e(function(e,t,n){return new Pusher.CachedStrategy(n,e.transports,{ttl:t,timeline:e.timeline,encrypted:e.encrypted})}),first_connected:e(function(e,t){return new Pusher.FirstConnectedStrategy(t)}),best_connected_ever:e(function(){var e=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(e)}),delayed:e(function(e,t,n){return new Pusher.DelayedStrategy(n,{delay:t})}),"if":e(function(e,t,n,i){return new Pusher.IfStrategy(t,n,i)}),is_supported:e(function(e,t){return function(){return t.isSupported()}})};Pusher.StrategyBuilder=a}.call(this),function(){var e={};e.decodeMessage=function(e){try{var t=JSON.parse(e.data);if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(n){throw{type:"MessageParseError",error:n,data:e.data}}},e.encodeMessage=function(e){return JSON.stringify(e)},e.processHandshake=function(e){if(e=this.decodeMessage(e),"pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},e.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},e.getCloseError=function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null},Pusher.Protocol=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.send=function(e){return this.transport.send(e)},t.send_event=function(e,t,n){var i={event:e,data:t};return n&&(i.channel=n),Pusher.debug("Event sent",i),this.send(Pusher.Protocol.encodeMessage(i))},t.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.close=function(){this.transport.close()},t.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Pusher.Protocol.decodeMessage(t)}catch(i){e.emit("error",{type:"MessageParseError",error:i,data:t.data})}if(void 0!==n){switch(Pusher.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){Pusher.Util.objectApply(t,function(t,n){e.transport.unbind(n,t)})};Pusher.Util.objectApply(t,function(t,n){e.transport.bind(n,t)})},t.handleCloseEvent=function(e){var t=Pusher.Protocol.getCloseAction(e),n=Pusher.Protocol.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t)},Pusher.Connection=e}.call(this),function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}var t=e.prototype;t.close=function(){this.unbindListeners(),this.transport.close()},t.bindListeners=function(){var e=this;e.onMessage=function(t){e.unbindListeners();try{var n=Pusher.Protocol.processHandshake(t);"connected"===n.action?e.finish("connected",{connection:new Pusher.Connection(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())}catch(i){e.finish("error",{error:i}),e.transport.close()}},e.onClosed=function(t){e.unbindListeners();var n=Pusher.Protocol.getCloseAction(t)||"backoff",i=Pusher.Protocol.getCloseError(t);e.finish(n,{error:i})},e.transport.bind("message",e.onMessage),e.transport.bind("closed",e.onClosed)},t.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.finish=function(e,t){this.callback(Pusher.Util.extend({transport:this.transport,action:e},t))},Pusher.Handshake=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.key=e,this.options=t||{},this.state="initialized",this.connection=null,this.encrypted=!!t.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),("connecting"===n.state||"unavailable"===n.state)&&n.retryIn(0)}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),this.updateStrategy()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.send=function(e){return this.connection?this.connection.send(e):!1},t.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.isEncrypted=function(){return this.encrypted},t.startConnecting=function(){var e=this,t=function(n,i){n?e.runner=e.strategy.connect(0,t):"error"===i.action?(e.emit("error",{type:"HandshakeError",error:i.error}),e.timeline.error({handshakeError:i.error})):(e.abortConnecting(),e.handshakeCallbacks[i.action](i))};e.runner=e.strategy.connect(0,t)},t.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var e=this.abandonConnection();e.close()}},t.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.retryIn=function(e){var t=this;t.timeline.info({action:"retry",delay:e}),e>0&&t.emit("connecting_in",Math.round(e/1e3)),t.retryTimer=new Pusher.Timer(e||0,function(){t.disconnectInternally(),t.connect()})},t.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.setUnavailableTimer=function(){var e=this;e.unavailableTimer=new Pusher.Timer(e.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.sendActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.ping(),e.activityTimer=new Pusher.Timer(e.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.resetActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.handlesActivityChecks()||(e.activityTimer=new Pusher.Timer(e.activityTimeout,function(){e.sendActivityCheck()}))},t.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.buildHandshakeCallbacks=function(e){var t=this;return Pusher.Util.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.buildErrorCallbacks=function(){function e(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}}var t=this;return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},t.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.updateState=function(e,t){var n=this.state;this.state=e,n!==e&&(Pusher.debug("State changed",n+" -> "+e),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t))},t.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},Pusher.ConnectionManager=e}.call(this),function(){function e(){Pusher.EventsDispatcher.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}Pusher.Util.extend(e.prototype,Pusher.EventsDispatcher.prototype);var t=e.prototype;t.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine},Pusher.NetInfo=e,Pusher.Network=new e}.call(this),function(){function e(){this.reset()}var t=e.prototype;t.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.each=function(e){var t=this;Pusher.Util.objectApply(t.members,function(n,i){e(t.get(i))})},t.setMyID=function(e){this.myID=e},t.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},t.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Pusher.Members=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this,function(t,n){Pusher.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.authorize=function(e,t){return t(!1,{})},t.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new Pusher.Errors.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.disconnect=function(){this.subscribed=!1},t.handleEvent=function(e,t){0===e.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===e&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.subscribe=function(){var e=this;e.authorize(e.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=e}.call(this),function(){function e(e,t){Pusher.Channel.call(this,e,t)}var t=e.prototype;Pusher.Util.extend(t,Pusher.Channel.prototype),t.authorize=function(e,t){var n=new Pusher.Channel.Authorizer(this,this.pusher.config);return n.authorize(e,t)},Pusher.PrivateChannel=e}.call(this),function(){function e(e,t){Pusher.PrivateChannel.call(this,e,t),this.members=new Pusher.Members}var t=e.prototype;Pusher.Util.extend(t,Pusher.PrivateChannel.prototype),t.authorize=function(e,t){var n=Pusher.PrivateChannel.prototype.authorize,i=this;n.call(i,e,function(e,n){if(!e){if(void 0===n.channel_data)return Pusher.warn("Invalid auth response for channel '"+i.name+"', expected 'channel_data' field"),void t("Invalid auth response");var r=JSON.parse(n.channel_data);i.members.setMyID(r.user_id)}t(e,n)})},t.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.members.onSubscription(t),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(t);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(t);i&&this.emit("pusher:member_removed",i);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,e,t)}},t.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=e}.call(this),function(){function e(){this.channels={}}function t(e,t){return 0===e.indexOf("private-")?new Pusher.PrivateChannel(e,t):0===e.indexOf("presence-")?new Pusher.PresenceChannel(e,t):new Pusher.Channel(e,t)}var n=e.prototype;n.add=function(e,n){return this.channels[e]||(this.channels[e]=t(e,n)),this.channels[e]},n.all=function(e){return Pusher.Util.values(this.channels)},n.find=function(e){return this.channels[e]},n.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},n.disconnect=function(){Pusher.Util.objectApply(this.channels,function(e){e.disconnect()})},Pusher.Channels=e}.call(this),function(){Pusher.Channel.Authorizer=function(e,t){this.channel=e,this.type=t.authTransport,this.options=t,this.authOptions=(t||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},authorize:function(e,t){return Pusher.authorizers[this.type].call(this,e,t)}};var e=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(e,t){var n,i=this;n=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("POST",i.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var r in this.authOptions.headers)n.setRequestHeader(r,this.authOptions.headers[r]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e,i=!1;try{e=JSON.parse(n.responseText),i=!0}catch(r){t(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}i&&t(!1,e)}else Pusher.warn("Couldn't get auth info from your webapp",n.status),t(!0,n.status)},n.send(this.composeQuery(e)),n},jsonp:function(t,n){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=e.toString();e++;var r=Pusher.Util.getDocument(),o=r.createElement("script");Pusher.auth_callbacks[i]=function(e){n(!1,e)};var s="Pusher.auth_callbacks['"+i+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+"&"+this.composeQuery(t);var a=r.getElementsByTagName("head")[0]||r.documentElement;a.insertBefore(o,a.firstChild)}}}.call(this),function(){function e(e,t){var n=e.directive;e.directive=function(e,i){return t.register(e,i),n.apply(this,arguments)}}function t(e,t,n){function i(n,i,s,a,l){var c=function(){function r(e,t){this.controller=e,this.router=t}return r.prototype.cleanupLastView=function(){var t=this;this.previousLeaveAnimation&&(e.cancel(this.previousLeaveAnimation),this.previousLeaveAnimation=null),this.currentScope&&(this.currentScope.$destroy(),this.currentScope=null),this.currentElement&&(this.previousLeaveAnimation=e.leave(this.currentElement),this.previousLeaveAnimation.then(function(){return t.previousLeaveAnimation=null}),this.currentElement=null)},r.prototype.reuse=function(e){var n=t.when(!0),i=this.currentInstruction;return this.currentInstruction=e,this.currentController&&this.currentController.$routerOnReuse&&(n=t.when(this.currentController.$routerOnReuse(this.currentInstruction,i))),n},r.prototype.routerCanReuse=function(e){var n;return n=this.currentInstruction&&this.currentInstruction.componentType===e.componentType?this.currentController&&this.currentController.$routerCanReuse?this.currentController.$routerCanReuse(e,this.currentInstruction):e===this.currentInstruction||angular.equals(e.params,this.currentInstruction.params):!1,t.when(n)},r.prototype.routerCanDeactivate=function(e){return this.currentController&&this.currentController.$routerCanDeactivate?t.when(this.currentController.$routerCanDeactivate(e,this.currentInstruction)):t.when(!0)},r.prototype.deactivate=function(e){return this.currentController&&this.currentController.$routerOnDeactivate?t.when(this.currentController.$routerOnDeactivate(e,this.currentInstruction)):t.when()},r.prototype.activate=function(r){var s=this;this.previousInstruction=this.currentInstruction,this.currentInstruction=r;var a=this.controller.$$componentName=r.componentType;if("string"!=typeof a)throw new Error("Component is not a string for "+r.urlPath);this.controller.$$template="<"+o(a)+' $router="::$$router"></'+o(a)+">",this.controller.$$router=this.router.childRouter(r.componentType),this.controller.$$outlet=this;var c=n.$new();c.$$router=this.controller.$$router,this.deferredActivation=t.defer();var u=l(c,function(t){e.enter(t,null,s.currentElement||i),s.cleanupLastView()});return this.currentElement=u,this.currentScope=c,this.deferredActivation.promise},r}(),u=a[0],h=a[1],p=u&&u.$$router||r;h.$$currentComponent=null,p.registerPrimaryOutlet(new c(h,p))}var r=n;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngOutlet","ngOutlet"],link:i,controller:function(){function e(){}return e}(),controllerAs:"$$ngOutlet"}}function n(e){return{restrict:"EA",priority:-400,require:"ngOutlet",link:function(t,n,i,r){var o=r.$$template;n.html(o),e(n.contents())(t)}}}function i(e){return{require:"^ngOutlet",priority:-1e3,link:function(t,n,i,r){var o=e.when(),s=r.$$outlet,a=s.currentController=n.controller(r.$$componentName);a.$routerOnActivate&&(o=e.when(a.$routerOnActivate(s.currentInstruction,s.previousInstruction))),o.then(s.deferredActivation.resolve,s.deferredActivation.reject)}}}function r(e,t){function n(n,i,r,o){function s(e){return l=a.generate(e),"./"+angular.stringifyInstruction(l)}var a=o&&o.$$router||e;if(a){var l=null,c=r.ngLink||"",u=t(c);if(u.constant){var h=u();i.attr("href",s(h))}else n.$watch(function(){return u(n)},function(e){return i.attr("href",s(e))},!0);i.on("click",function(t){1===t.which&&l&&(e.navigateByInstruction(l),t.preventDefault())})}}return{require:"?^^ngOutlet",restrict:"A",link:n}}function o(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function s(e,t,n,i,r,o,s){function a(){return function(e){return e}}function l(e){return e}function c(e){return!!e}function u(e){return!e}function h(e){return"string"==typeof e}function p(e){return"function"==typeof e}function d(e){return"object"==typeof e&&null!==e}function f(e){return Array.isArray(e)}function g(e){return e.name||"Root"}function m(){}function v(){}function y(e){return u(e)?null:e.toString()}function _(e){var t=[];return u(e)?[]:(I.forEach(e,function(e,n){t.push(e===!0?n:n+"="+e)}),t)}function w(e,t){return void 0===t&&(t="&"),_(e).join(t)}function b(e){for(var t=new W(e[e.length-1]),n=e.length-2;n>=0;n-=1)t=new W(e[n],t);return t}function C(e){var t=M.firstMatch(G,e);return c(t)?t[0]:""}function x(e,t){return t instanceof Type?e.name in t.prototype:!1}function S(e){for(var t=O.annotations(e),n=0;n<t.length;n+=1){var i=t[n];if(i instanceof Q.CanActivate)return i.fn}return null}function E(e,t){if(e instanceof se.AsyncRoute){var n=P(e.loader,t);return new se.AsyncRoute({path:e.path,loader:n,name:e.name,data:e.data,useAsDefault:e.useAsDefault})}if(e instanceof se.Route||e instanceof se.Redirect||e instanceof se.AuxRoute)return e;if(+!!e.component+ +!!e.redirectTo+ +!!e.loader!=1)throw new L('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(e.as&&e.name)throw new L('Route config should contain exactly one "as" or "name" property.');if(e.as&&(e.name=e.as),e.loader){var n=P(e.loader,t);return new se.AsyncRoute({path:e.path,loader:n,name:e.name,data:e.data,useAsDefault:e.useAsDefault})}if(e.aux)return new se.AuxRoute({path:e.aux,component:e.component,name:e.name});if(e.component){if("object"==typeof e.component){var i=e.component;if("constructor"==i.type)return new se.Route({path:e.path,component:i.constructor,name:e.name,data:e.data,useAsDefault:e.useAsDefault});if("loader"==i.type)return new se.AsyncRoute({path:e.path,loader:i.loader,name:e.name,data:e.data,useAsDefault:e.useAsDefault});throw new L('Invalid component type "'+i.type+'". Valid types are "constructor" and "loader".')}return new se.Route(e)}return e.redirectTo?new se.Redirect({path:e.path,redirectTo:e.redirectTo}):e}function P(e,t){return function(){return e().then(function(e){return t.configFromComponent(e),e})}}function k(e,t){if(!p(e))throw new L('Component for route "'+t+'" is not defined, or is not a class.')}function T(e){var t=[];return e.forEach(function(e){if(h(e)){var n=e;t=t.concat(n.split("/"))}else t.push(e)}),t}function $(e){if(e=e.filter(function(e){return c(e)}),0==e.length)return null;if(1==e.length)return e[0];var t=e[0],n=e.slice(1);return n.reduce(function(e,t){return-1==D(t.specificity,e.specificity)?t:e},t)}function D(e,t){for(var n=Math.min(e.length,t.length),i=0;n>i;i+=1){var r=N.charCodeAt(e,i),o=N.charCodeAt(t,i),s=o-r;if(0!=s)return s}return e.length-t.length}function A(e,t){if(p(e)){var n=O.annotations(e);if(c(n))for(var i=0;i<n.length;i++){var r=n[i];if(r instanceof ve.RouteConfig)throw new L('Child routes are not allowed for "'+t+'". Use "..." on the parent\'s route path.')}}}function R(e,t){var n=Ge;return u(e.component)?n:(c(e.child)&&(n=R(e.child,c(t)?t.child:null)),n.then(function(n){if(0==n)return!1;if(e.component.reuse)return!0;var i=qe.getCanActivateHook(e.component.componentType);return c(i)?i(e.component,c(t)?t.component:null):!0}))}var j={resolve:function(t){return e.when(t)},reject:function(t){return e.reject(t)},catchError:function(e,t){return e.then(null,t)},all:function(t){return e.all(t)}},M={create:function(e,t){return t=t?t.replace(/g/g,""):"",new RegExp(e,t+"g")},firstMatch:function(e,t){return e.lastIndex=0,e.exec(t)},matcher:function(e,t){return e.lastIndex=0,{re:e,input:t}}},O={annotations:function(e){return e.annotations||[]}},I={create:function(){return{}},set:function(e,t,n){return e[t]=n},get:function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},contains:function(e,t){return e.hasOwnProperty(t)},keys:function(e){return Object.keys(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},"delete":function(e,t){delete e[t]},forEach:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},equals:function(e,t){var n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(var r,o=0;o<n.length;o++)if(r=n[o],e[r]!==t[r])return!1;return!0},merge:function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}},F=(Array,{toJSON:function(e){return JSON.stringify(e)},clear:function(e){e.length=0},create:function(){return[]},push:function(e,t){return e.push(t)},forEach:function(e,t){return e.forEach(t)},first:function(e){return e?e[0]:null},last:function(e){return(e&&e.length)>0?e[e.length-1]:null},map:function(e,t){return e.map(t)},join:function(e,t){return e.join(t)},reduce:function(e,t,n){return e.reduce(t,n)},filter:function(e,t){return e.filter(t)},concat:function(e,t){return e.concat(t)},slice:function(e){var t=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:null;return e.slice(t,null===n?void 0:n)},maximum:function(e,t){if(0==e.length)return null;for(var n=null,i=-(1/0),r=0;r<e.length;r++){var o=e[r];if(!u(o)){var s=t(o);s>i&&(n=o,i=s)}}return n}}),N={charCodeAt:function(e,t){return e.charCodeAt(t)},equals:function(e,t){return e===t},split:function(e,t){return e.split(t)},replaceAll:function(e,t,n){return e.replace(t,n)},replaceAllMapped:function(e,t,n){return e.replace(t,function(e){return e.splice(-2,2),n.apply(null,e)})},contains:function(e,t){return-1!=e.indexOf(t)}},L=Error,H={callNext:function(e,t){e.fn(t)},callEmit:function(e,t){e.fn(t)},subscribe:function(e,t){e.fn=t}};v.prototype.subscribe=function(){},v.prototype.path=function(){return t.url()},v.prototype.go=function(e,n){return t.url(e+n)};var V={Injectable:function(){},OpaqueToken:function(){},Inject:function(){}},B=function(){return V},U=function(){function e(e){var t=this;this.map={},this.keys={},c(e)&&I.forEach(e,function(e,n){t.map[n]=c(e)?e.toString():null,t.keys[n]=!0})}return e.prototype.get=function(e){return I["delete"](this.keys,e),this.map[e]},e.prototype.getUnused=function(){var e=this,t={},n=I.keys(this.keys);return n.forEach(function(n){return t[n]=I.get(e.map,n)}),t},e}();V.TouchMap=U,V.normalizeString=y;var z=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};V.convertUrlParamsToArray=_,V.serializeParams=w;var W=function(){function e(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=l([])),void 0===i&&(i=l({})),this.path=e,this.child=t,this.auxiliary=n,this.params=i}return e.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},e.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},e.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(e){return e.toString()}).join("//")+")":""},e.prototype._matrixParamsToString=function(){var e=w(this.params,";");return e.length>0?";"+e:""},e.prototype._childString=function(){return c(this.child)?"/"+this.child.toString():""},e}();V.Url=W;var q=function(e){function t(t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=l([])),void 0===r&&(r=null),
e.call(this,t,n,i,r)}return z(t,e),t.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},t.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},t.prototype._queryParamsToString=function(){return u(this.params)?"":"?"+w(this.params)},t}(W);V.RootUrl=q,V.pathSegmentsToUrl=b;var G=M.create("^[^\\/\\(\\)\\?;=&#]+"),K=function(){function e(){}return e.prototype.peekStartsWith=function(e){return this._remaining.startsWith(e)},e.prototype.capture=function(e){if(!this._remaining.startsWith(e))throw new L('Expected "'+e+'".');this._remaining=this._remaining.substring(e.length)},e.prototype.parse=function(e){return this._remaining=e,""==e||"/"==e?new W(""):this.parseRoot()},e.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var e=C(this._remaining);this.capture(e);var t=[];this.peekStartsWith("(")&&(t=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var n=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),n=this.parseSegment());var i=null;return this.peekStartsWith("?")&&(i=this.parseQueryParams()),new q(e,n,t,i)},e.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var e=C(this._remaining);this.capture(e);var t=null;this.peekStartsWith(";")&&(t=this.parseMatrixParams());var n=[];this.peekStartsWith("(")&&(n=this.parseAuxiliaryRoutes());var i=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),i=this.parseSegment()),new W(e,i,n,t)},e.prototype.parseQueryParams=function(){var e={};for(this.capture("?"),this.parseParam(e);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(e);return e},e.prototype.parseMatrixParams=function(){for(var e={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(e);return e},e.prototype.parseParam=function(e){var t=C(this._remaining);if(!u(t)){this.capture(t);var n=!0;if(this.peekStartsWith("=")){this.capture("=");var i=C(this._remaining);c(i)&&(n=i,this.capture(n))}e[t]=n}},e.prototype.parseAuxiliaryRoutes=function(){var e=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)e.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),e},e}();V.UrlParser=K,V.parser=new K;var Y=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(3>o?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},J=function(){function e(e){this.name=e}return e=Y([a()],e)}();V.RouteLifecycleHook=J;var X=function(){function e(e){this.fn=e}return e=Y([a()],e)}();V.CanActivate=X,V.routerCanReuse=l(new J("routerCanReuse")),V.routerCanDeactivate=l(new J("routerCanDeactivate")),V.routerOnActivate=l(new J("routerOnActivate")),V.routerOnReuse=l(new J("routerOnReuse")),V.routerOnDeactivate=l(new J("routerOnDeactivate"));var Q=B("./lifecycle_annotations_impl");V.hasLifecycleHook=x,V.getCanActivateHook=S;var z=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Y=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(3>o?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Z=B("../route_definition");V.RouteDefinition=Z.RouteDefinition;var ee=function(){function e(e){this.configs=e}return e=Y([a()],e)}();V.RouteConfig=ee;var te=function(){function e(e){var t=e.name,n=e.useAsDefault,i=e.path,r=e.regex,o=e.serializer,s=e.data;this.name=t,this.useAsDefault=n,this.path=i,this.regex=r,this.serializer=o,this.data=s}return e=Y([a()],e)}();V.AbstractRoute=te;var ne=function(e){function t(t){var n=t.name,i=t.useAsDefault,r=t.path,o=t.regex,s=t.serializer,a=t.data,l=t.component;e.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:s,data:a}),this.aux=null,this.component=l}return z(t,e),t=Y([a()],t)}(te);V.Route=ne;var ie=function(e){function t(t){var n=t.name,i=t.useAsDefault,r=t.path,o=t.regex,s=t.serializer,a=t.data,l=t.component;e.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:s,data:a}),this.component=l}return z(t,e),t=Y([a()],t)}(te);V.AuxRoute=ie;var re=function(e){function t(t){var n=t.name,i=t.useAsDefault,r=t.path,o=t.regex,s=t.serializer,a=t.data,l=t.loader;e.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:s,data:a}),this.aux=null,this.loader=l}return z(t,e),t=Y([a()],t)}(te);V.AsyncRoute=re;var oe=function(e){function t(t){var n=t.name,i=t.useAsDefault,r=t.path,o=t.regex,s=t.serializer,a=t.data,l=t.redirectTo;e.call(this,{name:n,useAsDefault:i,path:r,regex:o,serializer:s,data:a}),this.redirectTo=l}return z(t,e),t=Y([a()],t)}(te);V.Redirect=oe;var se=B("./route_config_decorator");V.normalizeRouteConfig=E,V.assertComponentExists=k;var ae=B("../../instruction"),le=function(){function e(e,t){void 0===t&&(t=null),this._loader=e,this._resolvedComponent=null,this.data=c(t)?new ae.RouteData(t):ae.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){var e=this;return c(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(t){return e.componentType=t,t})},e}();V.AsyncRouteHandler=le;var ae=B("../../instruction"),ce=function(){function e(e,t){this.componentType=e,this._resolvedComponent=null,this._resolvedComponent=j.resolve(e),this.data=c(t)?new ae.RouteData(t):ae.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){return this._resolvedComponent},e}();V.SyncRouteHandler=ce;var z=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ue=B("../url_parser"),ae=B("../instruction"),he=function(){function e(){}return e}();V.RouteMatch=he;var pe=function(e){function t(t,n,i){e.call(this),this.instruction=t,this.remaining=n,this.remainingAux=i}return z(t,e),t}(he);V.PathMatch=pe;var de=function(e){function t(t,n){e.call(this),this.redirectTo=t,this.specificity=n}return z(t,e),t}(he);V.RedirectMatch=de;var fe=function(){function e(e,t){this._pathRecognizer=e,this.redirectTo=t,this.hash=this._pathRecognizer.hash}return Object.defineProperty(e.prototype,"path",{get:function(){return this._pathRecognizer.toString()},set:function(e){throw new L("you cannot set the path of a RedirectRule directly")},enumerable:!0,configurable:!0}),e.prototype.recognize=function(e){var t=null;return c(this._pathRecognizer.matchUrl(e))&&(t=new de(this.redirectTo,this._pathRecognizer.specificity)),j.resolve(t)},e.prototype.generate=function(e){throw new L("Tried to generate a redirect.")},e}();V.RedirectRule=fe;var ge=function(){function e(e,t){this._routePath=e,this.handler=t,this._cache=new Map,this.specificity=this._routePath.specificity,this.hash=this._routePath.hash,this.terminal=this._routePath.terminal}return Object.defineProperty(e.prototype,"path",{get:function(){return this._routePath.toString()},set:function(e){throw new L("you cannot set the path of a RouteRule directly")},enumerable:!0,configurable:!0}),e.prototype.recognize=function(e){var t=this,n=this._routePath.matchUrl(e);return u(n)?null:this.handler.resolveComponentType().then(function(e){var i=t._getInstruction(n.urlPath,n.urlParams,n.allParams);return new pe(i,n.rest,n.auxiliary)})},e.prototype.generate=function(e){var t=this._routePath.generateUrl(e),n=t.urlPath,i=t.urlParams;return this._getInstruction(n,ue.convertUrlParamsToArray(i),e)},e.prototype.generateComponentPathValues=function(e){return this._routePath.generateUrl(e)},e.prototype._getInstruction=function(e,t,n){if(u(this.handler.componentType))throw new L("Tried to get instruction before the type was loaded.");var i=e+"?"+t.join("&");if(this._cache.has(i))return this._cache.get(i);var r=new ae.ComponentInstruction(e,t,this.handler.data,this.handler.componentType,this.terminal,this.specificity,n);return this._cache.set(i,r),r},e}();V.RouteRule=ge;var me=B("./rules"),ve=B("../route_config/route_config_impl"),ye=B("./route_handlers/async_route_handler"),_e=B("./route_handlers/sync_route_handler"),we=B("./route_paths/param_route_path"),be=B("./route_paths/regex_route_path"),Ce=function(){function e(){this.rulesByName=new Map,this.auxRulesByName=new Map,this.auxRulesByPath=new Map,this.rules=[],this.defaultRule=null}return e.prototype.config=function(e){var t;if(c(e.name)&&e.name[0].toUpperCase()!=e.name[0]){var n=e.name[0].toUpperCase()+e.name.substring(1);throw new L('Route "'+e.path+'" with name "'+e.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+n+'".')}if(e instanceof ve.AuxRoute){t=new _e.SyncRouteHandler(e.component,e.data);var i=this._getRoutePath(e),r=new me.RouteRule(i,t);return this.auxRulesByPath.set(i.toString(),r),c(e.name)&&this.auxRulesByName.set(e.name,r),r.terminal}var o=!1;if(e instanceof ve.Redirect){var s=this._getRoutePath(e),a=new me.RedirectRule(s,e.redirectTo);return this._assertNoHashCollision(a.hash,e.path),this.rules.push(a),!0}e instanceof ve.Route?(t=new _e.SyncRouteHandler(e.component,e.data),o=c(e.useAsDefault)&&e.useAsDefault):e instanceof ve.AsyncRoute&&(t=new ye.AsyncRouteHandler(e.loader,e.data),o=c(e.useAsDefault)&&e.useAsDefault);var l=this._getRoutePath(e),u=new me.RouteRule(l,t);if(this._assertNoHashCollision(u.hash,e.path),o){if(c(this.defaultRule))throw new L("Only one route can be default");this.defaultRule=u}return this.rules.push(u),c(e.name)&&this.rulesByName.set(e.name,u),u.terminal},e.prototype.recognize=function(e){var t=[];return this.rules.forEach(function(n){var i=n.recognize(e);c(i)&&t.push(i)}),0==t.length&&c(e)&&e.auxiliary.length>0?[j.resolve(new me.PathMatch(null,null,e.auxiliary))]:t},e.prototype.recognizeAuxiliary=function(e){var t=this.auxRulesByPath.get(e.path);return c(t)?[t.recognize(e)]:[j.resolve(null)]},e.prototype.hasRoute=function(e){return this.rulesByName.has(e)},e.prototype.componentLoaded=function(e){return this.hasRoute(e)&&c(this.rulesByName.get(e).handler.componentType)},e.prototype.loadComponent=function(e){return this.rulesByName.get(e).handler.resolveComponentType()},e.prototype.generate=function(e,t){var n=this.rulesByName.get(e);return u(n)?null:n.generate(t)},e.prototype.generateAuxiliary=function(e,t){var n=this.auxRulesByName.get(e);return u(n)?null:n.generate(t)},e.prototype._assertNoHashCollision=function(e,t){this.rules.forEach(function(n){if(e==n.hash)throw new L("Configuration '"+t+"' conflicts with existing route '"+n.path+"'")})},e.prototype._getRoutePath=function(e){if(c(e.regex)){if(isFunction(e.serializer))return new be.RegexRoutePath(e.regex,e.serializer);throw new L("Route provides a regex property, '"+e.regex+"', but no serializer property")}if(c(e.path)){var t=e instanceof ve.AuxRoute&&e.path.startsWith("/")?e.path.substring(1):e.path;return new we.ParamRoutePath(t)}throw new L("Route must provide either a path or regex property")},e}();V.RuleSet=Ce;var xe=function(){function e(e,t,n,i,r){this.urlPath=e,this.urlParams=t,this.allParams=n,this.auxiliary=i,this.rest=r}return e}();V.MatchedUrl=xe;var Se=function(){function e(e,t){this.urlPath=e,this.urlParams=t}return e}();V.GeneratedUrl=Se;var Ee=B("../../utils"),ue=B("../../url_parser"),Pe=B("./route_path"),ke=function(){function e(){this.name="",this.specificity="",this.hash="..."}return e.prototype.generate=function(e){return""},e.prototype.match=function(e){return!0},e}(),Te=function(){function e(e){this.path=e,this.name="",this.specificity="2",this.hash=e}return e.prototype.match=function(e){return e==this.path},e.prototype.generate=function(e){return this.path},e}(),$e=function(){function e(e){this.name=e,this.specificity="1",this.hash=":"}return e.prototype.match=function(e){return e.length>0},e.prototype.generate=function(e){if(!I.contains(e.map,this.name))throw new L("Route generator for '"+this.name+"' was not included in parameters passed.");return Ee.normalizeString(e.get(this.name))},e.paramMatcher=/^:([^\/]+)$/g,e}(),De=function(){function e(e){this.name=e,this.specificity="0",this.hash="*"}return e.prototype.match=function(e){return!0},e.prototype.generate=function(e){return Ee.normalizeString(e.get(this.name))},e.wildcardMatcher=/^\*([^\/]+)$/g,e}(),Ae=function(){function e(e){this.routePath=e,this.terminal=!0,this._assertValidPath(e),this._parsePathString(e),this.specificity=this._calculateSpecificity(),this.hash=this._calculateHash();var t=this._segments[this._segments.length-1];this.terminal=!(t instanceof ke)}return e.prototype.matchUrl=function(e){for(var t,n=e,i={},r=[],o=0;o<this._segments.length;o+=1){var s=this._segments[o];if(t=n,s instanceof ke)break;if(c(t)){if(s instanceof De){i[s.name]=t.toString(),r.push(t.toString()),n=null;break}if(r.push(t.path),s instanceof $e)i[s.name]=t.path;else if(!s.match(t.path))return null;n=t.child}else if(!s.match(""))return null}if(this.terminal&&c(n))return null;var a=r.join("/"),l=[],u=[],h=i;if(c(t)){var p=e instanceof ue.RootUrl?e:t;c(p.params)?(h=I.merge(p.params,i),u=ue.convertUrlParamsToArray(p.params)):h=i,l=t.auxiliary}return new Pe.MatchedUrl(a,u,h,l,n)},e.prototype.generateUrl=function(e){for(var t=new Ee.TouchMap(e),n=[],i=0;i<this._segments.length;i++){var r=this._segments[i];r instanceof ke||n.push(r.generate(t))}var o=n.join("/"),s=t.getUnused(),a=s;return new Pe.GeneratedUrl(o,a)},e.prototype.toString=function(){return this.routePath},e.prototype._parsePathString=function(e){e.startsWith("/")&&(e=e.substring(1));var t=e.split("/");this._segments=[];for(var n=t.length-1,i=0;n>=i;i++){var r,o=t[i];if(c(r=M.firstMatch($e.paramMatcher,o)))this._segments.push(new $e(r[1]));else if(c(r=M.firstMatch(De.wildcardMatcher,o)))this._segments.push(new De(r[1]));else if("..."==o){if(n>i)throw new L('Unexpected "..." before the end of the path for "'+e+'".');this._segments.push(new ke)}else this._segments.push(new Te(o))}},e.prototype._calculateSpecificity=function(){var e,t,n=this._segments.length;if(0==n)t+="2";else for(t="",e=0;n>e;e++)t+=this._segments[e].specificity;return t},e.prototype._calculateHash=function(){var e,t=this._segments.length,n=[];for(e=0;t>e;e++)n.push(this._segments[e].hash);return n.join("/")},e.prototype._assertValidPath=function(t){if(N.contains(t,"#"))throw new L('Path "'+t+'" should not include "#". Use "HashLocationStrategy" instead.');var n=M.firstMatch(e.RESERVED_CHARS,t);if(c(n))throw new L('Path "'+t+'" contains "'+n[0]+'" which is not allowed in a route config.')},e.RESERVED_CHARS=M.create("//|\\(|\\)|;|\\?|="),e}();V.ParamRoutePath=Ae;var Pe=B("./route_path"),Re=function(){function e(e,t){this._reString=e,this._serializer=t,this.terminal=!0,this.specificity="2",this.hash=this._reString,this._regex=M.create(this._reString)}return e.prototype.matchUrl=function(e){var t=e.toString(),n={},i=M.matcher(this._regex,t),r=RegExpMatcherWrapper.next(i);if(u(r))return null;for(var o=0;o<r.length;o+=1)n[o.toString()]=r[o];return new Pe.MatchedUrl(t,[],n,[],null)},e.prototype.generateUrl=function(e){return this._serializer(e)},e.prototype.toString=function(){return this._reString},e}();V.RegexRoutePath=Re;var z=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},je=function(){function e(e){this.params=e}return e.prototype.get=function(e){return normalizeBlank(I.get(this.params,e))},e}();V.RouteParams=je;var Me=function(){function e(e){void 0===e&&(e=l({})),this.data=e}return e.prototype.get=function(e){return normalizeBlank(I.get(this.data,e))},e}();V.RouteData=Me,V.BLANK_ROUTE_DATA=new Me;var Oe=function(){function e(e,t,n){this.component=e,this.child=t,this.auxInstruction=n}return Object.defineProperty(e.prototype,"urlPath",{get:function(){return c(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParams",{get:function(){return c(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specificity",{get:function(){var e="";return c(this.component)&&(e+=this.component.specificity),c(this.child)&&(e+=this.child.specificity),e},enumerable:!0,configurable:!0}),e.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},e.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(c(this.child)?this.child._toNonRootUrl():"")},e.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},e.prototype.replaceChild=function(e){return new Ie(this.component,e,this.auxInstruction)},e.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(c(this.child)?this.child._toNonRootUrl():"")},e.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(c(this.child)?this.child._toLinkUrl():"")},e.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(c(this.child)?this.child._toLinkUrl():"")},e.prototype._stringifyPathMatrixAuxPrefixed=function(){var e=this._stringifyPathMatrixAux();return e.length>0&&(e="/"+e),e},e.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},e.prototype._stringifyPathMatrixAux=function(){return u(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},e.prototype._stringifyAux=function(){var e=[];return I.forEach(this.auxInstruction,function(t,n){e.push(t._stringifyPathMatrixAux())}),e.length>0?"("+e.join("//")+")":""},e}();V.Instruction=Oe;var Ie=function(e){function t(t,n,i){e.call(this,t,n,i)}return z(t,e),t.prototype.resolveComponent=function(){return j.resolve(this.component)},t}(Oe);V.ResolvedInstruction=Ie;var Fe=function(e){function t(t,n){e.call(this,t,n,{})}return z(t,e),t.prototype.toLinkUrl=function(){return""},t.prototype._toLinkUrl=function(){return""},t}(Ie);V.DefaultInstruction=Fe;var Ne=function(e){function t(t,n,i){void 0===n&&(n=""),void 0===i&&(i=l([])),e.call(this,null,null,{}),this._resolver=t,this._urlPath=n,this._urlParams=i}return z(t,e),Object.defineProperty(t.prototype,"urlPath",{get:function(){return c(this.component)?this.component.urlPath:c(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlParams",{get:function(){return c(this.component)?this.component.urlParams:c(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),t.prototype.resolveComponent=function(){var e=this;return c(this.component)?j.resolve(this.component):this._resolver().then(function(t){return e.child=t.child,e.component=t.component})},t}(Oe);V.UnresolvedInstruction=Ne;var Le=function(e){function t(t,n,i,r){e.call(this,t,n,i),this._specificity=r}return z(t,e),Object.defineProperty(t.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),t}(Ie);V.RedirectInstruction=Le;var He=function(){function e(e,t,n,i,r,o,s){void 0===s&&(s=null),this.urlPath=e,this.urlParams=t,this.componentType=i,this.terminal=r,this.specificity=o,this.params=s,this.reuse=!1,this.routeData=c(n)?n:V.BLANK_ROUTE_DATA}return e}();V.ComponentInstruction=He;var Ve=B("angular2/core"),ve=B("./route_config/route_config_impl"),me=B("./rules/rules"),Be=B("./rules/rule_set"),ae=B("./instruction"),Ue=B("./route_config/route_config_normalizer"),ue=B("./url_parser"),ze=j.resolve(null);V.ROUTER_PRIMARY_COMPONENT=l(new Ve.OpaqueToken("RouterPrimaryComponent"));var We=function(){function e(e){this._rootComponent=e,this._rules=new Map}return e.prototype.config=function(e,t){t=Ue.normalizeRouteConfig(t,this),t instanceof ve.Route?Ue.assertComponentExists(t.component,t.path):t instanceof ve.AuxRoute&&Ue.assertComponentExists(t.component,t.path);var n=this._rules.get(e);u(n)&&(n=new Be.RuleSet,this._rules.set(e,n));var i=n.config(t);t instanceof ve.Route&&(i?A(t.component,t.path):this.configFromComponent(t.component))},e.prototype.configFromComponent=function(e){var t=this;if(p(e)&&!this._rules.has(e)){var n=O.annotations(e);if(c(n))for(var i=0;i<n.length;i++){var r=n[i];if(r instanceof ve.RouteConfig){var o=r.configs;o.forEach(function(n){return t.config(e,n)})}}}},e.prototype.recognize=function(e,t){var n=ue.parser.parse(e);return this._recognize(n,[])},e.prototype._recognize=function(e,t,n){var i=this;void 0===n&&(n=!1);var r=F.last(t),o=c(r)?r.component.componentType:this._rootComponent,s=this._rules.get(o);if(u(s))return ze;var a=n?s.recognizeAuxiliary(e):s.recognize(e),l=a.map(function(e){return e.then(function(e){if(e instanceof me.PathMatch){var n=t.length>0?[F.last(t)]:[],r=i._auxRoutesToUnresolved(e.remainingAux,n),o=new ae.ResolvedInstruction(e.instruction,null,r);if(u(e.instruction)||e.instruction.terminal)return o;var s=t.concat([o]);return i._recognize(e.remaining,s).then(function(e){return u(e)?null:e instanceof ae.RedirectInstruction?e:(o.child=e,o)})}if(e instanceof me.RedirectMatch){var o=i.generate(e.redirectTo,t.concat([null]));return new ae.RedirectInstruction(o.component,o.child,o.auxInstruction,e.specificity)}})});return!u(e)&&""!=e.path||0!=a.length?j.all(l).then($):j.resolve(this.generateDefault(o))},e.prototype._auxRoutesToUnresolved=function(e,t){var n=this,i={};return e.forEach(function(e){i[e.path]=new ae.UnresolvedInstruction(function(){return n._recognize(e,t,!0)})}),i},e.prototype.generate=function(e,t,n){void 0===n&&(n=!1);var i,r=T(e);if(""==F.first(r))r.shift(),i=F.first(t),t=[];else if(i=t.length>0?t.pop():null,"."==F.first(r))r.shift();else if(".."==F.first(r))for(;".."==F.first(r);){if(t.length<=0)throw new L('Link "'+F.toJSON(e)+'" has too many "../" segments.');i=t.pop(),r=F.slice(r,1)}else{var o=F.first(r),s=this._rootComponent,a=null;if(t.length>1){var l=t[t.length-1],h=t[t.length-2];s=l.component.componentType,a=h.component.componentType}else 1==t.length&&(s=t[0].component.componentType,a=this._rootComponent);var p=this.hasRoute(o,s),d=c(a)&&this.hasRoute(o,a);if(d&&p){var f='Link "'+F.toJSON(e)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new L(f)}d&&(i=t.pop())}if(""==r[r.length-1]&&r.pop(),r.length>0&&""==r[0]&&r.shift(),r.length<1){var f='Link "'+F.toJSON(e)+'" must include a route name.';throw new L(f)}for(var g=this._generate(r,t,i,n,e),m=t.length-1;m>=0;m--){var v=t[m];if(u(v))break;g=v.replaceChild(g)}return g},e.prototype._generate=function(e,t,n,i,r){var o=this;void 0===i&&(i=!1);var s=this._rootComponent,a=null,l={},p=F.last(t);if(c(p)&&c(p.component)&&(s=p.component.componentType),0==e.length){var m=this.generateDefault(s);if(u(m))throw new L('Link "'+F.toJSON(r)+'" does not resolve to a terminal instruction.');return m}c(n)&&!i&&(l=I.merge(n.auxInstruction,l),a=n.component);var v=this._rules.get(s);if(u(v))throw new L('Component "'+g(s)+'" has no route config.');var y=0,_={};if(y<e.length&&h(e[y])){var w=e[y];if(""==w||"."==w||".."==w)throw new L('"'+w+'/" is only allowed at the beginning of a link DSL.');if(y+=1,y<e.length){var b=e[y];d(b)&&!f(b)&&(_=b,y+=1)}var C=(i?v.auxRulesByName:v.rulesByName).get(w);if(u(C))throw new L('Component "'+g(s)+'" has no route named "'+w+'".');if(u(C.handler.componentType)){var x=C.generateComponentPathValues(_);return new ae.UnresolvedInstruction(function(){return C.handler.resolveComponentType().then(function(s){return o._generate(e,t,n,i,r)})},x.urlPath,ue.convertUrlParamsToArray(x.urlParams))}a=i?v.generateAuxiliary(w,_):v.generate(w,_)}for(;y<e.length&&f(e[y]);){var S=[p],E=this._generate(e[y],S,null,!0,r);l[E.component.urlPath]=E,y+=1}var P=new ae.ResolvedInstruction(a,null,l);if(c(a)&&c(a.componentType)){var k=null;if(a.terminal)y>=e.length;else{var T=t.concat([P]),$=e.slice(y);k=this._generate($,T,null,!1,r)}P.child=k}return P},e.prototype.hasRoute=function(e,t){var n=this._rules.get(t);return u(n)?!1:n.hasRoute(e)},e.prototype.generateDefault=function(e){var t=this;if(u(e))return null;var n=this._rules.get(e);if(u(n)||u(n.defaultRule))return null;var i=null;if(c(n.defaultRule.handler.componentType)){var r=n.defaultRule.generate({});return n.defaultRule.terminal||(i=this.generateDefault(n.defaultRule.handler.componentType)),new ae.DefaultInstruction(r,i)}return new ae.UnresolvedInstruction(function(){return n.defaultRule.handler.resolveComponentType().then(function(n){return t.generateDefault(e)})})},e}();V.RouteRegistry=We;var z=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},qe=B("./lifecycle/route_lifecycle_reflector"),Ge=j.resolve(!0),Ke=j.resolve(!1),Ye=function(){function e(e,t,n){this.registry=e,this.parent=t,this.hostComponent=n,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=Ge,this._outlet=null,this._auxRouters=new Map,this._subject=new m}return e.prototype.childRouter=function(e){return this._childRouter=new Xe(this,e)},e.prototype.auxRouter=function(e){return new Xe(this,e)},e.prototype.registerPrimaryOutlet=function(e){if(c(e.name))throw new L("registerPrimaryOutlet expects to be called with an unnamed outlet.");if(c(this._outlet))throw new L("Primary outlet is already registered.");return this._outlet=e,c(this._currentInstruction)?this.commit(this._currentInstruction,!1):Ge},e.prototype.unregisterPrimaryOutlet=function(e){if(c(e.name))throw new L("registerPrimaryOutlet expects to be called with an unnamed outlet.");this._outlet=null},e.prototype.registerAuxOutlet=function(e){var t=e.name;if(u(t))throw new L("registerAuxOutlet expects to be called with an outlet with a name.");var n=this.auxRouter(this.hostComponent);this._auxRouters.set(t,n),n._outlet=e;var i;return c(this._currentInstruction)&&c(i=this._currentInstruction.auxInstruction[t])?n.commit(i):Ge},e.prototype.isRouteActive=function(e){for(var t=this;c(t.parent)&&c(e.child);)t=t.parent,e=e.child;return c(this._currentInstruction)&&this._currentInstruction.component==e.component},e.prototype.config=function(e){var t=this;return e.forEach(function(e){t.registry.config(t.hostComponent,e)}),this.renavigate()},e.prototype.navigate=function(e){var t=this.generate(e);return this.navigateByInstruction(t,!1)},e.prototype.navigateByUrl=function(e,t){var n=this;return void 0===t&&(t=!1),this._currentNavigation=this._currentNavigation.then(function(i){return n.lastNavigationAttempt=e,n._startNavigating(),n._afterPromiseFinishNavigating(n.recognize(e).then(function(e){return u(e)?!1:n._navigate(e,t)}))})},e.prototype.navigateByInstruction=function(e,t){var n=this;return void 0===t&&(t=!1),u(e)?Ke:this._currentNavigation=this._currentNavigation.then(function(i){return n._startNavigating(),n._afterPromiseFinishNavigating(n._navigate(e,t))})},e.prototype._settleInstruction=function(e){var t=this;return e.resolveComponent().then(function(n){var i=[];return c(e.component)&&(e.component.reuse=!1),c(e.child)&&i.push(t._settleInstruction(e.child)),I.forEach(e.auxInstruction,function(e,n){i.push(t._settleInstruction(e))}),j.all(i)})},e.prototype._navigate=function(e,t){var n=this;return this._settleInstruction(e).then(function(t){return n._routerCanReuse(e)}).then(function(t){return n._canActivate(e)}).then(function(i){return i?n._routerCanDeactivate(e).then(function(i){return i?n.commit(e,t).then(function(t){return n._emitNavigationFinish(e.toRootUrl()),!0}):void 0}):!1})},e.prototype._emitNavigationFinish=function(e){H.callEmit(this._subject,e)},e.prototype._afterPromiseFinishNavigating=function(e){var t=this;return j.catchError(e.then(function(e){return t._finishNavigating()}),function(e){throw t._finishNavigating(),e})},e.prototype._routerCanReuse=function(e){var t=this;return u(this._outlet)?Ke:u(e.component)?Ge:this._outlet.routerCanReuse(e.component).then(function(n){return e.component.reuse=n,n&&c(t._childRouter)&&c(e.child)?t._childRouter._routerCanReuse(e.child):void 0})},e.prototype._canActivate=function(e){return R(e,this._currentInstruction)},e.prototype._routerCanDeactivate=function(e){var t=this;if(u(this._outlet))return Ge;var n,i=null,r=!1,o=null;return c(e)&&(i=e.child,o=e.component,r=u(e.component)||e.component.reuse),n=r?Ge:this._outlet.routerCanDeactivate(o),n.then(function(e){return 0==e?!1:c(t._childRouter)?t._childRouter._routerCanDeactivate(i):!0})},e.prototype.commit=function(e,t){var n=this;void 0===t&&(t=!1),this._currentInstruction=e;var i=Ge;if(c(this._outlet)&&c(e.component)){var r=e.component;i=r.reuse?this._outlet.reuse(r):this.deactivate(e).then(function(e){return n._outlet.activate(r)}),c(e.child)&&(i=i.then(function(t){return c(n._childRouter)?n._childRouter.commit(e.child):void 0}))}var o=[];return this._auxRouters.forEach(function(t,n){c(e.auxInstruction[n])&&o.push(t.commit(e.auxInstruction[n]))}),i.then(function(e){return j.all(o)})},e.prototype._startNavigating=function(){this.navigating=!0},e.prototype._finishNavigating=function(){this.navigating=!1},e.prototype.subscribe=function(e){return H.subscribe(this._subject,e)},e.prototype.deactivate=function(e){var t=this,n=null,i=null;c(e)&&(n=e.child,i=e.component);var r=Ge;return c(this._childRouter)&&(r=this._childRouter.deactivate(n)),c(this._outlet)&&(r=r.then(function(e){return t._outlet.deactivate(i)})),r},e.prototype.recognize=function(e){var t=this._getAncestorInstructions();return this.registry.recognize(e,t)},e.prototype._getAncestorInstructions=function(){for(var e=[this._currentInstruction],t=this;c(t=t.parent);)e.unshift(t._currentInstruction);return e},e.prototype.renavigate=function(){return u(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},e.prototype.generate=function(e){var t=this._getAncestorInstructions();return this.registry.generate(e,t)},e}();V.Router=Ye;var Je=function(e){function t(t,n,i){var r=this;e.call(this,t,null,i),this._location=n,this._locationSub=this._location.subscribe(function(e){r.recognize(e.url).then(function(t){r.navigateByInstruction(t,c(e.pop)).then(function(n){if(!c(e.pop)||"hashchange"==e.type){var i=t.toUrlPath(),o=t.toUrlQuery();i.length>0&&"/"!=i[0]&&(i="/"+i),"hashchange"==e.type?t.toRootUrl()!=r._location.path()&&r._location.replaceState(i,o):r._location.go(i,o)}})})}),this.registry.configFromComponent(i),this.navigateByUrl(n.path())}return z(t,e),t.prototype.commit=function(t,n){var i=this;void 0===n&&(n=!1);var r=t.toUrlPath(),o=t.toUrlQuery();r.length>0&&"/"!=r[0]&&(r="/"+r);var s=e.prototype.commit.call(this,t);return n||(s=s.then(function(e){i._location.go(r,o)})),s},t.prototype.dispose=function(){c(this._locationSub)&&(H.dispose(this._locationSub),this._locationSub=null)},t}(Ye);V.RootRouter=Je;var Xe=function(e){function t(t,n){e.call(this,t.registry,t,n),this.parent=t}return z(t,e),t.prototype.navigateByUrl=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByUrl(e,t)},t.prototype.navigateByInstruction=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByInstruction(e,t)},t}(Ye);V.getCanActivateHook=function(e){var t=n.getTypeByName(e);return t&&t.$canActivate&&function(e,n){return o.invoke(t.$canActivate,null,{$nextInstruction:e,$prevInstruction:n})}},V.assertComponentExists=function(){},angular.stringifyInstruction=function(e){return e.toRootUrl()};var We=V.RouteRegistry,Je=V.RootRouter,Qe=new We(s),Ze=new v;n(function(e,t){angular.isArray(t.$routeConfig)&&t.$routeConfig.forEach(function(t){Qe.config(e,t)})});var et=new Je(Qe,Ze,s);return r.$watch(function(){return t.url();
},function(e){et.lastNavigationAttempt!==e&&et.navigateByUrl(e)}),et.subscribe(function(){r.$broadcast("$routeChangeSuccess",{})}),et}var a=function(){function e(){this.directiveBuffer=[],this.directiveFactoriesByName={},this.onDirectiveRegistered=null}return e.prototype.register=function(e,t){angular.isArray(t)&&(t=t[t.length-1]),this.directiveFactoriesByName[e]=t,this.onDirectiveRegistered?this.onDirectiveRegistered(e,t):this.directiveBuffer.push({name:e,factory:t})},e.prototype.$get=function(){var e=this,t=function(t){for(e.onDirectiveRegistered=t;e.directiveBuffer.length>0;){var n=e.directiveBuffer.pop();e.onDirectiveRegistered(n.name,n.factory)}};return t.getTypeByName=function(t){return e.directiveFactoriesByName[t]},t},e}();angular.module("ngComponentRouter",[]).directive("ngOutlet",["$animate","$q","$rootRouter",t]).directive("ngOutlet",["$compile",n]).directive("ngLink",["$rootRouter","$parse",r]).directive("$router",["$q",i]),angular.module("ng").provider("$$directiveIntrospector",a).config(["$compileProvider","$$directiveIntrospectorProvider",e]),angular.module("ngComponentRouter").value("$route",null).value("$routerRootComponent",new Object).factory("$rootRouter",["$q","$location","$$directiveIntrospector","$browser","$rootScope","$injector","$routerRootComponent",s])}(),angular.module("ui.bootstrap",["ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(e,t){var n=t.has("$animateCss")?t.get("$animateCss"):null;return{link:function(t,i,r){function o(){i.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),n?n(i,{addClass:"in",easing:"ease",to:{height:i[0].scrollHeight+"px"}}).start()["finally"](s):e.addClass(i,"in",{to:{height:i[0].scrollHeight+"px"}}).then(s)}function s(){i.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function a(){return i.hasClass("collapse")||i.hasClass("in")?(i.css({height:i[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(n?n(i,{removeClass:"in",to:{height:"0"}}).start()["finally"](l):e.removeClass(i,"in",{to:{height:"0"}}).then(l))):l()}function l(){i.css({height:"0"}),i.removeClass("collapsing").addClass("collapse")}t.$watch(r.uibCollapse,function(e){e?a():o()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function(e,t,n,i){var r=t.has("$animateCss")?t.get("$animateCss"):null;return{link:function(t,o,s){function a(){o.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),r?r(o,{easing:"ease",to:{height:o[0].scrollHeight+"px"}}).start().done(l):e.animate(o,{},{height:o[0].scrollHeight+"px"}).then(l)}function l(){o.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function c(){return o.hasClass("collapse")||o.hasClass("in")?(o.css({height:o[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(r?r(o,{to:{height:"0"}}).start().done(u):e.animate(o,{},{height:"0"}).then(u))):u()}function u(){o.css({height:"0"}),o.removeClass("collapsing").addClass("collapse")}i||n.warn("collapse is now deprecated. Use uib-collapse instead."),t.$watch(s.collapse,function(e){e?c():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;r&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.openClass=n.openClass||"panel-open",e.panelClass=n.panelClass,e.$watch("isOpen",function(n){t.toggleClass(e.openClass,!!n),n&&i.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:["?^uibAccordionGroup","?^accordionGroup"],link:function(e,t,n,i){i=i[0]?i[0]:i[1],e.$watch(function(){return i[n.uibAccordionTransclude]},function(e){e&&(t.find("span").html(""),t.find("span").append(e))})}}}),angular.module("ui.bootstrap.accordion").value("$accordionSuppressWarning",!1).controller("AccordionController",["$scope","$attrs","$controller","$log","$accordionSuppressWarning",function(e,t,n,i,r){r||i.warn("AccordionController is now deprecated. Use UibAccordionController instead."),angular.extend(this,n("UibAccordionController",{$scope:e,$attrs:t}))}]).directive("accordion",["$log","$accordionSuppressWarning",function(e,t){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion.html"},link:function(){t||e.warn("accordion is now deprecated. Use uib-accordion instead.")}}}]).directive("accordionGroup",["$log","$accordionSuppressWarning",function(e,t){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(n,i,r,o){t||e.warn("accordion-group is now deprecated. Use uib-accordion-group instead."),o.addGroup(n),n.openClass=r.openClass||"panel-open",n.panelClass=r.panelClass,n.$watch("isOpen",function(e){i.toggleClass(n.openClass,!!e),e&&o.closeOthers(n)}),n.toggleOpen=function(e){n.isDisabled||e&&32!==e.which||(n.isOpen=!n.isOpen)}}}}]).directive("accordionHeading",["$log","$accordionSuppressWarning",function(e,t){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(n,i,r,o,s){t||e.warn("accordion-heading is now deprecated. Use uib-accordion-heading instead."),o.setHeading(s(n,angular.noop))}}}]).directive("accordionTransclude",["$log","$accordionSuppressWarning",function(e,t){return{require:"^accordionGroup",link:function(n,i,r,o){t||e.warn("accordion-transclude is now deprecated. Use uib-accordion-transclude instead."),n.$watch(function(){return o[r.accordionTransclude]},function(e){e&&(i.find("span").html(""),i.find("span").append(e))})}}}]),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(e,t,n,i){e.closeable=!!t.close;var r=angular.isDefined(t.dismissOnTimeout)?n(t.dismissOnTimeout)(e.$parent):null;r&&i(function(){e.close()},parseInt(r,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.alert").value("$alertSuppressWarning",!1).controller("AlertController",["$scope","$attrs","$controller","$log","$alertSuppressWarning",function(e,t,n,i,r){r||i.warn("AlertController is now deprecated. Use UibAlertController instead."),angular.extend(this,n("UibAlertController",{$scope:e,$attrs:t}))}]).directive("alert",["$log","$alertSuppressWarning",function(e,t){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"},link:function(){t||e.warn("alert is now deprecated. Use uib-alert instead.")}}}]),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",function(){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(e,t,n,i){var r=i[0],o=i[1];t.find("input").css({display:"none"}),o.$render=function(){t.toggleClass(r.activeClass,angular.equals(o.$modelValue,e.$eval(n.uibBtnRadio)))},t.on(r.toggleEvent,function(){if(!n.disabled){var i=t.hasClass(r.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){o.$setViewValue(i?null:e.$eval(n.uibBtnRadio)),o.$render()})}})}}}).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,n,i){function r(){return s(n.btnCheckboxTrue,!0)}function o(){return s(n.btnCheckboxFalse,!1)}function s(t,n){return angular.isDefined(t)?e.$eval(t):n}var a=i[0],l=i[1];t.find("input").css({display:"none"}),l.$render=function(){t.toggleClass(a.activeClass,angular.equals(l.$modelValue,r()))},t.on(a.toggleEvent,function(){n.disabled||e.$apply(function(){l.$setViewValue(t.hasClass(a.activeClass)?o():r()),l.$render()})})}}}),angular.module("ui.bootstrap.buttons").value("$buttonsSuppressWarning",!1).controller("ButtonsController",["$controller","$log","$buttonsSuppressWarning",function(e,t,n){n||t.warn("ButtonsController is now deprecated. Use UibButtonsController instead."),angular.extend(this,e("UibButtonsController"))}]).directive("btnRadio",["$log","$buttonsSuppressWarning",function(e,t){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(n,i,r,o){t||e.warn("btn-radio is now deprecated. Use uib-btn-radio instead.");var s=o[0],a=o[1];i.find("input").css({display:"none"}),a.$render=function(){i.toggleClass(s.activeClass,angular.equals(a.$modelValue,n.$eval(r.btnRadio)))},i.bind(s.toggleEvent,function(){if(!r.disabled){var e=i.hasClass(s.activeClass);(!e||angular.isDefined(r.uncheckable))&&n.$apply(function(){a.$setViewValue(e?null:n.$eval(r.btnRadio)),a.$render()})}})}}}]).directive("btnCheckbox",["$document","$log","$buttonsSuppressWarning",function(e,t,n){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(i,r,o,s){function a(){return c(o.btnCheckboxTrue,!0)}function l(){return c(o.btnCheckboxFalse,!1)}function c(e,t){var n=i.$eval(e);return angular.isDefined(n)?n:t}n||t.warn("btn-checkbox is now deprecated. Use uib-btn-checkbox instead.");var u=s[0],h=s[1];r.find("input").css({display:"none"}),h.$render=function(){r.toggleClass(u.activeClass,angular.equals(h.$modelValue,a()))},r.bind(u.toggleEvent,function(){o.disabled||i.$apply(function(){h.$setViewValue(r.hasClass(u.activeClass)?l():a()),h.$render()})}),r.on("keypress",function(t){o.disabled||32!==t.which||e[0].activeElement!==r[0]||i.$apply(function(){h.$setViewValue(r.hasClass(u.activeClass)?l():a()),h.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$animate",function(e,t,n,i){function r(t,n,r){y||(angular.extend(t,{direction:r,active:!0}),angular.extend(p.currentSlide||{},{direction:r,active:!1}),i.enabled()&&!e.noTransition&&!e.$currentTransition&&t.$element&&p.slides.length>1&&(t.$element.data(m,t.direction),p.currentSlide&&p.currentSlide.$element&&p.currentSlide.$element.data(m,t.direction),e.$currentTransition=!0,f?i.on("addClass",t.$element,function(t,n){"close"===n&&(e.$currentTransition=null,i.off("addClass",t))}):t.$element.one("$animate:close",function(){e.$currentTransition=null})),p.currentSlide=t,v=n,s())}function o(e){if(angular.isUndefined(d[e].index))return d[e];var t;d.length;for(t=0;t<d.length;++t)if(d[t].index==e)return d[t]}function s(){a();var t=+e.interval;!isNaN(t)&&t>0&&(u=n(l,t))}function a(){u&&(n.cancel(u),u=null)}function l(){var t=+e.interval;h&&!isNaN(t)&&t>0&&d.length?e.next():e.pause()}function c(t){t.length||(e.$currentTransition=null)}var u,h,p=this,d=p.slides=e.slides=[],f=angular.version.minor>=4,g="uib-noTransition",m="uib-slideDirection",v=-1;p.currentSlide=null;var y=!1;p.select=e.select=function(t,n){var i=e.indexOfSlide(t);void 0===n&&(n=i>p.getCurrentIndex()?"next":"prev"),t&&t!==p.currentSlide&&!e.$currentTransition&&r(t,i,n)},e.$on("$destroy",function(){y=!0}),p.getCurrentIndex=function(){return p.currentSlide&&angular.isDefined(p.currentSlide.index)?+p.currentSlide.index:v},e.indexOfSlide=function(e){return angular.isDefined(e.index)?+e.index:d.indexOf(e)},e.next=function(){var t=(p.getCurrentIndex()+1)%d.length;return 0===t&&e.noWrap()?void e.pause():p.select(o(t),"next")},e.prev=function(){var t=p.getCurrentIndex()-1<0?d.length-1:p.getCurrentIndex()-1;return e.noWrap()&&t===d.length-1?void e.pause():p.select(o(t),"prev")},e.isActive=function(e){return p.currentSlide===e},e.$watch("interval",s),e.$watchCollection("slides",c),e.$on("$destroy",a),e.play=function(){h||(h=!0,s())},e.pause=function(){e.noPause||(h=!1,a())},p.addSlide=function(t,n){t.$element=n,d.push(t),1===d.length||t.active?(p.select(d[d.length-1]),1===d.length&&e.play()):t.active=!1},p.removeSlide=function(e){angular.isDefined(e.index)&&d.sort(function(e,t){return+e.index>+t.index});var t=d.indexOf(e);d.splice(t,1),d.length>0&&e.active?t>=d.length?p.select(d[t-1]):p.select(d[t]):v>t&&v--,0===d.length&&(p.currentSlide=null)},e.$watch("noTransition",function(e){t.data(g,e)})}]).directive("uibCarousel",[function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(e,t){return t.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("uibSlide",function(){return{require:"^uibCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}).animation(".item",["$injector","$animate",function(e,t){function n(e,t,n){e.removeClass(t),n&&n()}var i="uib-noTransition",r="uib-slideDirection",o=null;return e.has("$animateCss")&&(o=e.get("$animateCss")),{beforeAddClass:function(e,s,a){if("active"==s&&e.parent()&&e.parent().parent()&&!e.parent().parent().data(i)){var l=!1,c=e.data(r),u="next"==c?"left":"right",h=n.bind(this,e,u+" "+c,a);return e.addClass(c),o?o(e,{addClass:u}).start().done(h):t.addClass(e,u).then(function(){l||h(),a()}),function(){l=!0}}a()},beforeRemoveClass:function(e,s,a){if("active"===s&&e.parent()&&e.parent().parent()&&!e.parent().parent().data(i)){var l=!1,c=e.data(r),u="next"==c?"left":"right",h=n.bind(this,e,u,a);return o?o(e,{addClass:u}).start().done(h):t.addClass(e,u).then(function(){l||h(),a()}),function(){l=!0}}a()}}}]),angular.module("ui.bootstrap.carousel").value("$carouselSuppressWarning",!1).controller("CarouselController",["$scope","$element","$controller","$log","$carouselSuppressWarning",function(e,t,n,i,r){r||i.warn("CarouselController is now deprecated. Use UibCarouselController instead."),angular.extend(this,n("UibCarouselController",{$scope:e,$element:t}))}]).directive("carousel",["$log","$carouselSuppressWarning",function(e,t){return{transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(e,t){return t.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"},link:function(){t||e.warn("carousel is now deprecated. Use uib-carousel instead.")}}}]).directive("slide",["$log","$carouselSuppressWarning",function(e,t){return{require:"^carousel",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(n,i,r,o){t||e.warn("slide is now deprecated. Use uib-slide instead."),o.addSlide(n,i),n.$on("$destroy",function(){o.removeSlide(n)}),n.$watch("active",function(e){e&&o.select(n)})}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function(e,t,n){function i(e){var t=[],i=e.split("");return angular.forEach(s,function(n,r){var o=e.indexOf(r);if(o>-1){e=e.split(""),i[o]="("+n.regex+")",e[o]="$";for(var s=o+1,a=o+r.length;a>s;s++)i[s]="",e[s]="$";e=e.join(""),t.push({index:o,apply:n.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:n(t,"index")}}function r(e,t,n){return 1>n?!1:1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}var o,s,a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){o=t.id,this.parsers={},s={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)}},MMM:{regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:t.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:t.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},hh:{regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},h:{regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}},a:{regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)}}}},this.init(),this.parse=function(n,s,l){if(!angular.isString(n)||!s)return n;s=t.DATETIME_FORMATS[s]||s,s=s.replace(a,"\\$&"),t.id!==o&&this.init(),this.parsers[s]||(this.parsers[s]=i(s));var c=this.parsers[s],u=c.regex,h=c.map,p=n.match(u);if(p&&p.length){var d,f;angular.isDate(l)&&!isNaN(l.getTime())?d={year:l.getFullYear(),month:l.getMonth(),date:l.getDate(),hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds(),milliseconds:l.getMilliseconds()}:(l&&e.warn("dateparser:","baseDate is not a valid date"),d={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var g=1,m=p.length;m>g;g++){var v=h[g-1];v.apply&&v.apply.call(d,p[g])}return r(d.year,d.month,d.date)&&(angular.isDate(l)&&!isNaN(l.getTime())?(f=new Date(l),f.setFullYear(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.milliseconds||0)):f=new Date(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.milliseconds||0)),f}}}]),angular.module("ui.bootstrap.dateparser").value("$dateParserSuppressWarning",!1).service("dateParser",["$log","$dateParserSuppressWarning","uibDateParser",function(e,t,n){t||e.warn("dateParser is now deprecated. Use uibDateParser instead."),angular.extend(this,n)}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},o=r(t[0]);o!=e[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var s=t[0].getBoundingClientRect();return{width:s.width||t.prop("offsetWidth"),height:s.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,o,s,a,l=n.split("-"),c=l[0],u=l[1]||"center";r=i?this.offset(e):this.position(e),o=t.prop("offsetWidth"),s=t.prop("offsetHeight");var h={center:function(){return r.left+r.width/2-o/2},left:function(){return r.left},right:function(){return r.left+r.width}},p={center:function(){return r.top+r.height/2-s/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":a={top:p[u](),left:h[c]()};break;case"left":a={top:p[u](),left:r.left-o};break;case"bottom":a={top:p[c](),left:h[u]()};break;default:a={top:r.top-s,left:h[u]()}}return a}}}]),angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function(e,t,n){t||e.warn("$position is now deprecated. Use $uibPosition instead."),angular.extend(this,n)}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError",function(e,t,n,i,r,o,s,a){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,r){l[n]=angular.isDefined(t[n])?6>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),angular.forEach(["minMode","maxMode"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(n){l[i]=angular.isDefined(n)?n:t[i],e[i]=l[i],("minMode"==i&&l.modes.indexOf(e.datepickerMode)<l.modes.indexOf(l[i])||"maxMode"==i&&l.modes.indexOf(e.datepickerMode)>l.modes.indexOf(l[i]))&&(e.datepickerMode=l[i])}):(l[i]=s[i]||null,e[i]=l[i])}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(c.$isEmpty(c.$modelValue)||c.$invalid)&&(l.activeDate=e,l.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$viewValue){var e=new Date(c.$viewValue),t=!isNaN(e);t?this.activeDate=e:a||r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$viewValue?new Date(c.$viewValue):null;c.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$viewValue?new Date(c.$viewValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$viewValue?new Date(c.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){l.element[0].focus()};e.$on("uib:datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),l.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):e.toggleMode("up"===n?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function i(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?o[t]:29}function r(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var o=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,i=new Array(t),r=new Date(e),o=0;t>o;)n=new Date(r),i[o++]=n,r.setDate(r.getDate()+1);return i},this._refreshView=function(){var t=this.activeDate.getFullYear(),i=this.activeDate.getMonth(),o=new Date(this.activeDate);o.setFullYear(t,i,1);var s=this.startingDay-o.getDay(),a=s>0?7-s:-s,l=new Date(o);a>0&&l.setDate(-a+1);for(var c=this.getDates(l,42),u=0;42>u;u++)c[u]=angular.extend(this.createDateObject(c[u],this.formatDay),{secondary:c[u].getMonth()!==i,uid:e.uniqueId+"-"+u});e.labels=new Array(7);for(var h=0;7>h;h++)e.labels[h]={abbr:n(c[h].date,this.formatDayHeader),full:n(c[h].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(c,7),e.showWeeks){e.weekNumbers=[];for(var p=(11-this.startingDay)%7,d=e.rows.length,f=0;d>f;f++)e.weekNumbers.push(r(e.rows[f][p].date))}},this.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(r,1),n=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=i(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,i=new Array(12),r=this.activeDate.getFullYear(),o=0;12>o;o++)t=new Date(this.activeDate),t.setFullYear(r,o,1),i[o]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+o});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(i,3)},this.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,n){function i(e){return parseInt((e-1)/r,10)*r+1}var r;this.element=t,this.yearpickerInit=function(){r=this.yearRange,this.step={years:r}},this._refreshView=function(){for(var t,n=new Array(r),o=0,s=i(this.activeDate.getFullYear());r>o;o++)t=new Date(this.activeDate),t.setFullYear(s+o,0,1),n[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[n[0].label,n[r-1].label].join(" - "),e.rows=this.split(n,5)},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*this.step.years:"home"===e?n=i(this.activeDate.getFullYear()):"end"===e&&(n=i(this.activeDate.getFullYear())+r-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/day.html"},require:["^?uibDatepicker","uibDaypicker","^?datepicker"],controller:"UibDaypickerController",link:function(e,t,n,i){var r=i[0]||i[2],o=i[1];o.init(r)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/month.html"},require:["^?uibDatepicker","uibMonthpicker","^?datepicker"],controller:"UibMonthpickerController",link:function(e,t,n,i){var r=i[0]||i[2],o=i[1];o.init(r)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/year.html"},require:["^?uibDatepicker","uibYearpicker","^?datepicker"],controller:"UibYearpickerController",link:function(e,t,n,i){var r=i[0]||i[2];angular.extend(r,i[1]),r.yearpickerInit(),r.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,
appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout",function(e,t,n,i,r,o,s,a,l,c,u,h){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function d(t){angular.isNumber(t)&&(t=new Date(t));{if(!t)return null;if(angular.isDate(t)&&!isNaN(t))return t;if(angular.isString(t)){var n=c.parse(t,v,e.date);return isNaN(n)?void 0:n}}}function f(e,t){var i=e||t;if(!n.ngRequired&&!i)return!0;if(angular.isNumber(i)&&(i=new Date(i)),i){if(angular.isDate(i)&&!isNaN(i))return!0;if(angular.isString(i)){var r=c.parse(i,v);return!isNaN(r)}return!1}return!0}function g(n){var i=P[0],r=t[0].contains(n.target),o=void 0!==i.contains&&i.contains(n.target);!e.isOpen||r||o||e.$apply(function(){e.isOpen=!1})}function m(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}var v,y,_,w,b,C,x,S,E,P,k={},T=!1;e.watchData={},this.init=function(a){if(E=a,y=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):u.closeOnDateSelection,_=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):u.appendToBody,w=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):u.onOpenFocus,b=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:u.datepickerPopupTemplateUrl,C=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:u.datepickerTemplateUrl,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):u.showButtonBar,u.html5Types[n.type]?(v=u.html5Types[n.type],T=!0):(v=n.datepickerPopup||n.uibDatepickerPopup||u.datepickerPopup,n.$observe("uibDatepickerPopup",function(e,t){var n=e||u.datepickerPopup;if(n!==v&&(v=n,E.$modelValue=null,!v))throw new Error("uibDatepickerPopup must have a date format specified.")})),!v)throw new Error("uibDatepickerPopup must have a date format specified.");if(T&&n.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(x=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":b}),S=angular.element(x.children()[0]),S.attr("template-url",C),T&&"month"===n.type&&(S.attr("datepicker-mode",'"month"'),S.attr("min-mode","month")),n.datepickerOptions){var h=e.$parent.$eval(n.datepickerOptions);h&&h.initDate&&(e.initDate=h.initDate,S.attr("init-date","initDate"),delete h.initDate),angular.forEach(h,function(e,t){S.attr(p(t),e)})}angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(t){if(n[t]){var i=r(n[t]);if(e.$parent.$watch(i,function(n){e.watchData[t]=n,("minDate"===t||"maxDate"===t)&&(k[t]=new Date(n))}),S.attr(p(t),"watchData."+t),"datepickerMode"===t){var o=i.assign;e.$watch("watchData."+t,function(t,n){angular.isFunction(o)&&t!==n&&o(e.$parent,t)})}}}),n.dateDisabled&&S.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),n.showWeeks&&S.attr("show-weeks",n.showWeeks),n.customClass&&S.attr("custom-class","customClass({ date: date, mode: mode })"),T?E.$formatters.push(function(t){return e.date=t,t}):(E.$$parserName="date",E.$validators.date=f,E.$parsers.unshift(d),E.$formatters.push(function(t){return e.date=t,E.$isEmpty(t)?t:l(t,v)})),E.$viewChangeListeners.push(function(){e.date=c.parse(E.$viewValue,v,e.date)}),t.bind("keydown",m),P=i(x)(e),x.remove(),_?o.find("body").append(P):t.after(P),e.$on("$destroy",function(){e.isOpen===!0&&(s.$$phase||e.$apply(function(){e.isOpen=!1})),P.remove(),t.unbind("keydown",m),o.unbind("click",g)})},e.getText=function(t){return e[t+"Text"]||u[t+"Text"]},e.isDisabled=function(t){return"today"===t&&(t=new Date),e.watchData.minDate&&e.compare(t,k.minDate)<0||e.watchData.maxDate&&e.compare(t,k.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){angular.isDefined(n)&&(e.date=n);var i=e.date?l(e.date,v):null;t.val(i),E.$setViewValue(i),y&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(e.isOpen=!1,t[0].focus())},e.select=function(t){if("today"===t){var n=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())):t=new Date(n.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(){e.isOpen=!1,t[0].focus()},e.$watch("isOpen",function(n){n?(e.position=_?a.offset(t):a.position(t),e.position.top=e.position.top+t.prop("offsetHeight"),h(function(){w&&e.$broadcast("uib:datepicker.focus"),o.bind("click",g)},0,!1)):o.unbind("click",g)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(e,t,n,i){var r=i[0],o=i[1];o.init(r)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.datepicker").value("$datepickerSuppressWarning",!1).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","$datepickerSuppressWarning",function(e,t,n,i,r,o,s,a,l){l||r.warn("DatepickerController is now deprecated. Use UibDatepickerController instead.");var c=this,u={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,r){c[n]=angular.isDefined(t[n])?6>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){c[i]=e?new Date(e):null,c.refreshView()}):c[i]=s[i]?new Date(s[i]):null}),angular.forEach(["minMode","maxMode"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(n){c[i]=angular.isDefined(n)?n:t[i],e[i]=c[i],("minMode"==i&&c.modes.indexOf(e.datepickerMode)<c.modes.indexOf(c[i])||"maxMode"==i&&c.modes.indexOf(e.datepickerMode)>c.modes.indexOf(c[i]))&&(e.datepickerMode=c[i])}):(c[i]=s[i]||null,e[i]=c[i])}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(u.$isEmpty(u.$modelValue)||u.$invalid)&&(c.activeDate=e,c.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===c.compare(t.date,c.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){u=e,u.$render=function(){c.render()}},this.render=function(){if(u.$viewValue){var e=new Date(u.$viewValue),t=!isNaN(e);t?this.activeDate=e:a||r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=u.$viewValue?new Date(u.$viewValue):null;u.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=u.$viewValue?new Date(u.$viewValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},this.fixTimeZone=function(e){var t=e.getHours();e.setHours(23===t?t+2:0)},e.select=function(t){if(e.datepickerMode===c.minMode){var n=u.$viewValue?new Date(u.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),u.$setViewValue(n),u.$render()}else c.activeDate=t,e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=c.activeDate.getFullYear()+e*(c.step.years||0),n=c.activeDate.getMonth()+e*(c.step.months||0);c.activeDate.setFullYear(t,n,1),c.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===c.maxMode&&1===t||e.datepickerMode===c.minMode&&-1===t||(e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var h=function(){c.element[0].focus()};e.$on("uib:datepicker.focus",h),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),c.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(c.isDisabled(c.activeDate))return;e.select(c.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(c.handleKeyDown(n,t),c.refreshView()):e.toggleMode("up"===n?1:-1)}}]).directive("datepicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(n,i,r,o){t||e.warn("datepicker is now deprecated. Use uib-datepicker instead.");var s=o[0],a=o[1];s.init(a)}}}]).directive("daypicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/day.html",require:["^datepicker","daypicker"],controller:"UibDaypickerController",link:function(n,i,r,o){t||e.warn("daypicker is now deprecated. Use uib-daypicker instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("monthpicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/month.html",require:["^datepicker","monthpicker"],controller:"UibMonthpickerController",link:function(n,i,r,o){t||e.warn("monthpicker is now deprecated. Use uib-monthpicker instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("yearpicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/year.html",require:["^datepicker","yearpicker"],controller:"UibYearpickerController",link:function(n,i,r,o){t||e.warn("yearpicker is now deprecated. Use uib-yearpicker instead.");var s=o[0];angular.extend(s,o[1]),s.yearpickerInit(),s.refreshView()}}}]).directive("datepickerPopup",["$log","$datepickerSuppressWarning",function(e,t){return{require:["ngModel","datepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(n,i,r,o){t||e.warn("datepicker-popup is now deprecated. Use uib-datepicker-popup instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("datepickerPopupWrap",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/popup.html"},link:function(){t||e.warn("datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.")}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",i),e.bind("keydown",r)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",i),e.unbind("keydown",r))};var i=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var i=n.getToggleElement();if(!(e&&i&&i[0].contains(e.target))){var r=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&r&&r[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},r=function(e){27===e.which?(n.focusToggleElement(),i()):n.isKeynavEnabled()&&/(38|40)/.test(e.which)&&n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,i,r,o,s,a,l,c,u){var h,p,d=this,f=e.$new(),g=r.openClass,m=angular.noop,v=n.onToggle?i(n.onToggle):angular.noop,y=!1,_=!1;t.addClass("dropdown"),this.init=function(){n.isOpen&&(p=i(n.isOpen),m=p.assign,e.$watch(p,function(e){f.isOpen=!!e})),y=angular.isDefined(n.dropdownAppendToBody),_=angular.isDefined(n.uibKeyboardNav),y&&d.dropdownMenu&&(l.find("body").append(d.dropdownMenu),t.on("$destroy",function(){d.dropdownMenu.remove()}))},this.toggle=function(e){return f.isOpen=arguments.length?!!e:!f.isOpen},this.isOpen=function(){return f.isOpen},f.getToggleElement=function(){return d.toggleElement},f.getAutoClose=function(){return n.autoClose||"always"},f.getElement=function(){return t},f.isKeynavEnabled=function(){return _},f.focusDropdownEntry=function(e){var n=d.dropdownMenu?angular.element(d.dropdownMenu).find("a"):angular.element(t).find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===n.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=n.length-1}n[d.selectedOption].focus()},f.getDropdownElement=function(){return d.dropdownMenu},f.focusToggleElement=function(){d.toggleElement&&d.toggleElement[0].focus()},f.$watch("isOpen",function(n,i){if(y&&d.dropdownMenu){var r=a.positionElements(t,d.dropdownMenu,"bottom-left",!0),l={top:r.top+"px",display:n?"block":"none"},p=d.dropdownMenu.hasClass("dropdown-menu-right");p?(l.left="auto",l.right=window.innerWidth-(r.left+t.prop("offsetWidth"))+"px"):(l.left=r.left+"px",l.right="auto"),d.dropdownMenu.css(l)}if(s[n?"addClass":"removeClass"](t,g).then(function(){angular.isDefined(n)&&n!==i&&v(e,{open:!!n})}),n)d.dropdownMenuTemplateUrl&&u(d.dropdownMenuTemplateUrl).then(function(e){h=f.$new(),c(e.trim())(h,function(e){var t=e;d.dropdownMenu.replaceWith(t),d.dropdownMenu=t})}),f.focusToggleElement(),o.open(f);else{if(d.dropdownMenuTemplateUrl){h&&h.$destroy();var _=angular.element('<ul class="dropdown-menu"></ul>');d.dropdownMenu.replaceWith(_),d.dropdownMenu=_}o.close(f),d.selectedOption=null}angular.isFunction(m)&&m(e,n)}),e.$on("$locationChangeSuccess",function(){"disabled"!==f.getAutoClose()&&(f.isOpen=!1)});var w=e.$on("$destroy",function(){f.$destroy()});f.$on("$destroy",w)}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"AC",require:"?^uibDropdown",link:function(e,t,n,i){if(i&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var r=n.templateUrl;r&&(i.dropdownMenuTemplateUrl=r),i.dropdownMenu||(i.dropdownMenu=t)}}}}).directive("uibKeyboardNav",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,i){t.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var t=i.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(i.selectedOption)?i.selectedOption=i.selectedOption===t.length-1?i.selectedOption:i.selectedOption+1:i.selectedOption=0;break;case 38:angular.isNumber(i.selectedOption)?i.selectedOption=0===i.selectedOption?0:i.selectedOption-1:i.selectedOption=t.length-1}t[i.selectedOption].focus()}})}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,i){if(i){t.addClass("dropdown-toggle"),i.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.dropdown").value("$dropdownSuppressWarning",!1).service("dropdownService",["$log","$dropdownSuppressWarning","uibDropdownService",function(e,t,n){t||e.warn("dropdownService is now deprecated. Use uibDropdownService instead."),angular.extend(this,n)}]).controller("DropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest","$log","$dropdownSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u,h,p){p||h.warn("DropdownController is now deprecated. Use UibDropdownController instead.");var d,f,g=this,m=e.$new(),v=r.openClass,y=angular.noop,_=n.onToggle?i(n.onToggle):angular.noop,w=!1,b=!1;t.addClass("dropdown"),this.init=function(){n.isOpen&&(f=i(n.isOpen),y=f.assign,e.$watch(f,function(e){m.isOpen=!!e})),w=angular.isDefined(n.dropdownAppendToBody),b=angular.isDefined(n.uibKeyboardNav),w&&g.dropdownMenu&&(l.find("body").append(g.dropdownMenu),t.on("$destroy",function(){g.dropdownMenu.remove()}))},this.toggle=function(e){return m.isOpen=arguments.length?!!e:!m.isOpen},this.isOpen=function(){return m.isOpen},m.getToggleElement=function(){return g.toggleElement},m.getAutoClose=function(){return n.autoClose||"always"},m.getElement=function(){return t},m.isKeynavEnabled=function(){return b},m.focusDropdownEntry=function(e){var n=g.dropdownMenu?angular.element(g.dropdownMenu).find("a"):angular.element(t).find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(g.selectedOption)?g.selectedOption=g.selectedOption===n.length-1?g.selectedOption:g.selectedOption+1:g.selectedOption=0;break;case 38:angular.isNumber(g.selectedOption)?g.selectedOption=0===g.selectedOption?0:g.selectedOption-1:g.selectedOption=n.length-1}n[g.selectedOption].focus()},m.getDropdownElement=function(){return g.dropdownMenu},m.focusToggleElement=function(){g.toggleElement&&g.toggleElement[0].focus()},m.$watch("isOpen",function(n,i){if(w&&g.dropdownMenu){var r=a.positionElements(t,g.dropdownMenu,"bottom-left",!0),l={top:r.top+"px",display:n?"block":"none"},h=g.dropdownMenu.hasClass("dropdown-menu-right");h?(l.left="auto",l.right=window.innerWidth-(r.left+t.prop("offsetWidth"))+"px"):(l.left=r.left+"px",l.right="auto"),g.dropdownMenu.css(l)}if(s[n?"addClass":"removeClass"](t,v).then(function(){angular.isDefined(n)&&n!==i&&_(e,{open:!!n})}),n)g.dropdownMenuTemplateUrl&&u(g.dropdownMenuTemplateUrl).then(function(e){d=m.$new(),c(e.trim())(d,function(e){var t=e;g.dropdownMenu.replaceWith(t),g.dropdownMenu=t})}),m.focusToggleElement(),o.open(m);else{if(g.dropdownMenuTemplateUrl){d&&d.$destroy();var p=angular.element('<ul class="dropdown-menu"></ul>');g.dropdownMenu.replaceWith(p),g.dropdownMenu=p}o.close(m),g.selectedOption=null}angular.isFunction(y)&&y(e,n)}),e.$on("$locationChangeSuccess",function(){"disabled"!==m.getAutoClose()&&(m.isOpen=!1)});var C=e.$on("$destroy",function(){m.$destroy()});m.$on("$destroy",C)}]).directive("dropdown",["$log","$dropdownSuppressWarning",function(e,t){return{controller:"DropdownController",link:function(n,i,r,o){t||e.warn("dropdown is now deprecated. Use uib-dropdown instead."),o.init()}}}]).directive("dropdownMenu",["$log","$dropdownSuppressWarning",function(e,t){return{restrict:"AC",require:"?^dropdown",link:function(n,i,r,o){if(o&&!angular.isDefined(r.dropdownNested)){t||e.warn("dropdown-menu is now deprecated. Use uib-dropdown-menu instead."),i.addClass("dropdown-menu");var s=r.templateUrl;s&&(o.dropdownMenuTemplateUrl=s),o.dropdownMenu||(o.dropdownMenu=i)}}}}]).directive("keyboardNav",["$log","$dropdownSuppressWarning",function(e,t){return{restrict:"A",require:"?^dropdown",link:function(n,i,r,o){t||e.warn("keyboard-nav is now deprecated. Use uib-keyboard-nav instead."),i.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var t=o.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(o.selectedOption)?o.selectedOption=o.selectedOption===t.length-1?o.selectedOption:o.selectedOption+1:o.selectedOption=0;break;case 38:angular.isNumber(o.selectedOption)?o.selectedOption=0===o.selectedOption?0:o.selectedOption-1:o.selectedOption=t.length-1}t[o.selectedOption].focus()}})}}}]).directive("dropdownToggle",["$log","$dropdownSuppressWarning",function(e,t){return{require:"?^dropdown",link:function(n,i,r,o){if(t||e.warn("dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead."),o){i.addClass("dropdown-toggle"),o.toggleElement=i;var s=function(e){e.preventDefault(),i.hasClass("disabled")||r.disabled||n.$apply(function(){o.toggle()})};i.bind("click",s),i.attr({"aria-haspopup":!0,"aria-expanded":!1}),n.$watch(o.isOpen,function(e){i.attr("aria-expanded",!!e)}),n.$on("$destroy",function(){i.unbind("click",s)})}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var i=e[t];if(i){var r=i.indexOf(n);-1!==r&&i.splice(r,1),i.length||delete e[t]}}}}}}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function i(t,i,o){i.addClass("modal-backdrop"),o.modalInClass&&(r?r(i,{addClass:o.modalInClass}).start():e.addClass(i,o.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(t,n){var s=n();r?r(i,{removeClass:o.modalInClass}).start().then(s):e.removeClass(i,o.modalInClass).then(s)}))}var r=null;return t.has("$animateCss")&&(r=t.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),i}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$injector",function(e,t,n,i){var r=null;return i.has("$animateCss")&&(r=i.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,o,s){o.addClass(s.windowClass||""),o.addClass(s.windowTopClass||""),i.size=s.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},o.on("click",i.close),i.$isRendered=!0;var a=t.defer();s.$observe("modalRender",function(e){"true"==e&&a.resolve()}),a.promise.then(function(){var a=null;s.modalInClass&&(a=r?r(o,{addClass:s.modalInClass}).start():n.addClass(o,s.modalInClass),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var i=t();r?r(o,{removeClass:s.modalInClass}).start().then(i):n.removeClass(o,s.modalInClass).then(i)})),t.when(a).then(function(){var e=o[0].querySelector("[autofocus]");e?e.focus():o[0].focus()});var l=e.getTop();l&&e.modalRendered(l.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$uibModalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(e,t,n,i,r,o,s,a,l){function c(){for(var e=-1,t=w.keys(),n=0;n<t.length;n++)w.get(t[n]).value.backdrop&&(e=n);return e}function u(e,t){var i=n.find("body").eq(0),r=w.get(e).value;w.remove(e),d(r.modalDomEl,r.modalScope,function(){var t=r.openedClass||_;b.remove(t,e),i.toggleClass(t,b.hasKey(t)),h(!0)}),p(),t&&t.focus?t.focus():i.focus()}function h(e){var t;w.length()>0&&(t=w.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function p(){if(m&&-1==c()){var e=v;d(m,v,function(){e=null}),m=void 0,v=void 0}}function d(t,n,i){function r(){r.done||(r.done=!0,g?g(t,{event:"leave"}).start().then(function(){t.remove()}):e.leave(t),n.$destroy(),i&&i())}var s,a=null,l=function(){return s||(s=o.defer(),a=s.promise),function(){s.resolve()}};return n.$broadcast(C.NOW_CLOSING_EVENT,l),o.when(a).then(r)}function f(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var g=null;s.has("$animateCss")&&(g=s.get("$animateCss"));var m,v,y,_="modal-open",w=l.createNew(),b=a.createNew(),C={NOW_CLOSING_EVENT:"modal.stack.now-closing"},x=0,S="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return r.$watch(c,function(e){v&&(v.index=e)}),n.bind("keydown",function(e){if(e.isDefaultPrevented())return e;var t=w.top();if(t&&t.value.keyboard)switch(e.which){case 27:e.preventDefault(),r.$apply(function(){C.dismiss(t.key,"escape key press")});break;case 9:C.loadFocusElementList(t);var n=!1;e.shiftKey?C.isFocusInFirstItem(e)&&(n=C.focusLastFocusableElement()):C.isFocusInLastItem(e)&&(n=C.focusFirstFocusableElement()),n&&(e.preventDefault(),e.stopPropagation())}}),C.open=function(e,t){var o=n[0].activeElement,s=t.openedClass||_;h(!1),w.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard,openedClass:t.openedClass,windowTopClass:t.windowTopClass}),b.put(s,e);var a=n.find("body").eq(0),l=c();if(l>=0&&!m){v=r.$new(!0),v.index=l;var u=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');u.attr("backdrop-class",t.backdropClass),t.animation&&u.attr("modal-animation","true"),m=i(u)(v),a.append(m)}var p=angular.element('<div uib-modal-window="modal-window"></div>');p.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,"window-top-class":t.windowTopClass,size:t.size,index:w.length()-1,animate:"animate"}).html(t.content),t.animation&&p.attr("modal-animation","true");var d=i(p)(t.scope);w.top().value.modalDomEl=d,w.top().value.modalOpener=o,a.append(d),a.addClass(s),C.clearFocusListCache()},C.close=function(e,t){var n=w.get(e);return n&&f(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),u(e,n.value.modalOpener),!0):!n},C.dismiss=function(e,t){var n=w.get(e);return n&&f(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),u(e,n.value.modalOpener),!0):!n},C.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},C.getTop=function(){return w.top()},C.modalRendered=function(e){var t=w.get(e);t&&t.value.renderDeferred.resolve()},C.focusFirstFocusableElement=function(){return y.length>0?(y[0].focus(),!0):!1},C.focusLastFocusableElement=function(){return y.length>0?(y[y.length-1].focus(),!0):!1},C.isFocusInFirstItem=function(e){return y.length>0?(e.target||e.srcElement)==y[0]:!1},C.isFocusInLastItem=function(e){return y.length>0?(e.target||e.srcElement)==y[y.length-1]:!1},C.clearFocusListCache=function(){y=[],x=0},C.loadFocusElementList=function(e){if((void 0===y||!y.length)&&e){var t=e.value.modalDomEl;t&&t.length&&(y=t[0].querySelectorAll(S))}},C}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$uibModalStack","$modalSuppressWarning","$log",function(t,n,i,r,o,s,a,l){function c(e){return e.template?i.when(e.template):r(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}function u(e){var n=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?n.push(i.when(t.invoke(e))):angular.isString(e)?n.push(i.when(t.get(e))):n.push(i.when(e))}),n}var h={},p=null;return h.getPromiseChain=function(){return p},h.open=function(t){function r(){return v}var h=i.defer(),d=i.defer(),f=i.defer(),g={result:h.promise,opened:d.promise,rendered:f.promise,close:function(e){return s.close(g,e)},dismiss:function(e){return s.dismiss(g,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var m,v=i.all([c(t)].concat(u(t.resolve)));return m=p=i.all([p]).then(r,r).then(function(e){var i=(t.scope||n).$new();i.$close=g.close,i.$dismiss=g.dismiss,i.$on("$destroy",function(){i.$$uibDestructionScheduled||i.$dismiss("$uibUnscheduledDestruction")});var r,c={},u=1;t.controller&&(c.$scope=i,c.$uibModalInstance=g,Object.defineProperty(c,"$modalInstance",{get:function(){return a||l.warn("$modalInstance is now deprecated. Use $uibModalInstance instead."),g}}),angular.forEach(t.resolve,function(t,n){c[n]=e[u++]}),r=o(t.controller,c),t.controllerAs&&(t.bindToController&&angular.extend(r,i),i[t.controllerAs]=r)),s.open(g,{scope:i,deferred:h,renderDeferred:f,content:e[0],animation:t.animation,backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowTopClass:t.windowTopClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size,openedClass:t.openedClass}),d.resolve(!0)},function(e){d.reject(e),h.reject(e)})["finally"](function(){p===m&&(p=null)}),g},h}]};return e}),angular.module("ui.bootstrap.modal").value("$modalSuppressWarning",!1).directive("modalBackdrop",["$animate","$injector","$modalStack","$log","$modalSuppressWarning",function(e,t,n,i,r){function o(t,o,a){r||i.warn("modal-backdrop is now deprecated. Use uib-modal-backdrop instead."),o.addClass("modal-backdrop"),a.modalInClass&&(s?s(o,{addClass:a.modalInClass}).start():e.addClass(o,a.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(t,n){var i=n();s?s(o,{removeClass:a.modalInClass}).start().then(i):e.removeClass(o,a.modalInClass).then(i)}))}var s=null;return t.has("$animateCss")&&(s=t.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),o}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector","$log","$modalSuppressWarning",function(e,t,n,i,r,o){var s=null;return i.has("$animateCss")&&(s=i.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,a,l){o||r.warn("modal-window is now deprecated. Use uib-modal-window instead."),a.addClass(l.windowClass||""),a.addClass(l.windowTopClass||""),i.size=l.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},a.on("click",i.close),i.$isRendered=!0;var c=t.defer();l.$observe("modalRender",function(e){"true"==e&&c.resolve()}),c.promise.then(function(){var r=null;l.modalInClass&&(r=s?s(a,{addClass:l.modalInClass}).start():n.addClass(a,l.modalInClass),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var i=t();s?s(a,{removeClass:l.modalInClass}).start().then(i):n.removeClass(a,l.modalInClass).then(i)})),t.when(r).then(function(){var e=a[0].querySelector("[autofocus]");e?e.focus():a[0].focus()});var o=e.getTop();o&&e.modalRendered(o.key)})}}}]).directive("modalAnimationClass",["$log","$modalSuppressWarning",function(e,t){
return{compile:function(n,i){t||e.warn("modal-animation-class is now deprecated. Use uib-modal-animation-class instead."),i.modalAnimation&&n.addClass(i.modalAnimationClass)}}}]).directive("modalTransclude",["$log","$modalSuppressWarning",function(e,t){return{link:function(n,i,r,o,s){t||e.warn("modal-transclude is now deprecated. Use uib-modal-transclude instead."),s(n.$parent,function(e){i.empty(),i.append(e)})}}}]).service("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap","$uibModalStack","$log","$modalSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u,h){h||u.warn("$modalStack is now deprecated. Use $uibModalStack instead."),angular.extend(this,c)}]).provider("$modal",["$uibModalProvider",function(e){angular.extend(this,e),this.$get=["$injector","$log","$modalSuppressWarning",function(t,n,i){return i||n.warn("$modal is now deprecated. Use $uibModal instead."),t.invoke(e.$get)}]}]),angular.module("ui.bootstrap.pagination",[]).controller("UibPaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,r={$setViewValue:angular.noop},o=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(s,a){r=s,this.config=a,r.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=a.itemsPerPage,e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){o(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t,n){n&&n.preventDefault();var i=!e.ngDisabled||!n;i&&e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(n,i,r,o){function s(e,t,n){return{number:e,text:t,active:n}}function a(e,t){var n=[],i=1,r=t,o=angular.isDefined(u)&&t>u;o&&(h?(i=Math.max(e-Math.floor(u/2),1),r=i+u-1,r>t&&(r=t,i=r-u+1)):(i=(Math.ceil(e/u)-1)*u+1,r=Math.min(i+u-1,t)));for(var a=i;r>=a;a++){var l=s(a,a,a===e);n.push(l)}if(o&&!h){if(i>1){var c=s(i-1,"...",!1);n.unshift(c)}if(t>r){var p=s(r+1,"...",!1);n.push(p)}}return n}var l=o[0],c=o[1];if(c){var u=angular.isDefined(r.maxSize)?n.$parent.$eval(r.maxSize):t.maxSize,h=angular.isDefined(r.rotate)?n.$parent.$eval(r.rotate):t.rotate;n.boundaryLinks=angular.isDefined(r.boundaryLinks)?n.$parent.$eval(r.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(r.directionLinks)?n.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&n.$parent.$watch(e(r.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=a(n.page,n.totalPages))}}}}}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(t,n,i,r){var o=r[0],s=r[1];s&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,o.init(s,e))}}}]),angular.module("ui.bootstrap.pagination").value("$paginationSuppressWarning",!1).controller("PaginationController",["$scope","$attrs","$parse","$log","$paginationSuppressWarning",function(e,t,n,i,r){r||i.warn("PaginationController is now deprecated. Use UibPaginationController instead.");var o=this,s={$setViewValue:angular.noop},a=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(i,r){s=i,this.config=r,s.$render=function(){o.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){o.itemsPerPage=parseInt(t,10),e.totalPages=o.calculateTotalPages()}):this.itemsPerPage=r.itemsPerPage,e.$watch("totalItems",function(){e.totalPages=o.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):s.$render()})},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(s.$viewValue,10)||1},e.selectPage=function(t,n){n&&n.preventDefault();var i=!e.ngDisabled||!n;i&&e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),s.$setViewValue(t),s.$render())},e.getText=function(t){return e[t+"Text"]||o.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).directive("pagination",["$parse","uibPaginationConfig","$log","$paginationSuppressWarning",function(e,t,n,i){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(r,o,s,a){function l(e,t,n){return{number:e,text:t,active:n}}function c(e,t){var n=[],i=1,r=t,o=angular.isDefined(p)&&t>p;o&&(d?(i=Math.max(e-Math.floor(p/2),1),r=i+p-1,r>t&&(r=t,i=r-p+1)):(i=(Math.ceil(e/p)-1)*p+1,r=Math.min(i+p-1,t)));for(var s=i;r>=s;s++){var a=l(s,s,s===e);n.push(a)}if(o&&!d){if(i>1){var c=l(i-1,"...",!1);n.unshift(c)}if(t>r){var u=l(r+1,"...",!1);n.push(u)}}return n}i||n.warn("pagination is now deprecated. Use uib-pagination instead.");var u=a[0],h=a[1];if(h){var p=angular.isDefined(s.maxSize)?r.$parent.$eval(s.maxSize):t.maxSize,d=angular.isDefined(s.rotate)?r.$parent.$eval(s.rotate):t.rotate;r.boundaryLinks=angular.isDefined(s.boundaryLinks)?r.$parent.$eval(s.boundaryLinks):t.boundaryLinks,r.directionLinks=angular.isDefined(s.directionLinks)?r.$parent.$eval(s.directionLinks):t.directionLinks,u.init(h,t),s.maxSize&&r.$parent.$watch(e(s.maxSize),function(e){p=parseInt(e,10),u.render()});var f=u.render;u.render=function(){f(),r.page>0&&r.page<=r.totalPages&&(r.pages=c(r.page,r.totalPages))}}}}}]).directive("pager",["uibPagerConfig","$log","$paginationSuppressWarning",function(e,t,n){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(i,r,o,s){n||t.warn("pager is now deprecated. Use uib-pager instead.");var a=s[0],l=s[1];l&&(i.align=angular.isDefined(o.align)?i.$parent.$eval(o.align):e.align,a.init(l,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(r,o,s,a,l,c,u,h,p){var d=p.createNew();return a.on("keypress",function(e){if(27===e.which){var t=d.top();t&&(t.value.close(),d.removeTop(),t=null)}}),function(r,u,p,f){function g(e){var t=(e||f.trigger||p).split(" "),i=t.map(function(e){return n[e]||e});return{show:t,hide:i}}f=angular.extend({},t,i,f);var m=e(r),v=c.startSymbol(),y=c.endSymbol(),_="<div "+m+'-popup title="'+v+"title"+y+'" '+(f.useContentExp?'content-exp="contentExp()" ':'content="'+v+"content"+y+'" ')+'placement="'+v+"placement"+y+'" popup-class="'+v+"popupClass"+y+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(e,t){var n=o(_);return function(e,t,i,o){function c(){F.isOpen?m():p()}function p(){(!I||e.$eval(i[u+"Enable"]))&&(w(),x(),F.popupDelay?A||(A=s(v,F.popupDelay,!1)):v())}function m(){y(),F.popupCloseDelay?R||(R=s(_,F.popupCloseDelay,!1)):_()}function v(){return y(),w(),F.content?(b(),void F.$evalAsync(function(){F.isOpen=!0,S(!0),B()})):angular.noop}function y(){A&&(s.cancel(A),A=null),j&&(s.cancel(j),j=null)}function _(){y(),w(),F&&F.$evalAsync(function(){F.isOpen=!1,S(!1),F.animation?D||(D=s(C,150,!1)):C()})}function w(){R&&(s.cancel(R),R=null),D&&(s.cancel(D),D=null)}function b(){T||($=F.$new(),T=n($,function(e){M?a.find("body").append(e):t.after(e)}),E())}function C(){P(),D=null,T&&(T.remove(),T=null),$&&($.$destroy(),$=null)}function x(){F.title=i[u+"Title"],H?F.content=H(e):F.content=i[r],F.popupClass=i[u+"Class"],F.placement=angular.isDefined(i[u+"Placement"])?i[u+"Placement"]:f.placement;var t=parseInt(i[u+"PopupDelay"],10),n=parseInt(i[u+"PopupCloseDelay"],10);F.popupDelay=isNaN(t)?f.popupDelay:t,F.popupCloseDelay=isNaN(n)?f.popupCloseDelay:n}function S(t){L&&angular.isFunction(L.assign)&&L.assign(e,t)}function E(){V.length=0,H?(V.push(e.$watch(H,function(e){F.content=e,!e&&F.isOpen&&_()})),V.push($.$watch(function(){N||(N=!0,$.$$postDigest(function(){N=!1,F&&F.isOpen&&B()}))}))):V.push(i.$observe(r,function(e){F.content=e,!e&&F.isOpen?_():B()})),V.push(i.$observe(u+"Title",function(e){F.title=e,F.isOpen&&B()})),V.push(i.$observe(u+"Placement",function(e){F.placement=e?e:f.placement,F.isOpen&&B()}))}function P(){V.length&&(angular.forEach(V,function(e){e()}),V.length=0)}function k(){var e=i[u+"Trigger"];U(),O=g(e),"none"!==O.show&&O.show.forEach(function(e,n){e===O.hide[n]?t[0].addEventListener(e,c):e&&(t[0].addEventListener(e,p),O.hide[n].split(" ").forEach(function(e){t[0].addEventListener(e,m)})),t.on("keypress",function(e){27===e.which&&m()})})}var T,$,D,A,R,j,M=angular.isDefined(f.appendToBody)?f.appendToBody:!1,O=g(void 0),I=angular.isDefined(i[u+"Enable"]),F=e.$new(!0),N=!1,L=angular.isDefined(i[u+"IsOpen"])?h(i[u+"IsOpen"]):!1,H=f.useContentExp?h(i[r]):!1,V=[],B=function(){T&&T.html()&&(j||(j=s(function(){T.css({top:0,left:0});var e=l.positionElements(t,T,F.placement,M);e.top+="px",e.left+="px",e.visibility="visible",T.css(e),j=null},0,!1)))};F.origScope=e,F.isOpen=!1,d.add(F,{close:_}),F.contentExp=function(){return F.content},i.$observe("disabled",function(e){e&&y(),e&&F.isOpen&&_()}),L&&e.$watch(L,function(e){F&&!e===F.isOpen&&c()});var U=function(){O.show.forEach(function(e){t.unbind(e,p)}),O.hide.forEach(function(e){e.split(" ").forEach(function(e){t[0].removeEventListener(e,m)})})};k();var z=e.$eval(i[u+"Animation"]);F.animation=angular.isDefined(z)?!!z:f.animation;var W=e.$eval(i[u+"AppendToBody"]);M=angular.isDefined(W)?W:M,M&&e.$on("$locationChangeSuccess",function(){F.isOpen&&_()}),e.$on("$destroy",function(){y(),w(),U(),C(),d.remove(F),F=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,i){return{link:function(r,o,s){var a,l,c,u=r.$eval(s.tooltipTemplateTranscludeScope),h=0,p=function(){l&&(l.remove(),l=null),a&&(a.$destroy(),a=null),c&&(e.leave(c).then(function(){l=null}),l=c,c=null)};r.$watch(t.parseAsResourceUrl(s.uibTooltipTemplateTransclude),function(t){var s=++h;t?(i(t,!0).then(function(i){if(s===h){var r=u.$new(),l=i,d=n(l)(r,function(t){p(),e.enter(t,o)});a=r,c=d,a.$emit("$includeContentLoaded",t)}},function(){s===h&&(p(),r.$emit("$includeContentError",t))}),r.$emit("$includeContentRequested",t)):p()}),r.$on("$destroy",p)}}}]).directive("uibTooltipClasses",function(){return{restrict:"A",link:function(e,t,n){e.placement&&t.addClass(e.placement),e.popupClass&&t.addClass(e.popupClass),e.animation()&&t.addClass(n.tooltipAnimationClass)}}}).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.tooltip").value("$tooltipSuppressWarning",!1).provider("$tooltip",["$uibTooltipProvider",function(e){angular.extend(this,e),this.$get=["$log","$tooltipSuppressWarning","$injector",function(t,n,i){return n||t.warn("$tooltip is now deprecated. Use $uibTooltip instead."),i.invoke(e.$get)}]}]).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest","$log","$tooltipSuppressWarning",function(e,t,n,i,r,o){return{link:function(s,a,l){o||r.warn("tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.");var c,u,h,p=s.$eval(l.tooltipTemplateTranscludeScope),d=0,f=function(){u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),h&&(e.leave(h).then(function(){u=null}),u=h,h=null)};s.$watch(t.parseAsResourceUrl(l.tooltipTemplateTransclude),function(t){var r=++d;t?(i(t,!0).then(function(i){if(r===d){var o=p.$new(),s=i,l=n(s)(o,function(t){f(),e.enter(t,a)});c=o,h=l,c.$emit("$includeContentLoaded",t)}},function(){r===d&&(f(),s.$emit("$includeContentError",t))}),s.$emit("$includeContentRequested",t)):f()}),s.$on("$destroy",f)}}}]).directive("tooltipClasses",["$log","$tooltipSuppressWarning",function(e,t){return{restrict:"A",link:function(n,i,r){t||e.warn("tooltip-classes is now deprecated. Use uib-tooltip-classes instead."),n.placement&&i.addClass(n.placement),n.popupClass&&i.addClass(n.popupClass),n.animation()&&i.addClass(r.tooltipAnimationClass)}}}]).directive("tooltipPopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(n,i){t||e.warn("tooltip-popup is now deprecated. Use uib-tooltip-popup instead."),i.addClass("tooltip")}}}]).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(n,i){t||e.warn("tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead."),i.addClass("tooltip")}}}]).directive("tooltipTemplate",["$tooltip",function(e){return e("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(n,i){t||e.warn("tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead."),i.addClass("tooltip")}}}]).directive("tooltipHtml",["$tooltip",function(e){return e("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.popover").value("$popoverSuppressWarning",!1).directive("popoverTemplatePopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(n,i){t||e.warn("popover-template-popup is now deprecated. Use uib-popover-template-popup instead."),i.addClass("popover")}}}]).directive("popoverTemplate",["$tooltip",function(e){return e("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(n,i){t||e.warn("popover-html-popup is now deprecated. Use uib-popover-html-popup instead."),i.addClass("popover")}}}]).directive("popoverHtml",["$tooltip",function(e){return e("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(n,i){t||e.warn("popover-popup is now deprecated. Use uib-popover-popup instead."),i.addClass("popover")}}}]).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n,o){r||n.css({transition:"none"}),this.bars.push(t),t.max=e.max,t.title=o&&angular.isDefined(o.title)?o.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("max",function(t){i.bars.forEach(function(t){t.max=e.max,t.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.progressbar").value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","uibProgressConfig","$log","$progressSuppressWarning",function(e,t,n,i,r){r||i.warn("ProgressController is now deprecated. Use UibProgressController instead.");var o=this,s=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n,i){s||n.css({transition:"none"}),this.bars.push(t),t.max=e.max,t.title=i&&angular.isDefined(i.title)?i.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){t.percent=+(100*t.value/t.max).toFixed(2);var e=o.bars.reduce(function(e,t){return e+t.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){n=null,o.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)},e.$watch("max",function(t){o.bars.forEach(function(t){t.max=e.max,t.recalculatePercentage()})})}]).directive("progress",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?",title:"@?"},templateUrl:"template/progressbar/progress.html",link:function(){t||e.warn("progress is now deprecated. Use uib-progress instead.")}}}]).directive("bar",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(n,i,r,o){t||e.warn("bar is now deprecated. Use uib-bar instead."),o.addBar(n,i)}}}]).directive("progressbar",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(n,i,r,o){t||e.warn("progressbar is now deprecated. Use uib-progressbar instead."),o.addBar(n,angular.element(i.children()[0]),{title:r.title})}}}]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(r){i=r,i.$render=this.render,i.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var o=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):n.titles;this.titles=angular.isArray(o)&&o.length>0?o:n.titles;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(i.$viewValue===t?0:t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function(e,t,n,i,r){r||i.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,n("UibRatingController",{$scope:e,$attrs:t}))}]).directive("rating",["$log","$ratingSuppressWarning",function(e,t){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(n,i,r,o){t||e.warn("rating is now deprecated. Use uib-rating instead.");var s=o[0],a=o[1];s.init(a)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect(),e.selectCalled=!1)}),e.active=!0,e.selectCalled||(e.onSelect(),e.selectCalled=!0)},t.addTab=function(e){n.push(e),1===n.length&&e.active!==!1?e.active=!0:e.active?t.select(e):e.active=!1},t.removeTab=function(e){var r=n.indexOf(e);if(e.active&&n.length>1&&!i){var o=r==n.length-1?r-1:r+1;t.select(n[o])}n.splice(r,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(t,n,i,r,o){t.$watch("active",function(e){e&&r.select(t)}),t.disabled=!1,i.disable&&t.$parent.$watch(e(i.disable),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},r.addTab(t),t.$on("$destroy",function(){r.removeTab(t)}),t.$transcludeFn=o}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||e.hasAttribute("x-tab-heading")||e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase()||"x-tab-heading"===e.tagName.toLowerCase()||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(t,n,i){var r=t.$eval(i.uibTabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function(e,t,n,i){i||n.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,t("UibTabsetController",{$scope:e}))}]).directive("tabset",["$log","$tabsSuppressWarning",function(e,t){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(n,i,r){t||e.warn("tabset is now deprecated. Use uib-tabset instead."),n.vertical=angular.isDefined(r.vertical)?n.$parent.$eval(r.vertical):!1,n.justified=angular.isDefined(r.justified)?n.$parent.$eval(r.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function(e,t,n){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(i,r,o,s,a){n||t.warn("tab is now deprecated. Use uib-tab instead."),i.$watch("active",function(e){e&&s.select(i)}),i.disabled=!1,o.disable&&i.$parent.$watch(e(o.disable),function(e){i.disabled=!!e}),i.select=function(){i.disabled||(i.active=!0)},s.addTab(i),i.$on("$destroy",function(){s.removeTab(i)}),i.$transcludeFn=a}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function(e,t){return{restrict:"A",require:"^tab",link:function(n,i){t||e.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),n.$watch("headingElement",function(e){e&&(i.html(""),i.append(e))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function(e,t){function n(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||e.hasAttribute("x-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase()||"x-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(i,r,o){t||e.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var s=i.$eval(o.tabContentTransclude);s.$transcludeFn(s.$parent,function(e){angular.forEach(e,function(e){n(e)?s.headingElement=e:r.append(e)})})}}}]),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,n,i,r,o,s){function a(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===v[1]&&(t+=12)),t):void 0}function l(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function c(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e.toString()}function u(e){h(),m.$setViewValue(new Date(g)),p(e)}function h(){m.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var n=g.getHours(),i=g.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:c(n),"m"!==t&&(e.minutes=c(i)),e.meridian=g.getHours()<12?v[0]:v[1]}function d(e,t){var n=new Date(e.getTime()+6e4*t),i=new Date(e);return i.setHours(n.getHours(),n.getMinutes()),i}function f(e){g=d(g,e),u()}var g=new Date,m={$setViewValue:angular.noop},v=angular.isDefined(n.meridians)?e.$parent.$eval(n.meridians):s.meridians||o.DATETIME_FORMATS.AMPMS;e.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,i){m=t,m.$render=this.render,m.$formatters.unshift(function(e){return e?new Date(e):null});var r=i.eq(0),o=i.eq(1),a=angular.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):s.mousewheel;a&&this.setupMousewheelEvents(r,o);var l=angular.isDefined(n.arrowkeys)?e.$parent.$eval(n.arrowkeys):s.arrowkeys;l&&this.setupArrowkeyEvents(r,o),e.readonlyInput=angular.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):s.readonlyInput,this.setupInputEvents(r,o)};var y=s.hourStep;n.hourStep&&e.$parent.$watch(i(n.hourStep),function(e){y=parseInt(e,10)});var _=s.minuteStep;
n.minuteStep&&e.$parent.$watch(i(n.minuteStep),function(e){_=parseInt(e,10)});var w;e.$parent.$watch(i(n.min),function(e){var t=new Date(e);w=isNaN(t)?void 0:t});var b;e.$parent.$watch(i(n.max),function(e){var t=new Date(e);b=isNaN(t)?void 0:t}),e.noIncrementHours=function(){var e=d(g,60*y);return e>b||g>e&&w>e},e.noDecrementHours=function(){var e=d(g,60*-y);return w>e||e>g&&e>b},e.noIncrementMinutes=function(){var e=d(g,_);return e>b||g>e&&w>e},e.noDecrementMinutes=function(){var e=d(g,-_);return w>e||e>g&&e>b},e.noToggleMeridian=function(){return g.getHours()<13?d(g,720)>b:d(g,-720)<w},e.showMeridian=s.showMeridian,n.showMeridian&&e.$parent.$watch(i(n.showMeridian),function(t){if(e.showMeridian=!!t,m.$error.time){var n=a(),i=l();angular.isDefined(n)&&angular.isDefined(i)&&(g.setHours(n),u())}else p()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n){t.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply())}),n.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply())})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){m.$setViewValue(null),m.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=a(),t=l();angular.isDefined(e)&&angular.isDefined(t)?(g.setHours(e),w>g||g>b?i(!0):u("h")):i(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours)})}),e.updateMinutes=function(){var e=l(),t=a();angular.isDefined(e)&&angular.isDefined(t)?(g.setMinutes(e),w>g||g>b?i(void 0,!0):u("m")):i(void 0,!0)},n.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})})},this.render=function(){var t=m.$viewValue;isNaN(t)?(m.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(g=t),w>g||g>b?(m.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):h(),p())},e.showSpinners=angular.isDefined(n.showSpinners)?e.$parent.$eval(n.showSpinners):s.showSpinners,e.incrementHours=function(){e.noIncrementHours()||f(60*y)},e.decrementHours=function(){e.noDecrementHours()||f(60*-y)},e.incrementMinutes=function(){e.noIncrementMinutes()||f(_)},e.decrementMinutes=function(){e.noDecrementMinutes()||f(-_)},e.toggleMeridian=function(){e.noToggleMeridian()||f(720*(g.getHours()<12?1:-1))}}]).directive("uibTimepicker",function(){return{restrict:"EA",require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(e,t){return t.templateUrl||"template/timepicker/timepicker.html"},link:function(e,t,n,i){var r=i[0],o=i[1];o&&r.init(o,t.find("input"))}}}),angular.module("ui.bootstrap.timepicker").value("$timepickerSuppressWarning",!1).controller("TimepickerController",["$scope","$element","$attrs","$controller","$log","$timepickerSuppressWarning",function(e,t,n,i,r,o){o||r.warn("TimepickerController is now deprecated. Use UibTimepickerController instead."),angular.extend(this,i("UibTimepickerController",{$scope:e,$element:t,$attrs:n}))}]).directive("timepicker",["$log","$timepickerSuppressWarning",function(e,t){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(e,t){return t.templateUrl||"template/timepicker/timepicker.html"},link:function(n,i,r,o){t||e.warn("timepicker is now deprecated. Use uib-timepicker instead.");var s=o[0],a=o[1];a&&s.init(a,i.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(e,t,n,i,r,o,s,a,l,c,u,h){function p(){I.moveInProgress||(I.moveInProgress=!0,I.$digest()),z&&s.cancel(z),z=s(function(){I.matches.length&&d(),I.moveInProgress=!1},v)}function d(){I.position=T?u.offset(t):u.position(t),I.position.top+=t.prop("offsetHeight")}var f,g,m=[9,13,27,38,40],v=200,y=e.$eval(n.typeaheadMinLength);y||0===y||(y=1);var _,w,b=e.$eval(n.typeaheadWaitMs)||0,C=e.$eval(n.typeaheadEditable)!==!1,x=r(n.typeaheadLoading).assign||angular.noop,S=r(n.typeaheadOnSelect),E=angular.isDefined(n.typeaheadSelectOnBlur)?e.$eval(n.typeaheadSelectOnBlur):!1,P=r(n.typeaheadNoResults).assign||angular.noop,k=n.typeaheadInputFormatter?r(n.typeaheadInputFormatter):void 0,T=n.typeaheadAppendToBody?e.$eval(n.typeaheadAppendToBody):!1,$=n.typeaheadAppendToElementId||!1,D=e.$eval(n.typeaheadFocusFirst)!==!1,A=n.typeaheadSelectOnExact?e.$eval(n.typeaheadSelectOnExact):!1,R=r(n.ngModel),j=r(n.ngModel+"($$$p)"),M=function(t,n){return angular.isFunction(R(e))&&g&&g.$options&&g.$options.getterSetter?j(t,{$$$p:n}):R.assign(t,n)},O=h.parse(n.uibTypeahead),I=e.$new(),F=e.$on("$destroy",function(){I.$destroy()});I.$on("$destroy",F);var N="typeahead-"+I.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":N});var L=angular.element("<div uib-typeahead-popup></div>");L.attr({id:N,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(n.typeaheadTemplateUrl)&&L.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&L.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var H=function(){I.matches=[],I.activeIdx=-1,t.attr("aria-expanded",!1)},V=function(e){return N+"-option-"+e};I.$watch("activeIdx",function(e){0>e?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",V(e))});var B=function(e,t){return I.matches.length>t&&e?e.toUpperCase()===I.matches[t].label.toUpperCase():!1},U=function(n){var i={$viewValue:n};x(e,!0),P(e,!1),o.when(O.source(e,i)).then(function(r){var o=n===f.$viewValue;if(o&&_)if(r&&r.length>0){I.activeIdx=D?0:-1,P(e,!1),I.matches.length=0;for(var s=0;s<r.length;s++)i[O.itemName]=r[s],I.matches.push({id:V(s),label:O.viewMapper(I,i),model:r[s]});I.query=n,d(),t.attr("aria-expanded",!0),A&&1===I.matches.length&&B(n,0)&&I.select(0)}else H(),P(e,!0);o&&x(e,!1)},function(){H(),x(e,!1),P(e,!0)})};T&&(angular.element(l).bind("resize",p),a.find("body").bind("scroll",p));var z;I.moveInProgress=!1,I.query=void 0;var W,q=function(e){W=s(function(){U(e)},b)},G=function(){W&&s.cancel(W)};H(),I.select=function(i){var r,o,a={};w=!0,a[O.itemName]=o=I.matches[i].model,r=O.modelMapper(e,a),M(e,r),f.$setValidity("editable",!0),f.$setValidity("parse",!0),S(e,{$item:o,$model:r,$label:O.viewMapper(e,a)}),H(),I.$eval(n.typeaheadFocusOnSelect)!==!1&&s(function(){t[0].focus()},0,!1)},t.bind("keydown",function(e){if(0!==I.matches.length&&-1!==m.indexOf(e.which)){if(-1===I.activeIdx&&(9===e.which||13===e.which))return H(),void I.$digest();e.preventDefault(),40===e.which?(I.activeIdx=(I.activeIdx+1)%I.matches.length,I.$digest()):38===e.which?(I.activeIdx=(I.activeIdx>0?I.activeIdx:I.matches.length)-1,I.$digest()):13===e.which||9===e.which?I.$apply(function(){I.select(I.activeIdx)}):27===e.which&&(e.stopPropagation(),H(),I.$digest())}}),t.bind("blur",function(){E&&I.matches.length&&-1!==I.activeIdx&&!w&&(w=!0,I.$apply(function(){I.select(I.activeIdx)})),_=!1,w=!1});var K=function(e){t[0]!==e.target&&3!==e.which&&0!==I.matches.length&&(H(),c.$$phase||I.$digest())};a.bind("click",K),e.$on("$destroy",function(){a.unbind("click",K),(T||$)&&Y.remove(),T&&(angular.element(l).unbind("resize",p),a.find("body").unbind("scroll",p)),L.remove()});var Y=i(L)(I);T?a.find("body").append(Y):$!==!1?angular.element(a[0].getElementById($)).append(Y):t.after(Y),this.init=function(t,n){f=t,g=n,f.$parsers.unshift(function(t){return _=!0,0===y||t&&t.length>=y?b>0?(G(),q(t)):U(t):(x(e,!1),G(),H()),C?t:t?void f.$setValidity("editable",!1):(f.$setValidity("editable",!0),null)}),f.$formatters.push(function(t){var n,i,r={};return C||f.$setValidity("editable",!0),k?(r.$model=t,k(e,r)):(r[O.itemName]=t,n=O.viewMapper(e,r),r[O.itemName]=void 0,i=O.viewMapper(e,r),n!==i?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(e,t,n,i){i[2].init(i[0],i[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(i,r,o){var s=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e(s).then(function(e){t(e.trim())(i,function(e){r.replaceWith(e)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function i(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function r(e){return/<.*>/g.test(e)}var o;return o=t.has("$sanitize"),function(t,s){return!o&&r(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=s?(""+t).replace(new RegExp(i(s),"gi"),"<strong>$&</strong>"):t,o||(t=e.trustAsHtml(t)),t}}]),angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function(e,t,n,i){return i||n.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),t}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u){var h=[9,13,27,38,40],p=200;return{require:["ngModel","^?ngModelOptions"],link:function(d,f,g,m){function v(){L.moveInProgress||(L.moveInProgress=!0,L.$digest()),G&&i.cancel(G),G=i(function(){L.matches.length&&y(),L.moveInProgress=!1},p)}function y(){L.position=A?a.offset(f):a.position(f),L.position.top+=f.prop("offsetHeight")}u||c.warn("typeahead is now deprecated. Use uib-typeahead instead.");var _=m[0],w=m[1],b=d.$eval(g.typeaheadMinLength);b||0===b||(b=1);var C,x,S=d.$eval(g.typeaheadWaitMs)||0,E=d.$eval(g.typeaheadEditable)!==!1,P=t(g.typeaheadLoading).assign||angular.noop,k=t(g.typeaheadOnSelect),T=angular.isDefined(g.typeaheadSelectOnBlur)?d.$eval(g.typeaheadSelectOnBlur):!1,$=t(g.typeaheadNoResults).assign||angular.noop,D=g.typeaheadInputFormatter?t(g.typeaheadInputFormatter):void 0,A=g.typeaheadAppendToBody?d.$eval(g.typeaheadAppendToBody):!1,R=g.typeaheadAppendToElementId||!1,j=d.$eval(g.typeaheadFocusFirst)!==!1,M=g.typeaheadSelectOnExact?d.$eval(g.typeaheadSelectOnExact):!1,O=t(g.ngModel),I=t(g.ngModel+"($$$p)"),F=function(e,t){return angular.isFunction(O(d))&&w&&w.$options&&w.$options.getterSetter?I(e,{$$$p:t}):O.assign(e,t)},N=l.parse(g.typeahead),L=d.$new(),H=d.$on("$destroy",function(){L.$destroy()});L.$on("$destroy",H);var V="typeahead-"+L.$id+"-"+Math.floor(1e4*Math.random());f.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":V});var B=angular.element("<div typeahead-popup></div>");B.attr({id:V,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(g.typeaheadTemplateUrl)&&B.attr("template-url",g.typeaheadTemplateUrl),angular.isDefined(g.typeaheadPopupTemplateUrl)&&B.attr("popup-template-url",g.typeaheadPopupTemplateUrl);var U=function(){L.matches=[],L.activeIdx=-1,f.attr("aria-expanded",!1)},z=function(e){return V+"-option-"+e};L.$watch("activeIdx",function(e){0>e?f.removeAttr("aria-activedescendant"):f.attr("aria-activedescendant",z(e))});var W=function(e,t){return L.matches.length>t&&e?e.toUpperCase()===L.matches[t].label.toUpperCase():!1},q=function(e){var t={$viewValue:e};P(d,!0),$(d,!1),n.when(N.source(d,t)).then(function(n){var i=e===_.$viewValue;if(i&&C)if(n&&n.length>0){L.activeIdx=j?0:-1,$(d,!1),L.matches.length=0;for(var r=0;r<n.length;r++)t[N.itemName]=n[r],L.matches.push({id:z(r),label:N.viewMapper(L,t),model:n[r]});L.query=e,y(),f.attr("aria-expanded",!0),M&&1===L.matches.length&&W(e,0)&&L.select(0)}else U(),$(d,!0);i&&P(d,!1)},function(){U(),P(d,!1),$(d,!0)})};A&&(angular.element(o).bind("resize",v),r.find("body").bind("scroll",v));var G;L.moveInProgress=!1,U(),L.query=void 0;var K,Y=function(e){K=i(function(){q(e)},S)},J=function(){K&&i.cancel(K)};_.$parsers.unshift(function(e){return C=!0,0===b||e&&e.length>=b?S>0?(J(),Y(e)):q(e):(P(d,!1),J(),U()),E?e:e?void _.$setValidity("editable",!1):(_.$setValidity("editable",!0),null)}),_.$formatters.push(function(e){var t,n,i={};return E||_.$setValidity("editable",!0),D?(i.$model=e,D(d,i)):(i[N.itemName]=e,t=N.viewMapper(d,i),i[N.itemName]=void 0,n=N.viewMapper(d,i),t!==n?t:e)}),L.select=function(e){var t,n,r={};x=!0,r[N.itemName]=n=L.matches[e].model,t=N.modelMapper(d,r),F(d,t),_.$setValidity("editable",!0),_.$setValidity("parse",!0),k(d,{$item:n,$model:t,$label:N.viewMapper(d,r)}),U(),L.$eval(g.typeaheadFocusOnSelect)!==!1&&i(function(){f[0].focus()},0,!1)},f.bind("keydown",function(e){if(0!==L.matches.length&&-1!==h.indexOf(e.which)){if(-1===L.activeIdx&&(9===e.which||13===e.which))return U(),void L.$digest();e.preventDefault(),40===e.which?(L.activeIdx=(L.activeIdx+1)%L.matches.length,L.$digest()):38===e.which?(L.activeIdx=(L.activeIdx>0?L.activeIdx:L.matches.length)-1,L.$digest()):13===e.which||9===e.which?L.$apply(function(){L.select(L.activeIdx)}):27===e.which&&(e.stopPropagation(),U(),L.$digest())}}),f.bind("blur",function(){T&&L.matches.length&&-1!==L.activeIdx&&!x&&(x=!0,L.$apply(function(){L.select(L.activeIdx)})),C=!1,x=!1});var X=function(e){f[0]!==e.target&&3!==e.which&&0!==L.matches.length&&(U(),s.$$phase||L.$digest())};r.bind("click",X),d.$on("$destroy",function(){r.unbind("click",X),(A||R)&&Q.remove(),A&&(angular.element(o).unbind("resize",v),r.find("body").unbind("scroll",v)),B.remove()});var Q=e(B)(L);A?r.find("body").append(Q):R!==!1?angular.element(r[0].getElementById(R)).append(Q):f.after(Q)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function(e,t){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(n,i,r){e||t.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead."),n.templateUrl=r.templateUrl,n.isOpen=function(){return n.matches.length>0},n.isActive=function(e){return n.active==e},n.selectActive=function(e){n.active=e},n.selectMatch=function(e){n.select({activeIdx:e})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function(e,t,n,i,r){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(o,s,a){i||r.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var l=n(a.templateUrl)(o.$parent)||"template/typeahead/typeahead-match.html";e(l).then(function(e){t(e.trim())(o,function(e){s.replaceWith(e)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function(e,t,n,i){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function o(e){return/<.*>/g.test(e)}var s;return s=t.has("$sanitize"),function(t,a){return i||n.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!s&&o(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=a?(""+t).replace(new RegExp(r(a),"gi"),"<strong>$&</strong>"):t,s||(t=e.trustAsHtml(t)),t}}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),"undefined"!=typeof module&&(module.exports="ui.bootstrap"),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(e,t){var n=t.has("$animateCss")?t.get("$animateCss"):null;return{link:function(t,i,r){function o(){i.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),n?n(i,{addClass:"in",easing:"ease",to:{height:i[0].scrollHeight+"px"}}).start()["finally"](s):e.addClass(i,"in",{to:{height:i[0].scrollHeight+"px"}}).then(s)}function s(){i.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function a(){return i.hasClass("collapse")||i.hasClass("in")?(i.css({height:i[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(n?n(i,{removeClass:"in",to:{height:"0"}}).start()["finally"](l):e.removeClass(i,"in",{to:{height:"0"}}).then(l))):l()}function l(){i.css({height:"0"}),i.removeClass("collapsing").addClass("collapse")}t.$watch(r.uibCollapse,function(e){e?a():o()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function(e,t,n,i){var r=t.has("$animateCss")?t.get("$animateCss"):null;return{link:function(t,o,s){function a(){o.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),r?r(o,{easing:"ease",to:{height:o[0].scrollHeight+"px"}}).start().done(l):e.animate(o,{},{height:o[0].scrollHeight+"px"}).then(l)}function l(){o.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function c(){return o.hasClass("collapse")||o.hasClass("in")?(o.css({height:o[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(r?r(o,{to:{height:"0"}}).start().done(u):e.animate(o,{},{height:"0"}).then(u))):u()}function u(){o.css({height:"0"}),o.removeClass("collapsing").addClass("collapse")}i||n.warn("collapse is now deprecated. Use uib-collapse instead."),t.$watch(s.collapse,function(e){e?c():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;r&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.openClass=n.openClass||"panel-open",e.panelClass=n.panelClass,e.$watch("isOpen",function(n){t.toggleClass(e.openClass,!!n),n&&i.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:["?^uibAccordionGroup","?^accordionGroup"],link:function(e,t,n,i){i=i[0]?i[0]:i[1],e.$watch(function(){return i[n.uibAccordionTransclude]},function(e){e&&(t.find("span").html(""),t.find("span").append(e))})}}}),angular.module("ui.bootstrap.accordion").value("$accordionSuppressWarning",!1).controller("AccordionController",["$scope","$attrs","$controller","$log","$accordionSuppressWarning",function(e,t,n,i,r){r||i.warn("AccordionController is now deprecated. Use UibAccordionController instead."),angular.extend(this,n("UibAccordionController",{$scope:e,$attrs:t}))}]).directive("accordion",["$log","$accordionSuppressWarning",function(e,t){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion.html"},link:function(){t||e.warn("accordion is now deprecated. Use uib-accordion instead.")}}}]).directive("accordionGroup",["$log","$accordionSuppressWarning",function(e,t){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(n,i,r,o){t||e.warn("accordion-group is now deprecated. Use uib-accordion-group instead."),o.addGroup(n),n.openClass=r.openClass||"panel-open",n.panelClass=r.panelClass,n.$watch("isOpen",function(e){i.toggleClass(n.openClass,!!e),e&&o.closeOthers(n)}),n.toggleOpen=function(e){n.isDisabled||e&&32!==e.which||(n.isOpen=!n.isOpen)}}}}]).directive("accordionHeading",["$log","$accordionSuppressWarning",function(e,t){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(n,i,r,o,s){t||e.warn("accordion-heading is now deprecated. Use uib-accordion-heading instead."),o.setHeading(s(n,angular.noop))}}}]).directive("accordionTransclude",["$log","$accordionSuppressWarning",function(e,t){return{require:"^accordionGroup",link:function(n,i,r,o){t||e.warn("accordion-transclude is now deprecated. Use uib-accordion-transclude instead."),n.$watch(function(){return o[r.accordionTransclude]},function(e){e&&(i.find("span").html(""),i.find("span").append(e))})}}}]),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(e,t,n,i){e.closeable=!!t.close;var r=angular.isDefined(t.dismissOnTimeout)?n(t.dismissOnTimeout)(e.$parent):null;r&&i(function(){e.close()},parseInt(r,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.alert").value("$alertSuppressWarning",!1).controller("AlertController",["$scope","$attrs","$controller","$log","$alertSuppressWarning",function(e,t,n,i,r){r||i.warn("AlertController is now deprecated. Use UibAlertController instead."),angular.extend(this,n("UibAlertController",{$scope:e,$attrs:t}))}]).directive("alert",["$log","$alertSuppressWarning",function(e,t){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"},link:function(){t||e.warn("alert is now deprecated. Use uib-alert instead.")}}}]),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",function(){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(e,t,n,i){var r=i[0],o=i[1];t.find("input").css({display:"none"}),o.$render=function(){t.toggleClass(r.activeClass,angular.equals(o.$modelValue,e.$eval(n.uibBtnRadio)))},t.on(r.toggleEvent,function(){if(!n.disabled){var i=t.hasClass(r.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){o.$setViewValue(i?null:e.$eval(n.uibBtnRadio)),o.$render()})}})}}}).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,n,i){function r(){return s(n.btnCheckboxTrue,!0)}function o(){return s(n.btnCheckboxFalse,!1)}function s(t,n){return angular.isDefined(t)?e.$eval(t):n}var a=i[0],l=i[1];t.find("input").css({display:"none"}),l.$render=function(){t.toggleClass(a.activeClass,angular.equals(l.$modelValue,r()))},t.on(a.toggleEvent,function(){n.disabled||e.$apply(function(){l.$setViewValue(t.hasClass(a.activeClass)?o():r()),l.$render()})})}}}),angular.module("ui.bootstrap.buttons").value("$buttonsSuppressWarning",!1).controller("ButtonsController",["$controller","$log","$buttonsSuppressWarning",function(e,t,n){n||t.warn("ButtonsController is now deprecated. Use UibButtonsController instead."),angular.extend(this,e("UibButtonsController"))}]).directive("btnRadio",["$log","$buttonsSuppressWarning",function(e,t){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(n,i,r,o){t||e.warn("btn-radio is now deprecated. Use uib-btn-radio instead.");var s=o[0],a=o[1];i.find("input").css({display:"none"}),a.$render=function(){i.toggleClass(s.activeClass,angular.equals(a.$modelValue,n.$eval(r.btnRadio)))},i.bind(s.toggleEvent,function(){if(!r.disabled){var e=i.hasClass(s.activeClass);(!e||angular.isDefined(r.uncheckable))&&n.$apply(function(){a.$setViewValue(e?null:n.$eval(r.btnRadio)),a.$render()})}})}}}]).directive("btnCheckbox",["$document","$log","$buttonsSuppressWarning",function(e,t,n){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(i,r,o,s){function a(){return c(o.btnCheckboxTrue,!0)}function l(){return c(o.btnCheckboxFalse,!1)}function c(e,t){var n=i.$eval(e);return angular.isDefined(n)?n:t}n||t.warn("btn-checkbox is now deprecated. Use uib-btn-checkbox instead.");var u=s[0],h=s[1];r.find("input").css({display:"none"}),h.$render=function(){r.toggleClass(u.activeClass,angular.equals(h.$modelValue,a()))},r.bind(u.toggleEvent,function(){o.disabled||i.$apply(function(){h.$setViewValue(r.hasClass(u.activeClass)?l():a()),h.$render()})}),r.on("keypress",function(t){o.disabled||32!==t.which||e[0].activeElement!==r[0]||i.$apply(function(){h.$setViewValue(r.hasClass(u.activeClass)?l():a()),h.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$animate",function(e,t,n,i){function r(t,n,r){y||(angular.extend(t,{direction:r,active:!0}),angular.extend(p.currentSlide||{},{direction:r,active:!1}),i.enabled()&&!e.noTransition&&!e.$currentTransition&&t.$element&&p.slides.length>1&&(t.$element.data(m,t.direction),p.currentSlide&&p.currentSlide.$element&&p.currentSlide.$element.data(m,t.direction),e.$currentTransition=!0,f?i.on("addClass",t.$element,function(t,n){"close"===n&&(e.$currentTransition=null,i.off("addClass",t))}):t.$element.one("$animate:close",function(){e.$currentTransition=null})),p.currentSlide=t,v=n,s())}function o(e){if(angular.isUndefined(d[e].index))return d[e];var t;d.length;for(t=0;t<d.length;++t)if(d[t].index==e)return d[t]}function s(){a();var t=+e.interval;!isNaN(t)&&t>0&&(u=n(l,t))}function a(){u&&(n.cancel(u),u=null)}function l(){var t=+e.interval;h&&!isNaN(t)&&t>0&&d.length?e.next():e.pause()}function c(t){t.length||(e.$currentTransition=null)}var u,h,p=this,d=p.slides=e.slides=[],f=angular.version.minor>=4,g="uib-noTransition",m="uib-slideDirection",v=-1;p.currentSlide=null;var y=!1;p.select=e.select=function(t,n){var i=e.indexOfSlide(t);void 0===n&&(n=i>p.getCurrentIndex()?"next":"prev"),t&&t!==p.currentSlide&&!e.$currentTransition&&r(t,i,n)},e.$on("$destroy",function(){y=!0}),p.getCurrentIndex=function(){return p.currentSlide&&angular.isDefined(p.currentSlide.index)?+p.currentSlide.index:v},e.indexOfSlide=function(e){return angular.isDefined(e.index)?+e.index:d.indexOf(e)},e.next=function(){var t=(p.getCurrentIndex()+1)%d.length;return 0===t&&e.noWrap()?void e.pause():p.select(o(t),"next")},e.prev=function(){var t=p.getCurrentIndex()-1<0?d.length-1:p.getCurrentIndex()-1;return e.noWrap()&&t===d.length-1?void e.pause():p.select(o(t),"prev")},e.isActive=function(e){return p.currentSlide===e},e.$watch("interval",s),e.$watchCollection("slides",c),e.$on("$destroy",a),e.play=function(){h||(h=!0,s())},e.pause=function(){e.noPause||(h=!1,a())},p.addSlide=function(t,n){t.$element=n,d.push(t),1===d.length||t.active?(p.select(d[d.length-1]),1===d.length&&e.play()):t.active=!1},p.removeSlide=function(e){angular.isDefined(e.index)&&d.sort(function(e,t){return+e.index>+t.index});var t=d.indexOf(e);d.splice(t,1),d.length>0&&e.active?t>=d.length?p.select(d[t-1]):p.select(d[t]):v>t&&v--,0===d.length&&(p.currentSlide=null)},e.$watch("noTransition",function(e){t.data(g,e)})}]).directive("uibCarousel",[function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(e,t){return t.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("uibSlide",function(){return{require:"^uibCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/carousel/slide.html";
},scope:{active:"=?",actual:"=?",index:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}).animation(".item",["$injector","$animate",function(e,t){function n(e,t,n){e.removeClass(t),n&&n()}var i="uib-noTransition",r="uib-slideDirection",o=null;return e.has("$animateCss")&&(o=e.get("$animateCss")),{beforeAddClass:function(e,s,a){if("active"==s&&e.parent()&&e.parent().parent()&&!e.parent().parent().data(i)){var l=!1,c=e.data(r),u="next"==c?"left":"right",h=n.bind(this,e,u+" "+c,a);return e.addClass(c),o?o(e,{addClass:u}).start().done(h):t.addClass(e,u).then(function(){l||h(),a()}),function(){l=!0}}a()},beforeRemoveClass:function(e,s,a){if("active"===s&&e.parent()&&e.parent().parent()&&!e.parent().parent().data(i)){var l=!1,c=e.data(r),u="next"==c?"left":"right",h=n.bind(this,e,u,a);return o?o(e,{addClass:u}).start().done(h):t.addClass(e,u).then(function(){l||h(),a()}),function(){l=!0}}a()}}}]),angular.module("ui.bootstrap.carousel").value("$carouselSuppressWarning",!1).controller("CarouselController",["$scope","$element","$controller","$log","$carouselSuppressWarning",function(e,t,n,i,r){r||i.warn("CarouselController is now deprecated. Use UibCarouselController instead."),angular.extend(this,n("UibCarouselController",{$scope:e,$element:t}))}]).directive("carousel",["$log","$carouselSuppressWarning",function(e,t){return{transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(e,t){return t.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"},link:function(){t||e.warn("carousel is now deprecated. Use uib-carousel instead.")}}}]).directive("slide",["$log","$carouselSuppressWarning",function(e,t){return{require:"^carousel",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(n,i,r,o){t||e.warn("slide is now deprecated. Use uib-slide instead."),o.addSlide(n,i),n.$on("$destroy",function(){o.removeSlide(n)}),n.$watch("active",function(e){e&&o.select(n)})}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function(e,t,n){function i(e){var t=[],i=e.split("");return angular.forEach(s,function(n,r){var o=e.indexOf(r);if(o>-1){e=e.split(""),i[o]="("+n.regex+")",e[o]="$";for(var s=o+1,a=o+r.length;a>s;s++)i[s]="",e[s]="$";e=e.join(""),t.push({index:o,apply:n.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:n(t,"index")}}function r(e,t,n){return 1>n?!1:1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}var o,s,a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){o=t.id,this.parsers={},s={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)}},MMM:{regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:t.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:t.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},hh:{regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},h:{regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}},a:{regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)}}}},this.init(),this.parse=function(n,s,l){if(!angular.isString(n)||!s)return n;s=t.DATETIME_FORMATS[s]||s,s=s.replace(a,"\\$&"),t.id!==o&&this.init(),this.parsers[s]||(this.parsers[s]=i(s));var c=this.parsers[s],u=c.regex,h=c.map,p=n.match(u);if(p&&p.length){var d,f;angular.isDate(l)&&!isNaN(l.getTime())?d={year:l.getFullYear(),month:l.getMonth(),date:l.getDate(),hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds(),milliseconds:l.getMilliseconds()}:(l&&e.warn("dateparser:","baseDate is not a valid date"),d={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var g=1,m=p.length;m>g;g++){var v=h[g-1];v.apply&&v.apply.call(d,p[g])}return r(d.year,d.month,d.date)&&(angular.isDate(l)&&!isNaN(l.getTime())?(f=new Date(l),f.setFullYear(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.milliseconds||0)):f=new Date(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.milliseconds||0)),f}}}]),angular.module("ui.bootstrap.dateparser").value("$dateParserSuppressWarning",!1).service("dateParser",["$log","$dateParserSuppressWarning","uibDateParser",function(e,t,n){t||e.warn("dateParser is now deprecated. Use uibDateParser instead."),angular.extend(this,n)}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},o=r(t[0]);o!=e[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var s=t[0].getBoundingClientRect();return{width:s.width||t.prop("offsetWidth"),height:s.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,o,s,a,l=n.split("-"),c=l[0],u=l[1]||"center";r=i?this.offset(e):this.position(e),o=t.prop("offsetWidth"),s=t.prop("offsetHeight");var h={center:function(){return r.left+r.width/2-o/2},left:function(){return r.left},right:function(){return r.left+r.width}},p={center:function(){return r.top+r.height/2-s/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":a={top:p[u](),left:h[c]()};break;case"left":a={top:p[u](),left:r.left-o};break;case"bottom":a={top:p[c](),left:h[u]()};break;default:a={top:r.top-s,left:h[u]()}}return a}}}]),angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function(e,t,n){t||e.warn("$position is now deprecated. Use $uibPosition instead."),angular.extend(this,n)}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError",function(e,t,n,i,r,o,s,a){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,r){l[n]=angular.isDefined(t[n])?6>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),angular.forEach(["minMode","maxMode"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(n){l[i]=angular.isDefined(n)?n:t[i],e[i]=l[i],("minMode"==i&&l.modes.indexOf(e.datepickerMode)<l.modes.indexOf(l[i])||"maxMode"==i&&l.modes.indexOf(e.datepickerMode)>l.modes.indexOf(l[i]))&&(e.datepickerMode=l[i])}):(l[i]=s[i]||null,e[i]=l[i])}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(c.$isEmpty(c.$modelValue)||c.$invalid)&&(l.activeDate=e,l.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$viewValue){var e=new Date(c.$viewValue),t=!isNaN(e);t?this.activeDate=e:a||r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$viewValue?new Date(c.$viewValue):null;c.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$viewValue?new Date(c.$viewValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$viewValue?new Date(c.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){l.element[0].focus()};e.$on("uib:datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),l.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):e.toggleMode("up"===n?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function i(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?o[t]:29}function r(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var o=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,i=new Array(t),r=new Date(e),o=0;t>o;)n=new Date(r),i[o++]=n,r.setDate(r.getDate()+1);return i},this._refreshView=function(){var t=this.activeDate.getFullYear(),i=this.activeDate.getMonth(),o=new Date(this.activeDate);o.setFullYear(t,i,1);var s=this.startingDay-o.getDay(),a=s>0?7-s:-s,l=new Date(o);a>0&&l.setDate(-a+1);for(var c=this.getDates(l,42),u=0;42>u;u++)c[u]=angular.extend(this.createDateObject(c[u],this.formatDay),{secondary:c[u].getMonth()!==i,uid:e.uniqueId+"-"+u});e.labels=new Array(7);for(var h=0;7>h;h++)e.labels[h]={abbr:n(c[h].date,this.formatDayHeader),full:n(c[h].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(c,7),e.showWeeks){e.weekNumbers=[];for(var p=(11-this.startingDay)%7,d=e.rows.length,f=0;d>f;f++)e.weekNumbers.push(r(e.rows[f][p].date))}},this.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(r,1),n=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=i(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,i=new Array(12),r=this.activeDate.getFullYear(),o=0;12>o;o++)t=new Date(this.activeDate),t.setFullYear(r,o,1),i[o]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+o});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(i,3)},this.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,n){function i(e){return parseInt((e-1)/r,10)*r+1}var r;this.element=t,this.yearpickerInit=function(){r=this.yearRange,this.step={years:r}},this._refreshView=function(){for(var t,n=new Array(r),o=0,s=i(this.activeDate.getFullYear());r>o;o++)t=new Date(this.activeDate),t.setFullYear(s+o,0,1),n[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[n[0].label,n[r-1].label].join(" - "),e.rows=this.split(n,5)},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*this.step.years:"home"===e?n=i(this.activeDate.getFullYear()):"end"===e&&(n=i(this.activeDate.getFullYear())+r-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/day.html"},require:["^?uibDatepicker","uibDaypicker","^?datepicker"],controller:"UibDaypickerController",link:function(e,t,n,i){var r=i[0]||i[2],o=i[1];o.init(r)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/month.html"},require:["^?uibDatepicker","uibMonthpicker","^?datepicker"],controller:"UibMonthpickerController",link:function(e,t,n,i){var r=i[0]||i[2],o=i[1];o.init(r)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/year.html"},require:["^?uibDatepicker","uibYearpicker","^?datepicker"],controller:"UibYearpickerController",link:function(e,t,n,i){var r=i[0]||i[2];angular.extend(r,i[1]),r.yearpickerInit(),r.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout",function(e,t,n,i,r,o,s,a,l,c,u,h){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function d(t){angular.isNumber(t)&&(t=new Date(t));{if(!t)return null;if(angular.isDate(t)&&!isNaN(t))return t;if(angular.isString(t)){var n=c.parse(t,v,e.date);return isNaN(n)?void 0:n}}}function f(e,t){var i=e||t;if(!n.ngRequired&&!i)return!0;if(angular.isNumber(i)&&(i=new Date(i)),i){if(angular.isDate(i)&&!isNaN(i))return!0;if(angular.isString(i)){var r=c.parse(i,v);return!isNaN(r)}return!1}return!0}function g(n){var i=P[0],r=t[0].contains(n.target),o=void 0!==i.contains&&i.contains(n.target);!e.isOpen||r||o||e.$apply(function(){e.isOpen=!1})}function m(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}var v,y,_,w,b,C,x,S,E,P,k={},T=!1;e.watchData={},this.init=function(a){if(E=a,y=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):u.closeOnDateSelection,_=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):u.appendToBody,w=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):u.onOpenFocus,b=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:u.datepickerPopupTemplateUrl,C=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:u.datepickerTemplateUrl,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):u.showButtonBar,u.html5Types[n.type]?(v=u.html5Types[n.type],T=!0):(v=n.datepickerPopup||n.uibDatepickerPopup||u.datepickerPopup,n.$observe("uibDatepickerPopup",function(e,t){var n=e||u.datepickerPopup;if(n!==v&&(v=n,E.$modelValue=null,!v))throw new Error("uibDatepickerPopup must have a date format specified.")})),!v)throw new Error("uibDatepickerPopup must have a date format specified.");if(T&&n.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(x=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":b}),S=angular.element(x.children()[0]),S.attr("template-url",C),T&&"month"===n.type&&(S.attr("datepicker-mode",'"month"'),S.attr("min-mode","month")),n.datepickerOptions){var h=e.$parent.$eval(n.datepickerOptions);h&&h.initDate&&(e.initDate=h.initDate,S.attr("init-date","initDate"),delete h.initDate),angular.forEach(h,function(e,t){S.attr(p(t),e)})}angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(t){if(n[t]){var i=r(n[t]);if(e.$parent.$watch(i,function(n){e.watchData[t]=n,("minDate"===t||"maxDate"===t)&&(k[t]=new Date(n))}),S.attr(p(t),"watchData."+t),"datepickerMode"===t){var o=i.assign;e.$watch("watchData."+t,function(t,n){angular.isFunction(o)&&t!==n&&o(e.$parent,t)})}}}),n.dateDisabled&&S.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),n.showWeeks&&S.attr("show-weeks",n.showWeeks),n.customClass&&S.attr("custom-class","customClass({ date: date, mode: mode })"),T?E.$formatters.push(function(t){return e.date=t,t}):(E.$$parserName="date",E.$validators.date=f,E.$parsers.unshift(d),E.$formatters.push(function(t){return e.date=t,E.$isEmpty(t)?t:l(t,v)})),E.$viewChangeListeners.push(function(){e.date=c.parse(E.$viewValue,v,e.date)}),t.bind("keydown",m),P=i(x)(e),x.remove(),_?o.find("body").append(P):t.after(P),e.$on("$destroy",function(){e.isOpen===!0&&(s.$$phase||e.$apply(function(){e.isOpen=!1})),P.remove(),t.unbind("keydown",m),o.unbind("click",g)})},e.getText=function(t){return e[t+"Text"]||u[t+"Text"]},e.isDisabled=function(t){return"today"===t&&(t=new Date),e.watchData.minDate&&e.compare(t,k.minDate)<0||e.watchData.maxDate&&e.compare(t,k.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){angular.isDefined(n)&&(e.date=n);var i=e.date?l(e.date,v):null;t.val(i),E.$setViewValue(i),y&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(e.isOpen=!1,t[0].focus())},e.select=function(t){if("today"===t){var n=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())):t=new Date(n.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(){e.isOpen=!1,t[0].focus()},e.$watch("isOpen",function(n){n?(e.position=_?a.offset(t):a.position(t),e.position.top=e.position.top+t.prop("offsetHeight"),h(function(){w&&e.$broadcast("uib:datepicker.focus"),o.bind("click",g)},0,!1)):o.unbind("click",g)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(e,t,n,i){var r=i[0],o=i[1];o.init(r)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.datepicker").value("$datepickerSuppressWarning",!1).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","$datepickerSuppressWarning",function(e,t,n,i,r,o,s,a,l){l||r.warn("DatepickerController is now deprecated. Use UibDatepickerController instead.");var c=this,u={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,r){c[n]=angular.isDefined(t[n])?6>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){c[i]=e?new Date(e):null,c.refreshView()}):c[i]=s[i]?new Date(s[i]):null}),angular.forEach(["minMode","maxMode"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(n){c[i]=angular.isDefined(n)?n:t[i],e[i]=c[i],("minMode"==i&&c.modes.indexOf(e.datepickerMode)<c.modes.indexOf(c[i])||"maxMode"==i&&c.modes.indexOf(e.datepickerMode)>c.modes.indexOf(c[i]))&&(e.datepickerMode=c[i])}):(c[i]=s[i]||null,e[i]=c[i])}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(u.$isEmpty(u.$modelValue)||u.$invalid)&&(c.activeDate=e,c.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===c.compare(t.date,c.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){u=e,u.$render=function(){c.render()}},this.render=function(){if(u.$viewValue){var e=new Date(u.$viewValue),t=!isNaN(e);t?this.activeDate=e:a||r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=u.$viewValue?new Date(u.$viewValue):null;u.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=u.$viewValue?new Date(u.$viewValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},this.fixTimeZone=function(e){var t=e.getHours();e.setHours(23===t?t+2:0)},e.select=function(t){if(e.datepickerMode===c.minMode){var n=u.$viewValue?new Date(u.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),u.$setViewValue(n),u.$render()}else c.activeDate=t,e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=c.activeDate.getFullYear()+e*(c.step.years||0),n=c.activeDate.getMonth()+e*(c.step.months||0);c.activeDate.setFullYear(t,n,1),c.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===c.maxMode&&1===t||e.datepickerMode===c.minMode&&-1===t||(e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var h=function(){c.element[0].focus()};e.$on("uib:datepicker.focus",h),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),c.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(c.isDisabled(c.activeDate))return;e.select(c.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(c.handleKeyDown(n,t),c.refreshView()):e.toggleMode("up"===n?1:-1)}}]).directive("datepicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(n,i,r,o){t||e.warn("datepicker is now deprecated. Use uib-datepicker instead.");var s=o[0],a=o[1];s.init(a)}}}]).directive("daypicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/day.html",require:["^datepicker","daypicker"],controller:"UibDaypickerController",link:function(n,i,r,o){t||e.warn("daypicker is now deprecated. Use uib-daypicker instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("monthpicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/month.html",require:["^datepicker","monthpicker"],controller:"UibMonthpickerController",link:function(n,i,r,o){t||e.warn("monthpicker is now deprecated. Use uib-monthpicker instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("yearpicker",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,templateUrl:"template/datepicker/year.html",require:["^datepicker","yearpicker"],controller:"UibYearpickerController",link:function(n,i,r,o){t||e.warn("yearpicker is now deprecated. Use uib-yearpicker instead.");var s=o[0];angular.extend(s,o[1]),s.yearpickerInit(),s.refreshView()}}}]).directive("datepickerPopup",["$log","$datepickerSuppressWarning",function(e,t){return{require:["ngModel","datepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(n,i,r,o){t||e.warn("datepicker-popup is now deprecated. Use uib-datepicker-popup instead.");var s=o[0],a=o[1];a.init(s)}}}]).directive("datepickerPopupWrap",["$log","$datepickerSuppressWarning",function(e,t){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/popup.html"},link:function(){t||e.warn("datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.")}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",i),e.bind("keydown",r)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",i),e.unbind("keydown",r))};var i=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var i=n.getToggleElement();if(!(e&&i&&i[0].contains(e.target))){var r=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&r&&r[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},r=function(e){27===e.which?(n.focusToggleElement(),i()):n.isKeynavEnabled()&&/(38|40)/.test(e.which)&&n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,i,r,o,s,a,l,c,u){var h,p,d=this,f=e.$new(),g=r.openClass,m=angular.noop,v=n.onToggle?i(n.onToggle):angular.noop,y=!1,_=!1;t.addClass("dropdown"),this.init=function(){n.isOpen&&(p=i(n.isOpen),m=p.assign,e.$watch(p,function(e){f.isOpen=!!e})),y=angular.isDefined(n.dropdownAppendToBody),_=angular.isDefined(n.uibKeyboardNav),y&&d.dropdownMenu&&(l.find("body").append(d.dropdownMenu),t.on("$destroy",function(){d.dropdownMenu.remove()}))},this.toggle=function(e){return f.isOpen=arguments.length?!!e:!f.isOpen},this.isOpen=function(){return f.isOpen},f.getToggleElement=function(){return d.toggleElement},f.getAutoClose=function(){return n.autoClose||"always"},f.getElement=function(){return t},f.isKeynavEnabled=function(){return _},f.focusDropdownEntry=function(e){var n=d.dropdownMenu?angular.element(d.dropdownMenu).find("a"):angular.element(t).find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===n.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=n.length-1}n[d.selectedOption].focus()},f.getDropdownElement=function(){return d.dropdownMenu},f.focusToggleElement=function(){d.toggleElement&&d.toggleElement[0].focus()},f.$watch("isOpen",function(n,i){if(y&&d.dropdownMenu){var r=a.positionElements(t,d.dropdownMenu,"bottom-left",!0),l={top:r.top+"px",display:n?"block":"none"},p=d.dropdownMenu.hasClass("dropdown-menu-right");p?(l.left="auto",l.right=window.innerWidth-(r.left+t.prop("offsetWidth"))+"px"):(l.left=r.left+"px",l.right="auto"),d.dropdownMenu.css(l)}if(s[n?"addClass":"removeClass"](t,g).then(function(){angular.isDefined(n)&&n!==i&&v(e,{open:!!n})}),n)d.dropdownMenuTemplateUrl&&u(d.dropdownMenuTemplateUrl).then(function(e){h=f.$new(),c(e.trim())(h,function(e){var t=e;d.dropdownMenu.replaceWith(t),d.dropdownMenu=t})}),f.focusToggleElement(),o.open(f);else{if(d.dropdownMenuTemplateUrl){h&&h.$destroy();var _=angular.element('<ul class="dropdown-menu"></ul>');d.dropdownMenu.replaceWith(_),d.dropdownMenu=_}o.close(f),d.selectedOption=null}angular.isFunction(m)&&m(e,n)}),e.$on("$locationChangeSuccess",function(){"disabled"!==f.getAutoClose()&&(f.isOpen=!1)});var w=e.$on("$destroy",function(){f.$destroy()});f.$on("$destroy",w)}]).directive("uibDropdown",function(){
return{controller:"UibDropdownController",link:function(e,t,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"AC",require:"?^uibDropdown",link:function(e,t,n,i){if(i&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var r=n.templateUrl;r&&(i.dropdownMenuTemplateUrl=r),i.dropdownMenu||(i.dropdownMenu=t)}}}}).directive("uibKeyboardNav",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,i){t.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var t=i.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(i.selectedOption)?i.selectedOption=i.selectedOption===t.length-1?i.selectedOption:i.selectedOption+1:i.selectedOption=0;break;case 38:angular.isNumber(i.selectedOption)?i.selectedOption=0===i.selectedOption?0:i.selectedOption-1:i.selectedOption=t.length-1}t[i.selectedOption].focus()}})}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,i){if(i){t.addClass("dropdown-toggle"),i.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.dropdown").value("$dropdownSuppressWarning",!1).service("dropdownService",["$log","$dropdownSuppressWarning","uibDropdownService",function(e,t,n){t||e.warn("dropdownService is now deprecated. Use uibDropdownService instead."),angular.extend(this,n)}]).controller("DropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest","$log","$dropdownSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u,h,p){p||h.warn("DropdownController is now deprecated. Use UibDropdownController instead.");var d,f,g=this,m=e.$new(),v=r.openClass,y=angular.noop,_=n.onToggle?i(n.onToggle):angular.noop,w=!1,b=!1;t.addClass("dropdown"),this.init=function(){n.isOpen&&(f=i(n.isOpen),y=f.assign,e.$watch(f,function(e){m.isOpen=!!e})),w=angular.isDefined(n.dropdownAppendToBody),b=angular.isDefined(n.uibKeyboardNav),w&&g.dropdownMenu&&(l.find("body").append(g.dropdownMenu),t.on("$destroy",function(){g.dropdownMenu.remove()}))},this.toggle=function(e){return m.isOpen=arguments.length?!!e:!m.isOpen},this.isOpen=function(){return m.isOpen},m.getToggleElement=function(){return g.toggleElement},m.getAutoClose=function(){return n.autoClose||"always"},m.getElement=function(){return t},m.isKeynavEnabled=function(){return b},m.focusDropdownEntry=function(e){var n=g.dropdownMenu?angular.element(g.dropdownMenu).find("a"):angular.element(t).find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(g.selectedOption)?g.selectedOption=g.selectedOption===n.length-1?g.selectedOption:g.selectedOption+1:g.selectedOption=0;break;case 38:angular.isNumber(g.selectedOption)?g.selectedOption=0===g.selectedOption?0:g.selectedOption-1:g.selectedOption=n.length-1}n[g.selectedOption].focus()},m.getDropdownElement=function(){return g.dropdownMenu},m.focusToggleElement=function(){g.toggleElement&&g.toggleElement[0].focus()},m.$watch("isOpen",function(n,i){if(w&&g.dropdownMenu){var r=a.positionElements(t,g.dropdownMenu,"bottom-left",!0),l={top:r.top+"px",display:n?"block":"none"},h=g.dropdownMenu.hasClass("dropdown-menu-right");h?(l.left="auto",l.right=window.innerWidth-(r.left+t.prop("offsetWidth"))+"px"):(l.left=r.left+"px",l.right="auto"),g.dropdownMenu.css(l)}if(s[n?"addClass":"removeClass"](t,v).then(function(){angular.isDefined(n)&&n!==i&&_(e,{open:!!n})}),n)g.dropdownMenuTemplateUrl&&u(g.dropdownMenuTemplateUrl).then(function(e){d=m.$new(),c(e.trim())(d,function(e){var t=e;g.dropdownMenu.replaceWith(t),g.dropdownMenu=t})}),m.focusToggleElement(),o.open(m);else{if(g.dropdownMenuTemplateUrl){d&&d.$destroy();var p=angular.element('<ul class="dropdown-menu"></ul>');g.dropdownMenu.replaceWith(p),g.dropdownMenu=p}o.close(m),g.selectedOption=null}angular.isFunction(y)&&y(e,n)}),e.$on("$locationChangeSuccess",function(){"disabled"!==m.getAutoClose()&&(m.isOpen=!1)});var C=e.$on("$destroy",function(){m.$destroy()});m.$on("$destroy",C)}]).directive("dropdown",["$log","$dropdownSuppressWarning",function(e,t){return{controller:"DropdownController",link:function(n,i,r,o){t||e.warn("dropdown is now deprecated. Use uib-dropdown instead."),o.init()}}}]).directive("dropdownMenu",["$log","$dropdownSuppressWarning",function(e,t){return{restrict:"AC",require:"?^dropdown",link:function(n,i,r,o){if(o&&!angular.isDefined(r.dropdownNested)){t||e.warn("dropdown-menu is now deprecated. Use uib-dropdown-menu instead."),i.addClass("dropdown-menu");var s=r.templateUrl;s&&(o.dropdownMenuTemplateUrl=s),o.dropdownMenu||(o.dropdownMenu=i)}}}}]).directive("keyboardNav",["$log","$dropdownSuppressWarning",function(e,t){return{restrict:"A",require:"?^dropdown",link:function(n,i,r,o){t||e.warn("keyboard-nav is now deprecated. Use uib-keyboard-nav instead."),i.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var t=o.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(o.selectedOption)?o.selectedOption=o.selectedOption===t.length-1?o.selectedOption:o.selectedOption+1:o.selectedOption=0;break;case 38:angular.isNumber(o.selectedOption)?o.selectedOption=0===o.selectedOption?0:o.selectedOption-1:o.selectedOption=t.length-1}t[o.selectedOption].focus()}})}}}]).directive("dropdownToggle",["$log","$dropdownSuppressWarning",function(e,t){return{require:"?^dropdown",link:function(n,i,r,o){if(t||e.warn("dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead."),o){i.addClass("dropdown-toggle"),o.toggleElement=i;var s=function(e){e.preventDefault(),i.hasClass("disabled")||r.disabled||n.$apply(function(){o.toggle()})};i.bind("click",s),i.attr({"aria-haspopup":!0,"aria-expanded":!1}),n.$watch(o.isOpen,function(e){i.attr("aria-expanded",!!e)}),n.$on("$destroy",function(){i.unbind("click",s)})}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var i=e[t];if(i){var r=i.indexOf(n);-1!==r&&i.splice(r,1),i.length||delete e[t]}}}}}}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function i(t,i,o){i.addClass("modal-backdrop"),o.modalInClass&&(r?r(i,{addClass:o.modalInClass}).start():e.addClass(i,o.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(t,n){var s=n();r?r(i,{removeClass:o.modalInClass}).start().then(s):e.removeClass(i,o.modalInClass).then(s)}))}var r=null;return t.has("$animateCss")&&(r=t.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),i}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$injector",function(e,t,n,i){var r=null;return i.has("$animateCss")&&(r=i.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,o,s){o.addClass(s.windowClass||""),o.addClass(s.windowTopClass||""),i.size=s.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},o.on("click",i.close),i.$isRendered=!0;var a=t.defer();s.$observe("modalRender",function(e){"true"==e&&a.resolve()}),a.promise.then(function(){var a=null;s.modalInClass&&(a=r?r(o,{addClass:s.modalInClass}).start():n.addClass(o,s.modalInClass),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var i=t();r?r(o,{removeClass:s.modalInClass}).start().then(i):n.removeClass(o,s.modalInClass).then(i)})),t.when(a).then(function(){var e=o[0].querySelector("[autofocus]");e?e.focus():o[0].focus()});var l=e.getTop();l&&e.modalRendered(l.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$uibModalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(e,t,n,i,r,o,s,a,l){function c(){for(var e=-1,t=w.keys(),n=0;n<t.length;n++)w.get(t[n]).value.backdrop&&(e=n);return e}function u(e,t){var i=n.find("body").eq(0),r=w.get(e).value;w.remove(e),d(r.modalDomEl,r.modalScope,function(){var t=r.openedClass||_;b.remove(t,e),i.toggleClass(t,b.hasKey(t)),h(!0)}),p(),t&&t.focus?t.focus():i.focus()}function h(e){var t;w.length()>0&&(t=w.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function p(){if(m&&-1==c()){var e=v;d(m,v,function(){e=null}),m=void 0,v=void 0}}function d(t,n,i){function r(){r.done||(r.done=!0,g?g(t,{event:"leave"}).start().then(function(){t.remove()}):e.leave(t),n.$destroy(),i&&i())}var s,a=null,l=function(){return s||(s=o.defer(),a=s.promise),function(){s.resolve()}};return n.$broadcast(C.NOW_CLOSING_EVENT,l),o.when(a).then(r)}function f(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var g=null;s.has("$animateCss")&&(g=s.get("$animateCss"));var m,v,y,_="modal-open",w=l.createNew(),b=a.createNew(),C={NOW_CLOSING_EVENT:"modal.stack.now-closing"},x=0,S="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return r.$watch(c,function(e){v&&(v.index=e)}),n.bind("keydown",function(e){if(e.isDefaultPrevented())return e;var t=w.top();if(t&&t.value.keyboard)switch(e.which){case 27:e.preventDefault(),r.$apply(function(){C.dismiss(t.key,"escape key press")});break;case 9:C.loadFocusElementList(t);var n=!1;e.shiftKey?C.isFocusInFirstItem(e)&&(n=C.focusLastFocusableElement()):C.isFocusInLastItem(e)&&(n=C.focusFirstFocusableElement()),n&&(e.preventDefault(),e.stopPropagation())}}),C.open=function(e,t){var o=n[0].activeElement,s=t.openedClass||_;h(!1),w.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard,openedClass:t.openedClass,windowTopClass:t.windowTopClass}),b.put(s,e);var a=n.find("body").eq(0),l=c();if(l>=0&&!m){v=r.$new(!0),v.index=l;var u=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');u.attr("backdrop-class",t.backdropClass),t.animation&&u.attr("modal-animation","true"),m=i(u)(v),a.append(m)}var p=angular.element('<div uib-modal-window="modal-window"></div>');p.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,"window-top-class":t.windowTopClass,size:t.size,index:w.length()-1,animate:"animate"}).html(t.content),t.animation&&p.attr("modal-animation","true");var d=i(p)(t.scope);w.top().value.modalDomEl=d,w.top().value.modalOpener=o,a.append(d),a.addClass(s),C.clearFocusListCache()},C.close=function(e,t){var n=w.get(e);return n&&f(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),u(e,n.value.modalOpener),!0):!n},C.dismiss=function(e,t){var n=w.get(e);return n&&f(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),u(e,n.value.modalOpener),!0):!n},C.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},C.getTop=function(){return w.top()},C.modalRendered=function(e){var t=w.get(e);t&&t.value.renderDeferred.resolve()},C.focusFirstFocusableElement=function(){return y.length>0?(y[0].focus(),!0):!1},C.focusLastFocusableElement=function(){return y.length>0?(y[y.length-1].focus(),!0):!1},C.isFocusInFirstItem=function(e){return y.length>0?(e.target||e.srcElement)==y[0]:!1},C.isFocusInLastItem=function(e){return y.length>0?(e.target||e.srcElement)==y[y.length-1]:!1},C.clearFocusListCache=function(){y=[],x=0},C.loadFocusElementList=function(e){if((void 0===y||!y.length)&&e){var t=e.value.modalDomEl;t&&t.length&&(y=t[0].querySelectorAll(S))}},C}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$uibModalStack","$modalSuppressWarning","$log",function(t,n,i,r,o,s,a,l){function c(e){return e.template?i.when(e.template):r(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}function u(e){var n=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?n.push(i.when(t.invoke(e))):angular.isString(e)?n.push(i.when(t.get(e))):n.push(i.when(e))}),n}var h={},p=null;return h.getPromiseChain=function(){return p},h.open=function(t){function r(){return v}var h=i.defer(),d=i.defer(),f=i.defer(),g={result:h.promise,opened:d.promise,rendered:f.promise,close:function(e){return s.close(g,e)},dismiss:function(e){return s.dismiss(g,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var m,v=i.all([c(t)].concat(u(t.resolve)));return m=p=i.all([p]).then(r,r).then(function(e){var i=(t.scope||n).$new();i.$close=g.close,i.$dismiss=g.dismiss,i.$on("$destroy",function(){i.$$uibDestructionScheduled||i.$dismiss("$uibUnscheduledDestruction")});var r,c={},u=1;t.controller&&(c.$scope=i,c.$uibModalInstance=g,Object.defineProperty(c,"$modalInstance",{get:function(){return a||l.warn("$modalInstance is now deprecated. Use $uibModalInstance instead."),g}}),angular.forEach(t.resolve,function(t,n){c[n]=e[u++]}),r=o(t.controller,c),t.controllerAs&&(t.bindToController&&angular.extend(r,i),i[t.controllerAs]=r)),s.open(g,{scope:i,deferred:h,renderDeferred:f,content:e[0],animation:t.animation,backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowTopClass:t.windowTopClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size,openedClass:t.openedClass}),d.resolve(!0)},function(e){d.reject(e),h.reject(e)})["finally"](function(){p===m&&(p=null)}),g},h}]};return e}),angular.module("ui.bootstrap.modal").value("$modalSuppressWarning",!1).directive("modalBackdrop",["$animate","$injector","$modalStack","$log","$modalSuppressWarning",function(e,t,n,i,r){function o(t,o,a){r||i.warn("modal-backdrop is now deprecated. Use uib-modal-backdrop instead."),o.addClass("modal-backdrop"),a.modalInClass&&(s?s(o,{addClass:a.modalInClass}).start():e.addClass(o,a.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(t,n){var i=n();s?s(o,{removeClass:a.modalInClass}).start().then(i):e.removeClass(o,a.modalInClass).then(i)}))}var s=null;return t.has("$animateCss")&&(s=t.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),o}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector","$log","$modalSuppressWarning",function(e,t,n,i,r,o){var s=null;return i.has("$animateCss")&&(s=i.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,a,l){o||r.warn("modal-window is now deprecated. Use uib-modal-window instead."),a.addClass(l.windowClass||""),a.addClass(l.windowTopClass||""),i.size=l.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},a.on("click",i.close),i.$isRendered=!0;var c=t.defer();l.$observe("modalRender",function(e){"true"==e&&c.resolve()}),c.promise.then(function(){var r=null;l.modalInClass&&(r=s?s(a,{addClass:l.modalInClass}).start():n.addClass(a,l.modalInClass),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var i=t();s?s(a,{removeClass:l.modalInClass}).start().then(i):n.removeClass(a,l.modalInClass).then(i)})),t.when(r).then(function(){var e=a[0].querySelector("[autofocus]");e?e.focus():a[0].focus()});var o=e.getTop();o&&e.modalRendered(o.key)})}}}]).directive("modalAnimationClass",["$log","$modalSuppressWarning",function(e,t){return{compile:function(n,i){t||e.warn("modal-animation-class is now deprecated. Use uib-modal-animation-class instead."),i.modalAnimation&&n.addClass(i.modalAnimationClass)}}}]).directive("modalTransclude",["$log","$modalSuppressWarning",function(e,t){return{link:function(n,i,r,o,s){t||e.warn("modal-transclude is now deprecated. Use uib-modal-transclude instead."),s(n.$parent,function(e){i.empty(),i.append(e)})}}}]).service("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap","$uibModalStack","$log","$modalSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u,h){h||u.warn("$modalStack is now deprecated. Use $uibModalStack instead."),angular.extend(this,c)}]).provider("$modal",["$uibModalProvider",function(e){angular.extend(this,e),this.$get=["$injector","$log","$modalSuppressWarning",function(t,n,i){return i||n.warn("$modal is now deprecated. Use $uibModal instead."),t.invoke(e.$get)}]}]),angular.module("ui.bootstrap.pagination",[]).controller("UibPaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,r={$setViewValue:angular.noop},o=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(s,a){r=s,this.config=a,r.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=a.itemsPerPage,e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){o(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t,n){n&&n.preventDefault();var i=!e.ngDisabled||!n;i&&e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(n,i,r,o){function s(e,t,n){return{number:e,text:t,active:n}}function a(e,t){var n=[],i=1,r=t,o=angular.isDefined(u)&&t>u;o&&(h?(i=Math.max(e-Math.floor(u/2),1),r=i+u-1,r>t&&(r=t,i=r-u+1)):(i=(Math.ceil(e/u)-1)*u+1,r=Math.min(i+u-1,t)));for(var a=i;r>=a;a++){var l=s(a,a,a===e);n.push(l)}if(o&&!h){if(i>1){var c=s(i-1,"...",!1);n.unshift(c)}if(t>r){var p=s(r+1,"...",!1);n.push(p)}}return n}var l=o[0],c=o[1];if(c){var u=angular.isDefined(r.maxSize)?n.$parent.$eval(r.maxSize):t.maxSize,h=angular.isDefined(r.rotate)?n.$parent.$eval(r.rotate):t.rotate;n.boundaryLinks=angular.isDefined(r.boundaryLinks)?n.$parent.$eval(r.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(r.directionLinks)?n.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&n.$parent.$watch(e(r.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=a(n.page,n.totalPages))}}}}}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(t,n,i,r){var o=r[0],s=r[1];s&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,o.init(s,e))}}}]),angular.module("ui.bootstrap.pagination").value("$paginationSuppressWarning",!1).controller("PaginationController",["$scope","$attrs","$parse","$log","$paginationSuppressWarning",function(e,t,n,i,r){r||i.warn("PaginationController is now deprecated. Use UibPaginationController instead.");var o=this,s={$setViewValue:angular.noop},a=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(i,r){s=i,this.config=r,s.$render=function(){o.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){o.itemsPerPage=parseInt(t,10),e.totalPages=o.calculateTotalPages()}):this.itemsPerPage=r.itemsPerPage,e.$watch("totalItems",function(){e.totalPages=o.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):s.$render()})},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(s.$viewValue,10)||1},e.selectPage=function(t,n){n&&n.preventDefault();var i=!e.ngDisabled||!n;i&&e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),s.$setViewValue(t),s.$render())},e.getText=function(t){return e[t+"Text"]||o.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).directive("pagination",["$parse","uibPaginationConfig","$log","$paginationSuppressWarning",function(e,t,n,i){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(r,o,s,a){function l(e,t,n){return{number:e,text:t,active:n}}function c(e,t){var n=[],i=1,r=t,o=angular.isDefined(p)&&t>p;o&&(d?(i=Math.max(e-Math.floor(p/2),1),r=i+p-1,r>t&&(r=t,i=r-p+1)):(i=(Math.ceil(e/p)-1)*p+1,r=Math.min(i+p-1,t)));for(var s=i;r>=s;s++){var a=l(s,s,s===e);n.push(a)}if(o&&!d){if(i>1){var c=l(i-1,"...",!1);n.unshift(c)}if(t>r){var u=l(r+1,"...",!1);n.push(u)}}return n}i||n.warn("pagination is now deprecated. Use uib-pagination instead.");var u=a[0],h=a[1];if(h){var p=angular.isDefined(s.maxSize)?r.$parent.$eval(s.maxSize):t.maxSize,d=angular.isDefined(s.rotate)?r.$parent.$eval(s.rotate):t.rotate;r.boundaryLinks=angular.isDefined(s.boundaryLinks)?r.$parent.$eval(s.boundaryLinks):t.boundaryLinks,r.directionLinks=angular.isDefined(s.directionLinks)?r.$parent.$eval(s.directionLinks):t.directionLinks,u.init(h,t),s.maxSize&&r.$parent.$watch(e(s.maxSize),function(e){p=parseInt(e,10),u.render()});var f=u.render;u.render=function(){f(),r.page>0&&r.page<=r.totalPages&&(r.pages=c(r.page,r.totalPages))}}}}}]).directive("pager",["uibPagerConfig","$log","$paginationSuppressWarning",function(e,t,n){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(i,r,o,s){n||t.warn("pager is now deprecated. Use uib-pager instead.");var a=s[0],l=s[1];l&&(i.align=angular.isDefined(o.align)?i.$parent.$eval(o.align):e.align,a.init(l,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(r,o,s,a,l,c,u,h,p){var d=p.createNew();return a.on("keypress",function(e){if(27===e.which){var t=d.top();t&&(t.value.close(),d.removeTop(),t=null)}}),function(r,u,p,f){function g(e){var t=(e||f.trigger||p).split(" "),i=t.map(function(e){return n[e]||e});return{show:t,hide:i}}f=angular.extend({},t,i,f);var m=e(r),v=c.startSymbol(),y=c.endSymbol(),_="<div "+m+'-popup title="'+v+"title"+y+'" '+(f.useContentExp?'content-exp="contentExp()" ':'content="'+v+"content"+y+'" ')+'placement="'+v+"placement"+y+'" popup-class="'+v+"popupClass"+y+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(e,t){var n=o(_);return function(e,t,i,o){function c(){F.isOpen?m():p()}function p(){(!I||e.$eval(i[u+"Enable"]))&&(w(),x(),F.popupDelay?A||(A=s(v,F.popupDelay,!1)):v())}function m(){y(),F.popupCloseDelay?R||(R=s(_,F.popupCloseDelay,!1)):_()}function v(){return y(),w(),F.content?(b(),void F.$evalAsync(function(){F.isOpen=!0,S(!0),B()})):angular.noop}function y(){A&&(s.cancel(A),A=null),j&&(s.cancel(j),j=null)}function _(){y(),w(),F&&F.$evalAsync(function(){F.isOpen=!1,S(!1),F.animation?D||(D=s(C,150,!1)):C()})}function w(){R&&(s.cancel(R),R=null),D&&(s.cancel(D),D=null)}function b(){T||($=F.$new(),T=n($,function(e){M?a.find("body").append(e):t.after(e)}),E())}function C(){P(),D=null,T&&(T.remove(),T=null),$&&($.$destroy(),$=null)}function x(){F.title=i[u+"Title"],H?F.content=H(e):F.content=i[r],F.popupClass=i[u+"Class"],F.placement=angular.isDefined(i[u+"Placement"])?i[u+"Placement"]:f.placement;var t=parseInt(i[u+"PopupDelay"],10),n=parseInt(i[u+"PopupCloseDelay"],10);F.popupDelay=isNaN(t)?f.popupDelay:t,F.popupCloseDelay=isNaN(n)?f.popupCloseDelay:n}function S(t){L&&angular.isFunction(L.assign)&&L.assign(e,t)}function E(){V.length=0,H?(V.push(e.$watch(H,function(e){F.content=e,!e&&F.isOpen&&_()})),V.push($.$watch(function(){N||(N=!0,$.$$postDigest(function(){N=!1,F&&F.isOpen&&B()}))}))):V.push(i.$observe(r,function(e){F.content=e,!e&&F.isOpen?_():B()})),V.push(i.$observe(u+"Title",function(e){F.title=e,F.isOpen&&B()})),V.push(i.$observe(u+"Placement",function(e){F.placement=e?e:f.placement,F.isOpen&&B()}))}function P(){V.length&&(angular.forEach(V,function(e){e()}),V.length=0)}function k(){var e=i[u+"Trigger"];U(),O=g(e),"none"!==O.show&&O.show.forEach(function(e,n){e===O.hide[n]?t[0].addEventListener(e,c):e&&(t[0].addEventListener(e,p),O.hide[n].split(" ").forEach(function(e){t[0].addEventListener(e,m)})),t.on("keypress",function(e){27===e.which&&m()})})}var T,$,D,A,R,j,M=angular.isDefined(f.appendToBody)?f.appendToBody:!1,O=g(void 0),I=angular.isDefined(i[u+"Enable"]),F=e.$new(!0),N=!1,L=angular.isDefined(i[u+"IsOpen"])?h(i[u+"IsOpen"]):!1,H=f.useContentExp?h(i[r]):!1,V=[],B=function(){T&&T.html()&&(j||(j=s(function(){T.css({top:0,left:0});var e=l.positionElements(t,T,F.placement,M);e.top+="px",e.left+="px",e.visibility="visible",T.css(e),j=null},0,!1)))};F.origScope=e,F.isOpen=!1,d.add(F,{close:_}),F.contentExp=function(){return F.content},i.$observe("disabled",function(e){e&&y(),e&&F.isOpen&&_()}),L&&e.$watch(L,function(e){F&&!e===F.isOpen&&c()});var U=function(){O.show.forEach(function(e){t.unbind(e,p)}),O.hide.forEach(function(e){e.split(" ").forEach(function(e){t[0].removeEventListener(e,m)})})};k();var z=e.$eval(i[u+"Animation"]);F.animation=angular.isDefined(z)?!!z:f.animation;var W=e.$eval(i[u+"AppendToBody"]);M=angular.isDefined(W)?W:M,M&&e.$on("$locationChangeSuccess",function(){F.isOpen&&_()}),e.$on("$destroy",function(){y(),w(),U(),C(),d.remove(F),F=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,i){return{link:function(r,o,s){var a,l,c,u=r.$eval(s.tooltipTemplateTranscludeScope),h=0,p=function(){l&&(l.remove(),l=null),a&&(a.$destroy(),a=null),c&&(e.leave(c).then(function(){l=null}),l=c,c=null)};r.$watch(t.parseAsResourceUrl(s.uibTooltipTemplateTransclude),function(t){var s=++h;t?(i(t,!0).then(function(i){if(s===h){var r=u.$new(),l=i,d=n(l)(r,function(t){p(),e.enter(t,o)});a=r,c=d,a.$emit("$includeContentLoaded",t)}},function(){s===h&&(p(),r.$emit("$includeContentError",t))}),r.$emit("$includeContentRequested",t)):p()}),r.$on("$destroy",p)}}}]).directive("uibTooltipClasses",function(){return{restrict:"A",link:function(e,t,n){e.placement&&t.addClass(e.placement),e.popupClass&&t.addClass(e.popupClass),e.animation()&&t.addClass(n.tooltipAnimationClass)}}}).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(e,t){t.addClass("tooltip")}}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.tooltip").value("$tooltipSuppressWarning",!1).provider("$tooltip",["$uibTooltipProvider",function(e){angular.extend(this,e),this.$get=["$log","$tooltipSuppressWarning","$injector",function(t,n,i){return n||t.warn("$tooltip is now deprecated. Use $uibTooltip instead."),i.invoke(e.$get)}]}]).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest","$log","$tooltipSuppressWarning",function(e,t,n,i,r,o){return{link:function(s,a,l){o||r.warn("tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.");var c,u,h,p=s.$eval(l.tooltipTemplateTranscludeScope),d=0,f=function(){u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),h&&(e.leave(h).then(function(){u=null}),u=h,h=null)};s.$watch(t.parseAsResourceUrl(l.tooltipTemplateTransclude),function(t){var r=++d;t?(i(t,!0).then(function(i){if(r===d){var o=p.$new(),s=i,l=n(s)(o,function(t){f(),e.enter(t,a)});c=o,h=l,c.$emit("$includeContentLoaded",t)}},function(){r===d&&(f(),s.$emit("$includeContentError",t))}),s.$emit("$includeContentRequested",t)):f()}),s.$on("$destroy",f)}}}]).directive("tooltipClasses",["$log","$tooltipSuppressWarning",function(e,t){return{restrict:"A",link:function(n,i,r){t||e.warn("tooltip-classes is now deprecated. Use uib-tooltip-classes instead."),n.placement&&i.addClass(n.placement),
n.popupClass&&i.addClass(n.popupClass),n.animation()&&i.addClass(r.tooltipAnimationClass)}}}]).directive("tooltipPopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(n,i){t||e.warn("tooltip-popup is now deprecated. Use uib-tooltip-popup instead."),i.addClass("tooltip")}}}]).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(n,i){t||e.warn("tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead."),i.addClass("tooltip")}}}]).directive("tooltipTemplate",["$tooltip",function(e){return e("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",["$log","$tooltipSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(n,i){t||e.warn("tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead."),i.addClass("tooltip")}}}]).directive("tooltipHtml",["$tooltip",function(e){return e("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(e,t){t.addClass("popover")}}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.popover").value("$popoverSuppressWarning",!1).directive("popoverTemplatePopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(n,i){t||e.warn("popover-template-popup is now deprecated. Use uib-popover-template-popup instead."),i.addClass("popover")}}}]).directive("popoverTemplate",["$tooltip",function(e){return e("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(n,i){t||e.warn("popover-html-popup is now deprecated. Use uib-popover-html-popup instead."),i.addClass("popover")}}}]).directive("popoverHtml",["$tooltip",function(e){return e("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",["$log","$popoverSuppressWarning",function(e,t){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(n,i){t||e.warn("popover-popup is now deprecated. Use uib-popover-popup instead."),i.addClass("popover")}}}]).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n,o){r||n.css({transition:"none"}),this.bars.push(t),t.max=e.max,t.title=o&&angular.isDefined(o.title)?o.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("max",function(t){i.bars.forEach(function(t){t.max=e.max,t.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.progressbar").value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","uibProgressConfig","$log","$progressSuppressWarning",function(e,t,n,i,r){r||i.warn("ProgressController is now deprecated. Use UibProgressController instead.");var o=this,s=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n,i){s||n.css({transition:"none"}),this.bars.push(t),t.max=e.max,t.title=i&&angular.isDefined(i.title)?i.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){t.percent=+(100*t.value/t.max).toFixed(2);var e=o.bars.reduce(function(e,t){return e+t.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){n=null,o.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)},e.$watch("max",function(t){o.bars.forEach(function(t){t.max=e.max,t.recalculatePercentage()})})}]).directive("progress",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?",title:"@?"},templateUrl:"template/progressbar/progress.html",link:function(){t||e.warn("progress is now deprecated. Use uib-progress instead.")}}}]).directive("bar",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(n,i,r,o){t||e.warn("bar is now deprecated. Use uib-bar instead."),o.addBar(n,i)}}}]).directive("progressbar",["$log","$progressSuppressWarning",function(e,t){return{replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(n,i,r,o){t||e.warn("progressbar is now deprecated. Use uib-progressbar instead."),o.addBar(n,angular.element(i.children()[0]),{title:r.title})}}}]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(r){i=r,i.$render=this.render,i.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var o=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):n.titles;this.titles=angular.isArray(o)&&o.length>0?o:n.titles;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(i.$viewValue===t?0:t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function(e,t,n,i,r){r||i.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,n("UibRatingController",{$scope:e,$attrs:t}))}]).directive("rating",["$log","$ratingSuppressWarning",function(e,t){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(n,i,r,o){t||e.warn("rating is now deprecated. Use uib-rating instead.");var s=o[0],a=o[1];s.init(a)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect(),e.selectCalled=!1)}),e.active=!0,e.selectCalled||(e.onSelect(),e.selectCalled=!0)},t.addTab=function(e){n.push(e),1===n.length&&e.active!==!1?e.active=!0:e.active?t.select(e):e.active=!1},t.removeTab=function(e){var r=n.indexOf(e);if(e.active&&n.length>1&&!i){var o=r==n.length-1?r-1:r+1;t.select(n[o])}n.splice(r,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(t,n,i,r,o){t.$watch("active",function(e){e&&r.select(t)}),t.disabled=!1,i.disable&&t.$parent.$watch(e(i.disable),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},r.addTab(t),t.$on("$destroy",function(){r.removeTab(t)}),t.$transcludeFn=o}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||e.hasAttribute("x-tab-heading")||e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase()||"x-tab-heading"===e.tagName.toLowerCase()||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(t,n,i){var r=t.$eval(i.uibTabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function(e,t,n,i){i||n.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,t("UibTabsetController",{$scope:e}))}]).directive("tabset",["$log","$tabsSuppressWarning",function(e,t){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(n,i,r){t||e.warn("tabset is now deprecated. Use uib-tabset instead."),n.vertical=angular.isDefined(r.vertical)?n.$parent.$eval(r.vertical):!1,n.justified=angular.isDefined(r.justified)?n.$parent.$eval(r.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function(e,t,n){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(i,r,o,s,a){n||t.warn("tab is now deprecated. Use uib-tab instead."),i.$watch("active",function(e){e&&s.select(i)}),i.disabled=!1,o.disable&&i.$parent.$watch(e(o.disable),function(e){i.disabled=!!e}),i.select=function(){i.disabled||(i.active=!0)},s.addTab(i),i.$on("$destroy",function(){s.removeTab(i)}),i.$transcludeFn=a}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function(e,t){return{restrict:"A",require:"^tab",link:function(n,i){t||e.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),n.$watch("headingElement",function(e){e&&(i.html(""),i.append(e))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function(e,t){function n(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||e.hasAttribute("x-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase()||"x-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(i,r,o){t||e.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var s=i.$eval(o.tabContentTransclude);s.$transcludeFn(s.$parent,function(e){angular.forEach(e,function(e){n(e)?s.headingElement=e:r.append(e)})})}}}]),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,n,i,r,o,s){function a(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===v[1]&&(t+=12)),t):void 0}function l(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function c(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e.toString()}function u(e){h(),m.$setViewValue(new Date(g)),p(e)}function h(){m.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var n=g.getHours(),i=g.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:c(n),"m"!==t&&(e.minutes=c(i)),e.meridian=g.getHours()<12?v[0]:v[1]}function d(e,t){var n=new Date(e.getTime()+6e4*t),i=new Date(e);return i.setHours(n.getHours(),n.getMinutes()),i}function f(e){g=d(g,e),u()}var g=new Date,m={$setViewValue:angular.noop},v=angular.isDefined(n.meridians)?e.$parent.$eval(n.meridians):s.meridians||o.DATETIME_FORMATS.AMPMS;e.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,i){m=t,m.$render=this.render,m.$formatters.unshift(function(e){return e?new Date(e):null});var r=i.eq(0),o=i.eq(1),a=angular.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):s.mousewheel;a&&this.setupMousewheelEvents(r,o);var l=angular.isDefined(n.arrowkeys)?e.$parent.$eval(n.arrowkeys):s.arrowkeys;l&&this.setupArrowkeyEvents(r,o),e.readonlyInput=angular.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):s.readonlyInput,this.setupInputEvents(r,o)};var y=s.hourStep;n.hourStep&&e.$parent.$watch(i(n.hourStep),function(e){y=parseInt(e,10)});var _=s.minuteStep;n.minuteStep&&e.$parent.$watch(i(n.minuteStep),function(e){_=parseInt(e,10)});var w;e.$parent.$watch(i(n.min),function(e){var t=new Date(e);w=isNaN(t)?void 0:t});var b;e.$parent.$watch(i(n.max),function(e){var t=new Date(e);b=isNaN(t)?void 0:t}),e.noIncrementHours=function(){var e=d(g,60*y);return e>b||g>e&&w>e},e.noDecrementHours=function(){var e=d(g,60*-y);return w>e||e>g&&e>b},e.noIncrementMinutes=function(){var e=d(g,_);return e>b||g>e&&w>e},e.noDecrementMinutes=function(){var e=d(g,-_);return w>e||e>g&&e>b},e.noToggleMeridian=function(){return g.getHours()<13?d(g,720)>b:d(g,-720)<w},e.showMeridian=s.showMeridian,n.showMeridian&&e.$parent.$watch(i(n.showMeridian),function(t){if(e.showMeridian=!!t,m.$error.time){var n=a(),i=l();angular.isDefined(n)&&angular.isDefined(i)&&(g.setHours(n),u())}else p()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n){t.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply())}),n.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply())})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){m.$setViewValue(null),m.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=a(),t=l();angular.isDefined(e)&&angular.isDefined(t)?(g.setHours(e),w>g||g>b?i(!0):u("h")):i(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours)})}),e.updateMinutes=function(){var e=l(),t=a();angular.isDefined(e)&&angular.isDefined(t)?(g.setMinutes(e),w>g||g>b?i(void 0,!0):u("m")):i(void 0,!0)},n.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})})},this.render=function(){var t=m.$viewValue;isNaN(t)?(m.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(g=t),w>g||g>b?(m.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):h(),p())},e.showSpinners=angular.isDefined(n.showSpinners)?e.$parent.$eval(n.showSpinners):s.showSpinners,e.incrementHours=function(){e.noIncrementHours()||f(60*y)},e.decrementHours=function(){e.noDecrementHours()||f(60*-y)},e.incrementMinutes=function(){e.noIncrementMinutes()||f(_)},e.decrementMinutes=function(){e.noDecrementMinutes()||f(-_)},e.toggleMeridian=function(){e.noToggleMeridian()||f(720*(g.getHours()<12?1:-1))}}]).directive("uibTimepicker",function(){return{restrict:"EA",require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(e,t){return t.templateUrl||"template/timepicker/timepicker.html"},link:function(e,t,n,i){var r=i[0],o=i[1];o&&r.init(o,t.find("input"))}}}),angular.module("ui.bootstrap.timepicker").value("$timepickerSuppressWarning",!1).controller("TimepickerController",["$scope","$element","$attrs","$controller","$log","$timepickerSuppressWarning",function(e,t,n,i,r,o){o||r.warn("TimepickerController is now deprecated. Use UibTimepickerController instead."),angular.extend(this,i("UibTimepickerController",{$scope:e,$element:t,$attrs:n}))}]).directive("timepicker",["$log","$timepickerSuppressWarning",function(e,t){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(e,t){return t.templateUrl||"template/timepicker/timepicker.html"},link:function(n,i,r,o){t||e.warn("timepicker is now deprecated. Use uib-timepicker instead.");var s=o[0],a=o[1];a&&s.init(a,i.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(e,t,n,i,r,o,s,a,l,c,u,h){function p(){I.moveInProgress||(I.moveInProgress=!0,I.$digest()),z&&s.cancel(z),z=s(function(){I.matches.length&&d(),I.moveInProgress=!1},v)}function d(){I.position=T?u.offset(t):u.position(t),I.position.top+=t.prop("offsetHeight")}var f,g,m=[9,13,27,38,40],v=200,y=e.$eval(n.typeaheadMinLength);y||0===y||(y=1);var _,w,b=e.$eval(n.typeaheadWaitMs)||0,C=e.$eval(n.typeaheadEditable)!==!1,x=r(n.typeaheadLoading).assign||angular.noop,S=r(n.typeaheadOnSelect),E=angular.isDefined(n.typeaheadSelectOnBlur)?e.$eval(n.typeaheadSelectOnBlur):!1,P=r(n.typeaheadNoResults).assign||angular.noop,k=n.typeaheadInputFormatter?r(n.typeaheadInputFormatter):void 0,T=n.typeaheadAppendToBody?e.$eval(n.typeaheadAppendToBody):!1,$=n.typeaheadAppendToElementId||!1,D=e.$eval(n.typeaheadFocusFirst)!==!1,A=n.typeaheadSelectOnExact?e.$eval(n.typeaheadSelectOnExact):!1,R=r(n.ngModel),j=r(n.ngModel+"($$$p)"),M=function(t,n){return angular.isFunction(R(e))&&g&&g.$options&&g.$options.getterSetter?j(t,{$$$p:n}):R.assign(t,n)},O=h.parse(n.uibTypeahead),I=e.$new(),F=e.$on("$destroy",function(){I.$destroy()});I.$on("$destroy",F);var N="typeahead-"+I.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":N});var L=angular.element("<div uib-typeahead-popup></div>");L.attr({id:N,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(n.typeaheadTemplateUrl)&&L.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&L.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var H=function(){I.matches=[],I.activeIdx=-1,t.attr("aria-expanded",!1)},V=function(e){return N+"-option-"+e};I.$watch("activeIdx",function(e){0>e?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",V(e))});var B=function(e,t){return I.matches.length>t&&e?e.toUpperCase()===I.matches[t].label.toUpperCase():!1},U=function(n){var i={$viewValue:n};x(e,!0),P(e,!1),o.when(O.source(e,i)).then(function(r){var o=n===f.$viewValue;if(o&&_)if(r&&r.length>0){I.activeIdx=D?0:-1,P(e,!1),I.matches.length=0;for(var s=0;s<r.length;s++)i[O.itemName]=r[s],I.matches.push({id:V(s),label:O.viewMapper(I,i),model:r[s]});I.query=n,d(),t.attr("aria-expanded",!0),A&&1===I.matches.length&&B(n,0)&&I.select(0)}else H(),P(e,!0);o&&x(e,!1)},function(){H(),x(e,!1),P(e,!0)})};T&&(angular.element(l).bind("resize",p),a.find("body").bind("scroll",p));var z;I.moveInProgress=!1,I.query=void 0;var W,q=function(e){W=s(function(){U(e)},b)},G=function(){W&&s.cancel(W)};H(),I.select=function(i){var r,o,a={};w=!0,a[O.itemName]=o=I.matches[i].model,r=O.modelMapper(e,a),M(e,r),f.$setValidity("editable",!0),f.$setValidity("parse",!0),S(e,{$item:o,$model:r,$label:O.viewMapper(e,a)}),H(),I.$eval(n.typeaheadFocusOnSelect)!==!1&&s(function(){t[0].focus()},0,!1)},t.bind("keydown",function(e){if(0!==I.matches.length&&-1!==m.indexOf(e.which)){if(-1===I.activeIdx&&(9===e.which||13===e.which))return H(),void I.$digest();e.preventDefault(),40===e.which?(I.activeIdx=(I.activeIdx+1)%I.matches.length,I.$digest()):38===e.which?(I.activeIdx=(I.activeIdx>0?I.activeIdx:I.matches.length)-1,I.$digest()):13===e.which||9===e.which?I.$apply(function(){I.select(I.activeIdx)}):27===e.which&&(e.stopPropagation(),H(),I.$digest())}}),t.bind("blur",function(){E&&I.matches.length&&-1!==I.activeIdx&&!w&&(w=!0,I.$apply(function(){I.select(I.activeIdx)})),_=!1,w=!1});var K=function(e){t[0]!==e.target&&3!==e.which&&0!==I.matches.length&&(H(),c.$$phase||I.$digest())};a.bind("click",K),e.$on("$destroy",function(){a.unbind("click",K),(T||$)&&Y.remove(),T&&(angular.element(l).unbind("resize",p),a.find("body").unbind("scroll",p)),L.remove()});var Y=i(L)(I);T?a.find("body").append(Y):$!==!1?angular.element(a[0].getElementById($)).append(Y):t.after(Y),this.init=function(t,n){f=t,g=n,f.$parsers.unshift(function(t){return _=!0,0===y||t&&t.length>=y?b>0?(G(),q(t)):U(t):(x(e,!1),G(),H()),C?t:t?void f.$setValidity("editable",!1):(f.$setValidity("editable",!0),null)}),f.$formatters.push(function(t){var n,i,r={};return C||f.$setValidity("editable",!0),k?(r.$model=t,k(e,r)):(r[O.itemName]=t,n=O.viewMapper(e,r),r[O.itemName]=void 0,i=O.viewMapper(e,r),n!==i?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(e,t,n,i){i[2].init(i[0],i[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(i,r,o){var s=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e(s).then(function(e){t(e.trim())(i,function(e){r.replaceWith(e)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function i(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function r(e){return/<.*>/g.test(e)}var o;return o=t.has("$sanitize"),function(t,s){return!o&&r(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=s?(""+t).replace(new RegExp(i(s),"gi"),"<strong>$&</strong>"):t,o||(t=e.trustAsHtml(t)),t}}]),angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function(e,t,n,i){return i||n.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),t}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function(e,t,n,i,r,o,s,a,l,c,u){var h=[9,13,27,38,40],p=200;return{require:["ngModel","^?ngModelOptions"],link:function(d,f,g,m){function v(){L.moveInProgress||(L.moveInProgress=!0,L.$digest()),G&&i.cancel(G),G=i(function(){L.matches.length&&y(),L.moveInProgress=!1},p)}function y(){L.position=A?a.offset(f):a.position(f),L.position.top+=f.prop("offsetHeight")}u||c.warn("typeahead is now deprecated. Use uib-typeahead instead.");var _=m[0],w=m[1],b=d.$eval(g.typeaheadMinLength);b||0===b||(b=1);var C,x,S=d.$eval(g.typeaheadWaitMs)||0,E=d.$eval(g.typeaheadEditable)!==!1,P=t(g.typeaheadLoading).assign||angular.noop,k=t(g.typeaheadOnSelect),T=angular.isDefined(g.typeaheadSelectOnBlur)?d.$eval(g.typeaheadSelectOnBlur):!1,$=t(g.typeaheadNoResults).assign||angular.noop,D=g.typeaheadInputFormatter?t(g.typeaheadInputFormatter):void 0,A=g.typeaheadAppendToBody?d.$eval(g.typeaheadAppendToBody):!1,R=g.typeaheadAppendToElementId||!1,j=d.$eval(g.typeaheadFocusFirst)!==!1,M=g.typeaheadSelectOnExact?d.$eval(g.typeaheadSelectOnExact):!1,O=t(g.ngModel),I=t(g.ngModel+"($$$p)"),F=function(e,t){return angular.isFunction(O(d))&&w&&w.$options&&w.$options.getterSetter?I(e,{$$$p:t}):O.assign(e,t)},N=l.parse(g.typeahead),L=d.$new(),H=d.$on("$destroy",function(){L.$destroy()});L.$on("$destroy",H);var V="typeahead-"+L.$id+"-"+Math.floor(1e4*Math.random());f.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":V});var B=angular.element("<div typeahead-popup></div>");B.attr({id:V,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(g.typeaheadTemplateUrl)&&B.attr("template-url",g.typeaheadTemplateUrl),angular.isDefined(g.typeaheadPopupTemplateUrl)&&B.attr("popup-template-url",g.typeaheadPopupTemplateUrl);var U=function(){L.matches=[],L.activeIdx=-1,f.attr("aria-expanded",!1)},z=function(e){return V+"-option-"+e};L.$watch("activeIdx",function(e){0>e?f.removeAttr("aria-activedescendant"):f.attr("aria-activedescendant",z(e))});var W=function(e,t){return L.matches.length>t&&e?e.toUpperCase()===L.matches[t].label.toUpperCase():!1},q=function(e){var t={$viewValue:e};P(d,!0),$(d,!1),n.when(N.source(d,t)).then(function(n){var i=e===_.$viewValue;if(i&&C)if(n&&n.length>0){L.activeIdx=j?0:-1,$(d,!1),L.matches.length=0;for(var r=0;r<n.length;r++)t[N.itemName]=n[r],L.matches.push({id:z(r),label:N.viewMapper(L,t),model:n[r]});L.query=e,y(),f.attr("aria-expanded",!0),M&&1===L.matches.length&&W(e,0)&&L.select(0)}else U(),$(d,!0);i&&P(d,!1)},function(){U(),P(d,!1),$(d,!0)})};A&&(angular.element(o).bind("resize",v),r.find("body").bind("scroll",v));var G;L.moveInProgress=!1,U(),L.query=void 0;var K,Y=function(e){K=i(function(){q(e)},S)},J=function(){K&&i.cancel(K)};_.$parsers.unshift(function(e){return C=!0,0===b||e&&e.length>=b?S>0?(J(),Y(e)):q(e):(P(d,!1),J(),U()),E?e:e?void _.$setValidity("editable",!1):(_.$setValidity("editable",!0),null)}),_.$formatters.push(function(e){var t,n,i={};return E||_.$setValidity("editable",!0),D?(i.$model=e,D(d,i)):(i[N.itemName]=e,t=N.viewMapper(d,i),i[N.itemName]=void 0,n=N.viewMapper(d,i),t!==n?t:e)}),L.select=function(e){var t,n,r={};x=!0,r[N.itemName]=n=L.matches[e].model,t=N.modelMapper(d,r),F(d,t),_.$setValidity("editable",!0),_.$setValidity("parse",!0),k(d,{$item:n,$model:t,$label:N.viewMapper(d,r)}),U(),L.$eval(g.typeaheadFocusOnSelect)!==!1&&i(function(){f[0].focus()},0,!1)},f.bind("keydown",function(e){if(0!==L.matches.length&&-1!==h.indexOf(e.which)){if(-1===L.activeIdx&&(9===e.which||13===e.which))return U(),void L.$digest();e.preventDefault(),40===e.which?(L.activeIdx=(L.activeIdx+1)%L.matches.length,L.$digest()):38===e.which?(L.activeIdx=(L.activeIdx>0?L.activeIdx:L.matches.length)-1,L.$digest()):13===e.which||9===e.which?L.$apply(function(){L.select(L.activeIdx)}):27===e.which&&(e.stopPropagation(),U(),L.$digest())}}),f.bind("blur",function(){T&&L.matches.length&&-1!==L.activeIdx&&!x&&(x=!0,L.$apply(function(){L.select(L.activeIdx)})),C=!1,x=!1});var X=function(e){
f[0]!==e.target&&3!==e.which&&0!==L.matches.length&&(U(),s.$$phase||L.$digest())};r.bind("click",X),d.$on("$destroy",function(){r.unbind("click",X),(A||R)&&Q.remove(),A&&(angular.element(o).unbind("resize",v),r.find("body").unbind("scroll",v)),B.remove()});var Q=e(B)(L);A?r.find("body").append(Q):R!==!1?angular.element(r[0].getElementById(R)).append(Q):f.after(Q)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function(e,t){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(n,i,r){e||t.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead."),n.templateUrl=r.templateUrl,n.isOpen=function(){return n.matches.length>0},n.isActive=function(e){return n.active==e},n.selectActive=function(e){n.active=e},n.selectMatch=function(e){n.select({activeIdx:e})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function(e,t,n,i,r){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(o,s,a){i||r.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var l=n(a.templateUrl)(o.$parent)||"template/typeahead/typeahead-match.html";e(l).then(function(e){t(e.trim())(o,function(e){s.replaceWith(e)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function(e,t,n,i){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function o(e){return/<.*>/g.test(e)}var s;return s=t.has("$sanitize"),function(t,a){return i||n.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!s&&o(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=a?(""+t).replace(new RegExp(r(a),"gi"),"<strong>$&</strong>"):t,s||(t=e.trustAsHtml(t)),t}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-template-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-html.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-template.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),"undefined"!=typeof module&&(module.exports="ui.bootstrap"),function(e,t){"use strict";function n(e,t,n){if(!e)throw ge("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function i(e,t){return e||t?e?t?(B(e)&&(e=e.join(" ")),B(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function r(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,n){var i="";return e=B(e)?e:e&&U(e)&&e.length?e.split(/\s+/):[],V(e,function(e,r){e&&e.length>0&&(i+=r>0?" ":"",i+=n?t+e:e+t)}),i}function s(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function a(e){if(e instanceof H)switch(e.length){case 0:return[];case 1:if(e[0].nodeType===Y)return e;break;default:return H(l(e))}return e.nodeType===Y?H(e):void 0}function l(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==Y)return n}}function c(e,t,n){V(t,function(t){e.addClass(t,n)})}function u(e,t,n){V(t,function(t){e.removeClass(t,n)})}function h(e){return function(t,n){n.addClass&&(c(e,t,n.addClass),n.addClass=null),n.removeClass&&(u(e,t,n.removeClass),n.removeClass=null)}}function p(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||F;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=F},e.$$prepared=!0}return e}function d(e,t){f(e,t),g(e,t)}function f(e,t){t.from&&(e.css(t.from),t.from=null)}function g(e,t){t.to&&(e.css(t.to),t.to=null)}function m(e,t,n){var i=t.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),s=(i.removeClass||"")+" "+(r.removeClass||""),a=v(e.attr("class"),o,s);r.preparationClasses&&(i.preparationClasses=S(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var l=i.domOperation!==F?i.domOperation:null;return L(i,r),l&&(i.domOperation=l),a.addClass?i.addClass=a.addClass:i.addClass=null,a.removeClass?i.removeClass=a.removeClass:i.removeClass=null,t.addClass=i.addClass,t.removeClass=i.removeClass,i}function v(e,t,n){function i(e){U(e)&&(e=e.split(" "));var t={};return V(e,function(e){e.length&&(t[e]=!0)}),t}var r=1,o=-1,s={};e=i(e),t=i(t),V(t,function(e,t){s[t]=r}),n=i(n),V(n,function(e,t){s[t]=s[t]===r?null:o});var a={addClass:"",removeClass:""};return V(s,function(t,n){var i,s;t===r?(i="addClass",s=!e[n]):t===o&&(i="removeClass",s=e[n]),s&&(a[i].length&&(a[i]+=" "),a[i]+=n)}),a}function y(e){return e instanceof t.element?e[0]:e}function _(e,t,n){var i="";t&&(i=o(t,Q,!0)),n.addClass&&(i=S(i,o(n.addClass,J))),n.removeClass&&(i=S(i,o(n.removeClass,X))),i.length&&(n.preparationClasses=i,e.addClass(i))}function w(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function b(e,t){var n=t?"-"+t+"s":"";return x(e,[de,n]),[de,n]}function C(e,t){var n=t?"paused":"",i=O+ce;return x(e,[i,n]),[i,n]}function x(e,t){var n=t[0],i=t[1];e.style[n]=i}function S(e,t){return e?t?e+" "+t:e:t}function E(e){return[pe,e+"s"]}function P(e,t){var n=t?he:de;return[n,e+"s"]}function k(e,t,n){var i=Object.create(null),r=e.getComputedStyle(t)||{};return V(n,function(e,t){var n=r[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=T(n)),0===n&&(n=null),i[t]=n}}),i}function T(e){var t=0,n=e.split(/\s*,\s*/);return V(n,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function $(e){return 0===e||null!=e}function D(e,t){var n=j,i=e+"s";return t?n+=re:i+=" linear all",[n,i]}function A(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function R(e,t,n){V(n,function(n){e[n]=q(e[n])?e[n]:t.style.getPropertyValue(n)})}var j,M,O,I,F=t.noop,N=t.copy,L=t.extend,H=t.element,V=t.forEach,B=t.isArray,U=t.isString,z=t.isObject,W=t.isUndefined,q=t.isDefined,G=t.isFunction,K=t.isElement,Y=1,J="-add",X="-remove",Q="ng-",Z="-active",ee="-prepare",te="ng-animate",ne="$$ngAnimateChildren",ie="";W(e.ontransitionend)&&q(e.onwebkittransitionend)?(ie="-webkit-",j="WebkitTransition",M="webkitTransitionEnd transitionend"):(j="transition",M="transitionend"),W(e.onanimationend)&&q(e.onwebkitanimationend)?(ie="-webkit-",O="WebkitAnimation",I="webkitAnimationEnd animationend"):(O="animation",I="animationend");var re="Duration",oe="Property",se="Delay",ae="TimingFunction",le="IterationCount",ce="PlayState",ue=9999,he=O+se,pe=O+re,de=j+se,fe=j+re,ge=t.$$minErr("ng"),me=["$$rAF",function(e){function t(e){i=i.concat(e),n()}function n(){if(i.length){for(var t=i.shift(),o=0;o<t.length;o++)t[o]();r||e(function(){r||n()})}}var i,r;return i=t.queue=[],t.waitUntilQuiet=function(t){r&&r(),r=e(function(){r=null,t(),n()})},t}],ve=["$interpolate",function(e){return{link:function(n,i,r){function o(e){e="on"===e||"true"===e,i.data(ne,e)}var s=r.ngAnimateChildren;t.isString(s)&&0===s.length?i.data(ne,!0):(o(e(s)(n)),r.$observe("ngAnimateChildren",o))}}}],ye="$$animateCss",_e=1e3,we=3,be=1.5,Ce={transitionDuration:fe,transitionDelay:de,transitionProperty:j+oe,animationDuration:pe,animationDelay:he,animationIterationCount:O+le},xe={transitionDuration:fe,transitionDelay:de,animationDuration:pe,animationDelay:he},Se=["$animateProvider",function(e){var t=A(),n=A();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,i,a,l,c,u,m,v){function _(e,t){var n="$$ngAnimateParentKey",i=e.parentNode,r=i[n]||(i[n]=++H);return r+"-"+e.getAttribute("class")+"-"+t}function w(n,i,r,o){var s=t.get(r);return s||(s=k(e,n,o),"infinite"===s.animationIterationCount&&(s.animationIterationCount=1)),t.put(r,s),s}function S(r,s,a,l){var c;if(t.count(a)>0&&(c=n.get(a),!c)){var u=o(s,"-stagger");i.addClass(r,u),c=k(e,r,l),c.animationDuration=Math.max(c.animationDuration,0),c.transitionDuration=Math.max(c.transitionDuration,0),i.removeClass(r,u),n.put(a,c)}return c||{}}function T(e){U.push(e),m.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=c(),i=0;i<U.length;i++)U[i](e);U.length=0})}function A(e,t,n){var i=w(e,t,n,Ce),r=i.animationDelay,o=i.transitionDelay;return i.maxDelay=r&&o?Math.max(r,o):r||o,i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration),i}var L=h(i),H=0,U=[];return function(e,n){function c(){m()}function h(){m(!0)}function m(t){if(!(G||Y&&K)){G=!0,K=!1,z.$$skipPreparationClasses||i.removeClass(e,Ce),i.removeClass(e,Ee),C(q,!1),b(q,!1),V(ce,function(e){q.style[e[0]]=""}),L(e,z),d(e,z),Object.keys(W).length&&V(W,function(e,t){e?q.style.setProperty(t,e):q.style.removeProperty(t)}),z.onDone&&z.onDone(),de&&de.length&&e.off(de.join(" "),H);var n=e.data(ye);n&&(l.cancel(n[0].timer),e.removeData(ye)),ee&&ee.complete(!t)}}function w(e){Le.blockTransition&&b(q,e),Le.blockKeyframeAnimation&&C(q,!!e)}function k(){return ee=new a({end:c,cancel:h}),T(F),m(),{$$willAnimate:!1,start:function(){return ee},end:c}}function H(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(we));Math.max(n-le,0)>=ie&&i>=re&&(Y=!0,m())}function U(){function t(){if(!G){if(w(!1),V(ce,function(e){var t=e[0],n=e[1];q.style[t]=n}),L(e,z),i.addClass(e,Ee),Le.recalculateTimingStyles){if(Se=q.className+" "+Ce,Te=_(q,Se),Fe=A(q,Se,Te),Ne=Fe.maxDelay,ne=Math.max(Ne,0),re=Fe.maxDuration,0===re)return void m();Le.hasTransitions=Fe.transitionDuration>0,Le.hasAnimations=Fe.animationDuration>0}if(Le.applyAnimationDelay&&(Ne="boolean"!=typeof z.delay&&$(z.delay)?parseFloat(z.delay):Ne,ne=Math.max(Ne,0),Fe.animationDelay=Ne,He=P(Ne,!0),ce.push(He),q.style[He[0]]=He[1]),ie=ne*_e,se=re*_e,z.easing){var t,r=z.easing;Le.hasTransitions&&(t=j+ae,ce.push([t,r]),q.style[t]=r),Le.hasAnimations&&(t=O+ae,ce.push([t,r]),q.style[t]=r)}Fe.transitionDuration&&de.push(M),Fe.animationDuration&&de.push(I),le=Date.now();var o=ie+be*se,s=le+o,a=e.data(ye)||[],c=!0;if(a.length){var u=a[0];c=s>u.expectedEndTime,c?l.cancel(u.timer):a.push(m)}if(c){var h=l(n,o,!1);a[0]={timer:h,expectedEndTime:s},a.push(m),e.data(ye,a)}de.length&&e.on(de.join(" "),H),z.to&&(z.cleanupStyles&&R(W,q,Object.keys(z.to)),g(e,z))}}function n(){var t=e.data(ye);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(ye)}}if(!G){if(!q.parentNode)return void m();var r=function(e){if(Y)K&&e&&(K=!1,m());else if(K=!e,Fe.animationDuration){var t=C(q,K);K?ce.push(t):s(ce,t)}},o=Oe>0&&(Fe.transitionDuration&&0===$e.transitionDuration||Fe.animationDuration&&0===$e.animationDuration)&&Math.max($e.animationDelay,$e.transitionDelay);o?l(t,Math.floor(o*Oe*_e),!1):t(),te.resume=function(){r(!0)},te.pause=function(){r(!1)}}}var z=n||{};z.$$prepared||(z=p(N(z)));var W={},q=y(e);if(!q||!q.parentNode||!v.enabled())return k();var G,K,Y,ee,te,ne,ie,re,se,le,ce=[],he=e.attr("class"),pe=r(z),de=[];if(0===z.duration||!u.animations&&!u.transitions)return k();var fe=z.event&&B(z.event)?z.event.join(" "):z.event,ge=fe&&z.structural,me="",ve="";ge?me=o(fe,Q,!0):fe&&(me=fe),z.addClass&&(ve+=o(z.addClass,J)),z.removeClass&&(ve.length&&(ve+=" "),ve+=o(z.removeClass,X)),z.applyClassesEarly&&ve.length&&L(e,z);var Ce=[me,ve].join(" ").trim(),Se=he+" "+Ce,Ee=o(Ce,Z),Pe=pe.to&&Object.keys(pe.to).length>0,ke=(z.keyframeStyle||"").length>0;if(!ke&&!Pe&&!Ce)return k();var Te,$e;if(z.stagger>0){var De=parseFloat(z.stagger);$e={transitionDelay:De,animationDelay:De,transitionDuration:0,animationDuration:0}}else Te=_(q,Se),$e=S(q,Ce,Te,xe);z.$$skipPreparationClasses||i.addClass(e,Ce);var Ae;if(z.transitionStyle){var Re=[j,z.transitionStyle];x(q,Re),ce.push(Re)}if(z.duration>=0){Ae=q.style[j].length>0;var je=D(z.duration,Ae);x(q,je),ce.push(je)}if(z.keyframeStyle){var Me=[O,z.keyframeStyle];x(q,Me),ce.push(Me)}var Oe=$e?z.staggerIndex>=0?z.staggerIndex:t.count(Te):0,Ie=0===Oe;Ie&&!z.skipBlocking&&b(q,ue);var Fe=A(q,Se,Te),Ne=Fe.maxDelay;ne=Math.max(Ne,0),re=Fe.maxDuration;var Le={};if(Le.hasTransitions=Fe.transitionDuration>0,Le.hasAnimations=Fe.animationDuration>0,Le.hasTransitionAll=Le.hasTransitions&&"all"==Fe.transitionProperty,Le.applyTransitionDuration=Pe&&(Le.hasTransitions&&!Le.hasTransitionAll||Le.hasAnimations&&!Le.hasTransitions),Le.applyAnimationDuration=z.duration&&Le.hasAnimations,Le.applyTransitionDelay=$(z.delay)&&(Le.applyTransitionDuration||Le.hasTransitions),Le.applyAnimationDelay=$(z.delay)&&Le.hasAnimations,Le.recalculateTimingStyles=ve.length>0,(Le.applyTransitionDuration||Le.applyAnimationDuration)&&(re=z.duration?parseFloat(z.duration):re,Le.applyTransitionDuration&&(Le.hasTransitions=!0,Fe.transitionDuration=re,Ae=q.style[j+oe].length>0,ce.push(D(re,Ae))),
Le.applyAnimationDuration&&(Le.hasAnimations=!0,Fe.animationDuration=re,ce.push(E(re)))),0===re&&!Le.recalculateTimingStyles)return k();if(null!=z.delay){var He;"boolean"!=typeof z.delay&&(He=parseFloat(z.delay),ne=Math.max(He,0)),Le.applyTransitionDelay&&ce.push(P(He)),Le.applyAnimationDelay&&ce.push(P(He,!0))}return null==z.duration&&Fe.transitionDuration>0&&(Le.recalculateTimingStyles=Le.recalculateTimingStyles||Ie),ie=ne*_e,se=re*_e,z.skipBlocking||(Le.blockTransition=Fe.transitionDuration>0,Le.blockKeyframeAnimation=Fe.animationDuration>0&&$e.animationDelay>0&&0===$e.animationDuration),z.from&&(z.cleanupStyles&&R(W,q,Object.keys(z.from)),f(e,z)),Le.blockTransition||Le.blockKeyframeAnimation?w(re):z.skipBlocking||b(q,!1),{$$willAnimate:!0,end:c,start:function(){return G?void 0:(te={end:c,cancel:h,resume:null,pause:null},ee=new a(te),T(U),ee)}}}}]}],Ee=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var n="ng-animate-shim",i="ng-anchor",r="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,s,a,l,c,u,p){function d(e){return e.replace(/\bng-\S+\b/g,"")}function f(e,t){return U(e)&&(e=e.split(" ")),U(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function g(t,s,l){function c(e){var t={},n=y(e).getBoundingClientRect();return V(["width","height","top","left"],function(e){var i=n[e];switch(e){case"top":i+=_.scrollTop;break;case"left":i+=_.scrollLeft}t[e]=Math.floor(i)+"px"}),t}function u(){var t=e(m,{addClass:r,delay:!0,from:c(s)});return t.$$willAnimate?t:null}function h(e){return e.attr("class")||""}function p(){var t=d(h(l)),n=f(t,v),i=f(v,t),s=e(m,{to:c(l),addClass:o+" "+n,removeClass:r+" "+i,delay:!0});return s.$$willAnimate?s:null}function g(){m.remove(),s.removeClass(n),l.removeClass(n)}var m=H(y(s).cloneNode(!0)),v=d(h(m));s.addClass(n),l.addClass(n),m.addClass(i),b.append(m);var w,C=u();if(!C&&(w=p(),!w))return g();var x=C||w;return{start:function(){function e(){n&&n.end()}var t,n=x.start();return n.done(function(){return n=null,!w&&(w=p())?(n=w.start(),n.done(function(){n=null,g(),t.complete()}),n):(g(),void t.complete())}),t=new a({end:e,cancel:e})}}}function m(e,t,n,i){var r=v(e,F),o=v(t,F),s=[];return V(i,function(e){var t=e.out,i=e["in"],r=g(n,t,i);r&&s.push(r)}),r||o||0!==s.length?{start:function(){function e(){V(t,function(e){e.end()})}var t=[];r&&t.push(r.start()),o&&t.push(o.start()),V(s,function(e){t.push(e.start())});var n=new a({end:e,cancel:e});return a.all(t,function(e){n.complete(e)}),n}}:void 0}function v(t){var n=t.element,i=t.options||{};t.structural&&(i.event=t.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===t.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=S(i.event,i.preparationClasses));var r=e(n,i);return r.$$willAnimate?r:null}if(!c.animations&&!c.transitions)return F;var _=p[0].body,w=y(l),b=H(t(w)||_.contains(w)?w:_);h(u);return function(e){return e.from&&e.to?m(e.from,e.to,e.classes,e.anchors):v(e)}}]}],Pe=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,i){function r(n){n=B(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var s=n[o],a=e.$$registeredAnimations[s];a&&!r[s]&&(i.push(t.get(a)),r[s]=!0)}return i}var o=h(i);return function(e,t,i,s){function a(){s.domOperation(),o(e,s)}function l(){f=!0,a(),d(e,s)}function c(e,t,i,r,o){var s;switch(i){case"animate":s=[t,r.from,r.to,o];break;case"setClass":s=[t,v,y,o];break;case"addClass":s=[t,v,o];break;case"removeClass":s=[t,y,o];break;default:s=[t,o]}s.push(r);var a=e.apply(e,s);if(a)if(G(a.start)&&(a=a.start()),a instanceof n)a.done(o);else if(G(a))return a;return F}function u(e,t,i,r,o){var s=[];return V(r,function(r){var a=r[o];a&&s.push(function(){var r,o,s=!1,l=function(e){s||(s=!0,(o||F)(e),r.complete(!e))};return r=new n({end:function(){l()},cancel:function(){l(!0)}}),o=c(a,e,t,i,function(e){var t=e===!1;l(t)}),r})}),s}function h(e,t,i,r,o){var s=u(e,t,i,r,o);if(0===s.length){var a,l;"beforeSetClass"===o?(a=u(e,"removeClass",i,r,"beforeRemoveClass"),l=u(e,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(a=u(e,"removeClass",i,r,"removeClass"),l=u(e,"addClass",i,r,"addClass")),a&&(s=s.concat(a)),l&&(s=s.concat(l))}if(0!==s.length)return function(e){var t=[];return s.length&&V(s,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){V(t,function(t){e?t.cancel():t.end()})}}}var f=!1;3===arguments.length&&z(i)&&(s=i,i=null),s=p(s),i||(i=e.attr("class")||"",s.addClass&&(i+=" "+s.addClass),s.removeClass&&(i+=" "+s.removeClass));var g,m,v=s.addClass,y=s.removeClass,_=r(i);if(_.length){var w,b;"leave"==t?(b="leave",w="afterLeave"):(b="before"+t.charAt(0).toUpperCase()+t.substr(1),w=t),"enter"!==t&&"move"!==t&&(g=h(e,t,s,_,b)),m=h(e,t,s,_,w)}if(g||m){var C;return{$$willAnimate:!0,end:function(){return C?C.end():(l(),C=new n,C.complete(!0)),C},start:function(){function e(e){l(e),C.complete(e)}function t(t){f||((i||F)(t),e(t))}if(C)return C;C=new n;var i,r=[];return g&&r.push(function(e){i=g(e)}),r.length?r.push(function(e){a(),e(!0)}):a(),m&&r.push(function(e){i=m(e)}),C.setHost({end:function(){t()},cancel:function(){t(!0)}}),n.chain(r,e),C}}}}}]}],ke=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){var n=t.element,i=t.event,r=t.options,o=t.classes;return e(n,i,o,r)}return function(e){if(e.from&&e.to){var i=n(e.from),r=n(e.to);if(!i&&!r)return;return{start:function(){function e(){return function(){V(o,function(e){e.end()})}}function n(e){s.complete(e)}var o=[];i&&o.push(i.start()),r&&o.push(r.start()),t.all(o,n);var s=new t({end:e(),cancel:e()});return s}}}return n(e)}}]}],Te="data-ng-animate",$e="$ngAnimatePin",De=["$animateProvider",function(i){function r(e){if(!e)return null;var t=e.split(g),n=Object.create(null);return V(t,function(e){n[e]=!0}),n}function o(e,t){if(e&&t){var n=r(t);return e.split(g).some(function(e){return n[e]})}}function s(e,t,n,i){return v[e].some(function(e){return e(t,n,i)})}function c(e,t){var n=(e.addClass||"").length>0,i=(e.removeClass||"").length>0;return t?n&&i:n||i}var u=1,f=2,g=" ",v=this.rules={skip:[],cancel:[],join:[]};v.join.push(function(e,t,n){return!t.structural&&c(t)}),v.skip.push(function(e,t,n){return!t.structural&&!c(t)}),v.skip.push(function(e,t,n){return"leave"==n.event&&t.structural}),v.skip.push(function(e,t,n){return n.structural&&n.state===f&&!t.structural}),v.cancel.push(function(e,t,n){return n.structural&&t.structural}),v.cancel.push(function(e,t,n){return n.state===f&&t.structural}),v.cancel.push(function(e,t,n){if(n.structural)return!1;var i=t.addClass,r=t.removeClass,s=n.addClass,a=n.removeClass;return W(i)&&W(r)||W(s)&&W(a)?!1:o(i,a)||o(r,s)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(r,o,g,v,b,C,x,S,E,P){function k(){var e=!1;return function(t){e?t():o.$$postDigest(function(){e=!0,t()})}}function T(e,t){return m(e,t,{})}function $(e,t,n){var i=y(t),r=y(e),o=[],s=Z[n];return s&&V(s,function(e){re.call(e.node,i)?o.push(e.callback):"leave"===n&&re.call(e.node,r)&&o.push(e.callback)}),o}function D(e,t,n){var i=l(t);return e.filter(function(e){var t=e.node===i&&(!n||e.callback===n);return!t})}function A(e,t){"close"!==e||t[0].parentNode||oe.off(t)}function R(e,t,n){function i(t,n,i,o){E(function(){var t=$(g,e,n);t.length?r(function(){V(t,function(t){t(e,i,o)}),A(i,e)}):A(i,e)}),t.progress(n,i,o)}function l(t){w(e,b),ie(e,b),d(e,b),b.domOperation(),S.complete(!t)}var h,g,b=N(n);e=a(e),e&&(h=y(e),g=e.parent()),b=p(b);var S=new x,E=k();if(B(b.addClass)&&(b.addClass=b.addClass.join(" ")),b.addClass&&!U(b.addClass)&&(b.addClass=null),B(b.removeClass)&&(b.removeClass=b.removeClass.join(" ")),b.removeClass&&!U(b.removeClass)&&(b.removeClass=null),b.from&&!z(b.from)&&(b.from=null),b.to&&!z(b.to)&&(b.to=null),!h)return l(),S;var P=[h.className,b.addClass,b.removeClass].join(" ");if(!te(P))return l(),S;var D=["enter","move","leave"].indexOf(t)>=0,R=v[0].hidden,O=!X||R||J.get(h),L=!O&&G.get(h)||{},H=!!L.state;if(O||H&&L.state==u||(O=!I(e,g,t)),O)return R&&i(S,t,"start"),l(),R&&i(S,t,"close"),S;D&&j(e);var W={structural:D,element:e,event:t,addClass:b.addClass,removeClass:b.removeClass,close:l,options:b,runner:S};if(H){var q=s("skip",e,W,L);if(q)return L.state===f?(l(),S):(m(e,L,W),L.runner);var K=s("cancel",e,W,L);if(K)if(L.state===f)L.runner.end();else{if(!L.structural)return m(e,L,W),L.runner;L.close()}else{var Y=s("join",e,W,L);if(Y){if(L.state!==f)return _(e,D?t:null,b),t=W.event=L.event,b=m(e,L,W),L.runner;T(e,W)}}}else T(e,W);var Q=W.structural;if(Q||(Q="animate"===W.event&&Object.keys(W.options.to||{}).length>0||c(W)),!Q)return l(),M(e),S;var Z=(L.counter||0)+1;return W.counter=Z,F(e,u,W),o.$$postDigest(function(){var n=G.get(h),r=!n;n=n||{};var o=e.parent()||[],s=o.length>0&&("animate"===n.event||n.structural||c(n));if(r||n.counter!==Z||!s)return r&&(ie(e,b),d(e,b)),(r||D&&n.event!==t)&&(b.domOperation(),S.end()),void(s||M(e));t=!n.structural&&c(n,!0)?"setClass":n.event,F(e,f);var a=C(e,t,n.options);S.setHost(a),i(S,t,"start",{}),a.done(function(n){l(!n);var r=G.get(h);r&&r.counter===Z&&M(y(e)),i(S,t,"close",{})})}),S}function j(e){var t=y(e),n=t.querySelectorAll("["+Te+"]");V(n,function(e){var t=parseInt(e.getAttribute(Te)),n=G.get(e);if(n)switch(t){case f:n.runner.end();case u:G.remove(e)}})}function M(e){var t=y(e);t.removeAttribute(Te),G.remove(t)}function O(e,t){return y(e)===y(t)}function I(e,t,n){var i,r=H(v[0].body),o=O(e,r)||"HTML"===e[0].nodeName,s=O(e,g),a=!1,l=J.get(y(e)),c=H.data(e[0],$e);for(c&&(t=c),t=y(t);t&&(s||(s=O(t,g)),t.nodeType===Y);){var u=G.get(t)||{};if(!a){var h=J.get(t);if(h===!0&&l!==!1){l=!0;break}h===!1&&(l=!1),a=u.structural}if(W(i)||i===!0){var p=H.data(t,ne);q(p)&&(i=p)}if(a&&i===!1)break;if(o||(o=O(t,r)),o&&s)break;t=s||!(c=H.data(t,$e))?t.parentNode:y(c)}var d=(!a||i)&&l!==!0;return d&&s&&o}function F(e,t,n){n=n||{},n.state=t;var i=y(e);i.setAttribute(Te,t);var r=G.get(i),o=r?L(r,n):n;G.put(i,o)}var G=new b,J=new b,X=null,Q=o.$watch(function(){return 0===S.totalPendingRequests},function(e){e&&(Q(),o.$$postDigest(function(){o.$$postDigest(function(){null===X&&(X=!0)})}))}),Z={},ee=i.classNameFilter(),te=ee?function(e){return ee.test(e)}:function(){return!0},ie=h(E),re=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},oe={on:function(e,t,n){var i=l(t);Z[e]=Z[e]||[],Z[e].push({node:i,callback:n}),H(t).on("$destroy",function(){var r=G.get(i);r||oe.off(e,t,n)})},off:function(e,n,i){if(1!==arguments.length||t.isString(arguments[0])){var r=Z[e];r&&(Z[e]=1===arguments.length?null:D(r,n,i))}else{n=arguments[0];for(var o in Z)Z[o]=D(Z[o],n)}},pin:function(e,t){n(K(e),"element","not an element"),n(K(t),"parentElement","not an element"),e.data($e,t)},push:function(e,t,n,i){return n=n||{},n.domOperation=i,R(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!X;else{var i=K(e);if(i){var r=y(e),o=J.get(r);1===n?t=!o:J.put(r,!t)}else t=X=!!e}return t}};return oe}]}],Ae=["$animateProvider",function(e){function t(e,t){e.data(a,t)}function n(e){e.removeData(a)}function r(e){return e.data(a)}var o="ng-animate-ref",s=this.drivers=[],a="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(e,a,l,c,u,f){function g(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,i=n.parentNode;o.put(n,e);for(var s;i;){if(s=o.get(i)){s.processed||(s=t(s));break}i=i.parentNode}return(s||r).children.push(e),e}function n(e){var t,n=[],i=[];for(t=0;t<e.children.length;t++)i.push(e.children[t]);var r=i.length,o=0,s=[];for(t=0;t<i.length;t++){var a=i[t];0>=r&&(r=o,o=0,n.push(s),s=[]),s.push(a.fn),a.children.forEach(function(e){o++,i.push(e)}),r--}return s.length&&n.push(s),n}var i,r={children:[]},o=new u;for(i=0;i<e.length;i++){var s=e[i];o.put(s.domNode,e[i]={domNode:s.domNode,fn:s.fn,children:[]})}for(i=0;i<e.length;i++)t(e[i]);return n(r)}var m=[],v=h(e);return function(u,h,_){function w(e){var t="["+o+"]",n=e.hasAttribute(o)?[e]:e.querySelectorAll(t),i=[];return V(n,function(e){var t=e.getAttribute(o);t&&t.length&&i.push(e)}),i}function b(e){var t=[],n={};V(e,function(e,i){var r=e.element,s=y(r),a=e.event,l=["enter","move"].indexOf(a)>=0,c=e.structural?w(s):[];if(c.length){var u=l?"to":"from";V(c,function(e){var t=e.getAttribute(o);n[t]=n[t]||{},n[t][u]={animationID:i,element:H(e)}})}else t.push(e)});var i={},r={};return V(n,function(n,o){var s=n.from,a=n.to;if(!s||!a){var l=s?s.animationID:a.animationID,c=l.toString();return void(i[c]||(i[c]=!0,t.push(e[l])))}var u=e[s.animationID],h=e[a.animationID],p=s.animationID.toString();if(!r[p]){var d=r[p]={structural:!0,beforeStart:function(){u.beforeStart(),h.beforeStart()},close:function(){u.close(),h.close()},classes:C(u.classes,h.classes),from:u,to:h,anchors:[]};d.classes.length?t.push(d):(t.push(u),t.push(h))}r[p].anchors.push({out:s.element,"in":a.element})}),t}function C(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],i=0;i<e.length;i++){var r=e[i];if("ng-"!==r.substring(0,3))for(var o=0;o<t.length;o++)if(r===t[o]){n.push(r);break}}return n.join(" ")}function x(e){for(var t=s.length-1;t>=0;t--){var n=s[t];if(l.has(n)){var i=l.get(n),r=i(e);if(r)return r}}}function S(){u.addClass(te),A&&e.addClass(u,A),R&&(e.removeClass(u,R),R=null)}function E(e,t){function n(e){r(e).setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function P(){var e=r(u);!e||"leave"===h&&_.$$domOperationFired||e.end()}function k(t){u.off("$destroy",P),n(u),v(u,_),d(u,_),_.domOperation(),A&&e.removeClass(u,A),u.removeClass(te),$.complete(!t)}_=p(_);var T=["enter","move","leave"].indexOf(h)>=0,$=new c({end:function(){k()},cancel:function(){k(!0)}});if(!s.length)return k(),$;t(u,$);var D=i(u.attr("class"),i(_.addClass,_.removeClass)),A=_.tempClasses;A&&(D+=" "+A,_.tempClasses=null);var R;return T&&(R="ng-"+h+ee,e.addClass(u,R)),m.push({element:u,classes:D,event:h,structural:T,options:_,beforeStart:S,close:k}),u.on("$destroy",P),m.length>1?$:(a.$$postDigest(function(){var e=[];V(m,function(t){r(t.element)?e.push(t):t.close()}),m.length=0;var t=b(e),n=[];V(t,function(e){n.push({domNode:y(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close,i=e.anchors?e.from.element||e.to.element:e.element;if(r(i)){var o=x(e);o&&(t=o.start)}if(t){var s=t();s.done(function(e){n(!e)}),E(e,s)}else n()}})}),f(g(n))}),$)}}]}],Re=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,i,r,o){var s,a;t.$watchCollection(i.ngAnimateSwap||i["for"],function(i){s&&e.leave(s),a&&(a.$destroy(),a=null),(i||0===i)&&(a=t.$new(),o(a,function(t){s=t,e.enter(t,null,n)}))})}}}];t.module("ngAnimate",[]).directive("ngAnimateSwap",Re).directive("ngAnimateChildren",ve).factory("$$rAFScheduler",me).provider("$$animateQueue",De).provider("$$animation",Ae).provider("$animateCss",Se).provider("$$animateCssDriver",Ee).provider("$$animateJs",Pe).provider("$$animateJsDriver",ke)}(window,window.angular),function(){"use strict";angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(e,t){this.pop=function(t,n,i,r,o,s,a,l){if(angular.isObject(t)){var c=t;this.toast={type:c.type,title:c.title,body:c.body,timeout:c.timeout,bodyOutputType:c.bodyOutputType,clickHandler:c.clickHandler,showCloseButton:c.showCloseButton},a=c.toasterId}else this.toast={type:t,title:n,body:i,timeout:r,bodyOutputType:o,clickHandler:s,showCloseButton:l};e.$emit("toaster-newToast",a)},this.clear=function(){e.$emit("toaster-clearToasts")};for(var n in t["icon-classes"])this[n]=function(e){return function(t,n,i,r,o,s,a){angular.isString(t)?this.pop(e,t,n,i,r,o,s,a):this.pop(angular.extend(t,{type:e}))}}(n)}]).factory("toasterEventRegistry",["$rootScope",function(e){var t,n=null,i=null,r=[],o=[];return t={setup:function(){n||(n=e.$on("toaster-newToast",function(e,t){for(var n=0,i=r.length;i>n;n++)r[n](e,t)})),i||(i=e.$on("toaster-clearToasts",function(e){for(var t=0,n=o.length;n>t;t++)o[t](e)}))},subscribeToNewToastEvent:function(e){r.push(e)},subscribeToClearToastsEvent:function(e){o.push(e)},unsubscribeToNewToastEvent:function(e){var t=r.indexOf(e);t>=0&&r.splice(t,1),0===r.length&&(n(),n=null)},unsubscribeToClearToastsEvent:function(e){var t=o.indexOf(e);t>=0&&o.splice(t,1),0===o.length&&(i(),i=null)}},{setup:t.setup,subscribeToNewToastEvent:t.subscribeToNewToastEvent,subscribeToClearToastsEvent:t.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:t.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:t.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(e,t,n,i,r,o,s){return{replace:!0,restrict:"EA",scope:!0,link:function(t,a,l){function c(e,i){e.timeoutPromise=n(function(){t.removeToast(e.id)},i,1)}function u(n){if(n.type=d["icon-classes"][n.type],n.type||(n.type=d["icon-class"]),!(d["prevent-duplicates"]===!0&&t.toasters.length>0&&t.toasters[t.toasters.length-1].body===n.body)){n.id=++f;var r=d["close-button"];if("boolean"==typeof n.showCloseButton);else if("boolean"==typeof r)n.showCloseButton=r;else if("object"==typeof r){var o=r[n.type];"undefined"!=typeof o&&null!==o&&(n.showCloseButton=o)}else n.showCloseButton=!1;switch(n.bodyOutputType=n.bodyOutputType||d["body-output-type"],n.bodyOutputType){case"trustedHtml":n.html=i.trustAsHtml(n.body);break;case"template":n.bodyTemplate=n.body||d["body-template"];break;case"templateWithData":var s=e(n.body||d["body-template"]),a=s(t);n.bodyTemplate=a.template,n.data=a.data}t.configureTimer(n),d["newest-on-top"]===!0?(t.toasters.unshift(n),d.limit>0&&t.toasters.length>d.limit&&t.toasters.pop()):(t.toasters.push(n),d.limit>0&&t.toasters.length>d.limit&&t.toasters.shift())}}function h(e){var i=t.toasters[e];i&&(i.timeoutPromise&&n.cancel(i.timeoutPromise),t.toasters.splice(e,1))}function p(){for(var e=t.toasters.length;e>=0;e--)h(e)}var d,f=0;d=angular.extend({},r,t.$eval(l.toasterOptions)),t.config={toasterId:d["toaster-id"],position:d["position-class"],title:d["title-class"],message:d["message-class"],tap:d["tap-to-dismiss"],closeButton:d["close-button"],animation:d["animation-class"],mouseoverTimer:d["mouseover-timer-stop"]},t.$on("$destroy",function(){s.unsubscribeToNewToastEvent(t._onNewToast),s.unsubscribeToClearToastsEvent(t._onClearToasts)}),t.configureTimer=function(e){var t=angular.isNumber(e.timeout)?e.timeout:d["time-out"];t>0&&c(e,t)},t.removeToast=function(e){var n,i;for(n=0,i=t.toasters.length;i>n;n++)if(t.toasters[n].id===e){h(n);break}},t.toasters=[],t._onNewToast=function(e,n){(void 0===t.config.toasterId&&void 0===n||void 0!==n&&n===t.config.toasterId)&&u(o.toast)},t._onClearToasts=function(e){p()},s.setup(),s.subscribeToNewToastEvent(t._onNewToast),s.subscribeToClearToastsEvent(t._onClearToasts)},controller:["$scope","$element","$attrs",function(e,t,i){e.stopTimer=function(t){e.config.mouseoverTimer===!0&&t.timeoutPromise&&(n.cancel(t.timeoutPromise),t.timeoutPromise=null)},e.restartTimer=function(t){e.config.mouseoverTimer===!0?t.timeoutPromise||e.configureTimer(t):null===t.timeoutPromise&&e.removeToast(t.id)},e.click=function(t){if(e.config.tap===!0||t.showCloseButton===!0){var n=!0;t.clickHandler&&(angular.isFunction(t.clickHandler)?n=t.clickHandler(t,t.showCloseButton):angular.isFunction(e.$parent.$eval(t.clickHandler))?n=e.$parent.$eval(t.clickHandler)(t,t.showCloseButton):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),n&&e.removeToast(t.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){function t(e,t,n,i){var o=document.createElement("script"),s=r?r:document.getElementsByTagName("body")[0],a=!1;o.type="text/javascript",o.readyState?o.onreadystatechange=function(){("complete"===o.readyState||"loaded"===o.readyState)&&(o.onreadystatechange=null,i(function(){a||(a=!0,s.removeChild(o),t())},30,!1))}:(o.onload=function(){a||(a=!0,s.removeChild(o),t())},o.onerror=function(){a||(a=!0,s.removeChild(o),n())}),o.src=e,o.async=!0,s.appendChild(o)}function n(e,n,i,r,a,l,h){function p(e,t){s===i&&(angular.forEach(e,function(n,i){t[i]?angular.isArray(t[i])&&(e[i].length=t[i].length):delete e[i]}),angular.forEach(t,function(n,i){angular.isArray(t[i])||angular.isObject(t[i])?(e[i]||(e[i]=angular.isArray(t[i])?[]:{}),p(e[i],t[i])):e[i]=t[i]}))}if(u[i])return s=i,u[i];var d,f=a.defer();return i===s?f.resolve(n):(d=l.get(i))?(s=i,r.$evalAsync(function(){p(n,d),o.put(c,i),r.$broadcast("$localeChangeSuccess",i,n),f.resolve(n)})):(s=i,u[i]=f.promise,t(e,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");p(n,t),l.put(i,t),delete u[i],r.$applyAsync(function(){o.put(c,i),r.$broadcast("$localeChangeSuccess",i,n),f.resolve(n)})},function(){delete u[i],r.$applyAsync(function(){s===i&&(s=n.id),r.$broadcast("$localeChangeError",i),f.reject(i)})},h)),f.promise}var i,r,o,s,a="angular/i18n/angular-locale_{{locale}}.js",l="tmhDynamicLocaleStorageCache",c=e,u={},h={};this.localeLocationPattern=function(e){return e?(a=e,this):a},this.appendScriptTo=function(e){r=e},this.useStorage=function(e){l=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){i=e},this.storageKey=function(e){return e?(c=e,this):c},this.addLocalePatternValue=function(e,t){h[e]=t},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,t,r,u,p,d,f){function g(t){var i={locale:t,angularVersion:angular.version.full};return n(m(angular.extend({},h,i)),u,t,e,p,d,f)}var m=r(a);return o=t.get(l),e.$evalAsync(function(){var e;(e=o.get(c)||i)&&g(e)}),{set:g,get:function(){return s}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});var __extends,wijmo;!function(e){"use strict";function t(){return se}function n(e,t){return null==e?null:r(t)?c(e.implementsInterface)&&e.implementsInterface(t)?e:null:e instanceof t?e:null}function i(e){return r(e)||s(e)||l(e)||h(e)}function r(e){return"string"==typeof e}function o(e){return null==e?!0:e.replace(/\s/g,"").length<1}function s(e){return"number"==typeof e}function a(e){return s(e)&&e==Math.round(e)}function l(e){return"boolean"==typeof e}function c(e){return"function"==typeof e}function u(e){return"undefined"==typeof e}function h(e){return e instanceof Date&&!isNaN(e.getTime())}function p(e){return e instanceof Array}function d(e){return null!=e&&"object"==typeof e&&!h(e)&&!p(e)}function f(e){if(e instanceof ne)return e;if(e.touches&&e.touches.length>0&&(e=e.touches[0]),s(e.clientX)&&s(e.clientY))return new ne(e.clientX+pageXOffset,e.clientY+pageYOffset);throw"Mouse or touch event expected."}function g(e){return s(e)?ee.Number:l(e)?ee.Boolean:h(e)?ee.Date:r(e)?ee.String:p(e)?ee.Array:ee.Object}function m(t,n,i){var o,s;if(null!=t){if(r(t))switch(n){case ee.Number:return o=e.Globalize.parseFloat(t,i),isNaN(o)?t:o;case ee.Date:return s=e.Globalize.parseDate(t,i),s||i||!t||(s=new Date(t)),s&&isFinite(s.getTime())?s:t;case ee.Boolean:switch(t.toLowerCase()){case"true":return!0;case"false":return!1}return t}if(n==ee.String)return e.Globalize.format(t,i)}return t}function v(e,t,n){var i,r;return n?(r=e.toString(),i=r.indexOf("."),i>-1&&(r=r.substr(0,i+1+t),e=parseFloat(r))):(r=e.toFixed(t),e=parseFloat(r)),e}function y(t,n,i){return t=x(t),t.replace(/\{(.*?)(:(.*?))?\}/g,function(t,r,o,s){var a=t;return r&&"{"!=r[0]&&n&&(a=n[r],s&&(a=e.Globalize.format(a,s)),i&&(a=i(n,r,s,a))),null==a?"":a})}function _(e,t,n){return null!=e&&(null!=n&&e>n&&(e=n),null!=t&&t>e&&(e=t)),e}function w(t,n){var i,r;if(n)for(i in n)"_"!=i[0]&&(b(i in t,'Unknown property "'+i+'".'),r=n[i],t._copy&&t._copy(i,r)||(t[i]instanceof e.Event&&c(r)?t[i].addHandler(r):d(r)&&t[i]&&"itemsSource"!=i?w(t[i],r):t[i]=r))}function b(e,t){if(!e)throw"** Assertion failed in Wijmo: "+t}function C(e,t){console.error('** WARNING: "'+e+'" has been deprecated; please use "'+t+'" instead.')}function x(e,t){return void 0===t&&(t=!0),b(t&&null==e||r(e),"String expected."),e}function S(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),b(t&&null==e||s(e),"Number expected."),n&&e&&0>e)throw"Positive number expected.";return e}function E(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),b(t&&null==e||a(e),"Integer expected."),n&&e&&0>e)throw"Positive integer expected.";return e}function P(e,t){return void 0===t&&(t=!1),b(t&&null==e||l(e),"Boolean expected."),e}function k(e,t){if(void 0===t&&(t=!1),r(e)){var n=m(e,ee.Date,"r");h(n)&&(e=n)}return b(t&&null==e||h(e),"Date expected."),e}function T(e,t){return void 0===t&&(t=!0),b(t&&null==e||c(e),"Function expected."),e}function $(e,t){return void 0===t&&(t=!0),b(t&&null==e||p(e),"Array expected."),e}function D(e,t,i){return void 0===i&&(i=!1),e=n(e,t),b(i||null!=e,t+" expected."),e}function A(e,t,n){if(void 0===n&&(n=!1),null==e&&n)return null;var i=t[e];return b(null!=i,"Invalid enum value."),s(i)?i:e}function R(t,i){if(void 0===i&&(i=!0),null==t&&i)return null;var r=n(t,"ICollectionView");return null!=r?r:(p(t)||b(!1,"Array or ICollectionView expected."),new e.collections.CollectionView(t))}function j(e){return e&&e.items&&e.items.length}function M(e){return e&&e.length?e[0].toUpperCase()+e.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2"):""}function O(e){return r(e)&&(e=e.replace(/[&<>"'\/]/g,function(e){return te[e]})),e}function I(e,t){if(e&&e.getAttribute){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");return e&&n.test(e.getAttribute("class"))}return!1}function F(e,t){if(e&&t&&e.setAttribute&&I(e,t)){var n=new RegExp("((\\s|^)"+t+"(\\s|$))","g"),i=e.getAttribute("class");i=i.replace(n," ").replace(/ +/g," ").trim(),e.setAttribute("class",i)}}function N(e,t){if(e&&t&&e.setAttribute&&!I(e,t)){var n=e.getAttribute("class");e.setAttribute("class",n?n+" "+t:t)}}function L(e,t,n){n?N(e,t):F(e,t)}function H(e,t,n){if(void 0===n&&(n=t),e=D(e,HTMLInputElement),q(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.focus(),e.setSelectionRange(S(t),S(n))}catch(i){}}function V(){var e,t=document.activeElement;return t&&(e=t.shadowRoot,e&&e.activeElement&&(t=e.activeElement)),t}function B(e,t){for(var n,i,r="input,select,textarea,button,a,div,span",o=e.querySelectorAll(r),s=[],a=0;a<o.length;a++)i=o[a],i.clientHeight>0&&i.tabIndex>-1&&!i.disabled&&!G(i,"[disabled],.wj-state-disabled")&&!i.querySelector(r)&&s.push(i);n=0,t&&(a=s.indexOf(V()),a>-1&&(n=(a+t+s.length)%s.length)),n<s.length&&(i=s[n],i.focus(),i instanceof HTMLInputElement&&i.select())}function U(e){return e instanceof Element?e:r(e)?document.querySelector(e):e&&e.jquery?e[0]:null}function z(e,t){var n,i=document.createElement("div");return i.innerHTML=e,n=i.removeChild(i.firstChild),t instanceof HTMLElement?t.appendChild(n):n}function W(e,t){if(null==t)return void(e.hasChildNodes()&&(e.textContent=""));var n=e.firstChild;1==e.childNodes.length&&3==n.nodeType?n.nodeValue!=t&&(n.nodeValue=t):(n||t)&&(e.textContent=t)}function q(e,t){for(var n=t;n&&e;){if(n===e)return!0;n=n.parentNode||n.host}return!1}function G(e,t){var n=e?e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,t))return e;return null}function K(e,t){var n,i,r;for(L(e,"wj-state-disabled",!t),t?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),n=e.querySelectorAll("input"),i=0;i<n.length;i++)r=n[i],t?r.removeAttribute("disabled"):r.setAttribute("disabled","true")}function Y(e){var t=e.getBoundingClientRect();return new re(t.left+pageXOffset,t.top+pageYOffset,t.width,t.height)}function J(e,t){var n,i,r;if(p(e))return void e.forEach(function(e){J(e,t)});n=e.style;for(i in t)r=t[i],"number"==typeof r&&i.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(r+="px"),n[i]!=r&&(n[i]=r.toString())}function X(e,t,n){void 0===t&&(t=400),void 0===n&&(n=35),T(e),S(t,!1,!0),S(n,!1,!0);var i=Date.now(),r=setInterval(function(){var n=Math.min(1,(Date.now()-i)/t);n=Math.sin(n*Math.PI/2),n*=n,requestAnimationFrame(function(){e(n)}),n>=1&&clearInterval(r)},n);return r}function Q(e,t){var n,i,o,s,a,l;t||(t={});var u=t.method?x(t.method).toUpperCase():"GET",h=null!=t.async?P(t.async):!0,p=t.data;if(null!=p&&"GET"==u){n=[];for(i in p)n.push(i+"="+p[i]);n.length&&(o=e.indexOf("?")<0?"?":"&",e+=o+n.join("&")),p=null}if(s=new XMLHttpRequest,s.URL_DEBUG=e,a=!1,null==p||r(p)||(a=d(p),p=JSON.stringify(p)),s.onload=function(){4==s.readyState&&(s.status<300?t.success&&T(t.success)(s):t.error&&T(t.error)(s),t.complete&&T(t.complete)(s))},s.onerror=function(){if(!t.error)throw"HttpRequest Error: "+s.status+" "+s.statusText;T(t.error)(s)},s.open(u,e,h,t.user,t.password),t.user&&t.password&&s.setRequestHeader("Authorization","Basic "+btoa(t.user+":"+t.password)),a&&s.setRequestHeader("Content-Type","application/json"),t.requestHeaders)for(l in t.requestHeaders)s.setRequestHeader(l,t.requestHeaders[l]);return c(t.beforeSend)&&t.beforeSend(s),s.send(p),s}var Z,ee,te,ne,ie,re,oe,se="5.20163.234";e.getVersion=t,function(e){e[e.Back=8]="Back",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Delete=46]="Delete",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12"}(e.Key||(e.Key={})),Z=e.Key,function(e){e[e.Object=0]="Object",e[e.String=1]="String",e[e.Number=2]="Number",
e[e.Boolean=3]="Boolean",e[e.Date=4]="Date",e[e.Array=5]="Array"}(e.DataType||(e.DataType={})),ee=e.DataType,e.tryCast=n,e.isPrimitive=i,e.isString=r,e.isNullOrWhiteSpace=o,e.isNumber=s,e.isInt=a,e.isBoolean=l,e.isFunction=c,e.isUndefined=u,e.isDate=h,e.isArray=p,e.isObject=d,e.mouseToPage=f,e.getType=g,e.changeType=m,e.toFixed=v,e.format=y,e.clamp=_,e.copy=w,e.assert=b,e._deprecated=C,e.asString=x,e.asNumber=S,e.asInt=E,e.asBoolean=P,e.asDate=k,e.asFunction=T,e.asArray=$,e.asType=D,e.asEnum=A,e.asCollectionView=R,e.hasItems=j,e.toHeaderCase=M,e.escapeHtml=O,te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},e.hasClass=I,e.removeClass=F,e.addClass=N,e.toggleClass=L,e.setSelectionRange=H,e.getActiveElement=V,e.moveFocus=B,e.getElement=U,e.createElement=z,e.setText=W,e.contains=q,e.closest=G,e.enable=K,e.getElementRect=Y,e.setCss=J,e.animate=X,ne=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=S(e),this.y=S(t)}return e.prototype.equals=function(t){return t instanceof e&&this.x==t.x&&this.y==t.y},e.prototype.clone=function(){return new e(this.x,this.y)},e}(),e.Point=ne,ie=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=S(e),this.height=S(t)}return e.prototype.equals=function(t){return t instanceof e&&this.width==t.width&&this.height==t.height},e.prototype.clone=function(){return new e(this.width,this.height)},e}(),e.Size=ie,re=function(){function e(e,t,n,i){this.left=S(e),this.top=S(t),this.width=S(n),this.height=S(i)}return Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return t instanceof e&&this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height},e.prototype.clone=function(){return new e(this.left,this.top,this.width,this.height)},e.fromBoundingRect=function(t){return null!=t.left?new e(t.left,t.top,t.width,t.height):null!=t.x?new e(t.x,t.y,t.width,t.height):void b(!1,"Invalid source rectangle.")},e.union=function(t,n){var i=Math.min(t.left,n.left),r=Math.min(t.top,n.top),o=Math.max(t.right,n.right),s=Math.max(t.bottom,n.bottom);return new e(i,r,o-i,s-r)},e.intersection=function(t,n){var i=Math.max(t.left,n.left),r=Math.max(t.top,n.top),o=Math.min(t.right,n.right),s=Math.min(t.bottom,n.bottom);return new e(i,r,o-i,s-r)},e.prototype.contains=function(t){if(t instanceof ne)return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom;if(t instanceof e){var n=t;return n.left>=this.left&&n.right<=this.right&&n.top>=this.top&&n.bottom<=this.bottom}b(!1,"Point or Rect expected.")},e.prototype.inflate=function(t,n){return new e(this.left-t,this.top-n,this.width+2*t,this.height+2*n)},e}(),e.Rect=re,oe=function(){function t(){}return t.addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.addMonths=function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,e.getDate())},t.addYears=function(e,t){return new Date(e.getFullYear()+t,e.getMonth(),e.getDate())},t.addHours=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t)},t.addMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+t)},t.addSeconds=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+t)},t.sameDate=function(e,t){return h(e)&&h(t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},t.sameTime=function(e,t){return h(e)&&h(t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()},t.equals=function(e,t){return h(e)&&h(t)&&e.getTime()==t.getTime()},t.fromDateTime=function(e,t){return e||t?(e||(e=t),t||(t=e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())):null},t.toFiscal=function(n,i){var r=e.culture.Globalize.calendar;return p(r.fiscalYearOffsets)?t.addMonths(n,-r.fiscalYearOffsets[i?0:1]):n},t.fromFiscal=function(n,i){var r=e.culture.Globalize.calendar;return p(r.fiscalYearOffsets)?t.addMonths(n,+r.fiscalYearOffsets[i?0:1]):n},t.newDate=function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.clone=function(e){return t.fromDateTime(e,e)},t}(),e.DateTime=oe,e.httpRequest=Q}(wijmo||(wijmo={})),function(e){"use strict";e.culture={Globalize:{numberFormat:{".":".",",":",",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}}};var t=function(){function t(){}return t.format=function(n,i,r,o){return e.isString(n)?n:e.isNumber(n)?(i=i||(n==Math.round(n)?"n0":"n2"),t.formatNumber(n,i,r,o)):e.isDate(n)?(i=i||"d",t.formatDate(n,i)):null!=n?n.toString():""},t.formatNumber=function(n,i,r,o){var s,a,l;e.asNumber(n),e.asString(i);var c,u=i?i.match(/([a-z])(\d*)(,*)(.*)/i):null,h=e.culture.Globalize.numberFormat,p=u?u[1].toLowerCase():"n",d=u&&u[2]?parseInt(u[2]):"c"==p?h.currency.decimals:n==Math.round(n)?0:2,f=u&&u[3]?3*u[3].length:0,g=u&&u[4]?u[4]:h.currency.symbol,m=h["."],v=h[","];if(f&&(n/=Math.pow(10,f)),"d"==p||"x"==p){for(c=Math.round(Math.abs(n)).toString("d"==p?10:16);c.length<d;)c="0"+c;return 0>n&&(c="-"+c),i&&"X"==i[0]&&(c=c.toUpperCase()),c}return"p"==p&&(n=t._mul100(n)),o&&(n=e.toFixed(n,d,!0)),c="c"==p||"p"==p?Math.abs(n).toFixed(d):n.toFixed(d),(r||"g"==p)&&c.indexOf(".")>-1&&(c=c.replace(/(\.[0-9]*?)0+$/g,"$1"),c=c.replace(/\.$/,"")),"."!=m&&(c=c.replace(".",m)),v&&("n"==p||"c"==p||"p"==p)&&(s=c.indexOf(m),a=/\B(?=(\d\d\d)+(?!\d))/g,c=s>-1?c.substr(0,s).replace(a,v)+c.substr(s):c.replace(a,v)),"c"==p&&(l=h.currency.pattern[0>n?0:1],c=l.replace("n",c).replace("$",g)),"p"==p&&(l=h.percent.pattern[0>n?0:1],c=l.replace("n",c)),c},t.formatDate=function(n,i){var r,o,s;switch(n=e.asDate(n),i){case"r":case"R":return n.toUTCString();case"u":return n.toISOString().replace(/\.\d{3}/,"")}for(i=t._expandFormat(i),r=t._parseDateFormat(i),o="",s=0;s<r.length;s++)o+=t._formatDatePart(n,i,r[s]);return o},t.parseInt=function(e,n){return Math.round(t.parseFloat(e,n))},t.parseFloat=function(t,n){var i=t.indexOf("-")>-1||t.indexOf("(")>-1&&t.indexOf(")")>-1?-1:1,r=t.indexOf("%")>-1?.01:1,o=n?n.match(/,+/):null,s=o?3*o[0].length:0;if(n&&("x"==n[0]||"X"==n[0]))return t=t.replace(/[^0-9a-f]+.*$/gi,""),parseInt(t,16)*i*r*Math.pow(10,s);var a=e.culture.Globalize.numberFormat["."],l=new RegExp("[^\\d\\"+a+"]","g"),c=t.replace(l,"").replace(a,".");return parseFloat(c)*i*r*Math.pow(10,s)},t.parseDate=function(n,i){var r,o,s,a,l,c;if(n=e.asString(n),!n)return null;if("u"==i)return new Date(n);if("R"==i||"r"==i)return r=/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/,o=n.match(r),o[1]||o[5]?(s=o[1]?new Date(parseInt(o[2]),parseInt(o[3])-1,parseInt(o[4])):new Date,o[5]&&(s.setHours(parseInt(o[6])),s.setMinutes(parseInt(o[7])),s.setSeconds(o[8]?parseInt(o[9]):0))):s=new Date(n),isNaN(s.getTime())?null:s;i=t._expandFormat(i?i:"d");var u,h,p,d,f,g=e.culture.Globalize.calendar,m=t._CJK,v=new RegExp("(\\"+g["/"]+")|(\\"+g[":"]+")|(\\d+)|(["+m+"\\.]{2,})|(["+m+"]+)","gi"),y=n.match(v),_=t._parseDateFormat(i),w=0,b=-1,C=0,x=1,S=0,E=0,P=0,k=0,T=-1;if(!(y&&y.length&&_&&_.length))return null;for(a=0;a<_.length&&y;a++){var $=a-w,D=$>-1&&$<y.length?y[$]:"",A=_[a].length;switch(_[a]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":f=_[a];case"yyyy":case"yyy":case"yy":case"y":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),b=parseInt(D);break;case"MMMM":case"MMM":for(d=!0,l=D.toLowerCase(),C=-1,c=0;12>c;c++)if(0==g.months[c].toLowerCase().indexOf(l)){C=c;break}if(C>-1)break;case"MM":case"M":d=!0,A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),C=parseInt(D)-1;break;case"dddd":case"ddd":u=!0;break;case"dd":case"d":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),x=parseInt(D),h=!0;break;case"hh":case"h":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),S=parseInt(D),S=12==S?0:S;break;case"HH":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),S=parseInt(D);break;case"H":S=parseInt(D);break;case"mm":case"m":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),E=parseInt(D);break;case"ss":case"s":A>1&&D.length>A&&(y[$]=D.substr(A),D=D.substr(0,A),w++),P=parseInt(D);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":k=parseInt(D)/Math.pow(10,A-3);break;case"tt":case"t":D=D.toUpperCase(),(g.pm[0]&&D==g.pm[0]&&12>S||g.pm[1]&&D==g.pm[1]&&12>S)&&(S+=12);break;case"q":case"Q":case"u":case"U":p=!0;break;case"ggg":case"gg":case"g":T=g.eras.length>1?t._getEra(D,g):-1;break;case g["/"]:case g[":"]:if(D&&D!=_[a])return null;break;case"K":break;default:t._unquote(_[a])!=D&&w++}}if(d&&h&&(isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0)),0>C||C>11||isNaN(C)||0>x||x>31||isNaN(x)||0>S||S>24||isNaN(S)||0>E||E>60||isNaN(E)||0>P||P>60||isNaN(P))return null;if(f){if(!d)return null;s=new Date(b,C),s=e.DateTime.fromFiscal(s,"E"==f[0]),b=s.getFullYear(),C=s.getMonth()}return u&&!h?null:p&&!d?null:(0>b&&(b=(new Date).getFullYear()),T>-1?b=b+g.eras[T].start.getFullYear()-1:100>b&&(b+=b>=30?1900:2e3),s=new Date(b,C,x,S,E+0,P,k),isNaN(s.getTime())?null:s)},t.getFirstDayOfWeek=function(){var t=e.culture.Globalize.calendar.firstDay;return t?t:0},t.getNumberDecimalSeparator=function(){var t=e.culture.Globalize.numberFormat["."];return t?t:"."},t._unquote=function(e){return e.length>1&&e[0]==e[e.length-1]&&("'"==e[0]||'"'==e[0])?e.substr(1,e.length-2):e},t._parseDateFormat=function(e){var n,i,r,o,s;if(e in t._dateFomatParts)return t._dateFomatParts[e];for(n=[],i="",r=0;r>-1&&r<e.length;r++)if(s=e[r],("'"==s||'"'==s)&&(o=e.indexOf(s,r+1),o>-1))n.push(e.substring(r,o+1)),r=o;else{for(o=r+1;o<e.length&&e[o]==s;o++);n.push(e.substring(r,o)),r=o-1}return t._dateFomatParts[e]=n,n},t._formatDatePart=function(n,i,r){var o,s,a=e.culture.Globalize.calendar,l=0,c=0,u=0,h=r.length;switch(r){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":return o="E"==r[0]?e.DateTime.toFiscal(n,!0):"e"==r[0]?e.DateTime.toFiscal(n,!1):n,c=o.getFullYear(),a.eras.length>1&&i.indexOf("g")>-1&&(l=t._getEra(n,a),l>-1&&(c=c-a.eras[l].start.getFullYear()+1)),t._zeroPad(c,4).substr(4-r.length);case"MMMM":return a.months[n.getMonth()];case"MMM":return a.monthsAbbr[n.getMonth()];case"MM":case"M":return t._zeroPad(n.getMonth()+1,h);case"dddd":return a.days[n.getDay()];case"ddd":return a.daysAbbr[n.getDay()];case"dd":return t._zeroPad(n.getDate(),2);case"d":return n.getDate().toString();case"hh":case"h":return t._zeroPad(t._h12(n),h);case"HH":case"H":return t._zeroPad(n.getHours(),h);case"mm":case"m":return t._zeroPad(n.getMinutes(),h);case"ss":case"s":return t._zeroPad(n.getSeconds(),h);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return u=n.getMilliseconds()*Math.pow(10,h-3),"f"==r[0]?t._zeroPad(u,h):u.toFixed(0);case"tt":return n.getHours()<12?a.am[0]:a.pm[0];case"t":return n.getHours()<12?a.am[1]:a.pm[1];case"q":case"Q":return(Math.floor(n.getMonth()/3)+1).toString();case"u":case"U":return o=e.DateTime.toFiscal(n,"U"==r),(Math.floor(o.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":return a.eras.length>1&&(l=t._getEra(n,a),l>-1)?"ggg"==r?a.eras[l].name:"gg"==r?a.eras[l].name[0]:a.eras[l].symbol:a.eras[0];case":":case"/":return a[r];case"K":return s=n.toString().match(/(\+|\-)(\d{2})(\d{2})/),s?s[1]+s[2]+s[3]:""}return h>1&&r[0]==r[h-1]&&('"'==r[0]||"'"==r[0])?r.substr(1,h-2):r},t._getEra=function(t,n){var i;if(e.isDate(t)){for(i=0;i<n.eras.length;i++)if(t>=n.eras[i].start)return i}else if(e.isString(t))for(i=0;i<n.eras.length;i++)if(n.eras[i].name&&(0==n.eras[i].name.indexOf(t)||0==n.eras[i].symbol.indexOf(t)))return i;return-1},t._expandFormat=function(t){var n=e.culture.Globalize.calendar.patterns[t];return n?n:t},t._zeroPad=function(e,t){var n=e.toFixed(0),i=t-n.length+1;return i>0?Array(i).join("0")+n:n},t._h12=function(t){var n=e.culture.Globalize.calendar,i=t.getHours();return n.am&&n.am[0]&&(i%=12,0==i&&(i=12)),i},t._mul100=function(e){var t=e.toString(),n=t.indexOf(".");return 0>n?t+="00":(n+=2,t=t.replace(".","")+"00",t=t.substr(0,n)+"."+t.substr(n)),parseFloat(t)},t._CJK="a-z"+"u00c0-u017fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u")+"u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff".replace(/u/g,"\\u"),t._dateFomatParts={},t}();e.Globalize=t}(wijmo||(wijmo={})),function(e){"use strict";var t=function(){function e(e){this.path=e}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(e){var t,n,i;for(this._path=e,this._parts=e?e.split("."):[],t=0;t<this._parts.length;t++)n=this._parts[t],i=n.indexOf("["),i>-1&&(this._parts[t]=n.substr(0,i),this._parts.splice(++t,0,parseInt(n.substr(i+1))));this._key=1==this._parts.length?this._parts[0]:null},enumerable:!0,configurable:!0}),e.prototype.getValue=function(e){if(e){if(this._key)return e[this._key];if(this._path in e)return e[this._path];for(var t=0;t<this._parts.length&&e;t++)e=e[this._parts[t]]}return e},e.prototype.setValue=function(e,t){if(e){if(this._path in e)return void(e[this._path]=t);for(var n=0;n<this._parts.length-1;n++)if(e=e[this._parts[n]],null==e)return;e[this._parts[this._parts.length-1]]=t}},e}();e.Binding=t}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){"use strict";var t,n,i,r,o=function(){function e(e,t){this.handler=e,this.self=t}return e}(),s=function(){function n(){this._handlers=[]}return n.prototype.addHandler=function(t,n){e.asFunction(t),this._handlers.push(new o(t,n))},n.prototype.removeHandler=function(t,n){var i,r;for(e.asFunction(t),i=0;i<this._handlers.length&&(r=this._handlers[i],r.handler!=t&&null!=t||r.self!=n&&null!=n||(this._handlers.splice(i,1),!t||!n));i++);},n.prototype.removeAllHandlers=function(){this._handlers.length=0},n.prototype.raise=function(e,n){var i,r;for(void 0===n&&(n=t.empty),i=0;i<this._handlers.length;i++)r=this._handlers[i],r.handler.call(r.self,e,n)},Object.defineProperty(n.prototype,"hasHandlers",{get:function(){return this._handlers.length>0},enumerable:!0,configurable:!0}),n}();e.Event=s,t=function(){function e(){}return e.empty=new e,e}(),e.EventArgs=t,n=function(e){function t(){e.apply(this,arguments),this.cancel=!1}return __extends(t,e),t}(t),e.CancelEventArgs=n,i=function(e){function t(t,n,i){e.call(this),this._name=t,this._oldVal=n,this._newVal=i}return __extends(t,e),Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oldValue",{get:function(){return this._oldVal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newValue",{get:function(){return this._newVal},enumerable:!0,configurable:!0}),t}(t),e.PropertyChangedEventArgs=i,r=function(e){function t(t){e.call(this),this._xhr=t}return __extends(t,e),Object.defineProperty(t.prototype,"request",{get:function(){return this._xhr},enumerable:!0,configurable:!0}),t}(n),e.RequestErrorEventArgs=r}(wijmo||(wijmo={})),function(e){"use strict";var t=function(){function t(n,i,r){var o,s,a,l=this;if(void 0===i&&(i=null),void 0===r&&(r=!1),this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new e.Event,this.lostFocus=new e.Event,e.assert(null==t.getControl(n),"Element is already hosting a control."),o=e.getElement(n),e.assert(null!=o,"Cannot find the host element."),this._orgOuter=o.outerHTML,this._orgInner=o.innerHTML,this._orgTag=o.tagName,("INPUT"==o.tagName||"SELECT"==o.tagName)&&(o=this._replaceWithDiv(o)),this._e=o,o[t._DATA_KEY]=this,1==r&&(this._szCtl=new e.Size(o.offsetWidth,o.offsetHeight),s=this._handleResize.bind(this),this.addEventListener(window,"resize",s)),this.addEventListener(o,"focus",function(){setTimeout(function(){l._updateFocusState()})},!0),this.addEventListener(o,"blur",function(){setTimeout(function(){l._updateFocusState()},20)},!0),a=this._handleDisabled.bind(this),this.addEventListener(o,"mousedown",a,!0),this.addEventListener(o,"mouseup",a,!0),this.addEventListener(o,"click",a,!0),this.addEventListener(o,"dblclick",a,!0),this.addEventListener(o,"keydown",a,!0),this.addEventListener(o,"wheel",a,!0),null==t._touching&&(t._touching=!1,"ontouchstart"in window||"onpointerdown"in window)){var c=document.body,u=this._handleTouchStart,h=this._handleTouchEnd;"ontouchstart"in window?(c.addEventListener("touchstart",u),c.addEventListener("touchend",h),c.addEventListener("touchcancel",h),c.addEventListener("touchleave",h)):"onpointerdown"in window&&(c.addEventListener("pointerdown",u),c.addEventListener("pointerup",h),c.addEventListener("pointerout",h),c.addEventListener("pointercancel",h),c.addEventListener("pointerleave",h))}}return t.prototype.getTemplate=function(){for(var e,t=Object.getPrototypeOf(this);t;t=Object.getPrototypeOf(t))if(e=t.constructor.controlTemplate)return e;return null},t.prototype.applyTemplate=function(t,n,i,r){var o,s,a,l,c,u,h,p,d=this._e;t&&e.addClass(d,t),o=null,n&&(o=e.createElement(n,d));var f=d.querySelectorAll("input"),g=1==f.length?f[0]:null,m=d.attributes;if(g&&m)for(s=0;s<m.length;s++)m[s].name.match(/name|autofocus|autocomplete|minlength|maxlength|pattern/i)&&g.setAttribute(m[s].name,m[s].value);if(g&&d.id){var v=document.querySelector('label[for="'+d.id+'"]'),y=d.id+"_input",_=y;if(v instanceof HTMLLabelElement){for(s=0;null!=document.getElementById(_);s++)_=y+s;g.id=_,v.htmlFor=_}}if(g&&(a=document.createEvent("HTMLEvents"),l=g.value,a.initEvent("change",!0,!1),this.addEventListener(g,"input",function(){l=g.value},!0),this.gotFocus.addHandler(function(){l=g.value}),this.lostFocus.addHandler(function(){l!=g.value&&g.dispatchEvent(a)})),d.getAttribute("tabindex")||(d.tabIndex=null!=g?-1:0),this._updateState(),i)for(c in i){if(u=i[c],this[c]=o.querySelector('[wj-part="'+u+'"]'),null==this[c]&&o.getAttribute("wj-part")==u&&(this[c]=o),null==this[c])throw'Missing template part: "'+u+'"';u==r&&(h="name",p=d.attributes[h],p&&p.value&&this[c].setAttribute(h,p.value),h="accesskey",p=d.attributes[h],p&&p.value&&(this[c].setAttribute(h,p.value),d.removeAttribute(h)))}return o},t.prototype.dispose=function(){for(var n,i,r,o,s=this._e.querySelectorAll(".wj-control"),a=0;a<s.length;a++)n=t.getControl(s[a]),n&&n.dispose();this._toInv&&clearTimeout(this._toInv),this.removeEventListener();for(r in this)r.length>2&&0==r.indexOf("on")&&(o=this[r[2].toLowerCase()+r.substr(3)],o instanceof e.Event&&o.removeAllHandlers());if(i=this.collectionView,i instanceof e.collections.CollectionView)for(r in i)o=i[r],o instanceof e.Event&&o.removeHandler(null,this);this._e.parentNode&&(this._e.outerHTML=this._orgOuter),this._e[t._DATA_KEY]=null,this._e=this._orgOuter=this._orgInner=this._orgTag=null},t.getControl=function(n){var i=e.getElement(n);return i?e.asType(i[t._DATA_KEY],t,!0):null},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this._e&&this._e.focus()},t.prototype.containsFocus=function(){var n,i,r,o,s;if(!this._e)return!1;for(n=this._e.querySelectorAll(".wj-control"),i=0;i<n.length;i++)if(r=t.getControl(n[i]),r&&r!=this&&r.containsFocus())return!0;return o=e.getActiveElement(),s=t.getControl(e.closest(o,".wj-control.wj-popup")),s&&s.owner&&e.contains(this._e,s.owner)?!0:e.contains(this._e,o)},t.prototype.invalidate=function(e){var n=this;void 0===e&&(e=!0),this._fullUpdate=this._fullUpdate||e,this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this.isUpdating||(this._toInv=setTimeout(function(){n.refresh(n._fullUpdate)},t._REFRESH_INTERVAL))},t.prototype.refresh=function(e){void 0===e&&(e=!0),!this.isUpdating&&this._toInv&&(clearTimeout(this._toInv),this._toInv=null,this._fullUpdate=!1)},t.invalidateAll=function(e){var n,i;if(e||(e=document.body),e.children)for(n=0;n<e.children.length;n++)t.invalidateAll(e.children[n]);i=t.getControl(e),i&&i.invalidate()},t.refreshAll=function(e){var n,i;if(e||(e=document.body),e.children)for(n=0;n<e.children.length;n++)t.refreshAll(e.children[n]);i=t.getControl(e),i&&i.refresh()},t.disposeAll=function(e){var n,i=t.getControl(e);if(i)i.dispose();else if(e.children)for(n=0;n<e.children.length;n++)t.disposeAll(e.children[n])},t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this.invalidate()},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(e){try{this.beginUpdate(),e()}finally{this.endUpdate()}},Object.defineProperty(t.prototype,"isTouching",{get:function(){return t._touching},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(t){t=e.asBoolean(t,!0),t!=this.isDisabled&&e.enable(this._e,!t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return e._deprecated("disabled","isDisabled"),this.isDisabled},set:function(t){e._deprecated("disabled","isDisabled"),this.isDisabled=t},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){t&&(this.beginUpdate(),e.copy(this,t),this.endUpdate())},t.prototype.addEventListener=function(e,t,n,i){void 0===i&&(i=!1),e&&(e.addEventListener(t,n,i),null==this._listeners&&(this._listeners=[]),this._listeners.push({target:e,type:t,fn:n,capture:i}))},t.prototype.removeEventListener=function(e,t,n){var i,r,o=0;if(this._listeners)for(i=0;i<this._listeners.length;i++)r=this._listeners[i],(null==e||e==r.target)&&(null==t||t==r.type)&&(null==n||n==r.capture)&&(r.target.removeEventListener(r.type,r.fn,r.capture),this._listeners.splice(i,1),i--,o++);return o},t.prototype.onGotFocus=function(e){this.gotFocus.raise(this,e)},t.prototype.onLostFocus=function(e){this.lostFocus.raise(this,e)},t.prototype._handleResize=function(){if(this._e.parentElement){var t=new e.Size(this._e.offsetWidth,this._e.offsetHeight);t.equals(this._szCtl)||(this._szCtl=t,this.invalidate())}},t.prototype._updateFocusState=function(){var e=this;setTimeout(function(){for(var n,i,r=e._e;r;r=r.parentElement)n=t.getControl(r),n&&(i=n.containsFocus(),i!=n._focus&&(n._focus=i,i?n.onGotFocus():n.onLostFocus(),n._updateState()))})},t.prototype._updateState=function(){var t,n,i=this.hostElement;i&&(e.toggleClass(i,"wj-state-focused",this.containsFocus()),t=i.querySelector("input"),t instanceof HTMLInputElement&&(e.toggleClass(i,"wj-state-empty",0==t.value.length),e.toggleClass(i,"wj-state-readonly",t.readOnly),n=t.validationMessage,e.toggleClass(i,"wj-state-invalid",n&&n.length>0)))},t.prototype._handleTouchStart=function(e){(null==e.pointerType||"touch"==e.pointerType)&&(t._touching=!0)},t.prototype._handleTouchEnd=function(e){(null==e.pointerType||"touch"==e.pointerType)&&setTimeout(function(){t._touching=!1},400)},t.prototype._handleDisabled=function(e){this.isDisabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},t.prototype._replaceWithDiv=function(e){var t,n,i,r=document.createElement("div");for(e.parentElement.replaceChild(r,e),r.innerHTML=e.innerHTML,t=e.attributes,n=0;n<t.length;n++)i=t[n].name,t[n].name.match(/id|style|class/i)&&r.setAttribute(i,t[n].value);return r},t._DATA_KEY="wj-Control",t._REFRESH_INTERVAL=10,t}();e.Control=t}(wijmo||(wijmo={})),function(e){"use strict";function t(t,i,r){var o,s,a,l=0,c=0,u=0,h=0,p=null,d=null,f=r?new e.Binding(r):null;if(t=e.asEnum(t,n),t==n.CntAll)return i.length;for(o=0;o<i.length;o++)s=i[o],f&&(s=f.getValue(s)),null!=s&&(l++,(null==p||p>s)&&(p=s),(null==d||s>d)&&(d=s),e.isNumber(s)&&!isNaN(s)?(c++,u+=s,h+=s*s):e.isBoolean(s)&&(c++,1==s&&(u++,h++)));switch(a=0==c?0:u/c,t){case n.Avg:return a;case n.Cnt:return l;case n.Max:return d;case n.Min:return p;case n.Rng:return d-p;case n.Sum:return u;case n.VarPop:return 1>=c?0:h/c-a*a;case n.StdPop:return 1>=c?0:Math.sqrt(h/c-a*a);case n.Var:return 1>=c?0:(h/c-a*a)*c/(c-1);case n.Std:return 1>=c?0:Math.sqrt((h/c-a*a)*c/(c-1))}throw"Invalid aggregate type."}!function(e){e[e.None=0]="None",e[e.Sum=1]="Sum",e[e.Cnt=2]="Cnt",e[e.Avg=3]="Avg",e[e.Max=4]="Max",e[e.Min=5]="Min",e[e.Rng=6]="Rng",e[e.Std=7]="Std",e[e.Var=8]="Var",e[e.StdPop=9]="StdPop",e[e.VarPop=10]="VarPop",e[e.CntAll=11]="CntAll"}(e.Aggregate||(e.Aggregate={}));var n=e.Aggregate;e.getAggregate=t}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i,r,o,s,a;!function(e){e[e.Add=0]="Add",e[e.Remove=1]="Remove",e[e.Change=2]="Change",e[e.Reset=3]="Reset"}(t.NotifyCollectionChangedAction||(t.NotifyCollectionChangedAction={})),n=t.NotifyCollectionChangedAction,i=function(e){function t(t,i,r){void 0===t&&(t=n.Reset),void 0===i&&(i=null),void 0===r&&(r=-1),e.call(this),this.action=t,this.item=i,this.index=r}return __extends(t,e),t.reset=new t(n.Reset),t}(e.EventArgs),t.NotifyCollectionChangedEventArgs=i,r=function(){function t(t,n){this._bnd=new e.Binding(t),this._asc=n}return Object.defineProperty(t.prototype,"property",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ascending",{get:function(){return this._asc},enumerable:!0,configurable:!0}),t}(),t.SortDescription=r,o=function(e){function t(t){e.call(this),this.newPageIndex=t}return __extends(t,e),t}(e.CancelEventArgs),t.PageChangingEventArgs=o,s=function(){function e(){}return e.prototype.groupNameFromItem=function(){return""},e.prototype.namesMatch=function(e,t){return e===t},e}(),t.GroupDescription=s,a=function(t){function n(n,i){t.call(this),this._bnd=new e.Binding(n),this._converter=i}return __extends(n,t),Object.defineProperty(n.prototype,"propertyName",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),n.prototype.groupNameFromItem=function(e){return this._converter?this._converter(e,this.propertyName):this._bnd.getValue(e)},n.prototype.namesMatch=function(e,t){return e===t},n}(s),t.PropertyGroupDescription=a}(t=e.collections||(e.collections={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i=function(){function e(){this.length=0,Array.apply(this,arguments)}return e.prototype.pop=function(){return null},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[+t]=arguments[t];return 0},e.prototype.splice=function(){return null},e.prototype.slice=function(){return null},e.prototype.indexOf=function(){return-1},e.prototype.sort=function(){return null},e}();t.ArrayBase=i,i.prototype=Array.prototype,n=function(n){function i(t){if(n.call(this),this._updating=0,this.collectionChanged=new e.Event,t){t=e.asArray(t),this._updating++;for(var i=0;i<t.length;i++)this.push(t[i]);this._updating--}}return __extends(i,n),i.prototype.push=function(){for(var e,i,r=[],o=0;o<arguments.length;o++)r[+o]=arguments[o];for(e=this.length,i=0;r&&i<r.length;i++)e=n.prototype.push.call(this,r[i]),this._updating||this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Add,r[i],e-1);return e},i.prototype.pop=function(){var e=n.prototype.pop.call(this);return this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Remove,e,this.length),e},i.prototype.splice=function(e,i,r){var o;return i&&r?(o=n.prototype.splice.call(this,e,i,r),1==i?this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Change,r,e):this._raiseCollectionChanged(),o):r?(o=n.prototype.splice.call(this,e,0,r),this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Add,r,e),o):(o=n.prototype.splice.call(this,e,i),1==i?this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Remove,o[0],e):this._raiseCollectionChanged(),o)},i.prototype.slice=function(e,t){return n.prototype.slice.call(this,e,t)},i.prototype.indexOf=function(e,t){return n.prototype.indexOf.call(this,e,t)},i.prototype.sort=function(e){var t=n.prototype.sort.call(this,e);return this._raiseCollectionChanged(),t},i.prototype.insert=function(e,t){this.splice(e,0,t)},i.prototype.remove=function(e){var t=this.indexOf(e);return t>-1?(this.removeAt(t),!0):!1},i.prototype.removeAt=function(e){this.splice(e,1)},i.prototype.setAt=function(e,t){e>this.length&&(this.length=e),this.splice(e,1,t)},i.prototype.clear=function(){0!==this.length&&(this.splice(0,this.length),this._raiseCollectionChanged())},i.prototype.beginUpdate=function(){this._updating++},i.prototype.endUpdate=function(){this._updating>0&&(this._updating--,0==this._updating&&this._raiseCollectionChanged())},Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),i.prototype.deferUpdate=function(e){try{this.beginUpdate(),e()}finally{this.endUpdate()}},i.prototype.implementsInterface=function(e){return"INotifyCollectionChanged"==e},i.prototype.onCollectionChanged=function(e){void 0===e&&(e=t.NotifyCollectionChangedEventArgs.reset),this.isUpdating||this.collectionChanged.raise(this,e)},i.prototype._raiseCollectionChanged=function(e,n,i){if(void 0===e&&(e=t.NotifyCollectionChangedAction.Reset),!this.isUpdating){var r=new t.NotifyCollectionChangedEventArgs(e,n,i);this.onCollectionChanged(r)}},i}(i),t.ObservableArray=n}(t=e.collections||(e.collections={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n,i=function(){function i(n,i){var r=this;this._idx=-1,this._srtDsc=new t.ObservableArray,this._grpDesc=new t.ObservableArray,this._newItem=null,this._edtItem=null,this._pgSz=0,this._pgIdx=0,this._updating=0,this._stableSort=!1,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._trackChanges=!1,this._chgAdded=new t.ObservableArray,this._chgRemoved=new t.ObservableArray,this._chgEdited=new t.ObservableArray,this.collectionChanged=new e.Event,this.sourceCollectionChanging=new e.Event,this.sourceCollectionChanged=new e.Event,this.currentChanged=new e.Event,this.currentChanging=new e.Event,this.pageChanged=new e.Event,this.pageChanging=new e.Event,this._srtDsc.collectionChanged.addHandler(function(){for(var n=r._srtDsc,i=0;i<n.length;i++)e.assert(n[i]instanceof t.SortDescription,"sortDescriptions array must contain SortDescription objects.");r.canSort&&r.refresh()}),this._grpDesc.collectionChanged.addHandler(function(){for(var n=r._grpDesc,i=0;i<n.length;i++)e.assert(n[i]instanceof t.GroupDescription,"groupDescriptions array must contain GroupDescription objects.");
r.canGroup&&r.refresh()}),this.sourceCollection=n?n:new t.ObservableArray,i&&(this.beginUpdate(),e.copy(this,i),this.endUpdate())}return i.prototype._copy=function(n,i){var r,o,s;if("sortDescriptions"==n){for(this.sortDescriptions.clear(),r=e.asArray(i),o=0;o<r.length;o++)s=r[o],e.isString(s)&&(s=new t.SortDescription(s,!0)),this.sortDescriptions.push(s);return!0}if("groupDescriptions"==n){for(this.groupDescriptions.clear(),r=e.asArray(i),o=0;o<r.length;o++)s=r[o],e.isString(s)&&(s=new t.PropertyGroupDescription(s)),this.groupDescriptions.push(s);return!0}return!1},Object.defineProperty(i.prototype,"newItemCreator",{get:function(){return this._itemCreator},set:function(t){this._itemCreator=e.asFunction(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(t){t!=this._srtCvt&&(this._srtCvt=e.asFunction(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortComparer",{get:function(){return this._srtCmp},set:function(t){t!=this._srtCmp&&(this._srtCmp=e.asFunction(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useStableSort",{get:function(){return this._stableSort},set:function(t){this._stableSort=e.asBoolean(t)},enumerable:!0,configurable:!0}),i.prototype.getAggregate=function(t,n,i){var r=i?this._pgView:this._view;return e.getAggregate(t,r,n)},Object.defineProperty(i.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(t){this._trackChanges=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemsAdded",{get:function(){return this._chgAdded},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemsRemoved",{get:function(){return this._chgRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemsEdited",{get:function(){return this._chgEdited},enumerable:!0,configurable:!0}),i.prototype.clearChanges=function(){this._chgAdded.clear(),this._chgRemoved.clear(),this._chgEdited.clear()},i.prototype.implementsInterface=function(e){switch(e){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(i.prototype,"getError",{get:function(){return this._getError},set:function(t){this._getError=e.asFunction(t)},enumerable:!0,configurable:!0}),i.prototype.onCollectionChanged=function(e){void 0===e&&(e=t.NotifyCollectionChangedEventArgs.reset),this._committing||this._canceling||e.action!=t.NotifyCollectionChangedAction.Change||e.item==this.currentEditItem||this._trackItemChanged(e.item),this.collectionChanged.raise(this,e)},i.prototype._raiseCollectionChanged=function(e,n,i){void 0===e&&(e=t.NotifyCollectionChangedAction.Reset);var r=new t.NotifyCollectionChangedEventArgs(e,n,i);this.onCollectionChanged(r)},i.prototype.onSourceCollectionChanging=function(e){return this.sourceCollectionChanging.raise(this,e),!e.cancel},i.prototype.onSourceCollectionChanged=function(e){this.sourceCollectionChanged.raise(this,e)},Object.defineProperty(i.prototype,"canFilter",{get:function(){return this._canFilter},set:function(t){this._canFilter=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canGroup",{get:function(){return this._canGroup},set:function(t){this._canGroup=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canSort",{get:function(){return this._canSort},set:function(t){this._canSort=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentItem",{get:function(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(e){this.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPosition",{get:function(){return this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter!=t&&(this._filter=e.asFunction(t),this.canFilter&&this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupDescriptions",{get:function(){return this._grpDesc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEmpty",{get:function(){return!this._pgView||!this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortDescriptions",{get:function(){return this._srtDsc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sourceCollection",{get:function(){return this._src},set:function(t){if(t!=this._src){if(!this.onSourceCollectionChanging(new e.CancelEventArgs))return;var n=this.currentPosition;this.commitEdit(),this.commitNew(),null!=this._ncc&&this._ncc.collectionChanged.removeHandler(this._sourceChanged),this._src=e.asArray(t,!1),this._ncc=e.tryCast(this._src,"INotifyCollectionChanged"),this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this),this.clearChanges(),this.refresh(),this.moveCurrentToFirst(),this.onSourceCollectionChanged(),this.currentPosition<0&&n>-1&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),i.prototype._sourceChanged=function(){this._updating<=0&&this.refresh()},i.prototype.contains=function(e){return this._pgView.indexOf(e)>-1},i.prototype.moveCurrentTo=function(e){return this.moveCurrentToPosition(this._pgView.indexOf(e))},i.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},i.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},i.prototype.moveCurrentToPrevious=function(){return this._idx>0?this.moveCurrentToPosition(this._idx-1):!1},i.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},i.prototype.moveCurrentToPosition=function(t){if(t>=-1&&t<this._pgView.length){var n=new e.CancelEventArgs;this._idx!=t&&this.onCurrentChanging(n)&&(this._edtItem&&this._pgView[t]!=this._edtItem&&this.commitEdit(),this._newItem&&this._pgView[t]!=this._newItem&&this.commitNew(),this._idx=t,this.onCurrentChanged())}return this._idx==t},i.prototype.refresh=function(){this._updating>0||this._newItem||this._edtItem||(this._performRefresh(),this.onCollectionChanged())},i.prototype._performRefresh=function(){var t,n=this.currentItem;this._view=this._src?this._filter&&this.canFilter?this._performFilter(this._src):this._srtDsc.length>0&&this.canSort?this._src.slice(0):this._src:[],this.canSort&&this._srtDsc.length>0&&this._performSort(this._view),this._groups=this.canGroup?this._createGroups(this._view):null,this._fullGroups=this._groups,this._groups&&(this._view=this._mergeGroupItems(this._groups)),this._pgIdx=e.clamp(this._pgIdx,0,this.pageCount-1),this._pgView=this._getPageView(),this._groups&&this.pageCount>1&&(this._groups=this._createGroups(this._pgView),this._mergeGroupItems(this._groups)),t=this._pgView.indexOf(n),0>t&&(t=Math.min(this._idx,this._pgView.length-1)),this._idx=t,this._digest=this._getGroupsDigest(this.groups),this.currentItem!==n&&this.onCurrentChanged()},i.prototype._performSort=function(e){var t,n,i;if(this._stableSort)for(t=e.map(function(e,t){return{item:e,index:t}}),n=this._compareItems(),t.sort(function(e,t){var i=n(e.item,t.item);return 0==i?e.index-t.index:i}),i=0;i<e.length;i++)e[i]=t[i].item;else e.sort(this._compareItems())},i.prototype._compareItems=function(){var e=this._srtDsc,t=this._srtCvt,n=this._srtCmp,i=!0,r=0;return function(o,s){for(var a,l,c=0;c<e.length;c++){var u=e[c],h=u._bnd.getValue(o),p=u._bnd.getValue(s);if(t&&(h=t(u,o,h,i),p=t(u,s,p,!1),i=!1),n&&(r=n(h,p),null!=r))return u.ascending?+r:-r;if(h!==h&&(h=null),p!==p&&(p=null),"string"==typeof h&&"string"==typeof p&&(a=h.toLowerCase(),l=p.toLowerCase(),a!=l&&(h=a,p=l)),null!=h&&null==p)return-1;if(null==h&&null!=p)return 1;if(r=p>h?-1:h>p?1:0,0!=r)return u.ascending?+r:-r}return 0}},i.prototype._performFilter=function(e){return this.canFilter&&this._filter?e.filter(this._filter,this):e},i.prototype.onCurrentChanged=function(t){void 0===t&&(t=e.EventArgs.empty),this.currentChanged.raise(this,t)},i.prototype.onCurrentChanging=function(e){return this.currentChanging.raise(this,e),!e.cancel},Object.defineProperty(i.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),i.prototype.beginUpdate=function(){this._updating++},i.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this.refresh()},Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),i.prototype.deferUpdate=function(e){try{this.beginUpdate(),e()}finally{this.endUpdate()}},Object.defineProperty(i.prototype,"canAddNew",{get:function(){return this._canAddNew},set:function(t){this._canAddNew=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canCancelEdit",{get:function(){return this._canCancelEdit},set:function(t){this._canCancelEdit=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRemove",{get:function(){return this._canRemove},set:function(t){this._canRemove=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentAddItem",{get:function(){return this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentEditItem",{get:function(){return this._edtItem},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isAddingNew",{get:function(){return null!=this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEditingItem",{get:function(){return null!=this._edtItem},enumerable:!0,configurable:!0}),i.prototype.editItem=function(e){e!=this._edtItem&&this.moveCurrentTo(e)&&(this.commitEdit(),this._edtItem=e,this._edtClone={},this._extend(this._edtClone,this._edtItem))},i.prototype.commitEdit=function(){var e,n,i,r=this._edtItem;null!=r&&(this._committing=!0,e=this._sameContent(r,this._edtClone),this._edtItem=null,this._edtClone=null,n=this._pgView.indexOf(r),i=this._digest,this._performRefresh(),e||this._trackItemChanged(r),this._pgView.indexOf(r)==n&&i==this._digest?this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Change,r,n):this._raiseCollectionChanged(),this._committing=!1)},i.prototype.cancelEdit=function(){var n,i=this._edtItem;if(null!=i){if(this._edtItem=null,!this.canCancelEdit)return void e.assert(!1,"cannot cancel edits (canCancelEdit == false).");if(n=this._src.indexOf(i),0>n||!this._edtClone)return;this._extend(this._src[n],this._edtClone),this._edtClone=null,this._canceling=!0,this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Change,i,n),this._canceling=!1}},i.prototype.addNew=function(){var n,i,r;if(arguments.length>0&&e.assert(!1,"addNew does not take any parameters, it creates the new items."),this.commitEdit(),this.commitNew(),!this.canAddNew)return e.assert(!1,"cannot add items (canAddNew == false)."),null;if(n=null,i=this.sourceCollection,n=this.newItemCreator?this.newItemCreator():i&&i.length?new i[0].constructor:{},null!=n){if(this._newItem=n,this._updating++,this._src.push(n),this._updating--,this._pgView!=this._src&&this._pgView.push(n),this.groups&&this.groups.length)for(r=this.groups[this.groups.length-1],r.items.push(n);r.groups&&r.groups.length;)r=r.groups[r.groups.length-1],r.items.push(n);this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Add,n,this._pgView.length-1),this.moveCurrentTo(n)}return this._newItem},i.prototype.commitNew=function(){var e,n,i,r=this._newItem;null!=r&&(this._newItem=null,e=this._pgView.indexOf(r),n=this._digest,this._performRefresh(),1==this._trackChanges&&(i=this._chgEdited.indexOf(r),i>-1&&this._chgEdited.removeAt(i),this._chgAdded.indexOf(r)<0&&this._chgAdded.push(r)),this._pgView.indexOf(r)==e&&n==this._digest?this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Change,r,e):this._raiseCollectionChanged())},i.prototype.cancelNew=function(){var e=this._newItem;null!=e&&this.remove(e)},i.prototype.remove=function(n){var i,r,o,s,a,l,c,u,h=n==this._newItem;return h&&(this._newItem=null),n==this._edtItem&&this.cancelEdit(),this.canRemove?(i=this._src.indexOf(n),void(i>-1&&(r=this.currentItem,this._updating++,this._src.splice(i,1),this._updating--,o=this._digest,this._performRefresh(),1==this._trackChanges&&(s=this._chgAdded.indexOf(n),s>-1&&this._chgAdded.removeAt(s),a=this._chgEdited.indexOf(n),a>-1&&this._chgEdited.removeAt(a),l=this._chgRemoved.indexOf(n),0>l&&!h&&0>s&&this._chgRemoved.push(n)),c=this.sortDescriptions.length>0,u=this.pageSize>0&&this._pgIdx>-1,c||u||o!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():this._raiseCollectionChanged(t.NotifyCollectionChangedAction.Remove,n,i),this.currentItem!==r&&this.onCurrentChanged()))):void e.assert(!1,"cannot remove items (canRemove == false).")},i.prototype.removeAt=function(t){t=e.asInt(t),this.remove(this._pgView[t])},i.prototype._trackItemChanged=function(e){var n,i;this._trackChanges&&(n=this._chgEdited.indexOf(e),0>n&&this._chgAdded.indexOf(e)<0?this._chgEdited.push(e):n>-1?(i=new t.NotifyCollectionChangedEventArgs(t.NotifyCollectionChangedAction.Change,e,n),this._chgEdited.onCollectionChanged(i)):(n=this._chgAdded.indexOf(e),n>-1&&(i=new t.NotifyCollectionChangedEventArgs(t.NotifyCollectionChangedAction.Change,e,n),this._chgAdded.onCollectionChanged(i))))},i.prototype._extend=function(e,t){for(var n in t)e[n]=t[n]},i.prototype._sameContent=function(e,t){for(var n in t)if(!this._sameValue(e[n],t[n]))return!1;for(n in e)if(!this._sameValue(e[n],t[n]))return!1;return!0},i.prototype._sameValue=function(t,n){return t==n||e.DateTime.equals(t,n)},Object.defineProperty(i.prototype,"canChangePage",{get:function(){return this._canChangePage},set:function(t){this._canChangePage=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPageChanging",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageIndex",{get:function(){return this._pgIdx},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageSize",{get:function(){return this._pgSz},set:function(t){t!=this._pgSz&&(this._pgSz=e.asInt(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalItemCount",{get:function(){return this._view.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0}),i.prototype.moveToFirstPage=function(){return this.moveToPage(0)},i.prototype.moveToLastPage=function(){return this.moveToPage(this.pageCount-1)},i.prototype.moveToNextPage=function(){return this.moveToPage(this.pageIndex+1)},i.prototype.moveToPage=function(n){var i,r=e.clamp(n,0,this.pageCount-1);return r!=this._pgIdx&&(this.canChangePage||e.assert(!1,"cannot change pages (canChangePage == false)."),i=new t.PageChangingEventArgs(r),this.onPageChanging(i)&&(this._pgIdx=r,this._pgView=this._getPageView(),this._idx=0,this.groupDescriptions&&0!=this.groupDescriptions.length?this.refresh():(this.onPageChanged(),this.onCollectionChanged()))),this._pgIdx==n},i.prototype.moveToPreviousPage=function(){return this.moveToPage(this.pageIndex-1)},i.prototype.onPageChanged=function(t){void 0===t&&(t=e.EventArgs.empty),this.pageChanged.raise(this,t)},i.prototype.onPageChanging=function(e){return this.pageChanging.raise(this,e),!e.cancel},i.prototype._getFullGroup=function(e){var t=this._getGroupByPath(this._fullGroups,e.level,e._path);return null!=t&&(e=t),e},i.prototype._getGroupByPath=function(e,t,n){for(var i,r=0;r<e.length;r++)if(i=e[r],i.level==t&&i._path==n||i.level<t&&0==n.indexOf(i._path)&&(i=this._getGroupByPath(i.groups,t,n),null!=i))return i;return null},i.prototype._getPageView=function(){if(this.pageSize<=0||this._pgIdx<0)return this._view;var e=this._pgSz*this._pgIdx,t=Math.min(e+this._pgSz,this._view.length);return this._view.slice(e,t)},i.prototype._createGroups=function(t){var n,i,r;if(!this._grpDesc||!this._grpDesc.length)return null;var o=[],s={},a=null;for(n=0;n<t.length;n++){var l=t[n],c=o,u=this._grpDesc.length,h="";for(i=0;u>i;i++){var p=this._grpDesc[i],d=p.groupNameFromItem(l,i),f=i==u-1;a=s[h],!a&&e.isPrimitive(d)&&(a={},s[h]=a),r=this._getGroup(p,c,a,d,i,f),h+="/"+d,r._path=h,f&&r.items.push(l),c=r.groups}}return o},i.prototype._getGroupsDigest=function(e){for(var t,n="",i=0;null!=e&&i<e.length;i++)t=e[i],n+="{"+t.name+":"+(t.items?t.items.length:"*"),t.groups.length>0&&(n+=",",n+=this._getGroupsDigest(t.groups)),n+="}";return n},i.prototype._mergeGroupItems=function(e){for(var t,n,i,r,o=[],s=0;s<e.length;s++){if(t=e[s],!t._isBottomLevel)for(n=this._mergeGroupItems(t.groups),i=0,r=n.length;r>i;i++)t._items.push(n[i]);for(i=0,r=t._items.length;r>i;i++)o.push(t._items[i])}return o},i.prototype._getGroup=function(t,i,r,o,s,a){var l,c,u;if(r&&e.isPrimitive(o)){if(l=r[o])return l}else for(c=0;c<i.length;c++)if(t.namesMatch(i[c].name,o))return i[c];return u=new n(t,o,s,a),i.push(u),r&&(r[o]=u),u},i}();t.CollectionView=i,n=function(){function t(e,t,n,i){this._gd=e,this._name=t,this._level=n,this._isBottomLevel=i,this._groups=[],this._items=[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBottomLevel",{get:function(){return this._isBottomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupDescription",{get:function(){return this._gd},enumerable:!0,configurable:!0}),t.prototype.getAggregate=function(t,n,r){var o=e.tryCast(r,i),s=o?o._getFullGroup(this):this;return e.getAggregate(t,s.items,n)},t}(),t.CollectionViewGroup=n}(t=e.collections||(e.collections={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){"use strict";var t,n,i=function(){function t(t){this._showAutoTipBnd=this._showAutoTip.bind(this),this._hideAutoTipBnd=this._hideAutoTip.bind(this),this._html=!0,this._gap=6,this._showAtMouse=!1,this._showDelay=500,this._hideDelay=0,this._tips=[],this.popup=new e.Event,e.copy(this,t)}return t.prototype.setTooltip=function(t,n){t=e.getElement(t),n=this._getContent(n);var i=this._indexOf(t);i>-1&&(this._detach(t),this._tips.splice(i,1)),n&&(this._attach(t),this._tips.push({element:t,content:n}))},t.prototype.show=function(i,r,o){var s,a;i=e.getElement(i),r=this._getContent(r),o||(o=e.Rect.fromBoundingRect(i.getBoundingClientRect())),s=t._eTip,s||(s=t._eTip=document.createElement("div"),e.addClass(s,"wj-tooltip"),s.style.visibility="none",document.body.appendChild(s)),this._setContent(r),a=new n(r),this.onPopup(a),a.content&&!a.cancel&&(this._setContent(a.content),s.style.minWidth="",o=new e.Rect(o.left-(s.offsetWidth-o.width)/2,o.top-this.gap,s.offsetWidth,o.height+2*this.gap),e.showPopup(s,o,!0),document.addEventListener("mousedown",this._hideAutoTipBnd))},t.prototype.hide=function(){t._eTip&&(t._eTip.style.visibility="hidden",t._eTip.innerHTML=""),document.removeEventListener("mousedown",this._hideAutoTipBnd)},Object.defineProperty(t.prototype,"isVisible",{get:function(){return t._eTip&&"hidden"!=t._eTip.style.visibility},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){this._html=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap=e.asNumber(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAtMouse",{get:function(){return this._showAtMouse},set:function(t){this._showAtMouse=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDelay",{get:function(){return this._showDelay},set:function(t){this._showDelay=e.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideDelay",{get:function(){return this._hideDelay},set:function(t){this._hideDelay=e.asInt(t)},enumerable:!0,configurable:!0}),t.prototype.onPopup=function(e){this.popup&&this.popup.raise(this,e)},t.prototype._indexOf=function(e){for(var t=0;t<this._tips.length;t++)if(this._tips[t].element==e)return t;return-1},t.prototype._attach=function(e){e.addEventListener("mouseenter",this._showAutoTipBnd),e.addEventListener("mouseleave",this._hideAutoTipBnd),e.addEventListener("click",this._showAutoTipBnd)},t.prototype._detach=function(e){e.removeEventListener("mouseenter",this._showAutoTipBnd),e.removeEventListener("mouseleave",this._hideAutoTipBnd),e.removeEventListener("click",this._showAutoTipBnd)},t.prototype._showAutoTip=function(t){var n=this,i="mouseenter"==t.type?this._showDelay:0;this._clearTimeouts(),this._toShow=setTimeout(function(){var i,r,o=n._indexOf(t.target);o>-1&&(i=n._tips[o],r=n._showAtMouse?new e.Rect(t.clientX,t.clientY,0,0):null,n.show(i.element,i.content,r),n._hideDelay>0&&(n._toHide=setTimeout(function(){n.hide()},n._hideDelay)))},i)},t.prototype._hideAutoTip=function(){this._clearTimeouts(),this.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getContent=function(t){if(t=e.asString(t),t&&"#"==t[0]){var n=e.getElement(t);n&&(t=n.innerHTML)}return t},t.prototype._setContent=function(e){var n=t._eTip;n&&(this.isContentHtml?n.innerHTML=e:n.textContent=e)},t}();e.Tooltip=i,t=function(){function e(){}return e}(),n=function(t){function n(n){t.call(this),this._content=e.asString(n)}return __extends(n,t),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(t){this._content=e.asString(t)},enumerable:!0,configurable:!0}),n}(e.CancelEventArgs),e.TooltipEventArgs=n}(wijmo||(wijmo={})),function(e){"use strict";var t=function(){function t(e){this._r=0,this._g=0,this._b=0,this._a=1,e&&this._parse(e)}return Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=e.clamp(e.asNumber(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=e.clamp(e.asNumber(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=e.clamp(e.asNumber(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=e.clamp(e.asNumber(t),0,1)},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e instanceof t&&this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a},t.prototype.toString=function(){var e=Math.round(100*this.a);return e>99?"#"+(16777216+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):"rgba("+this.r+","+this.g+","+this.b+","+e/100+")"},t.fromRgba=function(n,i,r,o){void 0===o&&(o=1);var s=new t(null);return s.r=Math.round(e.clamp(e.asNumber(n),0,255)),s.g=Math.round(e.clamp(e.asNumber(i),0,255)),s.b=Math.round(e.clamp(e.asNumber(r),0,255)),s.a=e.clamp(e.asNumber(o),0,1),s},t.fromHsb=function(n,i,r,o){void 0===o&&(o=1);var s=t._hsbToRgb(e.clamp(e.asNumber(n),0,1),e.clamp(e.asNumber(i),0,1),e.clamp(e.asNumber(r),0,1));return t.fromRgba(s[0],s[1],s[2],o)},t.fromHsl=function(n,i,r,o){void 0===o&&(o=1);var s=t._hslToRgb(e.clamp(e.asNumber(n),0,1),e.clamp(e.asNumber(i),0,1),e.clamp(e.asNumber(r),0,1));return t.fromRgba(s[0],s[1],s[2],o)},t.fromString=function(n){var i=new t(null);return i._parse(e.asString(n))?i:null},t.prototype.getHsb=function(){return t._rgbToHsb(this.r,this.g,this.b)},t.prototype.getHsl=function(){return t._rgbToHsl(this.r,this.g,this.b)},t.interpolate=function(n,i,r){r=e.clamp(e.asNumber(r),0,1);var o=t._rgbToHsl(n.r,n.g,n.b),s=t._rgbToHsl(i.r,i.g,i.b),a=1-r,l=n.a*a+i.a*r,c=[o[0]*a+s[0]*r,o[1]*a+s[1]*r,o[2]*a+s[2]*r],u=t._hslToRgb(c[0],c[1],c[2]);return t.fromRgba(u[0],u[1],u[2],l)},t.toOpaque=function(n,i){if(n=e.isString(n)?t.fromString(n):e.asType(n,t),1==n.a)return n;i=null==i?t.fromRgba(255,255,255,1):e.isString(i)?t.fromString(i):e.asType(i,t);var r=n.a,o=1-r;return t.fromRgba(n.r*r+i.r*o,n.g*r+i.g*o,n.b*r+i.b*o)},t.prototype._parse=function(e){var n,i,r,o,s,a;if(e=e.toLowerCase(),"transparent"==e)return this._r=this._g=this._b=this._a=0,!0;if(e&&0!=e.indexOf("#")&&0!=e.indexOf("rgb")&&0!=e.indexOf("hsl")&&(n=document.createElement("div"),n.style.color=e,i=n.style.color,i==e&&(i=window.getComputedStyle(n).color,i||(document.body.appendChild(n),i=window.getComputedStyle(n).color,document.body.removeChild(n))),e=i.toLowerCase()),0==e.indexOf("#"))return 4==e.length?(this.r=parseInt(e[1]+e[1],16),this.g=parseInt(e[2]+e[2],16),this.b=parseInt(e[3]+e[3],16),this.a=1,!0):7==e.length?(this.r=parseInt(e.substr(1,2),16),this.g=parseInt(e.substr(3,2),16),this.b=parseInt(e.substr(5,2),16),this.a=1,!0):!1;if(0==e.indexOf("rgb")&&(r=e.indexOf("("),o=e.indexOf(")"),r>-1&&o>-1&&(s=e.substr(r+1,o-(r+1)).split(","),s.length>2)))return this.r=parseInt(s[0]),this.g=parseInt(s[1]),this.b=parseInt(s[2]),this.a=s.length>3?parseFloat(s[3]):1,!0;if(0==e.indexOf("hsl")&&(r=e.indexOf("("),o=e.indexOf(")"),r>-1&&o>-1&&(s=e.substr(r+1,o-(r+1)).split(","),s.length>2))){var l=parseInt(s[0])/360,c=parseInt(s[1]),u=parseInt(s[2]);return s[1].indexOf("%")>-1&&(c/=100),s[2].indexOf("%")>-1&&(u/=100),a=t._hslToRgb(l,c,u),this.r=a[0],this.g=a[1],this.b=a[2],this.a=s.length>3?parseFloat(s[3]):1,!0}return!1},t._hslToRgb=function(n,i,r){var o,s,a,l,c;return e.assert(n>=0&&1>=n&&i>=0&&1>=i&&r>=0&&1>=r,"bad HSL values"),0==i?o=s=a=r:(l=.5>r?r*(1+i):r+i-r*i,c=2*r-l,o=t._hue2rgb(c,l,n+1/3),s=t._hue2rgb(c,l,n),a=t._hue2rgb(c,l,n-1/3)),[Math.round(255*o),Math.round(255*s),Math.round(255*a)]},t._hue2rgb=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e},t._rgbToHsl=function(t,n,i){var r;e.assert(t>=0&&255>=t&&n>=0&&255>=n&&i>=0&&255>=i,"bad RGB values"),t/=255,n/=255,i/=255;var o,s,a=Math.max(t,n,i),l=Math.min(t,n,i),c=(a+l)/2;if(a==l)o=s=0;else{switch(r=a-l,s=c>.5?r/(2-a-l):r/(a+l),a){case t:o=(n-i)/r+(i>n?6:0);break;case n:o=(i-t)/r+2;break;case i:o=(t-n)/r+4}o/=6}return[o,s,c]},t._rgbToHsb=function(n,i,r){e.assert(n>=0&&255>=n&&i>=0&&255>=i&&r>=0&&255>=r,"bad RGB values");var o=t._rgbToHsl(n,i,r);return t._hslToHsb(o[0],o[1],o[2])},t._hsbToRgb=function(e,n,i){var r=t._hsbToHsl(e,n,i);return t._hslToRgb(r[0],r[1],r[2])},t._hsbToHsl=function(t,n,i){e.assert(t>=0&&1>=t&&n>=0&&1>=n&&i>=0&&1>=i,"bad HSB values");var r=e.clamp(i*(2-n)/2,0,1),o=1-Math.abs(2*r-1),s=e.clamp(o>0?i*n/o:n,0,1);return e.assert(!isNaN(r)&&!isNaN(s),"bad conversion to HSL"),[t,s,r]},t._hslToHsb=function(t,n,i){e.assert(t>=0&&1>=t&&n>=0&&1>=n&&i>=0&&1>=i,"bad HSL values");var r=e.clamp(1==i?1:(2*i+n*(1-Math.abs(2*i-1)))/2,0,1),o=e.clamp(r>0?2*(r-i)/r:n,0,1);return e.assert(!isNaN(r)&&!isNaN(o),"bad conversion to HSB"),[t,o,r]},t}();e.Color=t}(wijmo||(wijmo={})),function(e){"use strict";var t=function(){function t(){}return t.copy=function(e){t._copyPasteInternal(e)},t.paste=function(e){t._copyPasteInternal(e)},t._copyPasteInternal=function(t){for(var n,i=e.getActiveElement(),r=e.closest(i,".wj-control");r&&e.Control.getControl(r);)r=r.parentElement;null==r&&(r=document.body),r&&(n=document.createElement("textarea"),n.style.position="fixed",n.style.opacity="0",r.appendChild(n),"string"==typeof t&&(n.value=t),n.select(),n.onkeydown=function(e){n.value&&e.preventDefault()},setTimeout(function(){i.focus();var e=n.value;r.removeChild(n),"function"==typeof t&&t(e)},100))},t}();e.Clipboard=t}(wijmo||(wijmo={})),function(e){"use strict";function t(t,n,r,o,s){var a,l,c,u,h,p,d,f,g,m,v;if(void 0===n&&(n=null),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!0),a=document.body,n instanceof HTMLElement){if(!e.contains(document.body,n))return;for(l=n.parentElement;l;l=l.parentElement)if("fixed"==getComputedStyle(l).position){a=l;break}}else for(l=e.getActiveElement();l;l=l.parentElement)if(!e.hasClass(l,"wj-popup")&&"fixed"==getComputedStyle(l).position){a=l;break}a.lastChild!=t&&a.appendChild(t),n instanceof HTMLElement&&s&&(c=getComputedStyle(n),u=new e.Color(c.backgroundColor),u.a&&e.setCss(t,{color:c.color,backgroundColor:c.backgroundColor,fontFamily:c.fontFamily,fontSize:c.fontSize,fontWeight:c.fontWeight,fontStyle:c.fontStyle})),e.setCss(t,{position:"absolute",visibility:"hidden",display:""}),e.Control.refreshAll(t);var y=getComputedStyle(t),_=parseFloat(y.marginTop)+parseFloat(y.marginBottom),w=parseFloat(y.marginLeft)+parseFloat(y.marginRight),b=new e.Size(t.offsetWidth+w,t.offsetHeight+_),C=new e.Point,x=null;if(n&&null!=n.clientX&&null!=n.clientY&&null!=n.pageX&&null!=n.pageY)n.clientX<=0&&n.clientY<=0&&n.target?x=n.target.getBoundingClientRect():(C.x=Math.max(0,n.pageX-pageXOffset),C.y=Math.max(0,n.pageY-pageYOffset));else if(n instanceof e.Point)C=n;else if(n instanceof HTMLElement)x=n.getBoundingClientRect();else if(n&&null!=n.top&&null!=n.left)x=n;else{if(null!=n)throw"Invalid ref parameter.";C.x=Math.max(0,(innerWidth-b.width)/2),C.y=Math.max(0,Math.round((innerHeight-b.height)/2*.7))}if(h=parseFloat(y.minWidth),x){var S=x.top,E=innerHeight-x.bottom,P="rtl"==getComputedStyle(t).direction;C.x=P?Math.max(0,x.right-b.width):Math.max(0,Math.min(x.left,innerWidth-b.width)),C.y=r?S>b.height||S>E?Math.max(0,x.top-b.height):x.bottom:E>b.height||E>S?x.bottom:Math.max(0,x.top-b.height),h=Math.max(h,x.width)}if(p=new e.Point(0,0),null!=n&&(a==document.body?p=new e.Point(-pageXOffset,-pageYOffset):a&&(d=a.getBoundingClientRect(),p=new e.Point(d.left-a.scrollLeft,d.top-a.scrollTop))),f={position:null==n?"fixed":"absolute",left:C.x-p.x,top:C.y-p.y,minWidth:h,display:"",visibility:"",zIndex:1500},o&&(t.style.opacity="0",e.animate(function(e){t.style.opacity=1==e?"":e.toString()})),e.setCss(t,f),g=n instanceof MouseEvent?n.target:n,g instanceof HTMLElement)for(v=g.parentElement;v&&v!=document.body;v=v.parentElement)"auto"==getComputedStyle(v).overflowY&&v.scrollHeight>v.offsetHeight&&(m||(m=new e.Control(document.createElement("div"))),m.addEventListener(v,"scroll",function(){i(t,!0),m.dispose()}))}function n(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1),r?e.animate(function(e){t.style.opacity=(1-e).toString(),1==e&&(i(t,n),t.style.opacity="")}):i(t,n)}function i(e,t){e.style.display="none",t&&e.parentElement&&e.parentElement.removeChild(e)}e.showPopup=t,e.hidePopup=n}(wijmo||(wijmo={})),function(e){"use strict";var t=function(){function t(t){this._copyCss=!0,null!=t&&e.copy(this,t)}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyCss",{get:function(){return this._copyCss},set:function(t){this._copyCss=e.asBoolean(t)},enumerable:!0,configurable:!0}),t.prototype.addCSS=function(e){this._css||(this._css=[]),this._css.push(e)},t.prototype.append=function(t){var n=this._getDocument();e.isString(t)?n.write(t):t instanceof HTMLElement?n.write(t.outerHTML):e.assert(!1,"child should be an HTML element or a string.")},t.prototype.print=function(){var e=this;this._iframe&&(this._close(),setTimeout(function(){var t=e._iframe.contentWindow,n="onafterprint"in t;n&&(t.onafterprint=function(){document.body.removeChild(e._iframe),
e._iframe=null}),t.focus(),t.print(),n||(document.body.removeChild(e._iframe),e._iframe=null)},100))},t.prototype._getDocument=function(){if(!this._iframe){this._iframe=document.createElement("iframe");var e=this._iframe.style;e.position="fixed",e.left="10000px",e.top="10000px",document.body.appendChild(this._iframe)}return this._iframe.contentDocument},t.prototype._close=function(){var t,n,i,r,o,s,a,l=this._getDocument();if(l.close(),this.title&&(t=l.querySelector("title"),t||(t=l.createElement("title"),l.head.appendChild(t)),t.textContent=this.title),this._copyCss){for(n=document.head.querySelectorAll("LINK"),o=0;o<n.length;o++)i=n[o],i.href.match(/\.css$/i)&&i.rel.match(/stylesheet/i)&&(a=e.httpRequest(i.href,{async:!1}),this._addStyle(a.responseText));for(r=document.head.querySelectorAll("STYLE"),o=0;o<r.length;o++)this._addStyle(r[o].textContent)}if(this._css)for(o=0;o<this._css.length;o++)s=l.createElement("style"),a=e.httpRequest(this._css[o],{async:!1}),s.textContent=a.responseText,l.head.appendChild(s)},t.prototype._addStyle=function(e){var t=this._getDocument(),n=t.createElement("style");n.textContent=e,t.head.appendChild(n)},t}();e.PrintDocument=t}(wijmo||(wijmo={})),function(e){"use strict";var t,n=function(){function n(e,t,n){void 0===t&&(t=null),void 0===n&&(n="_"),this._promptChar="_",this._mskArr=[],this._full=!0,this._hbInput=this._input.bind(this),this._hbKeyDown=this._keydown.bind(this),this._hbKeyPress=this._keypress.bind(this),this._hbCompositionStart=this._compositionstart.bind(this),this._hbCompositionEnd=this._compositionend.bind(this),this.mask=t,this.input=e,this.promptChar=n,this._connect(!0)}return Object.defineProperty(n.prototype,"input",{get:function(){return this._tbx},set:function(e){this._connect(!1),this._tbx=e,this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._msk},set:function(t){t!=this._msk&&(this._msk=e.asString(t,!0),this._parseMask(),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptChar",{get:function(){return this._promptChar},set:function(t){t!=this._promptChar&&(this._promptChar=e.asString(t,!1),e.assert(1==this._promptChar.length,"promptChar must be a string with length 1."),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maskFull",{get:function(){return this._full},enumerable:!0,configurable:!0}),n.prototype.getMaskRange=function(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]},n.prototype.getRawValue=function(){var e,t=this._tbx.value,n="";if(!this.mask)return t;for(e=0;e<this._mskArr.length&&e<t.length;e++)this._mskArr[e].literal||t[e]==this._promptChar||(n+=t[e]);return n},n.prototype.refresh=function(){this._parseMask(),this._valueChanged()},n.prototype._input=function(){var e=this;this._composing||setTimeout(function(){e._valueChanged()})},n.prototype._keydown=function(t){if(t.keyCode==e.Key.Back){var n=this._tbx.selectionStart,i=this._tbx.selectionEnd;if(n<=this._firstPos&&i==n)return t.preventDefault(),void(this._backSpace=!1)}this._backSpace=t.keyCode==e.Key.Back},n.prototype._keypress=function(e){e.ctrlKey||e.metaKey||e.altKey||this._composing||!this._preventKey(e.charCode)||e.preventDefault()},n.prototype._compositionstart=function(){this._composing=!0},n.prototype._compositionend=function(){var e=this;this._composing=!1,setTimeout(function(){e._valueChanged()})},n.prototype._preventKey=function(t){var n;if(t&&this._mskArr.length){var i=this._tbx,r=i.selectionStart,o=String.fromCharCode(t);if(r<this._firstPos&&(r=this._firstPos,e.setSelectionRange(i,r)),r>=this._mskArr.length)return!0;if(n=this._mskArr[r],n.literal)this._validatePosition(r);else if(n.wildCard!=o&&!this._isCharValid(n.wildCard,o))return!0}return!1},n.prototype._connect=function(e){var t=this._tbx;t&&(e?(this._autoComplete=t.autocomplete,this._spellCheck=t.spellcheck,t.autocomplete="off",t.spellcheck=!1,t.addEventListener("input",this._hbInput),t.addEventListener("keydown",this._hbKeyDown,!0),t.addEventListener("keypress",this._hbKeyPress,!0),t.addEventListener("compositionstart",this._hbCompositionStart,!0),t.addEventListener("compositionend",this._hbCompositionEnd,!0),this._valueChanged()):(t.autocomplete=this._autoComplete,t.spellcheck=this._spellCheck,t.removeEventListener("input",this._hbInput),t.removeEventListener("keydown",this._hbKeyDown,!0),t.removeEventListener("keypress",this._hbKeyPress,!0),t.removeEventListener("compositionstart",this._hbCompositionStart,!0),t.removeEventListener("compositionend",this._hbCompositionEnd,!0)))},n.prototype._valueChanged=function(){var e;if(this._tbx&&this._msk){var t=this._tbx,n=t.selectionStart,i=n>0?t.value[n-1]:"";t.value=this._applyMask(),e=n>0?t.value[n-1]:"",n>0&&e==this._promptChar&&i!=this.promptChar&&n--,this._validatePosition(n)}},n.prototype._applyMask=function(){var e,t,n,i,r,o,s;if(this._full=!0,e=this._tbx.value,!this._msk||!e&&!this._tbx.required)return e;for(t="",n=0,e=this._handleVagueLiterals(e),i=0;i<this._mskArr.length;i++){if(r=this._mskArr[i],o=r.literal,o&&o==e[n]&&n++,r.wildCard){if(o=this._promptChar,e){for(s=n;s<e.length;s++)if(this._isCharValid(r.wildCard,e[s])){switch(o=e[s],r.charCase){case">":o=o.toUpperCase();break;case"<":o=o.toLowerCase()}break}n=s+1}o==this._promptChar&&(this._full=!1)}t+=o}return t},n.prototype._handleVagueLiterals=function(e){var t,n,i,r,o,s;if(e.length>this._mskArr.length+1)return e;if(t=e.length-this._mskArr.length,0!=t&&e.length>1){for(n=-1,i=Math.max(0,this._tbx.selectionStart-t),r=i;r<this._mskArr.length;r++)if(this._mskArr[r].vague){n=r;break}if(n>-1)if(0>t)o=Array(1-t).join(this._promptChar),s=n+t,s>-1&&(e=e.substr(0,s)+o+e.substr(s));else{for(;n>0&&this._mskArr[n-1].literal;)n--;e=e.substr(0,n)+e.substr(n+t)}}return e},n.prototype._isCharValid=function(e,t){var i=this._promptChar;switch(e){case"0":return t>="0"&&"9">=t||t==i;case"9":return t>="0"&&"9">=t||" "==t||t==i;case"#":return t>="0"&&"9">=t||" "==t||"+"==t||"-"==t||t==i;case"L":return t>="a"&&"z">=t||t>="A"&&"Z">=t||t==i;case"l":return t>="a"&&"z">=t||t>="A"&&"Z">=t||" "==t||t==i;case"A":return t>="0"&&"9">=t||t>="a"&&"z">=t||t>="A"&&"Z">=t||t==i;case"a":return t>="0"&&"9">=t||t>="a"&&"z">=t||t>="A"&&"Z">=t||" "==t||t==i;case"９":return t>="０"&&"９">=t||t==i;case"Ｊ":case"Ｇ":return"Ｇ"==e&&n._X_DBCS_BIG_HIRA.indexOf(t)>-1?!1:t>="ぁ"&&"ゖ">=t||t==i;case"Ｋ":case"Ｎ":return"Ｎ"==e&&n._X_DBCS_BIG_KATA.indexOf(t)>-1?!1:t>="ァ"&&"ヺ">=t||t==i;case"Ｚ":return"!">=t||t>="ÿ"||t==i;case"H":return t>="!"&&"ÿ">=t||t==i;case"K":case"N":return"N"==e&&n._X_SBCS_BIG_KATA.indexOf(t)>-1?!1:t>="ｦ"&&"ﾟ">=t||t==i}return!1},n.prototype._validatePosition=function(t){var n=this._mskArr;if(this._backSpace)for(;t>0&&t<n.length&&n[t-1].literal;)t--;if(0==t||!this._backSpace)for(;t<n.length&&n[t].literal;)t++;e.getActiveElement()==this._tbx&&e.setSelectionRange(this._tbx,t),this._backSpace=!1},n.prototype._parseMask=function(){var n,i,r,o,s,a,l;for(this._mskArr=[],this._firstPos=-1,this._lastPos=-1,n=this._msk,i="|",o=0;n&&o<n.length;o++)switch(n[o]){case"0":case"9":case"#":case"A":case"a":case"L":case"l":case"９":case"Ｊ":case"Ｇ":case"Ｋ":case"Ｎ":case"Ｚ":case"K":case"N":case"H":this._firstPos<0&&(this._firstPos=this._mskArr.length),this._lastPos=this._mskArr.length,this._mskArr.push(new t(n[o],i));break;case".":case",":case":":case"/":case"$":switch(n[o]){case".":case",":r=e.culture.Globalize.numberFormat[n[o]];break;case":":case"/":r=e.culture.Globalize.calendar[n[o]];break;case"$":r=e.culture.Globalize.numberFormat.currency.symbol}for(a=0;a<r.length;a++)this._mskArr.push(new t(r[a]));break;case"<":case">":case"|":i=n[o];break;case"\\":o<n.length-1&&o++,this._mskArr.push(new t(n[o]));break;default:this._mskArr.push(new t(n[o]))}for(o=0;o<this._mskArr.length;o++)if(s=this._mskArr[o],s.literal)for(a=0;o>a;a++)if(l=this._mskArr[a],l.wildCard&&this._isCharValid(l.wildCard,s.literal)){s.vague=!0;break}},n._X_DBCS_BIG_HIRA="ぁぃぅぇぉっゃゅょゎゕゖ",n._X_DBCS_BIG_KATA="ァィゥェォッャュョヮヵヶ",n._X_SBCS_BIG_KATA="ｧｨｩｪｫｬｭｮｯ",n}();e._MaskProvider=n,t=function(){function e(e,t){t?(this.wildCard=e,this.charCase=t):this.literal=e}return e}(),e._MaskElement=t}(wijmo||(wijmo={})),function(e){"use strict";function t(){return o}function n(){return i}var i,r,o=null!=navigator.userAgent.match(/MSIE |Trident\/|Edge\//);e.isIE=t,e.isIE9=n,document.doctype&&navigator.appVersion.indexOf("MSIE 9")>-1&&(i=!0,document.addEventListener("mousemove",function(e){if(1==e.which)for(var t=e.target;t;t=t.parentNode)if(t.attributes&&t.attributes.draggable)return t.dragDrop(),!1})),window.requestAnimationFrame||(r=0,window.requestAnimationFrame=function(e){var t=Date.now(),n=16-(t-r),i=n>0?n:0;return r=t+i,setTimeout(function(){e(r)},i)},window.cancelAnimationFrame=clearTimeout)}(wijmo||(wijmo={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},wijmo;!function(e){var t;!function(t){"use strict";var n=function(t){function n(n){var i,r,o,s,a=this;t.call(this,n,null,!0),this._showBtn=!0,this._autoExpand=!0,this.textChanged=new e.Event,this.isDroppedDownChanging=new e.Event,this.isDroppedDownChanged=new e.Event,i=this.getTemplate(),this.applyTemplate("wj-control wj-dropdown wj-content",i,{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),this._elRef=this._tbx,this._createDropDown(),this._updateBtn(),r=this._dropDown,r&&r.parentElement&&r.parentElement.removeChild(r),o=this._updateFocusState.bind(this),this.addEventListener(this.dropDown,"blur",o,!0),this.addEventListener(this.dropDown,"focus",o),s=this._keydown.bind(this),this.addEventListener(this.hostElement,"keydown",s),this.addEventListener(this.dropDown,"keydown",s),this.addEventListener(this._tbx,"keypress",function(e){9787==e.keyCode&&a._altDown&&e.preventDefault()}),this.addEventListener(this._tbx,"input",function(){a._setText(a.text,!1)}),this.addEventListener(this._tbx,"click",function(){a._autoExpand&&a._expandSelection()}),e.isIE9()&&this.addEventListener(this._tbx,"keyup",function(){a._setText(a.text,!1)}),this.addEventListener(this._btn,"click",this._btnclick.bind(this)),this.addEventListener(this._dropDown,"click",function(e){e.stopPropagation()})}return __extends(n,t),Object.defineProperty(n.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(t){this._tbx.readOnly=e.asBoolean(t),e.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return e._deprecated("required","isRequired"),this.isRequired},set:function(t){e._deprecated("required","isRequired"),this.isRequired=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDroppedDown",{get:function(){return"none"!=this._dropDown.style.display},set:function(t){if(t=e.asBoolean(t)&&!this.isDisabled&&!this.isReadOnly,t!=this.isDroppedDown&&this.onIsDroppedDownChanging(new e.CancelEventArgs)){var n=this._dropDown;t?(n.style.minWidth||(n.style.minWidth=this.hostElement.getBoundingClientRect().width+"px"),n.style.display="block",this._updateDropDown()):(this.containsFocus()&&(this.isTouching&&this.showDropDownButton?this.focus():this.selectAll()),e.hidePopup(n)),this._updateFocusState(),this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(e.removeClass(this._dropDown,this._cssClass),this._cssClass=e.asString(t),e.addClass(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(t){this._showBtn=e.asBoolean(t),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(t){this._autoExpand=e.asBoolean(t)},enumerable:!0,configurable:!0}),n.prototype.selectAll=function(){this._elRef==this._tbx&&e.setSelectionRange(this._tbx,0,this.text.length)},n.prototype.onTextChanged=function(e){this._updateState(),this.textChanged.raise(this,e)},n.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),!e.cancel},n.prototype.onIsDroppedDownChanged=function(t){var n=this;this.removeEventListener(document,"mousedown"),this.removeEventListener(document,"keydown"),this.isDroppedDown&&!this.containsFocus()&&(this.addEventListener(document,"mousedown",function(t){e.contains(n.dropDown,t.target)||e.contains(n.hostElement,t.target)||(n.isDroppedDown=!1)}),this.addEventListener(document,"keydown",function(){n.containsFocus()||(n.isDroppedDown=!1)})),this.isDroppedDownChanged.raise(this,t)},n.prototype.onGotFocus=function(e){this.isTouching||this.selectAll(),t.prototype.onGotFocus.call(this,e)},n.prototype.onLostFocus=function(e){this._commitText(),this.containsFocus()||(this.isDroppedDown=!1),t.prototype.onLostFocus.call(this,e)},n.prototype.containsFocus=function(){return t.prototype.containsFocus.call(this)||e.contains(this._dropDown,e.getActiveElement())},n.prototype.dispose=function(){this.isDroppedDown=!1,t.prototype.dispose.call(this)},n.prototype.refresh=function(n){if(void 0===n&&(n=!0),t.prototype.refresh.call(this,n),this.isDroppedDown&&"none"!=getComputedStyle(this.hostElement).display){var i=e.getActiveElement();e.showPopup(this._dropDown,this.hostElement,!1,!1,null==this.dropDownCssClass),i instanceof HTMLElement&&i!=e.getActiveElement()&&i.focus()}},n.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},n.prototype._expandSelection=function(){var e,t=this._tbx,n=t.value,i=t.selectionStart,r=t.selectionEnd;if(n&&i==r&&(e=this._getCharType(n,i),e>-1)){for(;r<n.length&&this._getCharType(n,r)==e;r++);for(;i>0&&this._getCharType(n,i-1)==e;i--);i!=r&&t.setSelectionRange(i,r)}},n.prototype._getCharType=function(e,t){var n=e[t];return n>="0"&&"9">=n?0:n>="a"&&"z">=n||n>="A"&&"Z">=n?1:-1},n.prototype._keydown=function(t){if(!t.defaultPrevented)switch(this._altDown=t.altKey,t.keyCode){case e.Key.Tab:case e.Key.Escape:case e.Key.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,t.keyCode==e.Key.Tab||this.containsFocus()||this.focus(),t.preventDefault());break;case e.Key.F4:case e.Key.Down:case e.Key.Up:(t.keyCode==e.Key.F4||t.altKey)&&e.contains(document.body,this.hostElement)&&(this.isDroppedDown=!this.isDroppedDown,this.isDroppedDown||this.focus(),t.preventDefault())}},n.prototype._btnclick=function(){this.isDroppedDown=!this.isDroppedDown},n.prototype._setText=function(e){null==e&&(e=""),e=e.toString(),e!=this._tbx.value&&(this._tbx.value=e),e!=this._oldText&&(this._oldText=e,this.onTextChanged())},n.prototype._updateBtn=function(){this._btn.tabIndex=-1,this._btn.style.display=this._showBtn?"":"none"},n.prototype._createDropDown=function(){},n.prototype._commitText=function(){},n.prototype._updateDropDown=function(){this.isDroppedDown&&(this._commitText(),e.showPopup(this._dropDown,this.hostElement,!1,!1,null==this.dropDownCssClass))},n.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100"></div></div>',n}(e.Control);t.DropDown=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";!function(e){e[e.None=0]="None",e[e.Day=1]="Day",e[e.Month=2]="Month"}(t.DateSelectionMode||(t.DateSelectionMode={}));var n=t.DateSelectionMode,i=function(i){function r(t,r){i.call(this,t),this._readOnly=!1,this._selMode=n.Day,this.valueChanged=new e.Event,this.displayMonthChanged=new e.Event,this.formatItem=new e.Event,this._value=e.DateTime.newDate(),this._currMonth=this._getMonth(this._value),this._createChildren(),this.refresh(!0),this.addEventListener(this.hostElement,"mouseup",this._click.bind(this)),this.addEventListener(this.hostElement,"keydown",this._keydown.bind(this)),this.initialize(r)}return __extends(r,i),Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){t=e.asDate(t,!0),t=this._clamp(t),this._valid(t)&&(this.displayMonth=this._getMonth(t),e.DateTime.equals(this._value,t)||(this._value=t,this.invalidate(!1),this.onValueChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},set:function(t){t!=this.min&&(this._min=e.asDate(t,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},set:function(t){t!=this.max&&(this._max=e.asDate(t,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionMode",{get:function(){return this._selMode},set:function(t){var i,r;t!=this._selMode&&(this._selMode=e.asEnum(t,n),i=this._monthMode(),i&&(this.monthView=!1),r=this._btnMth.querySelector(".wj-glyph-down"),r&&(r.style.display=i?"none":""))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=e.asBoolean(t),e.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(t){if(t!=this._fdw){if(t=e.asNumber(t,!0),t&&(t>6||0>t))throw"firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).";this._fdw=t,this.refresh()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayMonth",{get:function(){return this._currMonth},set:function(t){if(!e.DateTime.equals(this.displayMonth,t)){t=e.asDate(t);var n=this.monthView?this._monthInValidRange(t):this._yearInValidRange(t);n&&(this._currMonth=this._getMonth(this._clamp(t)),this.invalidate(!0),this.onDisplayMonthChanged())}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showHeader",{get:function(){return"none"!=this._tbHdr.style.display},set:function(t){this._tbHdr.style.display=e.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"monthView",{get:function(){return"none"!=this._tbMth.style.display},set:function(e){e!=this.monthView&&(this._tbMth.style.display=e?"":"none",this._tbYr.style.display=e?"none":"")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=e.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(t){t!=this._itemValidator&&(this._itemValidator=e.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},r.prototype.onDisplayMonthChanged=function(e){this.displayMonthChanged.raise(this,e)},r.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},r.prototype.refresh=function(n){var r,o,s,a,l,c,u,h,p;for(void 0===n&&(n=!0),a=this.displayMonth,l=null!=this.firstDayOfWeek?this.firstDayOfWeek:e.Globalize.getFirstDayOfWeek(),i.prototype.refresh.call(this,n),this._firstDay=e.DateTime.addDays(a,-(a.getDay()-l+7)%7),e.setText(this._spMth,e.Globalize.format(a,"y")),r=this._tbMth.querySelectorAll("td"),p=0;7>p&&p<r.length;p++)s=e.DateTime.addDays(this._firstDay,p),e.setText(r[p],e.Globalize.format(s,"ddd"));for(p=7;p<r.length;p++)o=r[p],s=e.DateTime.addDays(this._firstDay,p-7),e.setText(o,s.getDate().toString()),o.className="",c=!this._valid(s),e.toggleClass(o,"wj-state-invalid",c),e.toggleClass(o,"wj-state-selected",e.DateTime.sameDate(s,this.value)),e.toggleClass(o,"wj-day-today",e.DateTime.sameDate(s,new Date)),e.toggleClass(o,"wj-day-othermonth",c||s.getMonth()!=a.getMonth()||!this._inValidRange(s)),this.itemFormatter&&this.itemFormatter(s,o),this.formatItem.hasHandlers&&(u=new t.FormatItemEventArgs(p,s,o),this.onFormatItem(u));for(h=this._tbMth.querySelectorAll("tr"),h.length&&(s=e.DateTime.addDays(this._firstDay,28),h[h.length-2].style.display=s.getMonth()==a.getMonth()?"":"none",s=e.DateTime.addDays(this._firstDay,35),h[h.length-1].style.display=s.getMonth()==a.getMonth()?"":"none"),r=this._tbYr.querySelectorAll("td"),r.length&&e.setText(r[0],a.getFullYear().toString()),p=1;p<r.length;p++)o=r[p],s=new Date(a.getFullYear(),p-1,1),e.setText(o,e.Globalize.format(s,"MMM")),o.className="",e.toggleClass(o,"wj-state-disabled",!this._monthInValidRange(s)),e.toggleClass(o,"wj-state-selected",this._sameMonth(s,this.value))},r.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=n.None},r.prototype._valid=function(e){return this.itemValidator&&e?this.itemValidator(e):!0},r.prototype._inValidRange=function(t){return this.min&&t<e.DateTime.fromDateTime(this.min,t)?!1:this.max&&t>e.DateTime.fromDateTime(this.max,t)?!1:!0},r.prototype._monthInValidRange=function(t){var n=t.getFullYear(),i=t.getMonth(),r=new Date(n,i,1),o=e.DateTime.addDays(new Date(n,i+1),-1);return this._inValidRange(r)||this._inValidRange(o)},r.prototype._yearInValidRange=function(t){var n=t.getFullYear(),i=new Date(n,0),r=e.DateTime.addDays(new Date(n+1,0),-1);return this._inValidRange(i)||this._inValidRange(r)},r.prototype._sameMonth=function(t,n){return e.isDate(t)&&e.isDate(n)&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()},r.prototype._clamp=function(t){var n,i;return t&&(this.min&&(n=e.DateTime.fromDateTime(this.min,t),n>t&&(t=n)),this.max&&(i=e.DateTime.fromDateTime(this.max,t),t>i&&(t=i))),t},r.prototype._createChildren=function(){var e,t,n,i,r,o=this.getTemplate();for(this.applyTemplate("wj-control wj-calendar",o,{_tbHdr:"tbl-header",_btnMth:"btn-month",_spMth:"span-month",_btnPrv:"btn-prev",_btnTdy:"btn-today",_btnNxt:"btn-next",_tbMth:"tbl-month",_tbYr:"tbl-year"}),e=this._createElement("tr",this._tbMth,"wj-header"),n=0;7>n;n++)this._createElement("td",e);for(t=0;6>t;t++)for(e=this._createElement("tr",this._tbMth),n=0;7>n;n++)this._createElement("td",e);for(e=this._createElement("tr",this._tbYr,"wj-header"),this._createElement("td",e).setAttribute("colspan","4"),i=0;3>i;i++)for(e=this._createElement("tr",this._tbYr),r=0;4>r;r++)this._createElement("td",e)},r.prototype._createElement=function(t,n,i){var r=document.createElement(t);return n&&n.appendChild(r),i&&e.addClass(r,i),r},r.prototype._click=function(t){var n,i,r=!1,o=t.target;e.contains(this._btnMth,o)&&!this._monthMode()?(this.monthView=!this.monthView,r=!0):e.contains(this._btnPrv,o)?(this._navigate(-1),r=!0):e.contains(this._btnNxt,o)?(this._navigate(1),r=!0):e.contains(this._btnTdy,o)&&(this._navigate(0),r=!0),o&&!r&&(o=e.closest(o,"TD"),o&&(this.monthView?(n=this._getCellIndex(this._tbMth,o),n>6&&this._canChangeValue()&&(i=e.DateTime.fromDateTime(e.DateTime.addDays(this._firstDay,n-7),this.value),this._inValidRange(i)&&this._valid(i)&&(this.value=i),r=!0)):(n=this._getCellIndex(this._tbYr,o),n>0&&(this.displayMonth=new Date(this.displayMonth.getFullYear(),n-1,1),this._monthMode()?this._canChangeValue()&&(i=e.DateTime.fromDateTime(this.displayMonth,this.value),this._inValidRange(i)&&(this.value=i)):this.monthView=!0,r=!0)))),r&&(t.preventDefault(),this.focus())},r.prototype._getCellIndex=function(e,t){for(var n=e.querySelectorAll("TD"),i=0;i<n.length;i++)if(n[i]==t)return i;return-1},r.prototype._keydown=function(t){var n;if(!(t.defaultPrevented||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){var i=0,r=0,o=!0;if(this.monthView)switch(t.keyCode){case e.Key.Left:i=-1;break;case e.Key.Right:i=1;break;case e.Key.Up:i=-7;break;case e.Key.Down:i=7;break;case e.Key.PageDown:r=1;break;case e.Key.PageUp:r=-1;break;default:o=!1}else switch(t.keyCode){case e.Key.Left:r=-1;break;case e.Key.Right:r=1;break;case e.Key.Up:r=-4;break;case e.Key.Down:r=4;break;case e.Key.PageDown:r=12;break;case e.Key.PageUp:r=-12;break;case e.Key.Enter:this._monthMode()?o=!1:this.monthView=!0;break;default:o=!1}this.value&&this._canChangeValue()&&(i||r)&&(n=this.value,n=e.DateTime.addDays(n,i),n=e.DateTime.addMonths(n,r),this.value=e.DateTime.fromDateTime(n,this.value)),o&&t.preventDefault()}},r.prototype._getMonth=function(e){return e||(e=new Date),new Date(e.getFullYear(),e.getMonth(),1)},r.prototype._monthMode=function(){return this.selectionMode==n.Month},r.prototype._navigate=function(t){var n,i=this.monthView;switch(t){case 0:n=new Date,i?this._canChangeValue()&&(this.value=e.DateTime.fromDateTime(n,this.value)):this._canChangeValue()&&(this.value=this._getMonth(n)),this.displayMonth=this._getMonth(n);break;case 1:this.displayMonth=e.DateTime.addMonths(this.displayMonth,i?1:12);break;case-1:this.displayMonth=e.DateTime.addMonths(this.displayMonth,i?-1:-12)}},r.controlTemplate='<div class="wj-calendar-outer wj-content"><div wj-part="tbl-header" class="wj-calendar-header"><div wj-part="btn-month" class="wj-month-select"><span wj-part="span-month"></span> <span class="wj-glyph-down"></span></div><div class="wj-btn-group"><button type="button" wj-part="btn-prev" class="wj-btn wj-btn-default"><span class="wj-glyph-left"></span></button><button type="button" wj-part="btn-today" class="wj-btn wj-btn-default"><span class="wj-glyph-circle"></span></button><button type="button" wj-part="btn-next" class="wj-btn wj-btn-default"><span class="wj-glyph-right"></span></button></div></div><table wj-part="tbl-month" class="wj-calendar-month"/><table wj-part="tbl-year" class="wj-calendar-year" style="display:none"/></div>',r}(e.Control);t.Calendar=i}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(i,r){var o,s,a,l=this;t.call(this,i),this._hsb=[.5,1,1],this._alpha=1,this.valueChanged=new e.Event,o=this.getTemplate(),this.applyTemplate("wj-control wj-colorpicker wj-content",o,{_eSB:"div-sb",_eHue:"div-hue",_eAlpha:"div-alpha",_ePreview:"div-pv",_ePal:"div-pal",_eText:"div-text"}),this._palette="#FFF,#000, #F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0".split(","),this._updatePalette(),this._eHue.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)",this._eHue.style.backgroundSize="contain",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eSB.children[0].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)",this._eSB.children[1].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)"),o=n._tplCursor,this._cSB=e.createElement(o),this._cHue=e.createElement(o),this._cHue.style.width="100%",this._cAlpha=e.createElement(o),this._cAlpha.style.height="100%",this._eSB.appendChild(this._cSB),this._eHue.appendChild(this._cHue),this._eAlpha.appendChild(this._cAlpha),this.addEventListener(this.hostElement,"mousedown",function(e){document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),l._mouseDown(e)}),s=function(e){l._mouseMove(e)},a=function(e){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),l._mouseUp(e)},this.addEventListener(this.hostElement,"click",function(t){var n,i=t.target;i&&"DIV"==i.tagName&&e.contains(l._ePal,i)&&(n=i.style.backgroundColor,n&&(l.value=new e.Color(n).toString()))}),this.value="#ffffff",this.initialize(r),this._updatePanels()}return __extends(n,t),Object.defineProperty(n.prototype,"showAlphaChannel",{get:function(){return"none"!=this._eAlpha.parentElement.style.display},set:function(t){this._eAlpha.parentElement.style.display=e.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showColorString",{get:function(){return"none"!=this._eText.style.display},set:function(t){this._eText.style.display=e.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this.value){this._value=e.asString(t),this._eText.innerText=this._value;var n=new e.Color(this._value),i=n.getHsb();(this._hsb[0]!=i[0]||this._hsb[1]!=i[1]||this._hsb[2]!=i[2]||this._alpha!=n.a)&&(0==i[2]?(i[0]=this._hsb[0],i[1]=this._hsb[1]):0==i[1]&&(i[0]=this._hsb[0]),this._hsb=i,this._alpha=n.a,this.onValueChanged())}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"palette",{get:function(){return this._palette},set:function(t){var n,i;for(t=e.asArray(t),n=0;n<t.length&&n<this._palette.length;n++)i=e.asString(t[n]),this._palette[n]=i;this._updatePalette()},enumerable:!0,configurable:!0}),n.prototype.onValueChanged=function(e){this._updatePanels(),this.valueChanged.raise(this,e)},n.prototype._mouseDown=function(e){this._htDown=this._getTargetPanel(e),this._htDown&&(e.preventDefault(),this.focus(),this._mouseMove(e))},n.prototype._mouseMove=function(t){if(this._htDown){var n=this._htDown.getBoundingClientRect();this._htDown==this._eHue?(this._hsb[0]=e.clamp((t.clientY-n.top)/n.height,0,.99),this._updateColor()):this._htDown==this._eSB?(this._hsb[1]=e.clamp((t.clientX-n.left)/n.width,0,1),this._hsb[2]=e.clamp(1-(t.clientY-n.top)/n.height,0,1),this._updateColor()):this._htDown==this._eAlpha&&(this._alpha=e.clamp((t.clientX-n.left)/n.width,0,1),this._updateColor())}},n.prototype._mouseUp=function(){this._htDown=null},n.prototype._updateColor=function(){var t=e.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=t.toString(),this._updatePanels()},n.prototype._updatePalette=function(){var t,n,i,r=new e.Color("#fff"),o=new e.Color("#000");for(this._ePal.innerHTML="",t=0;t<this._palette.length;t++){var s=e.createElement('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),a=new e.Color(this._palette[t]),l=a.getHsb();
for(s.appendChild(this._makePalEntry(a,4)),n=0;5>n;n++)0==l[1]?(i=.1*n+(l[2]>.5?.05:.55),a=e.Color.interpolate(r,o,i)):a=e.Color.fromHsb(l[0],.1+.2*n,1-.1*n),s.appendChild(this._makePalEntry(a,0));this._ePal.appendChild(s)}},n.prototype._makePalEntry=function(t,n){var i=document.createElement("div");return e.setCss(i,{cursor:"pointer",backgroundColor:t.toString(),marginBottom:n?n:""}),i.innerHTML="&nbsp",i},n.prototype._updatePanels=function(){var t=e.Color.fromHsb(this._hsb[0],1,1,1),n=e.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=t.toString(),this._eAlpha.style.background="linear-gradient(to right, transparent 0%, "+n.toString()+" 100%)",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eAlpha.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr="+n.toString()+", GradientType = 1)"),this._ePreview.style.backgroundColor=this.value,this._cHue.style.top=(100*this._hsb[0]).toFixed(0)+"%",this._cSB.style.left=(100*this._hsb[1]).toFixed(0)+"%",this._cSB.style.top=(100-100*this._hsb[2]).toFixed(0)+"%",this._cAlpha.style.left=(100*this._alpha).toFixed(0)+"%"},n.prototype._getTargetPanel=function(t){var n=t.target;return e.contains(this._eSB,n)?this._eSB:e.contains(this._eHue,n)?this._eHue:e.contains(this._eAlpha,n)?this._eAlpha:null},n.controlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;</div><div style="height:6px"></div></div></div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"></div></div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="wj-colorbox" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"></div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"></div></div><div style="float:left;width:1%;height:89%"></div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="wj-colorbox"></div></div><div style="float:left;width:89%;height:1%"></div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="wj-colorbox"></div></div></div><div style="float:left;width:1%;height:10%"></div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="wj-colorbox" style="position:static"></div></div></div></div>',n._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',n}(e.Control);t.ColorPicker=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i=function(t){function i(n,i){t.call(this,n),this._pathDisplay=new e.Binding(null),this._pathValue=new e.Binding(null),this._pathChecked=new e.Binding(null),this._html=!1,this._checkedItems=[],this._search="",this.selectedIndexChanged=new e.Event,this.itemsChanged=new e.Event,this.loadingItems=new e.Event,this.loadedItems=new e.Event,this.itemChecked=new e.Event,this.checkedItemsChanged=new e.Event,this.formatItem=new e.Event,this.applyTemplate("wj-control wj-listbox wj-content",null,null),"SELECT"==this._orgTag&&this._populateSelectElement(this.hostElement);var r=this.hostElement;this.addEventListener(r,"click",this._click.bind(this)),this.addEventListener(r,"keydown",this._keydown.bind(this)),this.addEventListener(r,"keypress",this._keypress.bind(this)),this.addEventListener(r,"wheel",function(e){r.scrollHeight>r.offsetHeight&&(e.deltaY<0&&0==r.scrollTop||e.deltaY>0&&r.scrollTop+r.offsetHeight>=r.scrollHeight)&&(e.preventDefault(),e.stopPropagation())}),this.initialize(i)}return __extends(i,t),i.prototype.refresh=function(){t.prototype.refresh.call(this),(this.displayMemberPath||!this.checkedMemberPath)&&this._populateList()},Object.defineProperty(i.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=e.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){t!=this._html&&(this._html=e.asBoolean(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=e.asFunction(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(t){t!=this.displayMemberPath&&(this._pathDisplay.path=e.asString(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(t){this._pathValue.path=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(t){t!=this.checkedMemberPath&&(this._pathChecked.path=e.asString(t),this._populateList())},enumerable:!0,configurable:!0}),i.prototype.getDisplayValue=function(t){var n,i=null;return t>-1&&e.hasItems(this._cv)&&(i=this._cv.items[t],this.displayMemberPath&&(i=this._pathDisplay.getValue(i))),n=null!=i?i.toString():"",this.itemFormatter&&(n=this.itemFormatter(t,n)),n},i.prototype.getDisplayText=function(e){var t=this.hostElement.children,n=e>-1&&e<t.length?t[e]:null;return null!=n?n.textContent:""},Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(t){this._cv&&this._cv.moveCurrentToPosition(e.asNumber(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(e){this._cv&&this._cv.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedValue",{get:function(){var e=this.selectedItem;return e&&this.selectedValuePath&&(e=this._pathValue.getValue(e)),e},set:function(e){var t,n,i=this.selectedValuePath,r=-1;if(this._cv){for(t=0;t<this._cv.items.length;t++)if(n=this._cv.items[t],i&&this._pathValue.getValue(n)==e||!i&&n==e){r=t;break}this.selectedIndex=r}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxHeight",{get:function(){var e=this.hostElement;return e?parseFloat(e.style.maxHeight):null},set:function(t){var n=this.hostElement;n&&(n.style.maxHeight=e.asNumber(t)+"px")},enumerable:!0,configurable:!0}),i.prototype.showSelection=function(){for(var t,n,i,r=this.selectedIndex,o=this.hostElement,s=o.children,a=0;a<s.length;a++)i=s[a],e.toggleClass(i,"wj-state-selected",a==r);r>-1&&r<s.length&&(i=s[r],t=i.getBoundingClientRect(),n=this.hostElement.getBoundingClientRect(),t.bottom>n.bottom?o.scrollTop+=t.bottom-n.bottom:t.top<n.top&&(o.scrollTop-=n.top-t.top)),r>-1&&this.containsFocus()&&(i=s[r],i instanceof HTMLElement&&!e.contains(i,e.getActiveElement())&&i.focus())},i.prototype.getItemChecked=function(t){var n,i=this._cv.items[t];return e.isObject(i)&&this.checkedMemberPath?this._pathChecked.getValue(i):(n=this._getCheckbox(t),n?n.checked:!1)},i.prototype.setItemChecked=function(e,t){this._setItemChecked(e,t,!0)},i.prototype.toggleItemChecked=function(e){this.setItemChecked(e,!this.getItemChecked(e))},Object.defineProperty(i.prototype,"checkedItems",{get:function(){if(this._checkedItems.splice(0,this._checkedItems.length),this._cv)for(var e=0;e<this._cv.items.length;e++)this.getItemChecked(e)&&this._checkedItems.push(this._cv.items[e]);return this._checkedItems},set:function(t){var n,i,r,o=this._cv,s=e.asArray(t,!1);if(o&&s){for(n=o.currentPosition,i=0;i<o.items.length;i++)r=o.items[i],this._setItemChecked(i,s.indexOf(r)>-1,!1);o.moveCurrentToPosition(n),this.onCheckedItemsChanged()}},enumerable:!0,configurable:!0}),i.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},i.prototype.onItemsChanged=function(e){this.itemsChanged.raise(this,e)},i.prototype.onLoadingItems=function(e){this.loadingItems.raise(this,e)},i.prototype.onLoadedItems=function(e){this.loadedItems.raise(this,e)},i.prototype.onItemChecked=function(e){this.itemChecked.raise(this,e)},i.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},i.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},i.prototype._setItemChecked=function(t,n,i){var r,o,s;void 0===i&&(i=!0),r=this._cv.items[t],e.isObject(r)&&(o=e.tryCast(this._cv,"IEditableCollectionView"),this._pathChecked.getValue(r)!=n&&(this._checking=!0,o?(o.editItem(r),this._pathChecked.setValue(r,n),o.commitEdit()):(this._pathChecked.setValue(r,n),this._cv.refresh()),this._checking=!1)),s=this._getCheckbox(t),s&&s.checked!=n&&(s.checked=n),i&&(this.onItemChecked(),this.onCheckedItemsChanged())},i.prototype._cvCollectionChanged=function(){this._checking||(this._populateList(),this.onItemsChanged())},i.prototype._cvCurrentChanged=function(){this.showSelection(),this.onSelectedIndexChanged()},i.prototype._populateList=function(){var t,i,r,o,s,a,l=this.hostElement;if(l){if(t=this.containsFocus(),this.onLoadingItems(),l.innerHTML="",this._cv)for(i=0;i<this._cv.items.length;i++)r=this.getDisplayValue(i),1!=this._html&&(r=e.escapeHtml(r)),this.checkedMemberPath&&(o=this._pathChecked.getValue(this._cv.items[i]),r='<label><input type="checkbox"'+(o?" checked":"")+"> "+r+"</label>"),s=document.createElement("div"),s.innerHTML=r,s.className="wj-listbox-item",e.hasClass(s.firstChild,"wj-separator")&&(s.className+=" wj-separator"),this.formatItem.hasHandlers&&(a=new n(i,this._cv.items[i],s),this.onFormatItem(a)),l.appendChild(s);0==l.children.length&&l.appendChild(document.createElement("div")),t&&!this.containsFocus()&&this.focus(),this.showSelection(),this.onLoadedItems()}},i.prototype._click=function(t){var n,i,r;if(!t.defaultPrevented){for(n=this.hostElement.children,i=0;i<n.length;i++)if(e.contains(n[i],t.target)){this.selectedIndex=i;break}i=this.selectedIndex,this.checkedMemberPath&&i>-1&&(r=this._getCheckbox(i),r==t.target&&this.setItemChecked(i,r.checked))}},i.prototype._keydown=function(t){var n,i,r;if(!(t.defaultPrevented||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){var o=this.selectedIndex,s=this.hostElement,a=s.children;switch(t.keyCode){case e.Key.Down:for(t.preventDefault(),n=this.selectedIndex+1;n<a.length;n++)if(this.getDisplayText(n)){this.selectedIndex=n;break}break;case e.Key.Up:for(t.preventDefault(),n=this.selectedIndex-1;n>=0;n--)if(this.getDisplayText(n)){this.selectedIndex=n;break}break;case e.Key.Home:t.preventDefault(),this.selectedIndex=0;break;case e.Key.End:t.preventDefault(),this.selectedIndex=a.length-1;break;case e.Key.PageDown:if(t.preventDefault(),this.selectedIndex>-1){var o=this.selectedIndex,l=s.offsetHeight,c=0;for(n=o+1;n<this._cv.items.length;n++){if(i=a[n].scrollHeight,c+i>l){this.selectedIndex=n;break}c+=i}this.selectedIndex==o&&this._cv.moveCurrentToLast()}break;case e.Key.PageUp:if(t.preventDefault(),this.selectedIndex>-1){var o=this.selectedIndex,l=s.offsetHeight,c=0;for(n=o-1;n>0;n--){if(i=a[n].scrollHeight,c+i>l){this.selectedIndex=n;break}c+=i}this.selectedIndex==o&&this._cv.moveCurrentToFirst()}break;case e.Key.Space:this.checkedMemberPath&&this.selectedIndex>-1&&(r=this._getCheckbox(this.selectedIndex),r&&(this.hostElement.focus(),this.setItemChecked(this.selectedIndex,!r.checked),t.preventDefault()))}}},i.prototype._keypress=function(e){var t,n=this;e.defaultPrevented||e.target instanceof HTMLInputElement||(e.charCode>32||32==e.charCode&&this._search)&&(e.preventDefault(),this._search+=String.fromCharCode(e.charCode).toLowerCase(),console.log("looking for "+this._search),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){n._toSearch=0,n._search=""},600),t=this._findNext(),0>t&&this._search.length>1&&(this._search=this._search[this._search.length-1],t=this._findNext()),t>-1&&(this.selectedIndex=t))},i.prototype._findNext=function(){var e,t,n,i,r;if(this.hostElement)for(e=this.hostElement.childElementCount,t=this.selectedIndex,(0>t||1==this._search.length)&&t++,n=0;e>n;n++)if(i=(t+n)%e,r=this.getDisplayText(i).trim().toLowerCase(),0==r.indexOf(this._search))return console.log("match at "+i),i;return-1},i.prototype._getCheckbox=function(e){var t=this.hostElement;return t&&e>-1&&e<t.children.length?t.children[e].querySelector("input[type=checkbox]"):null},i.prototype._populateSelectElement=function(e){for(var t,n=e.children,i=[],r=-1,o=0;o<n.length;o++)t=n[o],"OPTION"==t.tagName&&(t.hasAttribute("selected")&&(r=i.length),t.innerHTML?i.push({hdr:t.innerHTML,val:t.getAttribute("value"),cmdParam:t.getAttribute("cmd-param")}):i.push({hdr:'<div class="wj-separator"/>'}),e.removeChild(t),o--);i&&(this.displayMemberPath="hdr",this.selectedValuePath="val",this.itemsSource=i,this.selectedIndex=r)},i}(e.Control);t.ListBox=i,n=function(t){function n(n,i,r){t.call(this),this._index=e.asNumber(n),this._data=i,this._item=e.asType(r,HTMLElement)}return __extends(n,t),Object.defineProperty(n.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),n}(e.EventArgs),t.FormatItemEventArgs=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(n){function i(t,i){var r=this;n.call(this,t),this._editable=!1,this._composing=!1,this._deleting=!1,this._settingText=!1,this.selectedIndexChanged=new e.Event,e.addClass(this.hostElement,"wj-combobox"),this.autoExpandSelection=!1,this.addEventListener(this._tbx,"compositionstart",function(){r._composing=!0}),this.addEventListener(this._tbx,"compositionend",function(){r._composing=!1,setTimeout(function(){r._setText(r.text,!0)})}),this.addEventListener(this.hostElement,"wheel",function(t){if(!t.defaultPrevented&&!r.isDroppedDown&&!r.isReadOnly&&r.containsFocus()&&r.selectedIndex>-1){var n=e.clamp(-t.deltaY,-1,1);r.selectedIndex=e.clamp(r.selectedIndex-n,0,r.collectionView.items.length-1),t.preventDefault()}}),"SELECT"==this._orgTag&&this._lbx._populateSelectElement(this.hostElement),this.isRequired=!0,this.initialize(i)}return __extends(i,n),Object.defineProperty(i.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e,this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){this._lbx.displayMemberPath=e;var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerPath",{get:function(){return this._hdrPath},set:function(t){this._hdrPath=e.asString(t);var n=this.getDisplayText();this.text!=n&&this._setText(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(e){this._lbx.selectedValuePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(t){if(t!=this.isContentHtml){this._lbx.isContentHtml=e.asBoolean(t);var n=this.getDisplayText();this.text!=n&&this._setText(n,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(t){this._lbx.itemFormatter=e.asFunction(t),this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){e!=this.selectedIndex&&(this._lbx.selectedIndex=e);var t=this.getDisplayText(e);this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(e){this._lbx.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedValue",{get:function(){return this._lbx.selectedValue},set:function(e){this._lbx.selectedValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(t){this._lbx.maxHeight=e.asNumber(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDropDownWidth",{get:function(){var e=this._dropDown;return parseInt(e.style.maxWidth)},set:function(t){var n=this._dropDown;n.style.maxWidth=e.asNumber(t)+"px"},enumerable:!0,configurable:!0}),i.prototype.getDisplayText=function(t){if(void 0===t&&(t=this.selectedIndex),this.headerPath&&t>-1&&e.hasItems(this.collectionView)){var n=this.collectionView.items[t][this.headerPath],i=null!=n?n.toString():"";return this.isContentHtml&&(this._cvt||(this._cvt=document.createElement("div")),this._cvt.innerHTML=i,i=this._cvt.textContent),i}return this._lbx.getDisplayText(t)},i.prototype.onSelectedIndexChanged=function(e){this._updateBtn(),this.selectedIndexChanged.raise(this,e)},i.prototype.indexOf=function(t,n){var i,r,o=this.collectionView;if(e.hasItems(o)&&t){if(n&&this.selectedIndex>-1&&t==this.getDisplayText(this.selectedIndex))return this.selectedIndex;for(t=t.toString().toLowerCase(),i=0;i<o.items.length;i++)if(r=this.getDisplayText(i).toLowerCase(),n){if(r==t)return i}else if(t&&0==r.indexOf(t))return i}return-1},Object.defineProperty(i.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),i.prototype.refresh=function(t){n.prototype.refresh.call(this,t),e.hasItems(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},i.prototype.onLostFocus=function(t){this.isEditable&&this.isRequired&&!this.text&&e.hasItems(this.collectionView)&&(this.selectedIndex=0),n.prototype.onLostFocus.call(this,t)},i.prototype.onIsDroppedDownChanging=function(t){return e.hasItems(this.collectionView)?n.prototype.onIsDroppedDownChanging.call(this,t):!1},i.prototype.onIsDroppedDownChanged=function(e){n.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._lbx.showSelection(),this.isTouching||this.selectAll())},i.prototype._updateBtn=function(){var t=this.collectionView;this._btn.style.display=this._showBtn&&e.hasItems(t)?"":"none"},i.prototype._createDropDown=function(){var e=this;this._lbx=new t.ListBox(this._dropDown),this._lbx.maxHeight=200,this._lbx.selectedIndexChanged.addHandler(function(){e._updateBtn(),e.selectedIndex=e._lbx.selectedIndex,e.onSelectedIndexChanged()}),this._lbx.itemsChanged.addHandler(function(){e._updateBtn()}),this.addEventListener(this._dropDown,"click",this._dropDownClick.bind(this))},i.prototype._dropDownClick=function(e){e.defaultPrevented||e.target!=this._dropDown&&(this.isDroppedDown=!1)},i.prototype._setText=function(t,i){var r;if(!this._composing&&!this._settingText){this._settingText=!0,null==t&&(t=""),t=t.toString();var o=this.selectedIndex,s=this.collectionView,a=this._getSelStart(),l=-1;if(this._deleting&&(i=!0),this._deleting?o=this.indexOf(t,!0):(o=this.indexOf(t,i),0>o&&i&&(o=this.indexOf(t,!1)),0>o&&a>0&&(o=this.indexOf(t.substr(0,a),!1))),0>o&&!this.isEditable&&e.hasItems(s)&&(this.isRequired||t))for(o=Math.max(0,this.indexOf(this._oldText,!1)),r=0;r<t.length&&r<this._oldText.length;r++)if(t[r]!=this._oldText[r]){a=r;break}o>-1&&(l=a,t=this.getDisplayText(o)),s&&s.moveCurrentToPosition(o),t!=this._tbx.value&&(this._tbx.value=t),l>-1&&this.containsFocus()&&!this.isTouching&&this._setSelRange(l,t.length),n.prototype._setText.call(this,t,i),this._deleting=!1,this._settingText=!1}},i.prototype._findNext=function(e,t){var n,i,r,o;if(this.collectionView)for(e=e.toLowerCase(),n=this.collectionView.items.length,o=1;n>=o;o++)if(i=(this.selectedIndex+o*t+n)%n,r=this.getDisplayText(i).toLowerCase(),0==r.indexOf(e))return i;return this.selectedIndex},i.prototype._keydown=function(t){var i,r;if(n.prototype._keydown.call(this,t),!t.defaultPrevented&&this._elRef==this._tbx&&((t.keyCode==e.Key.Back||t.keyCode==e.Key.Delete)&&(this._deleting=!0),i=this.collectionView,i&&i.items))switch(t.keyCode){case e.Key.Up:case e.Key.Down:r=this._getSelStart(),r==this.text.length&&(r=0),this.selectedIndex=this._findNext(this.text.substr(0,r),t.keyCode==e.Key.Up?-1:1),e.setSelectionRange(this._tbx,r,this.text.length),t.preventDefault()}},i.prototype._setSelRange=function(t,n){this._elRef==this._tbx&&e.setSelectionRange(this._tbx,t,n)},i.prototype._getSelStart=function(){return this._tbx&&this._tbx.value?this._tbx.selectionStart:0},i}(t.DropDown);t.ComboBox=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){t.call(this,n),this._cssMatch="wj-autocomplete-match",this._minLength=2,this._maxItems=6,this._itemCount=0,this._delay=500,this._query="",this._inCallback=!1,this._srchProps=[],e.addClass(this.hostElement,"wj-autocomplete"),this.isEditable=!0,this.isRequired=!1,this.isContentHtml=!0,this.listBox.formatItem.addHandler(this._formatListItem,this),this._itemsSourceFnCallBackBnd=this._itemSourceFunctionCallback.bind(this),this.initialize(i)}return __extends(n,t),Object.defineProperty(n.prototype,"minLength",{get:function(){return this._minLength},set:function(t){this._minLength=e.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxItems",{get:function(){return this._maxItems},set:function(t){this._maxItems=e.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=e.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(t){this._srchProp=e.asString(t),this._srchProps=t?t.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(t){this._itemsSourceFn=e.asFunction(t),e.isFunction(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallBackBnd)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(t){this._cssMatch=e.asString(t)},enumerable:!0,configurable:!0}),n.prototype._keydown=function(n){if(!n.defaultPrevented&&this.isDroppedDown)switch(n.keyCode){case e.Key.Up:case e.Key.Down:this.selectAll()}t.prototype._keydown.call(this,n)},n.prototype._setText=function(e){var t=this;if(!this._inCallback){if(!e&&this.selectedIndex>-1&&(this.selectedIndex=-1),e!=this._oldText&&(this._tbx.value!=e&&(this._tbx.value=e),this._oldText=e,this.onTextChanged(),!e&&this.collectionView))return this.collectionView.filter=this._query=null,void(this.isDroppedDown=!1);this._toSearch&&clearTimeout(this._toSearch),e!=this.getDisplayText()&&(this._toSearch=setTimeout(function(){t._toSearch=null;var e=t.text.trim().toLowerCase();e.length>=t._minLength&&e!=t._query&&(t._query=e,e=e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),t._rxMatch=new RegExp("(?=.*"+e.replace(/ /g,")(?=.*")+")","ig"),t._rxHighlight=t.isContentHtml?new RegExp("("+e.replace(/ /g,"|")+")(?![^<]*>|[^<>]* </)","ig"):new RegExp("("+e.replace(/ /g,"|")+")","ig"),t.itemsSourceFunction?t.itemsSourceFunction(e,t.maxItems,t._itemsSourceFnCallBackBnd):t._updateItems())},this._delay))}},n.prototype._itemSourceFunctionCallback=function(t){this._inCallback=!0;var n=e.asCollectionView(t);n&&n.moveCurrentToPosition(-1),this.itemsSource=n,this._inCallback=!1,this.containsFocus()&&(this.isDroppedDown=!0,this.refresh())},n.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e),this._query="",this.selectedIndex>-1?(this._setText(this.getDisplayText()),this.isTouching||this.selectAll()):this.isTouching||this._tbx.focus()},n.prototype._updateItems=function(){var e=this.collectionView;e&&(this._inCallback=!0,e.beginUpdate(),this._itemCount=0,e.filter=this._filter.bind(this),e.moveCurrentToPosition(-1),e.endUpdate(),this._inCallback=!1,this.isDroppedDown=e.items.length>0&&this.containsFocus(),0!=e.items.length||this.isEditable||(this.selectedIndex=-1),this.refresh())},n.prototype._filter=function(e){var t,n;if(this._itemCount>=this._maxItems)return!1;if(t=e?e.toString():"",this.displayMemberPath)for(t=e[this.displayMemberPath],n=0;n<this._srchProps.length;n++)t+="\x00"+e[this._srchProps[n]];return this.isContentHtml&&(t=t.replace(/<[^>]*>/g,"")),t.match(this._rxMatch)?(this._itemCount++,!0):!1},n.prototype._formatListItem=function(e,t){if(this._cssMatch){var n='<span class="'+this._cssMatch+'">$1</span>';t.item.innerHTML=t.item.innerHTML.replace(this._rxHighlight,n)}},n}(t.ComboBox);t.AutoComplete=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){var r,o=this;t.call(this,n),this.itemClicked=new e.Event,e.addClass(this.hostElement,"wj-menu"),this._tbx.style.display="none",r='<div wj-part="header" class="wj-form-control" style="cursor:default"/>',this._hdr=e.createElement(r),this._tbx.parentElement.insertBefore(this._hdr,this._tbx),this._elRef=this._hdr,this.isRequired=!1,"SELECT"==this._orgTag&&(this.header=this.hostElement.getAttribute("header"),this._lbx.itemsSource&&(this.commandParameterPath="cmdParam")),this.isContentHtml=!0,this.maxDropDownHeight=500,this.addEventListener(this._hdr,"click",function(e){e.defaultPrevented||(o._isButton?(o.isDroppedDown=!1,o._raiseCommand()):o.isDroppedDown=!o.isDroppedDown)}),this.initialize(i)}return __extends(n,t),Object.defineProperty(n.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(t){this._hdr.innerHTML=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this._command},set:function(e){this._command=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(t){this._cmdPath=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(t){this._cmdParamPath=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isButton",{get:function(){return this._isButton},set:function(t){this._isButton=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"owner",{get:function(){return this._owner},set:function(t){this._owner=e.asType(t,HTMLElement,!0),this._enableDisableItems()},enumerable:!0,configurable:!0}),n.prototype.onItemClicked=function(e){this.itemClicked.raise(this,e)},n.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown?(this._closing=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this.dropDown.focus()):this.selectedItem||(this.selectedItem=this._defaultItem)},n.prototype._keydown=function(n){n.defaultPrevented||n.keyCode==e.Key.Enter&&(this.isDroppedDown?this.getDisplayText(this.selectedIndex)&&this._raiseCommand():(this.isDroppedDown=!0,n.preventDefault())),t.prototype._keydown.call(this,n)},n.prototype._dropDownClick=function(e){e.defaultPrevented||this.getDisplayText(this.selectedIndex)&&this._raiseCommand(),t.prototype._dropDownClick.call(this,e)},n.prototype._raiseCommand=function(e){var t,n=this.selectedItem,i=this._getCommand(n);if(i){if(t=this._cmdParamPath?n[this._cmdParamPath]:null,!this._canExecuteCommand(i,t))return;this._executeCommand(i,t)}this.onItemClicked(e)},n.prototype._getCommand=function(e){var t=e&&this.commandPath?e[this.commandPath]:null;return t?t:this.command},n.prototype._executeCommand=function(t,n){t&&!e.isFunction(t)&&(t=t.executeCommand),e.isFunction(t)&&t(n)},n.prototype._canExecuteCommand=function(t,n){if(t){var i=t.canExecuteCommand;if(e.isFunction(i))return i(n)}return!0},n.prototype._enableDisableItems=function(){var t,n,i,r,o;if(this.collectionView&&(this.command||this.commandPath))for(t=this.collectionView.items,n=0;n<t.length;n++)i=this._getCommand(t[n]),r=this.commandParameterPath?t[n][this.commandParameterPath]:null,i&&(o=this._lbx.hostElement.children[n],e.toggleClass(o,"wj-state-disabled",!this._canExecuteCommand(i,r)))},n}(t.ComboBox);t.Menu=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},wijmo.culture.MultiSelect={itemsSelected:"{count:n0} items selected"},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){var r=this;t.call(this,n),this._maxHdrItems=2,this._readOnly=!1,this._hdrFmt=e.culture.MultiSelect.itemsSelected,this.checkedItemsChanged=new e.Event,e.addClass(this.hostElement,"wj-multiselect"),this._tbx.readOnly=!0,this.checkedMemberPath=null,this.addEventListener(this.inputElement,"click",function(){r.isDroppedDown=!r.isDroppedDown}),this.removeEventListener(this.dropDown,"click"),this._updateHeader(),this.listBox.itemsChanged.addHandler(function(){r._updateHeader()}),this.listBox.checkedItemsChanged.addHandler(function(){r._updateHeader(),r.onCheckedItemsChanged()}),this.initialize(i)}return __extends(n,t),Object.defineProperty(n.prototype,"checkedMemberPath",{get:function(){var e=this.listBox.checkedMemberPath;return e!=n._DEF_CHECKED_PATH?e:null},set:function(t){t=e.asString(t),this.listBox.checkedMemberPath=t?t:n._DEF_CHECKED_PATH;
},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(t){this._maxHdrItems!=t&&(this._maxHdrItems=e.asNumber(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(t){t!=this._hdrFmt&&(this._hdrFmt=e.asString(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(t){t!=this._hdrFormatter&&(this._hdrFormatter=e.asFunction(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(t){this.listBox.checkedItems=e.asArray(t)},enumerable:!0,configurable:!0}),n.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},Object.defineProperty(n.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=e.asBoolean(t),e.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),n.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._updateHeader()},n.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&this.dropDown.focus()},n.prototype._setText=function(){},n.prototype._updateHeader=function(){var t,n,i;if(this._hdrFormatter)this.inputElement.value=this._hdrFormatter();else{if(t=this.checkedItems,n="",t.length>0)if(t.length<=this._maxHdrItems){if(this.displayMemberPath)for(i=0;i<t.length;i++)t[i]=t[i][this.displayMemberPath];n=t.join(", ")}else n=e.format(this.headerFormat,{count:t.length});this.inputElement.value=n}this._updateState()},n._DEF_CHECKED_PATH="$checked",n}(t.ComboBox);t.MultiSelect=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";!function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.Blur=2]="Blur",e[e.ClickOrBlur=3]="ClickOrBlur"}(t.PopupTrigger||(t.PopupTrigger={}));var n=t.PopupTrigger,i=function(t){function i(i,r){var o,s=this;t.call(this,i,null,!0),this._showTrigger=n.Click,this._hideTrigger=n.Blur,this._fadeIn=!0,this._fadeOut=!0,this._click=this._handleClick.bind(this),this._mousedown=this._handleMouseDown.bind(this),this._visible=!1,this.showing=new e.Event,this.shown=new e.Event,this.hiding=new e.Event,this.hidden=new e.Event,o=this.hostElement,e.addClass(o,"wj-control wj-content wj-popup"),o.getAttribute("tabindex")||(o.tabIndex=0),e.hidePopup(o,!1),this.addEventListener(o,"keydown",function(t){if(!t.defaultPrevented&&(t.keyCode==e.Key.Escape&&(t.preventDefault(),s.hide()),t.keyCode==e.Key.Enter)){var n=s.dialogResultEnter;n&&(t.preventDefault(),s._validateAndHide(n))}}),this.addEventListener(o,"keydown",function(t){!t.defaultPrevented&&s.modal&&t.keyCode==e.Key.Tab&&(t.preventDefault(),e.moveFocus(s.hostElement,t.shiftKey?-1:1))}),this.addEventListener(o,"click",function(e){if(e.target instanceof HTMLElement){var t=e.target,n=t.className.match(/\bwj-hide[\S]*\b/);n&&n.length>0&&(e.preventDefault(),e.stopPropagation(),s.hide(n[0]))}}),this.addEventListener(document,"wheel",function(e){if(s.isVisible&&s._modal){for(var t=e.target;t&&t!=document.body;t=t.parentElement)if(t.scrollHeight>t.clientHeight)return;e.preventDefault(),e.stopPropagation()}}),this.initialize(r)}return __extends(i,t),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},set:function(t){this._owner&&(this.removeEventListener(this._owner,"mousedown"),this.removeEventListener(this._owner,"click")),this._owner=null!=t?e.getElement(t):null,this._owner&&(this.addEventListener(this._owner,"mousedown",this._mousedown,!0),this.addEventListener(this._owner,"click",this._click,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(e){e!=this.content&&(this.hostElement.innerHTML="",e instanceof HTMLElement&&this.hostElement.appendChild(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(t){this._showTrigger=e.asEnum(t,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(t){this._hideTrigger=e.asEnum(t,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dialogResult",{get:function(){return this._result},set:function(e){this._result=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(e){this._resultEnter=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isVisible",{get:function(){var e=this.hostElement;return this._visible&&e&&"none"!=e.style.display},enumerable:!0,configurable:!0}),i.prototype.show=function(t,n){var i,r,o=this;!this.isVisible&&(this.dialogResult=null,this._callback=null,i=new e.CancelEventArgs,this.onShowing(i))&&(null!=t&&(this.modal=e.asBoolean(t)),null!=n&&(this._callback=e.asFunction(n)),r=this._owner?this._owner.getBoundingClientRect():null,e.showPopup(this.hostElement,r,!1,this._fadeIn),this._modal&&this._showBackdrop(),this._visible=!0,this.onShown(i),setTimeout(function(){if(!o.isTouching){var t=o.hostElement.querySelector("input[autofocus]");t&&t.clientHeight>0&&!t.disabled&&t.tabIndex>-1&&!e.closest(t,"[disabled],.wj-state-disabled")?(t.focus(),t.select()):e.moveFocus(o.hostElement,0)}o.containsFocus()||(o.hostElement.tabIndex=0,o.hostElement.focus())},200))},i.prototype.hide=function(t){if(this.isVisible){e.isUndefined(t)||(this.dialogResult=t);var n=new e.CancelEventArgs;this.onHiding(n)&&(this._modal&&e.hidePopup(this._bkdrop,!0,this.fadeOut),e.hidePopup(this.hostElement,!0,this.fadeOut),this._visible=!1,this.onHidden(n),this._callback&&this._callback(this))}},i.prototype.onShowing=function(e){return this.showing.raise(this,e),!e.cancel},i.prototype.onShown=function(e){this.shown.raise(this,e)},i.prototype.onHiding=function(e){return this.hiding.raise(this,e),!e.cancel},i.prototype.onHidden=function(e){this.hidden.raise(this,e)},i.prototype.dispose=function(){this._owner=null,t.prototype.dispose.call(this)},i.prototype.onLostFocus=function(e){this.isVisible&&this._hideTrigger&n.Blur&&(this.containsFocus()||this.hide()),t.prototype.onLostFocus.call(this,e)},i.prototype.refresh=function(n){if(void 0===n&&(n=!0),t.prototype.refresh.call(this,n),this.isVisible&&!this._refreshing){this._refreshing=!0;var i=e.getActiveElement(),r=this._owner?this._owner.getBoundingClientRect():null;e.showPopup(this.hostElement,r),this._modal&&i instanceof HTMLElement&&i!=e.getActiveElement()&&i.focus(),this._refreshing=!1}},i.prototype._handleResize=function(){this.isVisible&&this.refresh()},i.prototype._handleClick=function(){if(this.isVisible)this._hideTrigger&n.Click&&this.hide();else if(this._showTrigger&n.Click&&!this._wasVisible){var e=this.hostElement;e&&"none"==e.style.display&&this.show()}},i.prototype._handleMouseDown=function(){this._wasVisible=this.isVisible},i.prototype._showBackdrop=function(){var t,n=this;this._bkdrop||(this._bkdrop=document.createElement("div"),this._bkdrop.tabIndex=-1,e.addClass(this._bkdrop,"wj-popup-backdrop"),this.addEventListener(this._bkdrop,"mousedown",function(e){e.preventDefault(),e.stopPropagation(),n.hostElement.focus()})),this._bkdrop.style.display="",t=this.hostElement,t.parentElement.insertBefore(this._bkdrop,t)},i.prototype._validateAndHide=function(e){var t=this.hostElement.querySelector(":invalid");t?t.focus():this.hide(e)},i}(e.Control);t.Popup=i}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(n){function i(i,r){var o,s=this;n.call(this,i),this._format="d",this.valueChanged=new e.Event,e.addClass(this.hostElement,"wj-inputdate"),this._msk=new e._MaskProvider(this._tbx),e.isIE9()||(this._tbx.type="tel"),this.addEventListener(this.hostElement,"wheel",function(n){if(!n.defaultPrevented&&!s.isDroppedDown&&s.containsFocus()&&null!=s.value&&s._canChangeValue()){var i=e.clamp(-n.deltaY,-1,1);s.value=s.selectionMode==t.DateSelectionMode.Month?e.DateTime.addMonths(s.value,i):e.DateTime.addDays(s.value,i),s.selectAll(),n.preventDefault()}}),this.value=e.DateTime.newDate(),"INPUT"==this._orgTag&&(o=this._tbx.getAttribute("value"),o&&(this.value=e.Globalize.parseDate(o,"yyyy-MM-dd"))),this.isRequired=!0,this.initialize(r)}return __extends(i,n),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){e.DateTime.equals(this._value,t)?this._tbx.value=e.Globalize.format(t,this.format):(t=e.asDate(t,!this.isRequired||null==t&&null==this._value),t=this._clamp(t),this._isValidDate(t)?(this._tbx.value=t?e.Globalize.format(t,this.format):"",t==this._value||e.DateTime.equals(this._value,t)||(this._value=t,this.onValueChanged())):this._tbx.value=t?e.Globalize.format(this.value,this.format):"",this.text!=this._oldText&&this.onTextChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(e){this.calendar.selectionMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._calendar.min},set:function(t){this._calendar.min=e.asDate(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._calendar.max},set:function(t){this._calendar.max=e.asDate(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=e.asString(t),this._tbx.value=e.Globalize.format(this.value,this.format))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"calendar",{get:function(){return this._calendar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemValidator",{get:function(){return this._calendar.itemValidator},set:function(t){t!=this.itemValidator&&(this._calendar.itemValidator=e.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemFormatter",{get:function(){return this.calendar.itemFormatter},set:function(t){t!=this.itemFormatter&&(this.calendar.itemFormatter=e.asFunction(t))},enumerable:!0,configurable:!0}),i.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},i.prototype.refresh=function(){this.isDroppedDown=!1,this._msk&&this._msk.refresh(),this._calendar&&this._calendar.refresh(),this._tbx.value=e.Globalize.format(this.value,this.format)},i.prototype.onIsDroppedDownChanged=function(e){n.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._calChanged=!1,this.dropDown.focus())},i.prototype._createDropDown=function(){var n=this;this._calendar=new t.Calendar(this._dropDown),this._dropDown.tabIndex=-1,this._calendar.valueChanged.addHandler(function(){n.value=e.DateTime.fromDateTime(n._calendar.value,n.value),n._calChanged=!0}),this.addEventListener(this._dropDown,"mouseup",function(e){n._calChanged?n.isDroppedDown=!1:"btn-today"==e.target.getAttribute("wj-part")&&(n.isDroppedDown=!1)})},i.prototype._updateDropDown=function(){var e,i;this._commitText(),e=this._calendar,e.value=this.value,e.min=this.min,e.max=this.max,this.selectionMode!=t.DateSelectionMode.Month&&(e.monthView=!0),i=getComputedStyle(this.hostElement),this._dropDown.style.minWidth=18*parseFloat(i.fontSize)+"px",this._calendar.refresh(),n.prototype._updateDropDown.call(this)},i.prototype._keydown=function(i){if(!(i.defaultPrevented||i.altKey||i.ctrlKey||i.metaKey))switch(i.keyCode){case e.Key.Enter:this._commitText(),this.selectAll();break;case e.Key.Escape:this.text=e.Globalize.format(this.value,this.format),this.selectAll();break;case e.Key.Up:case e.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var r=i.keyCode==e.Key.Up?1:-1;this.value=this.selectionMode==t.DateSelectionMode.Month?e.DateTime.addMonths(this.value,r):e.DateTime.addDays(this.value,r),this.selectAll(),i.preventDefault()}}n.prototype._keydown.call(this,i)},i.prototype._canChangeValue=function(){return!this.isReadOnly&&this.selectionMode!=t.DateSelectionMode.None},i.prototype._clamp=function(e){return this.calendar._clamp(e)},i.prototype._commitText=function(){var t,n=this._tbx.value;n||this.isRequired?(t=e.Globalize.parseDate(n,this.format),t?this.value=e.DateTime.fromDateTime(t,this.value):this._tbx.value=e.Globalize.format(this.value,this.format)):this.value=null},i.prototype._isValidDate=function(e){return e&&(this._clamp(e)!=e||this.itemValidator&&!this.itemValidator(e))?!1:!0},i}(t.DropDown);t.InputDate=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){if(t.call(this,n),this._format="t",this.valueChanged=new e.Event,e.addClass(this.hostElement,"wj-inputtime"),this._value=e.DateTime.newDate(),this._msk=new e._MaskProvider(this._tbx),e.isIE9()||(this._tbx.type="tel"),"INPUT"==this._orgTag){var r=this._tbx.getAttribute("value");r&&(this.value=e.Globalize.parseDate(r,"HH:mm:ss"))}this.step=15,this.autoExpandSelection=!0,this.initialize(i)}return __extends(n,t),Object.defineProperty(n.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){t=e.asDate(t,!this.isRequired),t&&(null!=this._min&&this._getTime(t)<this._getTime(this._min)&&(t=e.DateTime.fromDateTime(t,this._min)),null!=this._max&&this._getTime(t)>this._getTime(this._max)&&(t=e.DateTime.fromDateTime(t,this._max))),this._setText(t?e.Globalize.format(t,this.format):"",!0),t==this._value||e.DateTime.equals(t,this._value)||(this._value=t,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this._min},set:function(t){this._min=e.asDate(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this._max},set:function(t){this._max=e.asDate(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"step",{get:function(){return this._step},set:function(t){this._step=e.asNumber(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=e.asString(t),this._tbx.value=e.Globalize.format(this.value,this.format),this.collectionView&&this.collectionView.items.length&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=e.asString(t)},enumerable:!0,configurable:!0}),n.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},n.prototype.refresh=function(){this.isDroppedDown=!1,this._msk.refresh(),this._tbx.value=e.Globalize.format(this.value,this.format),this._updateItems()},n.prototype.onSelectedIndexChanged=function(e){this.selectedIndex>-1&&this._commitText(),t.prototype.onSelectedIndexChanged.call(this,e)},n.prototype._updateItems=function(){var t,n,i=new Date(0,0,0,0,0),r=new Date(0,0,0,23,59,59),o=[];if(this.min&&i.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&r.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),e.isNumber(this.step)&&this.step>0)for(t=i;r>=t;t=e.DateTime.addMinutes(t,this.step))o.push(e.Globalize.format(t,this.format));n=this.text,this.itemsSource=o,this.text=n},n.prototype._getTime=function(e){return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},n.prototype._keydown=function(n){if(t.prototype._keydown.call(this,n),!n.defaultPrevented)switch(n.keyCode){case e.Key.Enter:this.isDroppedDown||(this._commitText(),this.selectAll());break;case e.Key.Escape:this.text=e.Globalize.format(this.value,this.format),this.selectAll()}},n.prototype._commitText=function(){if(this.text||this.isRequired){var t=e.Globalize.parseDate(this.text,this.format);t?this.value=e.DateTime.fromDateTime(this.value,t):this._tbx.value=e.Globalize.format(this.value,this.format)}else this.value=null},n}(t.ComboBox);t.InputTime=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(n){function i(i,r){var o,s,a=this;n.call(this,i),e.addClass(this.hostElement,"wj-inputdatetime"),this._btnTm=this.hostElement.querySelector('[wj-part="btn-tm"]'),this._format="g",this._inputTime=new t.InputTime(document.createElement("div")),this._inputTime.valueChanged.addHandler(function(){a.value=e.DateTime.fromDateTime(a.value,a._inputTime.value),a.containsFocus()&&(a.isTouching&&a.showDropDownButton||a.selectAll())}),o=this._inputTime.dropDown,s=this._keydown.bind(this),this.addEventListener(o,"keydown",s,!0),this.addEventListener(o,"blur",function(){a._updateFocusState()},!0),this.addEventListener(this._btnTm,"click",this._btnclick.bind(this)),this.addEventListener(this._btn,"mousedown",function(){a._setDropdown(a.calendar.hostElement)}),this.addEventListener(this._btnTm,"mousedown",function(e){a.isDroppedDown&&a.dropDown==o&&e.preventDefault(),a._inputTime.dropDownCssClass=a.dropDownCssClass,a._setDropdown(o)}),this.initialize(r)}return __extends(i,n),Object.defineProperty(i.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(e){this._inputTime.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(e){this._inputTime.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(e){this._inputTime.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(e){this._inputTime.step=e},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){n.prototype.refresh.call(this),this._inputTime.refresh()},i.prototype._updateBtn=function(){n.prototype._updateBtn.call(this),this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},i.prototype._clamp=function(e){return e&&(this.min&&e<this.min&&(e=this.min),this.max&&e>this.max&&(e=this.max)),e},i.prototype._commitText=function(){var t,n=this._tbx.value;n||this.isRequired?(t=e.Globalize.parseDate(n,this.format),t?this.value=t:this._tbx.value=e.Globalize.format(this.value,this.format)):this.value=null},i.prototype._setDropdown=function(e){this._dropDown!=e&&(this.isDroppedDown&&(this.isDroppedDown=!1),this._dropDown=e)},i.prototype._updateDropDown=function(){var e=this._inputTime;this._dropDown==e.dropDown?(this._commitText(),n.prototype._updateDropDown.call(this),e.isRequired=this.isRequired,e.value=this.value,this.isDroppedDown&&e.listBox.showSelection()):n.prototype._updateDropDown.call(this)},i.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span class="wj-input-group-btn" tabindex="-1"><button wj-part="btn" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-calendar"></span></button><button wj-part="btn-tm" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-clock"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>',i}(t.InputDate);t.InputDateTime=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){var r,o,s=this;t.call(this,n),this._showBtn=!0,this._readOnly=!1,this.textChanged=new e.Event,this.valueChanged=new e.Event,r=this.getTemplate(),this.applyTemplate("wj-control wj-inputnumber wj-content",r,{_tbx:"input",_btnUp:"btn-inc",_btnDn:"btn-dec"},"input"),o=this._tbx,o.autocomplete="off",o.spellcheck=!1,this._updateSymbols(),this.addEventListener(this._tbx,"compositionstart",function(){s._composing=!0}),this.addEventListener(this._tbx,"compositionend",function(){s._composing=!1,setTimeout(function(){s._setText(s.text)})}),this.addEventListener(o,"keypress",this._keypress.bind(this)),this.addEventListener(o,"keydown",this._keydown.bind(this)),this.addEventListener(o,"input",this._input.bind(this)),this.addEventListener(this._btnUp,"click",this._clickSpinner.bind(this)),this.addEventListener(this._btnDn,"click",this._clickSpinner.bind(this)),this.addEventListener(this.hostElement,"wheel",function(t){if(!t.defaultPrevented&&!s.isReadOnly&&s.containsFocus()&&null!=s.value){var n=e.clamp(-t.deltaY,-1,1);s._increment((s.step||1)*n),setTimeout(function(){return s.selectAll()}),t.preventDefault()}}),this.value=0,this.isRequired=!0,this.initialize(i)}return __extends(n,t),Object.defineProperty(n.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value)if(t=e.asNumber(t,!this.isRequired||null==t&&null==this._value),null==t)this._setText("");else if(!isNaN(t)){var n=e.Globalize.format(t,this.format);this._setText(n)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return e._deprecated("required","isRequired"),this.isRequired},set:function(t){e._deprecated("required","isRequired"),this.isRequired=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=e.asBoolean(t),this.inputElement.readOnly=this._readOnly,e.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this._min},set:function(t){this._min=e.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this._max},set:function(t){this._max=e.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"step",{get:function(){return this._step},set:function(t){this._step=e.asNumber(t,!0),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=e.asString(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._oldText=null,this._setText(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(t){this._showBtn=e.asBoolean(t),this._updateBtn()},enumerable:!0,configurable:!0}),n.prototype.selectAll=function(){e.setSelectionRange(this._tbx,0,this._tbx.value.length)},n.prototype.onTextChanged=function(e){this._updateState(),this.textChanged.raise(this,e)},n.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},n.prototype.onGotFocus=function(e){this.isTouching||(this._tbx.focus(),this.selectAll()),t.prototype.onGotFocus.call(this,e)},n.prototype.onLostFocus=function(n){var i=this._clamp(this.value),r=e.Globalize.format(i,this.format,!1,!1);this._setText(r),t.prototype.onLostFocus.call(this,n)},n.prototype.refresh=function(){this._updateSymbols();var t=e.Globalize.format(this.value,this.format);this._setText(t)},n.prototype._updateSymbols=function(){var t=e.culture.Globalize.numberFormat;this._decChar=t["."]||".",this._currChar=t.currency.symbol||"$",this._rxSym=new RegExp("^[%+\\-() "+this._decChar+this._currChar+"]*$")},n.prototype._clamp=function(t){return e.clamp(t,this.min,this.max)},n.prototype._isNumeric=function(e,t){void 0===t&&(t=!1);var n=e==this._decChar||e>="0"&&"9">=e;return n||t||(n="+-()".indexOf(e)>-1),n},n.prototype._getInputRange=function(e){var t;void 0===e&&(e=!1);var n=[0,0],i=this.text,r=!1;for(t=0;t<i.length;t++)this._isNumeric(i[t],e)&&(r||(n[0]=t,r=!0),n[1]=t+1);return n},n.prototype._moveToDigit=function(){var t=this._getInputRange(!0);e.setSelectionRange(this._tbx,t[0],t[1])},n.prototype._increment=function(t){if(t){var n=this._clamp(this.value+t),i=e.Globalize.format(n,this.format,!1,!1);this._setText(i)}},n.prototype._getSelStart=function(){return this._tbx&&this._tbx.value?this._tbx.selectionStart:0},n.prototype._updateBtn=function(){this.showSpinner&&this.step&&null!=this.value?(this._btnUp.style.display=this._btnDn.style.display="",e.addClass(this.hostElement,"wj-input-show-spinner")):(this._btnUp.style.display=this._btnDn.style.display="none",e.removeClass(this.hostElement,"wj-input-show-spinner"))},n.prototype._setText=function(t){var n,i,r,o;if(!this._composing){if(!t){if(!this.isRequired)return this._tbx.value="",null!=this._value&&(this._value=null,this.onValueChanged()),this._oldText&&(this._oldText=t,this.onTextChanged()),void this._updateBtn();t="0"}if("-"==t||"("==t)return this._tbx.value=t,void e.setSelectionRange(this._tbx,1);if(t.length>1&&")"==t[t.length-1]&&"("!=t[0]&&(t=t.substr(0,t.length-1)),this._rxSym.test(t)&&(t="0"),n=this._format||(t.indexOf(this._decChar)>-1?"n2":"n0"),i=e.Globalize.parseFloat(t,n),isNaN(i))return void(this._tbx.value=this._oldText);t.indexOf("%")<0&&n.toLowerCase().indexOf("p")>-1&&(i/=100),r=this._oldText&&t.length==this._oldText.length+1,o=e.Globalize.format(i,n,!1,r),("n"==n||"g"==n[0].toLowerCase())&&this._tbx.selectionStart==this._tbx.value.length&&(t==o+this._decChar||t==o+this._decChar+"0")&&(o=t),this._tbx.value!=o&&(this._tbx.value=o,i=e.Globalize.parseFloat(o,this.format)),i!=this._value&&(this._value=i,this.onValueChanged()),this.text!=this._oldText&&(this.onTextChanged(),this._oldText=this.text),this._updateBtn()}},n.prototype._keypress=function(t){var n,i,r;if(!t.defaultPrevented&&!this._composing&&!this._readOnly&&t.charCode&&!t.ctrlKey)switch(n=String.fromCharCode(t.charCode),this._isNumeric(n)?(i=this._getInputRange(!0),this._tbx.selectionStart<i[0]&&e.setSelectionRange(this._tbx,i[0],i[1])):t.preventDefault(),n){case"-":this.value?(this.value*=-1,this._moveToDigit()):this._setText("-"),t.preventDefault();break;case"+":this.value=Math.abs(this.value),this._moveToDigit(),t.preventDefault();break;case this._decChar:r=this._tbx.value.indexOf(n),r>-1&&(this._getSelStart()<=r&&r++,e.setSelectionRange(this._tbx,r),t.preventDefault())}},n.prototype._keydown=function(t){var n,i=this;if(!t.defaultPrevented&&!this._composing)switch(t.keyCode){case e.Key.Up:case e.Key.Down:this.step&&(this._increment(this.step*(t.keyCode==e.Key.Up?1:-1)),setTimeout(function(){i.selectAll()}),t.preventDefault());break;case e.Key.Back:this._tbx&&this._tbx.selectionStart==this._tbx.selectionEnd&&(n=this._tbx.selectionStart,n>0&&this.text[n-1]==this._decChar&&(setTimeout(function(){e.setSelectionRange(i._tbx,n-1)}),t.preventDefault()));break;case e.Key.Delete:this._tbx&&this._tbx.selectionStart==this._tbx.selectionEnd&&(n=this._tbx.selectionStart,n>0&&this.text[n]==this._decChar&&(setTimeout(function(){e.setSelectionRange(i._tbx,n+1)}),t.preventDefault()))}},n.prototype._input=function(){var t=this;this._composing||setTimeout(function(){var n,i,r,o=t._tbx,s=o.value,a=t._getSelStart(),l=s?s.indexOf(t._decChar):-1;t._setText(s),t.containsFocus()&&(n=o.value,i=n.indexOf(t._decChar),s&&"-"==s[0]&&n&&"-"!=n[0]&&(s=null),s?l>=a&&i>-1||0>l&&0>i?a+=n.length-s.length:a==s.length&&0>l&&i>-1&&(a=i):a=i>-1?i:n.match(/[^\d]*$/).index,r=t._getInputRange(),a<r[0]&&(a=r[0]),a>r[1]&&(a=r[1]),e.setSelectionRange(o,a))})},n.prototype._clickSpinner=function(t){var n=this;t.defaultPrevented||this.isReadOnly||!this.step||null==this.value||(this._increment(this.step*(e.contains(this._btnUp,t.target)?1:-1)),this.isTouching||setTimeout(function(){return n.selectAll()}))},n.controlTemplate='<div class="wj-input"><div class="wj-input-group"><span wj-part="btn-dec" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">-</button></span><input type="tel" wj-part="input" class="wj-form-control wj-numeric"/><span wj-part="btn-inc" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">+</button></span></div>',n}(e.Control);t.InputNumber=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i){var r,o,s=this;t.call(this,n),this.valueChanged=new e.Event,
r=this.getTemplate(),this.applyTemplate("wj-control wj-inputmask wj-content",r,{_tbx:"input"},"input"),"INPUT"==this._orgTag&&(o=this._tbx.getAttribute("value"),o&&(this.value=o)),this._msk=new e._MaskProvider(this._tbx),this.isRequired=!0,this.initialize(i),this.addEventListener(this._tbx,"input",function(){setTimeout(function(){s.onValueChanged()})})}return __extends(n,t),Object.defineProperty(n.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._tbx.value},set:function(t){if(t!=this.value){this._tbx.value=e.asString(t);var n=e.getActiveElement();this._tbx.selectionStart=this._tbx.value.length,n&&n!=e.getActiveElement()&&n.focus(),t=this._msk._applyMask(),this._tbx.value=t,this.onValueChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(e){this.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){var n=this.value;this._msk.mask=e.asString(t),this.value!=n&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(e){var t=this.value;this._msk.promptChar=e,this.value!=t&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=e.asBoolean(t)},enumerable:!0,configurable:!0}),n.prototype.selectAll=function(){var t=this._msk.getMaskRange();e.setSelectionRange(this._tbx,t[0],t[1]+1)},n.prototype.onValueChanged=function(e){this._updateState(),this.valueChanged.raise(this,e)},n.prototype.refresh=function(e){t.prototype.refresh.call(this,e),this._msk.refresh()},n.prototype.onGotFocus=function(e){t.prototype.onGotFocus.call(this,e),this.selectAll()},n.controlTemplate='<div class="wj-input"><div class="wj-input-group"><input wj-part="input" class="wj-form-control"/></div>',n}(e.Control);t.InputMask=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n=function(n){function i(t,i){var r=this;n.call(this,t),this.valueChanged=new e.Event,e.addClass(this.hostElement,"wj-inputcolor"),this._tbx.style.paddingLeft="24px",this._ePreview=e.createElement('<div class="wj-inputcolorbox" style="position:absolute;left:6px;top:6px;width:12px;bottom:6px;border:1px solid black"></div>'),this.hostElement.style.position="relative",this.hostElement.appendChild(this._ePreview),"INPUT"==this._orgTag&&(this._tbx.type="",this._commitText()),this.value="#ffffff",this.isRequired=!0,this.initialize(i),this.addEventListener(this._colorPicker.hostElement,"click",function(t){var n,i=t.target;i&&"DIV"==i.tagName&&(e.closest(i,'[wj-part="div-pal"]')||e.closest(i,'[wj-part="div-pv"]'))&&(n=i.style.backgroundColor,n&&(r.isDroppedDown=!1))})}return __extends(i,n),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){t!=this.value&&(t||!this.isRequired)&&(this.text=e.asString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(e.asString(t),!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(e){this._colorPicker.showAlphaChannel=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),i.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},i.prototype._createDropDown=function(){var n=this;this._colorPicker=new t.ColorPicker(this._dropDown),e.setCss(this._dropDown,{minWidth:420,minHeight:200}),this._colorPicker.valueChanged.addHandler(function(){n.value=n._colorPicker.value})},i.prototype._keydown=function(t){if(!t.defaultPrevented)switch(t.keyCode){case e.Key.Enter:this._commitText(),this.selectAll();break;case e.Key.Escape:this.text=this.value,this.selectAll()}n.prototype._keydown.call(this,t)},i.prototype._commitText=function(){if(this.value!=this.text){if(!this.isRequired&&!this.text)return this._value=this.text,void(this._ePreview.style.backgroundColor="");var t=e.Color.fromString(this.text);t?(this._colorPicker.value=this.text,this._value=this._colorPicker.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()):this.text=this._value?this._value:""}},i}(t.DropDown);t.InputColor=n}(t=e.input||(e.input={}))}(wijmo||(wijmo={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},wijmo;wijmo.culture.FlexGrid={groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} items)"},function(e){var t;!function(t){"use strict";!function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row",e[e.All=3]="All"}(t.HeadersVisibility||(t.HeadersVisibility={}));var n=t.HeadersVisibility,i=function(i){function r(r,o){var s,a,l,c=this;i.call(this,r,null,!0),this._szClient=new e.Size(0,0),this._ptScrl=new e.Point(0,0),this._rtl=!1,this._cellPadding=3,this._autoGenCols=!0,this._autoClipboard=!0,this._readOnly=!1,this._indent=14,this._autoSizeMode=t.AutoSizeMode.Both,this._hdrVis=n.All,this._alSorting=!0,this._alAddNew=!1,this._alDelete=!1,this._alResizing=t.AllowResizing.Columns,this._alDragging=t.AllowDragging.Columns,this._alMerging=t.AllowMerging.None,this._ssHdr=n.None,this._shSort=!0,this._shGroups=!0,this._shAlt=!0,this._shErr=!0,this._valEdt=!0,this._deferResizing=!1,this._pSel=!0,this._pOutline=!0,this.itemsSourceChanged=new e.Event,this.scrollPositionChanged=new e.Event,this.selectionChanging=new e.Event,this.selectionChanged=new e.Event,this.loadingRows=new e.Event,this.loadedRows=new e.Event,this.updatingLayout=new e.Event,this.updatedLayout=new e.Event,this.resizingColumn=new e.Event,this.resizedColumn=new e.Event,this.autoSizingColumn=new e.Event,this.autoSizedColumn=new e.Event,this.draggingColumn=new e.Event,this.draggedColumn=new e.Event,this.resizingRow=new e.Event,this.resizedRow=new e.Event,this.autoSizingRow=new e.Event,this.autoSizedRow=new e.Event,this.draggingRow=new e.Event,this.draggedRow=new e.Event,this.groupCollapsedChanging=new e.Event,this.groupCollapsedChanged=new e.Event,this.sortingColumn=new e.Event,this.sortedColumn=new e.Event,this.beginningEdit=new e.Event,this.prepareCellForEdit=new e.Event,this.cellEditEnding=new e.Event,this.cellEditEnded=new e.Event,this.rowEditStarting=new e.Event,this.rowEditStarted=new e.Event,this.rowEditEnding=new e.Event,this.rowEditEnded=new e.Event,this.rowAdded=new e.Event,this.deletingRow=new e.Event,this.deletedRow=new e.Event,this.copying=new e.Event,this.copied=new e.Event,this.pasting=new e.Event,this.pasted=new e.Event,this.pastingCell=new e.Event,this.pastedCell=new e.Event,this.formatItem=new e.Event,this.updatingView=new e.Event,this.updatedView=new e.Event,this._mappedColumns=null,s=this.hostElement,e.isIE()&&(s.style.borderRadius="0px"),a=this.getTemplate(),this.applyTemplate("wj-control wj-flexgrid wj-content",a,{_root:"root",_eSz:"sz",_eCt:"cells",_fCt:"fcells",_eTL:"tl",_eBL:"bl",_eCHdr:"ch",_eRHdr:"rh",_eCFtr:"cf",_eTLCt:"tlcells",_eBLCt:"blcells",_eCHdrCt:"chcells",_eCFtrCt:"cfcells",_eRHdrCt:"rhcells",_eMarquee:"marquee",_eFocus:"focus"}),l=this._getDefaultRowHeight(),this.deferUpdate(function(){c._rows=new t.RowCollection(c,l),c._cols=new t.ColumnCollection(c,4*l),c._hdrRows=new t.RowCollection(c,l),c._hdrCols=new t.ColumnCollection(c,Math.round(1.25*l)),c._ftrRows=new t.RowCollection(c,l),c._gpTL=new t.GridPanel(c,t.CellType.TopLeft,c._hdrRows,c._hdrCols,c._eTLCt),c._gpCHdr=new t.GridPanel(c,t.CellType.ColumnHeader,c._hdrRows,c._cols,c._eCHdrCt),c._gpRHdr=new t.GridPanel(c,t.CellType.RowHeader,c._rows,c._hdrCols,c._eRHdrCt),c._gpCells=new t.GridPanel(c,t.CellType.Cell,c._rows,c._cols,c._eCt),c._gpBL=new t.GridPanel(c,t.CellType.BottomLeft,c._ftrRows,c._hdrCols,c._eBLCt),c._gpCFtr=new t.GridPanel(c,t.CellType.ColumnFooter,c._ftrRows,c._cols,c._eCFtrCt),c._hdrRows.push(new t.Row),c._hdrCols.push(new t.Column),c._hdrCols[0].align="center",c._cf=new t.CellFactory,c._keyHdl=new t._KeyboardHandler(c),c._mouseHdl=new t._MouseHandler(c),c._edtHdl=new t._EditHandler(c),c._selHdl=new t._SelectionHandler(c),c._addHdl=new t._AddNewHandler(c),c._mrgMgr=new t.MergeManager(c),c._bndSortConverter=c._sortConverter.bind(c),c.initialize(o)}),this.addEventListener(this._root,"scroll",function(){c._updateScrollPosition()&&(c._afScrl&&cancelAnimationFrame(c._afScrl),c._afScrl=requestAnimationFrame(function(){c.finishEditing(),c._updateContent(!0),c._afScrl=null}))})}return __extends(r,i),r.prototype._handleResize=function(){i.prototype._handleResize.call(this),this._rcBounds=null},Object.defineProperty(r.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(t){t!=this._hdrVis&&(this._hdrVis=e.asEnum(t,n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stickyHeaders",{get:function(){return this._stickyHdr},set:function(t){var n=this;t!=this._stickyHdr&&(this._stickyHdr=e.asBoolean(t),this._updateStickyHeaders(),this.removeEventListener(window,"scroll"),this._stickyHdr&&this.addEventListener(window,"scroll",function(t){e.contains(t.target,n.hostElement)&&(n._toSticky&&cancelAnimationFrame(n._toSticky),n._toSticky=requestAnimationFrame(function(){var t=new e.CancelEventArgs;n.onUpdatingLayout(t)&&(n._updateStickyHeaders(),n.onUpdatedLayout(t)),n._toSticky=null}))},!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"preserveSelectedState",{get:function(){return this._pSel},set:function(t){this._pSel=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"preserveOutlineState",{get:function(){return this._pOutline},set:function(t){this._pOutline=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(t){this._autoGenCols=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoClipboard",{get:function(){return this._autoClipboard},set:function(t){this._autoClipboard=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnLayout",{get:function(){for(var n,i,o,s,a,l=r._getSerializableProperties(t.Column),c=new t.Column,u=[],h=0;h<this.columns.length;h++){for(n=this.columns[h],i={},o=0;o<l.length;o++)s=l[o],a=n[s],a!=c[s]&&e.isPrimitive(a)&&"size"!=s&&(i[s]=a);u.push(i)}return JSON.stringify({columns:u})},set:function(t){var n=JSON.parse(e.asString(t));if(!n||null==n.columns)throw"Invalid columnLayout data.";this.columns.clear(),this.initialize(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=e.asBoolean(t),this.finishEditing(),this.invalidate(!0),this._addHdl.updateNewRowTemplate(),e.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imeEnabled",{get:function(){return null!=this._imeHdl},set:function(e){e!=this.imeEnabled&&(this._imeHdl&&(this._imeHdl.dispose(),this._imeHdl=null),e&&(this._imeHdl=new t._ImeHandler(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowResizing",{get:function(){return this._alResizing},set:function(n){this._alResizing=e.asEnum(n,t.AllowResizing)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"deferResizing",{get:function(){return this._deferResizing},set:function(t){this._deferResizing=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoSizeMode",{get:function(){return this._autoSizeMode},set:function(n){this._autoSizeMode=e.asEnum(n,t.AutoSizeMode)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(t){this._alSorting=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(t){t!=this._alAddNew&&(this._alAddNew=e.asBoolean(t),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"newRowAtTop",{get:function(){return this._addHdl.newRowAtTop},set:function(t){this._addHdl.newRowAtTop=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(t){t!=this._alDelete&&(this._alDelete=e.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(n){n!=this._alMerging&&(this._alMerging=e.asEnum(n,t.AllowMerging),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showSelectedHeaders",{get:function(){return this._ssHdr},set:function(t){t!=this._ssHdr&&(this._ssHdr=e.asEnum(t,n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showMarquee",{get:function(){return!this._eMarquee.style.display},set:function(t){if(t!=this.showMarquee){var n=this._eMarquee.style;n.visibility="collapse",n.display=e.asBoolean(t)?"":"none",this.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showSort",{get:function(){return this._shSort},set:function(t){t!=this._shSort&&(this._shSort=e.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showGroups",{get:function(){return this._shGroups},set:function(t){t!=this._shGroups&&(this._shGroups=e.asBoolean(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showAlternatingRows",{get:function(){return this._shAlt},set:function(t){t!=this._shAlt&&(this._shAlt=e.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showErrors",{get:function(){return this._shErr},set:function(t){t!=this._shErr&&(this._shErr=e.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"validateEdits",{get:function(){return this._valEdt},set:function(t){this._valEdt=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(t){t!=this._gHdrFmt&&(this._gHdrFmt=e.asString(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowDragging",{get:function(){return this._alDragging},set:function(n){n!=this._alDragging&&(this._alDragging=e.asEnum(n,t.AllowDragging),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsSource",{get:function(){return this._items},set:function(t){var n;t!=this._items&&(this._cv&&(n=e.tryCast(this._cv,e.collections.CollectionView),n&&n.sortConverter==this._bndSortConverter&&(n.sortConverter=null),this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=this._getCollectionView(t),this._lastCount=0,this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this),n=e.tryCast(this._cv,e.collections.CollectionView),n&&!n.sortConverter&&(n.sortConverter=this._bndSortConverter)),this._bindGrid(!0),this.onItemsSourceChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&(e.assert(null==t||e.isArray(t)||e.isString(t),"childItemsPath should be an array or a string."),this._childItemsPath=t,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnFooters",{get:function(){return this._gpCFtr},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomLeftCells",{get:function(){return this._gpBL},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),r.prototype.getColumn=function(e){return this.columns.getColumn(e)},Object.defineProperty(r.prototype,"frozenRows",{get:function(){return this.rows.frozen},set:function(e){this.rows.frozen=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frozenColumns",{get:function(){return this.columns.frozen},set:function(e){this.columns.frozen=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortRowIndex",{get:function(){return this._sortRowIndex},set:function(t){t!=this._sortRowIndex&&(this._sortRowIndex=e.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(e){var t=this._root,n=-e.x;if(this._rtl)switch(r._getRtlMode()){case"rev":n=t.scrollWidth-t.clientWidth+e.x;break;case"neg":n=e.x;break;default:n=-e.x}t.scrollLeft=n,t.scrollTop=-e.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"controlRect",{get:function(){return this._rcBounds||(this._rcBounds=e.getElementRect(this._root)),this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollSize",{get:function(){return new e.Size(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellFactory",{get:function(){return this._cf},set:function(n){n!=this._cf&&(this._cf=e.asType(n,t.CellFactory,!1),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=e.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.getCellData=function(e,t,n){return this.cells.getCellData(e,t,n)},r.prototype.getCellBoundingRect=function(e,t,n){return this.cells.getCellBoundingRect(e,t,n)},r.prototype.setCellData=function(e,t,n,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this.cells.setCellData(e,t,n,i,r)},r.prototype.hitTest=function(n,i){return e.isNumber(n)&&e.isNumber(i)&&(n=new e.Point(n,i)),new t.HitTestInfo(this,n)},r.prototype.getClipString=function(n){var i,r,o,s,a="",l=!0,c=!0;if(!n)switch(n=this.selection,this.selectionMode){case t.SelectionMode.Row:case t.SelectionMode.RowRange:n.col=0,n.col2=this.columns.length-1;break;case t.SelectionMode.ListBox:for(n.col=0,n.col2=this.columns.length-1,i=0;i<this.rows.length;i++)this.rows[i].isSelected&&this.rows[i].isVisible&&(n.row=n.row2=i,a&&(a+="\n"),a+=this.getClipString(n));return a}for(n=e.asType(n,t.CellRange),r=n.topRow;r<=n.bottomRow;r++)if(this.rows[r].isVisible)for(l||(a+="\n"),l=!1,o=n.leftCol,c=!0;o<=n.rightCol;o++)this.columns[o].isVisible&&(c||(a+="	"),c=!1,s=this.cells.getCellData(r,o,!0).toString(),s=s.replace(/\t/g," "),a+=s);return a},r.prototype.setClipString=function(n,i){var r,o,s,a,l,c,u=null==i;if(!i)switch(i=this.selection,this.selectionMode){case t.SelectionMode.Row:case t.SelectionMode.RowRange:case t.SelectionMode.ListBox:i.col=0,i.col2=this.columns.length-1}i=e.asType(i,t.CellRange),n=e.asString(n).replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n&&"\n"==n[n.length-1]&&(n=n.substring(0,n.length-1)),u&&!i.isSingleCell&&(n=this._expandClipString(n,i)),r=new t.CellRange(i.topRow,i.leftCol),this.beginUpdate();var h,p=i.topRow,d=n.split("\n"),f=!1;for(o=0;o<d.length&&p<this.rows.length;o++,p++)if(this.rows[p].isVisible)for(s=d[o].split("	"),a=i.leftCol,l=0;l<s.length&&a<this.columns.length;l++,a++)this.columns[a].isVisible?this.columns[a].isReadOnly||this.rows[p].isReadOnly||(h=new t.CellRangeEventArgs(this.cells,new t.CellRange(p,a),s[l]),this.onPastingCell(h)&&this.cells.setCellData(p,a,h.data)&&(this.onPastedCell(h),f=!0),r.row2=Math.max(r.row2,p),r.col2=Math.max(r.col2,a)):l--;else o--;this.endUpdate(),f&&(c=e.tryCast(this.collectionView,"IEditableCollectionView"),c&&c.currentItem==c.currentAddItem?c.editItem(c.currentItem):this.collectionView&&this.collectionView.refresh()),this.select(r)},r.prototype._expandClipString=function(e,t){var n,i,r,o,s;if(!e)return e;var a=e.split("\n"),l=a.length,c=0,u=[];for(o=0;l>o;o++){if(n=a[o].split("	"),u.push(n),o>1&&n.length!=c)return e;c=n.length}if(i=t.rowSpan,r=t.columnSpan,(i>1||r>1)&&(1==i&&(i=l),1==r&&(r=c),r%c==0&&i%l==0))for(e="",o=0;i>o;o++)for(s=0;r>s;s++)o>0&&0==s&&(e+="\n"),s>0&&(e+="	"),e+=u[o%l][s%c];return e},r.prototype.focus=function(){var t,n;if(this.activeEditor)return void this.activeEditor.focus();if(e.getActiveElement()!=this._eFocus){if(t=this.hostElement.getBoundingClientRect(),t.bottom>0&&t.right>0&&t.top<innerHeight&&t.left<innerWidth)return e.setCss(this._eFocus,{top:Math.max(0,-t.top),left:Math.max(0,-t.left)}),void this._eFocus.focus();if(n=this.cells.hostElement.querySelector(".wj-cell.wj-state-selected"))return void n.focus();i.prototype.focus.call(this)}},r.prototype.containsFocus=function(){var e=this._edtHdl?this._edtHdl._lbx:null;return i.prototype.containsFocus.call(this)||null!=e&&e.containsFocus()},r.prototype.dispose=function(){this.finishEditing(!0),this.itemsSource=null,this._afScrl&&cancelAnimationFrame(this._afScrl),i.prototype.dispose.call(this)},r.prototype.refresh=function(e){void 0===e&&(e=!0),i.prototype.refresh.call(this,e),this.finishEditing(),e&&(this._updateColumnTypes(),this.scrollPosition=this._ptScrl),this.refreshCells(e)},r.prototype.refreshCells=function(e,t,n){this.isUpdating||(e?this._updateLayout():this._updateContent(t,n))},r.prototype.autoSizeColumn=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=4),this.autoSizeColumns(e,e,t,n)},r.prototype.autoSizeColumns=function(n,i,o,s){var a=this;void 0===o&&(o=!1),void 0===s&&(s=4);var l,c,u=0,h=o?this.topLeftCells:this.columnHeaders,p=o?this.rowHeaders:this.cells,d=this.viewRange;n=null==n?0:e.asInt(n),i=null==i?p.columns.length-1:e.asInt(i),e.asBoolean(o),e.asNumber(s),d.row=Math.max(0,d.row-1e3),d.row2=Math.min(d.row2+1e3,this.rows.length-1),this.deferUpdate(function(){var e,f,g,m=document.createElement("div");for(m.setAttribute(r._WJS_MEASURE,"true"),m.style.visibility="hidden",a.hostElement.appendChild(m),e=n;i>=e&&e>-1&&e<p.columns.length;e++){if(u=0,a.autoSizeMode&t.AutoSizeMode.Headers)for(f=0;f<h.rows.length;f++)h.rows[f].isVisible&&(g=a._getDesiredWidth(h,f,e,m),u=Math.max(u,g));if(a.autoSizeMode&t.AutoSizeMode.Cells)for(c=null,f=d.row;f<=d.row2&&f>-1&&f<p.rows.length;f++)p.rows[f].isVisible&&(!o&&e==p.columns.firstVisibleIndex&&p.rows.maxGroupLevel>-1?(g=a._getDesiredWidth(p,f,e,m),u=Math.max(u,g)):(l=p.getCellData(f,e,!0),l!=c&&(c=l,g=a._getDesiredWidth(p,f,e,m),u=Math.max(u,g))));p.columns[e].width=u+s+2}a.hostElement.removeChild(m)})},r.prototype.autoSizeRow=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0),this.autoSizeRows(e,e,t,n)},r.prototype.autoSizeRows=function(n,i,o,s){var a=this;void 0===o&&(o=!1),void 0===s&&(s=0);var l=0,c=o?this.topLeftCells:this.rowHeaders,u=o?this.columnHeaders:this.cells;o=e.asBoolean(o),s=e.asNumber(s),n=null==n?0:e.asInt(n),i=null==i?u.rows.length-1:e.asInt(i),this.deferUpdate(function(){var e,o,h,p=document.createElement("div");for(p.setAttribute(r._WJS_MEASURE,"true"),p.style.visibility="hidden",a.hostElement.appendChild(p),e=n;i>=e&&e>-1&&e<u.rows.length;e++){if(l=0,a.autoSizeMode&t.AutoSizeMode.Headers)for(o=0;o<c.columns.length;o++)c.columns[o].renderSize>0&&(h=a._getDesiredHeight(c,e,o,p),l=Math.max(l,h));if(a.autoSizeMode&t.AutoSizeMode.Cells)for(o=0;o<u.columns.length;o++)u.columns[o].renderSize>0&&(h=a._getDesiredHeight(u,e,o,p),l=Math.max(l,h));u.rows[e].height=l+s}a.hostElement.removeChild(p)})},Object.defineProperty(r.prototype,"treeIndent",{get:function(){return this._indent},set:function(t){t!=this._indent&&(this._indent=e.asNumber(t,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),r.prototype.collapseGroupsToLevel=function(n){if(this.finishEditing()){var i=this.rows;i.deferUpdate(function(){for(var r,o=0;o<i.length;o++)r=e.tryCast(i[o],t.GroupRow),r&&(r.isCollapsed=r.level>=n)})}},Object.defineProperty(r.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(n){n!=this.selectionMode&&(this._selHdl.selectionMode=e.asEnum(n,t.SelectionMode),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(e){this._selHdl.selection=e},enumerable:!0,configurable:!0}),r.prototype.select=function(e,t){void 0===t&&(t=!0),this._selHdl.select(e,t)},r.prototype.getSelectedState=function(e,t){return this.cells.getSelectedState(e,t,null)},Object.defineProperty(r.prototype,"selectedRows",{get:function(){var e,n,i=[];if(this.selectionMode==t.SelectionMode.ListBox)for(n=0;n<this.rows.length;n++)this.rows[n].isSelected&&i.push(this.rows[n]);else if(this.rows.length)for(e=this.selection,n=e.topRow;n>-1&&n<=e.bottomRow;n++)i.push(this.rows[n]);return i},set:function(n){var i=this;e.assert(this.selectionMode==t.SelectionMode.ListBox,"This property can be set only in ListBox mode."),n=e.asArray(n),this.deferUpdate(function(){for(var e,t,r=0,o=!0;r<i.rows.length;r++)e=i.rows[r],t=n&&n.indexOf(e)>-1,t&&o&&(o=!1,i.select(r,i.selection.col)),e.isSelected=t})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedItems",{get:function(){for(var e=this.selectedRows,t=0;t<e.length;t++)e[t]=e[t].dataItem;return e},set:function(n){var i=this;e.assert(this.selectionMode==t.SelectionMode.ListBox,"This property can be set only in ListBox mode."),n=e.asArray(n),this.deferUpdate(function(){for(var e,t,r=0,o=!0;r<i.rows.length;r++)e=i.rows[r],t=n&&n.indexOf(e.dataItem)>-1,t&&o&&(o=!1,i.select(r,i.selection.col)),e.isSelected=t})},enumerable:!0,configurable:!0}),r.prototype.scrollIntoView=function(t,n){var i,r;null==this._maxOffsetY&&this._updateLayout();var o=this.scrollPosition,s=this._szClient.width,a=this._szClient.height-this._gpCFtr.rows.getTotalSize(),l=this.cells._getFrozenPos();if(t=e.asInt(t),t>-1&&t<this._rows.length&&t>=this._rows.frozen){var c=this._rows[t],u=this.cells.height>a?Math.round(c.pos/(this.cells.height-a)*100)/100:0,h=Math.round(this._maxOffsetY*u),p=c.pos-h,d=p+c.renderSize-1;d>a-o.y&&(o.y=Math.max(-p,a-d)),p-l.y<-o.y&&(o.y=-(p-l.y))}return n=e.asInt(n),n>-1&&n<this._cols.length&&n>=this._cols.frozen&&(i=this._cols[n],r=i.pos+i.renderSize-1,r>-o.x+s&&(o.x=Math.max(-i.pos,s-r)),i.pos-l.x<-o.x&&(o.x=-(i.pos-l.x))),o.equals(this._ptScrl)?!1:(this.scrollPosition=o,!0)},r.prototype.isRangeValid=function(e){return e.isValid&&e.bottomRow<this.rows.length&&e.rightCol<this.columns.length},r.prototype.startEditing=function(e,t,n,i){return void 0===e&&(e=!0),this._edtHdl.startEditing(e,t,n,i)},r.prototype.finishEditing=function(e){return void 0===e&&(e=!1),this._edtHdl.finishEditing(e)},Object.defineProperty(r.prototype,"activeEditor",{get:function(){return this._edtHdl.activeEditor},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"editRange",{get:function(){return this._edtHdl.editRange},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(n){n!=this._mrgMgr&&(this._mrgMgr=e.asType(n,t.MergeManager,!0),this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.getMergedRange=function(e,t,n,i){return void 0===i&&(i=!0),this._mrgMgr?this._mrgMgr.getMergedRange(e,t,n,i):null},r.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},r.prototype.onScrollPositionChanged=function(e){this.scrollPositionChanged.raise(this,e)},r.prototype.onSelectionChanging=function(e){return this.selectionChanging.raise(this,e),!e.cancel},r.prototype.onSelectionChanged=function(e){this.selectionChanged.raise(this,e)},r.prototype.onLoadingRows=function(e){return this.loadingRows.raise(this,e),!e.cancel},r.prototype.onLoadedRows=function(e){this.loadedRows.raise(this,e)},r.prototype.onUpdatingLayout=function(e){return this.updatingLayout.raise(this,e),!e.cancel},r.prototype.onUpdatedLayout=function(e){this.updatedLayout.raise(this,e)},r.prototype.onResizingColumn=function(e){return this.resizingColumn.raise(this,e),!e.cancel},r.prototype.onResizedColumn=function(e){this.resizedColumn.raise(this,e)},r.prototype.onAutoSizingColumn=function(e){return this.autoSizingColumn.raise(this,e),!e.cancel},r.prototype.onAutoSizedColumn=function(e){this.autoSizedColumn.raise(this,e)},r.prototype.onDraggingColumn=function(e){return this.draggingColumn.raise(this,e),!e.cancel},r.prototype.onDraggedColumn=function(e){this.draggedColumn.raise(this,e)},r.prototype.onResizingRow=function(e){return this.resizingRow.raise(this,e),!e.cancel},r.prototype.onResizedRow=function(e){this.resizedRow.raise(this,e)},r.prototype.onAutoSizingRow=function(e){return this.autoSizingRow.raise(this,e),!e.cancel},r.prototype.onAutoSizedRow=function(e){this.autoSizedRow.raise(this,e)},r.prototype.onDraggingRow=function(e){return this.draggingRow.raise(this,e),!e.cancel},r.prototype.onDraggedRow=function(e){this.draggedRow.raise(this,e)},r.prototype.onGroupCollapsedChanging=function(e){return this.groupCollapsedChanging.raise(this,e),!e.cancel},r.prototype.onGroupCollapsedChanged=function(e){this.groupCollapsedChanged.raise(this,e)},r.prototype.onSortingColumn=function(e){return this.sortingColumn.raise(this,e),!e.cancel},r.prototype.onSortedColumn=function(e){this.sortedColumn.raise(this,e)},r.prototype.onBeginningEdit=function(e){return this.beginningEdit.raise(this,e),!e.cancel},r.prototype.onPrepareCellForEdit=function(e){this.prepareCellForEdit.raise(this,e)},r.prototype.onCellEditEnding=function(e){return this.cellEditEnding.raise(this,e),!e.cancel&&!e.stayInEditMode},r.prototype.onCellEditEnded=function(e){this.cellEditEnded.raise(this,e)},r.prototype.onRowEditStarting=function(e){this.rowEditStarting.raise(this,e)},r.prototype.onRowEditStarted=function(e){this.rowEditStarted.raise(this,e)},r.prototype.onRowEditEnding=function(e){this.rowEditEnding.raise(this,e)},r.prototype.onRowEditEnded=function(e){this.rowEditEnded.raise(this,e);
},r.prototype.onRowAdded=function(e){this.rowAdded.raise(this,e)},r.prototype.onDeletingRow=function(e){return this.deletingRow.raise(this,e),!e.cancel},r.prototype.onDeletedRow=function(e){this.deletedRow.raise(this,e)},r.prototype.onCopying=function(e){return this.copying.raise(this,e),!e.cancel},r.prototype.onCopied=function(e){this.copied.raise(this,e)},r.prototype.onPasting=function(e){return this.pasting.raise(this,e),!e.cancel},r.prototype.onPasted=function(e){this.pasted.raise(this,e)},r.prototype.onPastingCell=function(e){return this.pastingCell.raise(this,e),!e.cancel},r.prototype.onPastedCell=function(e){this.pastedCell.raise(this,e)},r.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},r.prototype.onUpdatingView=function(e){return this.updatingView.raise(this,e),!e.cancel},r.prototype.onUpdatedView=function(e){this.updatedView.raise(this,e)},r.prototype._getDefaultRowHeight=function(){var t,n,i,r=this.hostElement,o=document.body,s=null;if(o&&!e.contains(o,r)){for(t=r;t;t=t.parentElement)s=t;s&&o.appendChild(s)}return n=e.createElement('<div class="wj-cell">123</div>',r),i=n.scrollHeight+2,r.removeChild(n),s&&o.removeChild(s),(6>=i||isNaN(i)||!o)&&(i=28),i},r.prototype._getCollectionView=function(t){return e.asCollectionView(t)},r.prototype._getDesiredWidth=function(e,t,n,i){var r,o=this.getMergedRange(e,t,n);return this.cellFactory.updateCell(e,t,n,i,o),i.style.width="",r=i.offsetWidth,o&&o.columnSpan>1?r/o.columnSpan:r},r.prototype._getDesiredHeight=function(e,t,n,i){var r,o=this.getMergedRange(e,t,n);return this.cellFactory.updateCell(e,t,n,i,o),i.style.height="",r=i.offsetHeight,o&&o.rowSpan>1?r/o.rowSpan:r},r.prototype._getSortRowIndex=function(){return null!=this._sortRowIndex?this._sortRowIndex:this.columnHeaders.rows.length-1},r.prototype._sortConverter=function(e,t,n,i){var r,o,s,a;if(i){if(this._mappedColumns=null,this.collectionView)for(o=this.collectionView.sortDescriptions,s=0;s<o.length;s++)r=this.columns.getColumn(o[s].property),r&&r.dataMap&&(this._mappedColumns||(this._mappedColumns={}),this._mappedColumns[r.binding]=r.dataMap);this._mouseHdl._htDown&&this._mouseHdl._htDown.col>-1&&(r=this.columns[this._mouseHdl._htDown.col],this._mappedColumns&&r.dataMap&&(this._mappedColumns[r.binding]=r.dataMap))}return this._mappedColumns&&(a=this._mappedColumns[e.property],a&&a.sortByDisplayValues&&(n=a.getDisplayValue(n))),n},r.prototype._bindGrid=function(n){var i=this;this.deferUpdate(function(){var r,o,s,a,l,c,u,h;if(0==i._lastCount&&i._cv&&i._cv.items&&i._cv.items.length&&(n=!0),r=[],i.preserveSelectedState&&i.selectionMode==t.SelectionMode.ListBox)for(h=0;h<i.rows.length;h++)o=i.rows[h],o.isSelected&&o.dataItem&&r.push(o.dataItem);if(i.preserveOutlineState&&e.isFunction(window.Map)&&i.rows.maxGroupLevel>-1)for(s=new Map,h=0;h<i.rows.length;h++)a=i.rows[h],a instanceof t.GroupRow&&a.isCollapsed&&a.dataItem&&(l=a.dataItem,l instanceof e.collections.CollectionViewGroup&&(l=l._path),s.set(l,!0));if(n&&i.columns.deferUpdate(function(){i._bindColumns()}),i.rows.deferUpdate(function(){i._bindRows()}),c=0,r.length)for(h=0;h<i.rows.length&&c<r.length;h++)r.indexOf(i.rows[h].dataItem)>-1&&(i.rows[h].isSelected=!0,c++);if(i.selectionMode==t.SelectionMode.ListBox&&0==c)for(u=i.selection,h=u.topRow;h<=u.bottomRow&&h>-1&&h<i.rows.length;h++)i.rows[h].isSelected=!0;s&&i.rows.deferUpdate(function(){for(var n,r,o=0;o<i.rows.length;o++)n=i.rows[o],n instanceof t.GroupRow&&(r=n.dataItem,r instanceof e.collections.CollectionViewGroup&&(r=r._path),s.get(r)&&(n.isCollapsed=!0))}),!i._lastCount&&i._cv&&i._cv.items&&(i._lastCount=i._cv.items.length)}),this.collectionView&&this._cvCurrentChanged(this.collectionView,e.EventArgs.empty)},r.prototype._cvCollectionChanged=function(n,i){var r;if(this.autoGenerateColumns&&0==this.columns.length)return void this._bindGrid(!0);if(this.childItemsPath&&i.action!=e.collections.NotifyCollectionChangedAction.Change)return void this._bindGrid(!1);switch(i.action){case e.collections.NotifyCollectionChangedAction.Change:return void this.invalidate();case e.collections.NotifyCollectionChangedAction.Add:if(i.index==this.collectionView.items.length-1)return r=this.rows.length,this.rows[r-1]instanceof t._NewRowTemplate&&r--,void this.rows.insert(r,new t.Row(i.item));e.assert(!1,"added item should be the last one.");break;case e.collections.NotifyCollectionChangedAction.Remove:if(r=this._findRow(i.item),r>-1)return this.rows.removeAt(r),void this._cvCurrentChanged(n,i);e.assert(!1,"removed item not found in grid.")}this._bindGrid(!1)},r.prototype._cvCurrentChanged=function(){if(this.collectionView){var n=this.selection,i=n.row>-1&&n.row<this.rows.length?this.rows[n.row].dataItem:null;i instanceof e.collections.CollectionViewGroup&&(i=null),i!=this.collectionView.currentItem&&(n.row=n.row2=this._getRowIndex(this.collectionView.currentPosition),this.select(n,!1),this.selectionMode!=t.SelectionMode.None&&this.scrollIntoView(n.row,-1))}},r.prototype._getRowIndex=function(e){var n,e,i;if(this.collectionView){if(e>-1){for(n=this.collectionView.items[e];e<this.rows.length;e++)if(this.rows[e].dataItem===n)return e;return-1}return 1==this.rows.length&&this.rows[0]instanceof t._NewRowTemplate?0:(e=this.selection.row,i=e>-1?this.rows[e]:null,i&&(i instanceof t.GroupRow||null==i.dataItem)?e:-1)}return this.selection.row},r.prototype._getCvIndex=function(e){if(e>-1&&this.collectionView){var t=this.rows[e].dataItem;for(e=Math.min(e,this.collectionView.items.length);e>-1;e--)if(this.collectionView.items[e]===t)return e}return-1},r.prototype._findRow=function(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].dataItem==e)return t;return-1},r.prototype._updateLayout=function(){var t,i,o,s,a,l=new e.CancelEventArgs;if(this.onUpdatingLayout(l)){var c=this._hdrVis&n.Row?this._hdrCols.getTotalSize():0,u=this._hdrVis&n.Column?this._hdrRows.getTotalSize():0,h=this._ftrRows.getTotalSize(),p=this._rows.getTotalSize()+h;1>p&&(p=1),this._rtl=this.hostElement?"rtl"==getComputedStyle(this.hostElement).direction:!1,this._heightBrowser=Math.min(p,r._getMaxSupportedCssHeight()),this._maxOffsetY=Math.max(0,p-this._heightBrowser),this.cells.hostElement&&(t=e.createElement('<div class="wj-cell"></div>',this.cells.hostElement),i=getComputedStyle(t),this._cellPadding=parseInt(this._rtl?i.paddingRight:i.paddingLeft),t.parentElement.removeChild(t)),o=this._heightBrowser+u-h,this._rtl?(e.setCss(this._eTL,{right:0,top:0,width:c,height:u}),e.setCss(this._eCHdr,{right:c,top:0,height:u}),e.setCss(this._eRHdr,{right:0,top:u,width:c}),e.setCss(this._eCt,{right:c,top:u,width:this._gpCells.width,height:this._heightBrowser}),e.setCss(this._fCt,{right:c,top:u}),e.setCss(this._eBL,{right:0,top:o,width:c,height:h}),e.setCss(this._eCFtr,{right:c,top:o,height:h})):(e.setCss(this._eTL,{left:0,top:0,width:c,height:u}),e.setCss(this._eCHdr,{left:c,top:0,height:u}),e.setCss(this._eRHdr,{left:0,top:u,width:c}),e.setCss(this._eCt,{left:c,top:u,width:this._gpCells.width,height:this._heightBrowser}),e.setCss(this._fCt,{left:c,top:u}),e.setCss(this._eBL,{left:0,top:o,width:c,height:h}),e.setCss(this._eCFtr,{left:c,top:o,height:h})),this._stickyHdr&&this._updateStickyHeaders(),s=[this._eTL,this._eBL,this._eCHdr,this._eCFtr,this._eRHdr,this._eMarquee],e.isIE()&&(this.frozenRows||this.frozenColumns)&&this.showMarquee?e.setCss(s,{zIndex:1}):e.setCss(s,{zIndex:""});var d=this._root,f=d.offsetWidth-d.clientWidth,g=d.offsetHeight-d.clientHeight;e.setCss(this._eSz,{width:c+f+this._gpCells.width,height:u+g+this._heightBrowser}),a=null,this.columns._updateStarSizes(d.clientWidth-c)&&(a=d.clientWidth,e.setCss(this._eCt,{width:this._gpCells.width})),this._szClient=new e.Size(d.clientWidth-c,d.clientHeight-u),this._rcBounds=null,this._updateContent(!1),f=d.offsetWidth-d.clientWidth,g=d.offsetHeight-d.clientHeight,e.setCss(this._eSz,{width:c+f+this._gpCells.width,height:u+g+this._heightBrowser}),this._szClient=new e.Size(d.clientWidth-c,d.clientHeight-u),a&&a!=d.clientWidth&&this.columns._updateStarSizes(d.clientWidth-c)&&(e.setCss(this._eCt,{width:this._gpCells.width}),this._updateContent(!1)),e.setCss([this._eCHdr,this._eCFtr,this._fCt],{width:this._szClient.width}),e.setCss([this._eRHdr,this._fCt],{height:this._szClient.height}),h&&(o=Math.min(o,this._szClient.height+u-h),e.setCss([this._eBL,this._eCFtr],{top:o})),this.onUpdatedLayout(l)}},r.prototype._updateStickyHeaders=function(){var t,n,i,o,s=!1,a=0;if(this._stickyHdr){for(t=0,n=null,i=this.hostElement;i;i=i.parentElement)o=i.getBoundingClientRect(),null==n&&(n=o.top),t=Math.max(t,o.top);n=Math.max(0,t-n-1),a=-n,s=n>0}this._eTL.style.top=this._eCHdr.style.top=s?-a+"px":"",e.toggleClass(this._eTL,r._WJS_STICKY,s),e.toggleClass(this._eCHdr,r._WJS_STICKY,s)},r.prototype._updateScrollPosition=function(){var t,n=this._root,i=n.scrollTop,o=n.scrollLeft;return this._rtl&&"rev"==r._getRtlMode()&&(o=n.scrollWidth-n.clientWidth-o),t=new e.Point(-Math.abs(o),-i),this._ptScrl.equals(t)?!1:(this._ptScrl=t,this.onScrollPositionChanged(),!0)},r.prototype._updateContent=function(t,i){var r,o,s,a=this,l=this.containsFocus(),c=(e.contains(this.columnHeaders.hostElement,e.getActiveElement()),new e.CancelEventArgs);if(this.onUpdatingView(c)){if(this._offsetY=0,this._heightBrowser>this._szClient.height&&(r=Math.round(-this._ptScrl.y/(this._heightBrowser-this._szClient.height)*100)/100,this._offsetY=Math.round(this._maxOffsetY*r)),this._updateScrollPosition(),this._gpCells._updateContent(t,i,this._offsetY),this._hdrVis&n.Column&&(!i||this._ssHdr&n.Column)&&this._gpCHdr._updateContent(t,i,0),this._hdrVis&n.Row&&(!i||this._ssHdr&n.Row)&&this._gpRHdr._updateContent(t,i,this._offsetY),this._hdrVis&&!i&&this._gpTL._updateContent(t,i,0),this._gpCFtr.rows.length&&(this._gpBL._updateContent(t,i,0),this._gpCFtr._updateContent(t,i,0)),this.showMarquee)if(o=this._selHdl._sel,s=this._eMarquee,this.isRangeValid(o)){var u=this._getMarqueeRect(o),h=s.firstChild,p=s.offsetWidth-h.offsetWidth,d=s.offsetHeight-h.offsetHeight;e.setCss(s,{left:u.left+this.cells.hostElement.offsetLeft-p/2,top:u.top+this.cells.hostElement.offsetTop-d/2,width:u.width+p,height:u.height+d,visibility:u.width>0&&u.height>0?"":"collapse"})}else e.setCss(s,{left:0,top:0,width:0,height:0,visibility:"collapse"});this._updateFrozenCells(),l&&!i&&setTimeout(function(){a.focus()},10),this._rcBounds=null,this.onUpdatedView(c)}},r.prototype._updateFrozenCells=function(){var t,n;if(e.isIE()&&(e.setText(this._fCt,null),!this.activeEditor&&(this.frozenRows||this.frozenColumns)))for(t=this._eCt.querySelectorAll(".wj-frozen"),n=0;n<t.length;n++)this._fCt.appendChild(t[n].cloneNode(!0))},r.prototype._getMarqueeRect=function(n){var i,r,o,s=this.getMergedRange(this.cells,n.topRow,n.leftCol)||new t.CellRange(n.topRow,n.leftCol),a=this.getMergedRange(this.cells,n.bottomRow,n.rightCol)||new t.CellRange(n.bottomRow,n.rightCol),l=this.cells.getCellBoundingRect(s.topRow,s.leftCol,!0),c=this.cells.getCellBoundingRect(a.bottomRow,a.rightCol,!0);return this.rows.frozen&&(i=Math.min(this.rows.length,this.rows.frozen),o=this.cells.getCellBoundingRect(i-1,0,!0),n.topRow>=i&&l.top<o.bottom&&(l.top=o.bottom),n.bottomRow>=i&&c.bottom<o.bottom&&(c.height=o.bottom-c.top)),this.columns.frozen&&(r=Math.min(this.columns.length,this.columns.frozen),o=this.cells.getCellBoundingRect(0,r-1,!0),this._rtl?(n.leftCol>=r&&l.right>o.left&&(l.left=o.left-l.width),n.rightCol>=r&&c.left>o.left&&(c.left=o.left)):(n.leftCol>=r&&l.left<o.right&&(l.left=o.right),n.rightCol>=r&&c.right<o.right&&(c.width=o.right-c.left))),this._rtl?new e.Rect(c.left,l.top,l.right-c.left,c.bottom-l.top):new e.Rect(l.left,l.top,c.right-l.left,c.bottom-l.top)},r.prototype._bindColumns=function(){for(var n,i,r,o,s,a=0;a<this.columns.length;a++)n=this.columns[a],n._getFlag(t.RowColFlags.AutoGenerated)&&(this.columns.removeAt(a),a--);var l=this.collectionView,c=l?l.sourceCollection:null,u=c&&c.length?c[0]:null;if(u&&this.autoGenerateColumns)for(i in u)for(r=null,o=0;o<c.length&&1e3>o&&null==r;o++)r=c[o][i],e.isPrimitive(r)&&(n=new t.Column,n._setFlag(t.RowColFlags.AutoGenerated,!0),n.binding=n.name=i,n.header=e.toHeaderCase(i),n.dataType=e.getType(r),n.dataType==e.DataType.Number&&(n.width=80),s=Object.getOwnPropertyDescriptor(u,i),!s||s.writable||e.isFunction(s.set)||n._setFlag(t.RowColFlags.ReadOnly,!0),this.columns.push(n));this._updateColumnTypes()},r.prototype._updateColumnTypes=function(){var t,n,i,r,o=this.collectionView;if(e.hasItems(o))for(t=o.items[0],n=this.columns,i=0;i<n.length;i++)r=n[i],null==r.dataType&&r._binding&&(r.dataType=e.getType(r._binding.getValue(t)))},r.prototype._getBindingColumn=function(e,t,n){return n},r.prototype._bindRows=function(){var t,n,i,r,o=new e.CancelEventArgs;if(this.onLoadingRows(o)){if(this.rows.clear(),t=this.collectionView,t&&t.items)if(n=t.items,i=t.groups,this.childItemsPath)for(r=0;r<n.length;r++)this._addNode(n,r,0);else if(null!=i&&i.length>0&&this.showGroups)for(r=0;r<i.length;r++)this._addGroup(i[r]);else for(r=0;r<n.length;r++)this._addBoundRow(n,r);this.onLoadedRows(o)}},r.prototype._addBoundRow=function(e,n){this.rows.push(new t.Row(e[n]))},r.prototype._addNode=function(n,i,r){var o,s=new t.GroupRow,a=this.childItemsPath,l=e.isArray(a)?a[r]:a,c=n[i],u=c[l];if(s.dataItem=c,s.level=r,this.rows.push(s),u)for(o=0;o<u.length;o++)this._addNode(u,o,r+1)},r.prototype._addGroup=function(e){var n,i,r=new t.GroupRow;if(r.level=e.level,r.dataItem=e,this.rows.push(r),e.isBottomLevel)for(n=e.items,i=0;i<n.length;i++)this._addBoundRow(n,i);else for(i=0;i<e.groups.length;i++)this._addGroup(e.groups[i])},r._getSerializableProperties=function(e){var t,n,i,r,o=[];for(e=e.prototype;e!=Object.prototype;e=Object.getPrototypeOf(e))for(t=Object.getOwnPropertyNames(e),n=0;n<t.length;n++)i=t[n],r=Object.getOwnPropertyDescriptor(e,i),r&&r.set&&r.get&&"_"!=i[0]&&!i.match(/disabled|required/)&&o.push(i);return o},r.prototype._copy=function(n,i){var r,o,s;if("columns"==n){for(this.columns.clear(),r=e.asArray(i),o=0;o<r.length;o++)s=new t.Column,e.copy(s,r[o]),this.columns.push(s);return!0}return!1},r.prototype._isInputElement=function(e){if(e instanceof HTMLElement){var t=e.tagName.match(/^(input|select|textarea|button|a)$/i);return t&&t.length>0}return!1},r.prototype._wantsInput=function(e){return!this.activeEditor&&this._isInputElement(e)&&!e.getAttribute("wj-part")},r._getMaxSupportedCssHeight=function(){var e;if(!r._maxCssHeight){var t=1e6,n=document.createElement("div");for(n.style.visibility="hidden",document.body.appendChild(n),e=t;6e7>=e&&(n.style.height=e+"px",n.offsetHeight==e);e+=5e5)t=e;document.body.removeChild(n),r._maxCssHeight=t}return r._maxCssHeight},r._getRtlMode=function(){var t,n,i;return r._rtlMode||(t=e.createElement('<div dir="rtl" style="visibility:hidden;width:100px;height:100px;overflow:auto"><div style="width:2000px;height:2000px"></div></div>'),document.body.appendChild(t),n=t.scrollLeft,t.scrollLeft=-1e3,i=t.scrollLeft,document.body.removeChild(t),r._rtlMode=0>i?"neg":n>0?"rev":"std"),r._rtlMode},r._WJS_STICKY="wj-state-sticky",r._WJS_MEASURE="wj-state-measuring",r.controlTemplate='<div style="position:relative;width:100%;height:100%;overflow:hidden;max-width:inherit;max-height:inherit"><div wj-part="focus" tabIndex="0" style="position:absolute;opacity:0;pointer-events:none;left:-10px;top:-10px"></div><div wj-part="root" style="position:absolute;width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch;max-width:inherit;max-height:inherit;boxSizing:content-box"><div wj-part="cells" class="wj-cells" style="position:absolute"></div><div wj-part="marquee" class="wj-marquee" style="display:none;pointer-events:none"><div style="width:100%;height:100%"></div></div></div><div wj-part="fcells" style="position:absolute;pointer-events:none;overflow:hidden"></div><div wj-part="rh" style="position:absolute;overflow:hidden;outline:none"><div wj-part="rhcells" class="wj-rowheaders" style="position:relative"></div></div><div wj-part="cf" style=";position:absolute;overflow:hidden;outline:none"><div wj-part="cfcells" class="wj-colfooters" style="position:relative"></div></div><div wj-part="ch" style="position:absolute;overflow:hidden;outline:none"><div wj-part="chcells" class="wj-colheaders" style="position:relative"></div></div><div wj-part="bl" style="position:absolute;overflow:hidden;outline:none"><div wj-part="blcells" class="wj-bottomleft" style="position:relative"></div></div><div wj-part="tl" style="position:absolute;overflow:hidden;outline:none"><div wj-part="tlcells" class="wj-topleft" style="position:relative"></div></div><div wj-part="sz" style="position:relative;visibility:hidden"></div></div>',r}(e.Control);t.FlexGrid=i}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i,r=function(n){function i(i,r,o){n.call(this),this._p=e.asType(i,t.GridPanel),this._rng=e.asType(r,t.CellRange),this._data=o}return __extends(i,n),Object.defineProperty(i.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),i}(e.CancelEventArgs);t.CellRangeEventArgs=r,n=function(t){function n(n,i,r){t.call(this,n,i),this._cell=e.asType(r,HTMLElement)}return __extends(n,t),Object.defineProperty(n.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),n}(r),t.FormatItemEventArgs=n,i=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"stayInEditMode",{get:function(){return this._stayInEditMode},set:function(t){this._stayInEditMode=e.asBoolean(t)},enumerable:!0,configurable:!0}),n}(r),t.CellEditEndingEventArgs=i}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";!function(e){e[e.None=0]="None",e[e.Cell=1]="Cell",e[e.ColumnHeader=2]="ColumnHeader",e[e.RowHeader=3]="RowHeader",e[e.TopLeft=4]="TopLeft",e[e.ColumnFooter=5]="ColumnFooter",e[e.BottomLeft=6]="BottomLeft"}(t.CellType||(t.CellType={}));var n=t.CellType,i=function(){function i(n,r,o,s,a){this._offsetY=0,this._g=e.asType(n,t.FlexGrid),this._ct=e.asInt(r),this._rows=e.asType(o,t.RowCollection),this._cols=e.asType(s,t.ColumnCollection),this._e=e.asType(a,HTMLElement),this._rng=new t.CellRange,i._evtBlur||(i._evtBlur=document.createEvent("HTMLEvents"),i._evtBlur.initEvent("blur",!0,!1))}return Object.defineProperty(i.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewRange",{get:function(){return this._getViewRange(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),i.prototype.getCellData=function(i,r,o){var s,a,l,c,u,h=this._rows[e.asNumber(i,!1,!0)],p=null;if(e.isString(r)&&(r=this._cols.indexOf(r),0>r))throw"Invalid column name or binding.";if(s=this._cols[e.asNumber(r,!1,!0)],a=this._g?this._g._getBindingColumn(this,i,s):s,!a.binding||!h.dataItem||h.dataItem instanceof e.collections.CollectionViewGroup?h._ubv&&(p=h._ubv[s._hash]):p=a._binding.getValue(h.dataItem),null==p)switch(this._ct){case n.ColumnHeader:(i==this._rows.length-1||a!=s)&&(p=a.header);break;case n.ColumnFooter:a.aggregate!=e.Aggregate.None&&h instanceof t.GroupRow&&(l=this._g.collectionView,l&&(c=e.tryCast(l,e.collections.CollectionView),p=c?c.getAggregate(a.aggregate,a.binding):e.getAggregate(a.aggregate,l.items,a.binding)));break;case n.Cell:a.aggregate!=e.Aggregate.None&&h instanceof t.GroupRow&&(u=e.tryCast(h.dataItem,e.collections.CollectionViewGroup),u&&(p=u.getAggregate(a.aggregate,a.binding,this._g.collectionView)))}return o&&(this.cellType==n.Cell&&a.dataMap&&(p=a.dataMap.getDisplayValue(p)),p=null!=p?e.Globalize.format(p,a.format):""),p},i.prototype.setCellData=function(t,i,r,o,s){var a,l,c,u,h,p,d,f,g;if(void 0===o&&(o=!0),void 0===s&&(s=!0),a=this._rows[e.asNumber(t,!1,!0)],e.isString(i)&&(i=this._cols.indexOf(i),0>i))throw"Invalid column name or binding.";if(l=this._cols[e.asNumber(i,!1,!0)],c=this._g?this._g._getBindingColumn(this,t,l):l,this._ct==n.Cell){if(c.dataMap&&null!=r&&(c.isRequired||""!=r&&null!=r))if(u=c.dataMap,h=u.getKeyValue(r),null==h){if(!u.isEditable||u.displayMemberPath!=u.selectedValuePath)return!1}else r=h;if(p=e.DataType.Object,c.dataType?p=c.dataType:(d=this.getCellData(t,i,!1),p=e.getType(d)),e.isBoolean(c.isRequired))if(c.isRequired||""!==r&&null!==r){if(c.isRequired&&(""===r||null===r))return!1}else r=null,o=!1;if(o&&(r=e.changeType(r,p,c.format),p!=e.DataType.Object&&e.getType(r)!=p))return!1}if(a.dataItem&&c.binding){var m=c._binding,v=a.dataItem,y=m.getValue(v);r!==y&&!e.DateTime.equals(r,y)&&(m.setValue(v,r),f=this._g.collectionView,f instanceof e.collections.CollectionView&&v!=f.currentEditItem)&&(g=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,v,f.items.indexOf(v)),f.onCollectionChanged(g))}else a._ubv||(a._ubv={}),a._ubv[l._hash]=r;return s&&this._g&&this._g.invalidate(),!0},i.prototype.getCellBoundingRect=function(t,n,i){var r,o,s=this.rows[t],a=this.columns[n],l=new e.Rect(a.pos,s.pos,a.renderSize,s.renderSize);return this._g._rtl&&(l.left=this.hostElement.clientWidth-l.right,e.isIE()||(r=this.hostElement.parentElement,l.left-=r.offsetWidth-r.clientWidth)),i||(o=this.hostElement.getBoundingClientRect(),l.left+=o.left,l.top+=o.top-this._offsetY),t<this.rows.frozen&&(l.top-=this._g.scrollPosition.y),n<this.columns.frozen&&(l.left-=this._g.scrollPosition.x*(this._g._rtl?-1:1)),l},i.prototype.getSelectedState=function(e,i,r){var o=this._g,s=o.selectionMode,a=o._selHdl._sel;if(s!=t.SelectionMode.None)switch(this._ct){case n.Cell:if(r||(r=o.getMergedRange(this,e,i)),r){if(r.contains(a.row,a.col))return o.showMarquee?t.SelectedState.None:t.SelectedState.Cursor;if(r.intersects(a))return t.SelectedState.Selected}return a.row==e&&a.col==i?o.showMarquee?t.SelectedState.None:t.SelectedState.Cursor:o.rows[e].isSelected||o.columns[i].isSelected?t.SelectedState.Selected:(a=o._selHdl._adjustSelection(a),s==t.SelectionMode.ListBox?t.SelectedState.None:a.containsRow(e)&&a.containsColumn(i)?t.SelectedState.Selected:t.SelectedState.None);case n.ColumnHeader:if(o.showSelectedHeaders&t.HeadersVisibility.Column&&(o.columns[i].isSelected||a.containsColumn(i)||a.intersectsColumn(r))&&(r&&(e=r.bottomRow),e==this.rows.length-1))return t.SelectedState.Selected;break;case n.RowHeader:if(o.showSelectedHeaders&t.HeadersVisibility.Row&&(o.rows[e].isSelected||a.containsRow(e)||a.intersectsRow(r))&&(r&&(i=r.rightCol),i==this.columns.length-1))return t.SelectedState.Selected}return t.SelectedState.None},Object.defineProperty(i.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),i.prototype._getOffsetY=function(){return this._offsetY},i.prototype._updateContent=function(t,r,o){var s,a,l,c,u,h,p,d,f,g=this._g,m=this._rows,v=this._cols,y=this._ct;if((y==n.ColumnHeader||y==n.ColumnFooter||y==n.RowHeader)&&(c=g._ptScrl,u=this._e.style,y==n.RowHeader?u.top=c.y+"px":g._rtl?u.right=c.x+"px":u.left=c.x+"px"),this._offsetY!=o&&(t=!1,this._offsetY=o),h=this._getViewRange(!1),p=this._getViewRange(!0),!t||r||m.frozen||v.frozen||!this._rng.contains(h)){if(t&&p.equals(this._rng)||(r=!1),!t){var _=e.getActiveElement(),w=e.contains(this._e,_)?_:null,b=this._g.cellFactory;for(f=0;f<this._e.childElementCount;f++)b.disposeCell(this._e.children[f]);e.setText(this._e,null),w&&w.dispatchEvent(i._evtBlur),this._rowIdx=[]}for(t&&this._ct!=n.TopLeft&&this._reorderCells(p,this._rng),this._rng=p,a=0,this._rowIdx=[],s=p.topRow;s<=p.bottomRow&&s>-1;s++)this._rowIdx.push(a),a=this._renderRow(s,p,!1,r,a);for(this._rowIdx.push(a),s=p.topRow;s<=p.bottomRow&&s>-1;s++)a=this._renderRow(s,p,!0,r,a);for(s=0;s<m.frozen&&s<m.length;s++)a=this._renderRow(s,p,!1,r,a);for(s=0;s<m.frozen&&s<m.length;s++)a=this._renderRow(s,p,!0,r,a);for(d=this._e.childElementCount,f=a;d>f;f++)l=this._e.children[f],l.style.display="none"}},i.prototype._reorderCells=function(e,n){var i,r,o,s,a,l,c,u,h;if(this._rowIdx&&!(this._rows.frozen>0)&&!(this._cols.frozen>0)&&e.columnSpan==n.columnSpan&&e.rowSpan==n.rowSpan&&n.isValid&&e.isValid&&e.intersects(n)&&(e.row!=n.row&&(r=e.row-n.row,o=Math.max(1,e.rowSpan-1),0!=r&&Math.abs(r)<o&&(r>0&&(h=this._createRange(0,this._rowIdx[r]),this._e.appendChild(h.extractContents())),0>r&&(i=this._rowIdx.length-1,h=this._createRange(this._rowIdx[i+r],this._rowIdx[i]),this._e.insertBefore(h.extractContents(),this._e.firstChild)))),e.col!=n.col&&(r=e.col-n.col,o=Math.max(1,e.columnSpan-1),0!=r&&Math.abs(r)<o)))for(s=this._e.childElementCount,a=0;a<this._rowIdx.length-1;a++)l=this.rows[e.topRow+a],l instanceof t.GroupRow||(c=this._rowIdx[a],u=this._rowIdx[a+1],r>0&&s>=c+r&&(h=this._createRange(c,c+r),this._e.insertBefore(h.extractContents(),this._e.children[u])),0>r&&u+r-1>=0&&(h=this._createRange(u+r-1,u-1),this._e.insertBefore(h.extractContents(),this._e.children[c])))},i.prototype._createRange=function(e,t){var n=document.createRange();return n.setStart(this._e,e),n.setEnd(this._e,t),n},i.prototype._renderRow=function(e,t,n,i,r){var o;if(this.rows[e].renderSize<=0)return r;if(n)for(o=0;o<this.columns.frozen&&o<this.columns.length;o++)r=this._renderCell(e,o,t,i,r);else for(o=t.leftCol;o<=t.rightCol&&o>-1;o++)r=this._renderCell(e,o,t,i,r);return r},i.prototype._renderCell=function(n,i,r,o,s){var a,l,c,u=this._g,h=u.getMergedRange(this,n,i);if(h){for(a=Math.max(r.row,h.row);n>a;a++)if(this.rows[a].isVisible)return s;for(a=Math.max(r.col,h.col);i>a;a++)if(this.columns[a].isVisible)return s}return this.columns[i].renderSize<=0&&(!h||h.getRenderSize(this).width<=0)?s:(l=this._e.childNodes[s++],l&&o?(c=this.getSelectedState(n,i,h),e.toggleClass(l,"wj-state-selected",c==t.SelectedState.Cursor),e.toggleClass(l,"wj-state-multi-selected",c==t.SelectedState.Selected),s):(l||(l=document.createElement("div"),l.tabIndex=0,this._e.appendChild(l)),u.cellFactory.updateCell(this,n,i,l,h),s))},i.prototype._getViewRange=function(e){var i,r,o=this._g,s=o._ptScrl,a=this._rows,l=this._cols,c=new t.CellRange(0,0,a.length-1,l.length-1);if(this._ct==n.Cell||this._ct==n.RowHeader){var u=-s.y+this._offsetY,h=o._szClient.height,p=Math.min(a.frozen,a.length-1);p>0&&(i=a[p-1].pos,u+=i,h-=i),c.row=Math.min(a.length-1,Math.max(a.frozen,a.getItemAt(u+1))),c.row2=a.getItemAt(u+h)}if(this._ct==n.Cell||this._ct==n.ColumnHeader){var d=-s.x,f=o._szClient.width,p=Math.min(l.frozen,l.length-1);p>0&&(i=l[p-1].pos,d+=i,f-=i),c.col=Math.min(l.length-1,Math.max(l.frozen,l.getItemAt(d+1))),c.col2=l.getItemAt(d+f)}return e&&this._ct==n.Cell&&(r=o.isTouching?6:1,c.row=Math.max(c.row-r,0),c.row2=Math.min(c.row2+r,a.length-1),c.col=Math.max(c.col-1,0),c.col2=Math.min(c.col2+1,l.length-1)),a.length<=a.frozen&&(c.row=c.row2=-1),l.length<=l.frozen&&(c.col=c.col2=-1),c},i.prototype._getFrozenPos=function(){var t=this._rows.frozen,n=this._cols.frozen,i=t>0?this._rows[t-1]:null,r=n>0?this._cols[n-1]:null,o=i?i.pos+i.renderSize:0,s=r?r.pos+r.renderSize:0;return new e.Point(s,o)},i}();t.GridPanel=i}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function n(){}return n.prototype.updateCell=function(i,r,o,s,a,l){var c,u,h,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P,k,T,$,a,D,A=i.grid,R=i.cellType,j=i.rows,M=i.columns,O=j[r],I=M[o],F=r,N=o,L=e.tryCast(O,t.GroupRow),H=e.tryCast(O,t._NewRowTemplate),V=I.renderWidth,B=O.renderHeight,U="wj-cell",z={display:""},W=0!=l;0!=l&&s.firstElementChild&&(1!=s.childNodes.length||"checkbox"!=s.firstElementChild.type)&&(e.setText(s,null),W=!1),a&&!a.isSingleCell&&(r=a.row,o=a.col,F=a.row2,N=a.col2,O=j[r],I=M[o],L=e.tryCast(O,t.GroupRow),c=a.getRenderSize(i),B=c.height,V=c.width);var q=A._getBindingColumn(i,r,I),G=I.pos,K=O.pos;if(e.isIE()&&R==t.CellType.Cell&&!A.editRange?(r<j.frozen&&o>=M.frozen&&(G+=A._ptScrl.x),o<M.frozen&&r>=j.frozen&&(K+=A._ptScrl.y)):(r<j.frozen&&(K-=A._ptScrl.y),o<M.frozen&&(G-=A._ptScrl.x)),A._rtl?z.right=G+"px":z.left=G+"px",z.top=K-i._getOffsetY()+"px",z.width=V+"px",z.height=B+"px",R==t.CellType.Cell?(L&&(U+=" wj-group"),A.showAlternatingRows&&r%2!=0&&(U+=" wj-alt"),(r<j.frozen||o<M.frozen)&&(U+=" wj-frozen"),H&&(U+=" wj-new"),O.cssClass&&(U+=" "+O.cssClass),q.cssClass&&(U+=" "+q.cssClass)):(U+=" wj-header",A.showAlternatingRows&&r%2!=0&&(U+=" wj-header-alt")),u=A.collectionView,u&&A.showErrors&&O.dataItem)if(R==t.CellType.Cell)p=u.getError,e.isFunction(p)&&(s.title="",h=p(O.dataItem,q.binding),h&&(U+=" wj-state-invalid",s.title=h));else if(R==t.CellType.RowHeader&&(p=u.getError,e.isFunction(p)))for(d=0;d<A.columns.length;d++)if(f=A._getBindingColumn(i,r,A.columns[d]),p(O.dataItem,f.binding)){U+=" wj-state-invalid";break}switch(g=i.getSelectedState(r,o,a),g!=t.SelectedState.None&&R==t.CellType.Cell&&I.dataType!=e.DataType.Boolean&&A.editRange&&A.editRange.contains(r,o)&&(g=t.SelectedState.None),g){case t.SelectedState.Cursor:U+=" wj-state-selected";break;case t.SelectedState.Selected:U+=" wj-state-multi-selected"}if(F==j.frozen-1&&(U+=" wj-frozen-row"),N==M.frozen-1&&(U+=" wj-frozen-col"),(I.wordWrap||O.wordWrap)&&(U+=" wj-wrap"),W&&U==s.className&&(m=s.style,m.top==z.top&&m.width==z.width&&m.height==z.height&&(A._rtl&&m.right==z.right||!A._rtl&&m.left==z.left)))return void(m.display&&(s.style.display=""));switch(z.textAlign=q.getAlignment(),R==t.CellType.Cell&&A.rows.maxGroupLevel>-1&&(z.paddingLeft=z.paddingRight="",o==A.columns.firstVisibleIndex&&A.treeIndent&&(v=L?Math.max(0,L.level):A.rows.maxGroupLevel+1,y=A.treeIndent*v+A._cellPadding,A._rtl?z.paddingRight=y:z.paddingLeft=y)),0!=l&&(_=i.getCellData(r,o,!1),w=i.getCellData(r,o,!0),R==t.CellType.Cell&&o==A.columns.firstVisibleIndex&&L&&L.hasChildren&&!this._isEditingCell(A,r,o)?(w||(w=L.getGroupHeader()),s.innerHTML=this._getTreeIcon(L)+" "+w,z.textAlign=""):R==t.CellType.ColumnHeader&&q.currentSort&&A.showSort&&(F==A._getSortRowIndex()||q!=I)?(U+=" wj-sort-"+("+"==q.currentSort?"asc":"desc"),s.innerHTML=e.escapeHtml(w)+"&nbsp;"+this._getSortIcon(q)):R!=t.CellType.RowHeader||o!=A.rowHeaders.columns.length-1||w?R!=t.CellType.Cell||q.dataType!=e.DataType.Boolean||L&&!e.isBoolean(_)?R==t.CellType.Cell&&this._isEditingCell(A,r,o)?(S=q.inputType,q.inputType||(S=q.dataType!=e.DataType.Number||q.dataMap?"text":"tel"),q.dataMap||q.mask||(E=i.getCellData(r,o,!1),e.isNumber(E)&&(P=q.format,P&&E!=Math.round(E)&&(P=q.format.replace(/([a-z])(\d*)(.*)/gi,"$0112$3")),w=e.Globalize.formatNumber(E,P,!0))),s.innerHTML='<input type="'+S+'" class="wj-grid-editor wj-form-control">',k=s.children[0],k.value=w,k.required=q.getIsRequired(),k.style.textAlign=q.getAlignment(),z.padding="0px",q.mask&&(T=new e._MaskProvider(k,q.mask)),A._edtHdl._edt=k):R==t.CellType.Cell&&(O.isContentHtml||q.isContentHtml)?s.innerHTML=w:e.setText(s,w):(x=s.firstChild,x instanceof HTMLInputElement&&"checkbox"==x.type||(s.innerHTML='<input type="checkbox"/>',
x=s.firstChild),x.checked=1==_?!0:!1,x.indeterminate=null==_,x.disabled=!A._edtHdl._allowEditing(r,o),x.disabled&&(x.style.cursor="default"),A.editRange&&A.editRange.contains(r,o)&&(A._edtHdl._edt=x)):(b=A.collectionView,C=b?b.currentEditItem:null,C&&O.dataItem==C?s.innerHTML='<span class="wj-glyph-pencil"></span>':e.tryCast(O,t._NewRowTemplate)&&(s.innerHTML='<span class="wj-glyph-asterisk"></span>')),R==t.CellType.Cell&&e.input&&q.dataMap&&q.showDropDown!==!1&&A._edtHdl._allowEditing(r,o)&&(n._ddIcon||(n._ddIcon=e.createElement('<div class="'+n._WJC_DROPDOWN+'"><span class="wj-glyph-down"></span></div>')),$=n._ddIcon.cloneNode(!0),s.appendChild($))),R){case t.CellType.RowHeader:s.removeAttribute("draggable"),L||H||0==(A.allowDragging&t.AllowDragging.Rows)||!O.allowDragging||s.setAttribute("draggable","true");break;case t.CellType.ColumnHeader:s.removeAttribute("draggable"),0!=(A.allowDragging&t.AllowDragging.Columns)&&I.allowDragging&&s.setAttribute("draggable","true")}s.className!=U&&(s.className=U),e.setCss(s,z),A.itemFormatter&&A.itemFormatter(i,r,o,s),A.formatItem.hasHandlers&&(a=n._fmtRng,a?a.setRange(r,o,F,N):a=n._fmtRng=new t.CellRange(r,o,F,N),D=new t.FormatItemEventArgs(i,a,s),A.onFormatItem(D))},n.prototype.disposeCell=function(){},n.prototype.getEditorValue=function(e){var t=e._edtHdl._edt;return t instanceof HTMLInputElement?"checkbox"==t.type?t.checked:t.value:null},n.prototype._isEditingCell=function(e,t,n){return e.editRange&&e.editRange.contains(t,n)},n.prototype._getTreeIcon=function(e){var t="wj-glyph-"+(e.isCollapsed?"":"down-")+(e.grid._rtl?"left":"right");return'<span class="'+n._WJC_COLLAPSE+" "+t+'"></span>'},n.prototype._getSortIcon=function(e){return'<span class="wj-glyph-'+("+"==e.currentSort?"up":"down")+'"></span>'},n._WJC_COLLAPSE="wj-elem-collapse",n._WJC_DROPDOWN="wj-elem-dropdown",n}();t.CellFactory=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function t(e,t,n,i){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=e),void 0===i&&(i=t),this.setRange(e,t,n,i)}return t.prototype.setRange=function(t,n,i,r){void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===i&&(i=t),void 0===r&&(r=n),this._row=e.asInt(t),this._col=e.asInt(n),this._row2=e.asInt(i),this._col2=e.asInt(r)},Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){this._row=e.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},set:function(t){this._col=e.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row2",{get:function(){return this._row2},set:function(t){this._row2=e.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col2",{get:function(){return this._col2},set:function(t){this._col2=e.asInt(t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._row,this._col,this._row2,this._col2)},Object.defineProperty(t.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),t.prototype.contains=function(n,i){var r=e.tryCast(n,t);if(r)return r.topRow>=this.topRow&&r.bottomRow<=this.bottomRow&&r.leftCol>=this.leftCol&&r.rightCol<=this.rightCol;if(e.isInt(n)&&e.isInt(i))return n>=this.topRow&&n<=this.bottomRow&&i>=this.leftCol&&i<=this.rightCol;throw"contains expects a CellRange or row/column indices."},t.prototype.containsRow=function(t){return e.asInt(t)>=this.topRow&&t<=this.bottomRow},t.prototype.containsColumn=function(t){return e.asInt(t)>=this.leftCol&&t<=this.rightCol},t.prototype.intersects=function(e){return this.intersectsRow(e)&&this.intersectsColumn(e)},t.prototype.intersectsRow=function(e){return e&&!(this.bottomRow<e.topRow||this.topRow>e.bottomRow)},t.prototype.intersectsColumn=function(e){return e&&!(this.rightCol<e.leftCol||this.leftCol>e.rightCol)},t.prototype.getRenderSize=function(t){var n,i,r=new e.Size(0,0);if(this.isValid){for(n=this.topRow;n<=this.bottomRow;n++)r.height+=t.rows[n].renderSize;for(i=this.leftCol;i<=this.rightCol;i++)r.width+=t.columns[i].renderSize}return r},t.prototype.equals=function(e){return e instanceof t&&this._row==e._row&&this._col==e._col&&this._row2==e._row2&&this._col2==e._col2},t}();t.CellRange=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i,r,o,s,a,l,c;!function(e){e[e.Visible=1]="Visible",e[e.AllowResizing=2]="AllowResizing",e[e.AllowDragging=4]="AllowDragging",e[e.AllowMerging=8]="AllowMerging",e[e.AllowSorting=16]="AllowSorting",e[e.AutoGenerated=32]="AutoGenerated",e[e.Collapsed=64]="Collapsed",e[e.ParentCollapsed=128]="ParentCollapsed",e[e.Selected=256]="Selected",e[e.ReadOnly=512]="ReadOnly",e[e.HtmlContent=1024]="HtmlContent",e[e.WordWrap=2048]="WordWrap",e[e.RowDefault=3]="RowDefault",e[e.ColumnDefault=23]="ColumnDefault"}(t.RowColFlags||(t.RowColFlags={})),n=t.RowColFlags,i=function(){function i(){this._list=null,this._pos=0,this._idx=-1}return Object.defineProperty(i.prototype,"visible",{get:function(){return this._getFlag(n.Visible)},set:function(e){this._setFlag(n.Visible,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isVisible",{get:function(){return this._getFlag(n.Visible)&&(!this._getFlag(n.ParentCollapsed)||this instanceof t._NewRowTemplate)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pos",{get:function(){return this._list&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._list&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._sz},set:function(t){t!=this._sz&&(this._sz=e.asNumber(t,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderSize",{get:function(){if(!this.isVisible)return 0;var e=this._sz,t=this._list;return(null==e||0>e)&&null!=t?Math.round(t.defaultSize):(null!=t&&(null!=t.minSize&&e<t.minSize&&(e=t.minSize),null!=t.maxSize&&e>t.maxSize&&(e=t.maxSize)),null!=this._szMin&&e<this._szMin&&(e=this._szMin),null!=this._szMax&&e>this._szMax&&(e=this._szMax),Math.round(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowResizing",{get:function(){return this._getFlag(n.AllowResizing)},set:function(e){this._setFlag(n.AllowResizing,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowDragging",{get:function(){return this._getFlag(n.AllowDragging)},set:function(e){this._setFlag(n.AllowDragging,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowMerging",{get:function(){return this._getFlag(n.AllowMerging)},set:function(e){this._setFlag(n.AllowMerging,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isSelected",{get:function(){return this._getFlag(n.Selected)},set:function(e){if(this._setFlag(n.Selected,e,!0)){var t=this.grid;t&&t.refreshCells(!1,!0,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isReadOnly",{get:function(){return this._getFlag(n.ReadOnly)},set:function(e){this._setFlag(n.ReadOnly,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isContentHtml",{get:function(){return this._getFlag(n.HtmlContent)},set:function(e){this.isContentHtml!=e&&(this._setFlag(n.HtmlContent,e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._getFlag(n.WordWrap)},set:function(e){this._setFlag(n.WordWrap,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(this._cssClass=e.asString(t),this.grid&&this.grid.invalidate(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collectionView",{get:function(){return this.grid?this.grid.collectionView:null},enumerable:!0,configurable:!0}),i.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},i.prototype._getFlag=function(e){return 0!=(this._f&e)},i.prototype._setFlag=function(e,t,n){return t!=this._getFlag(e)?(this._f=t?this._f|e:this._f&~e,n||this.onPropertyChanged(),!0):!1},i}(),t.RowCol=i,r=function(i){function r(t){i.call(this),this._f=n.ColumnDefault,this._hash=r._ctr.toString(36),r._ctr++,t&&e.copy(this,t)}return __extends(r,i),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataType",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=e.asEnum(t,e.DataType),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isRequired",{get:function(){return this._required},set:function(t){this._required=e.asBoolean(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"required",{get:function(){return e._deprecated("required","isRequired"),this.isRequired},set:function(t){e._deprecated("required","isRequired"),this.isRequired=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showDropDown",{get:function(){return this._showDropDown},set:function(t){t!=this._showDropDown&&(this._showDropDown=e.asBoolean(t,!0),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropDownCssClass",{get:function(){return this._ddCssClass},set:function(t){this._ddCssClass=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputType",{get:function(){return this._inpType},set:function(t){this._inpType=e.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask=e.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(t){var n,i,r;t!=this.binding&&(n=e.asString(t),this._binding=n?new e.Binding(n):null,!this._type&&this.grid&&this._binding&&(i=this.grid.collectionView,i&&i.sourceCollection&&i.sourceCollection.length&&(r=i.sourceCollection[0],this._type=e.getType(this._binding.getValue(r)))),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortMemberPath",{get:function(){return this._bindingSort?this._bindingSort.path:null},set:function(t){if(t!=this.sortMemberPath){var n=e.asString(t);this._bindingSort=n?new e.Binding(n):null,this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return null!=this._szStar?this._szStar:this.size},set:function(t){null!=r._parseStarSize(t)?(this._szStar=t,this.onPropertyChanged()):(this._szStar=null,this.size=e.asNumber(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minWidth",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=e.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=e.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(e){this._align!=e&&(this._align=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),r.prototype.getAlignment=function(){var t=this._align;if(null==t&&(t="",!this._map))switch(this._type){case e.DataType.Boolean:t="center";break;case e.DataType.Number:t="right"}return t},r.prototype.getIsRequired=function(){return null!=this._required?this._required:this.dataType==e.DataType.String&&!this.mask},Object.defineProperty(r.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(e){this._hdr!=e&&(this._hdr=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataMap",{get:function(){return this._map},set:function(n){this._map!=n&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),e.isArray(n)&&(n=new t.DataMap(n,null,null)),this._map=e.asType(n,t.DataMap,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"format",{get:function(){return this._fmt},set:function(e){this._fmt!=e&&(this._fmt=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowSorting",{get:function(){return this._getFlag(n.AllowSorting)},set:function(e){this._setFlag(n.AllowSorting,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentSort",{get:function(){var e,t;if(this.grid&&this.grid.collectionView&&this.grid.collectionView.canSort)for(e=this.grid.collectionView.sortDescriptions,t=0;t<e.length;t++)if(e[t].property==this._getBindingSort())return e[t].ascending?"+":"-";return null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"aggregate",{get:function(){return null!=this._agg?this._agg:e.Aggregate.None},set:function(t){t!=this._agg&&(this._agg=e.asEnum(t,e.Aggregate),this.onPropertyChanged())},enumerable:!0,configurable:!0}),r.prototype._getBindingSort=function(){return this.sortMemberPath?this.sortMemberPath:this.binding?this.binding:null},r._parseStarSize=function(t){if(e.isString(t)&&t.length>0&&"*"==t[t.length-1]){var n=1==t.length?1:1*t.substr(0,t.length-1);if(n>0&&!isNaN(n))return n}return null},r._ctr=0,r}(i),t.Column=r,o=function(e){function t(t){e.call(this),this._f=n.ColumnDefault,this._data=t}return __extends(t,e),Object.defineProperty(t.prototype,"dataItem",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size},set:function(e){this.size=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),t}(i),t.Row=o,s=function(i){function r(){i.call(this),this._level=-1,this.isReadOnly=!0}return __extends(r,i),Object.defineProperty(r.prototype,"level",{get:function(){return this._level},set:function(t){e.asInt(t),t!=this._level&&(this._level=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasChildren",{get:function(){if(null!=this.grid&&null!=this._list){this._list._update();var n=this.index<this._list.length-1?this._list[this.index+1]:null,i=e.tryCast(n,r),o=e.tryCast(n,t._NewRowTemplate);return n&&null==o&&(null==i||i.level>this.level)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isCollapsed",{get:function(){return this._getFlag(n.Collapsed)},set:function(t){e.asBoolean(t),t!=this.isCollapsed&&null!=this._list&&this._setCollapsed(t)},enumerable:!0,configurable:!0}),r.prototype.getGroupHeader=function(){var t,n=this.grid,i=n.groupHeaderFormat?n.groupHeaderFormat:e.culture.FlexGrid.groupHeaderFormat,r=e.tryCast(this.dataItem,e.collections.CollectionViewGroup);if(r&&i){var o=r.groupDescription.propertyName,s=r.name,a=n.columns.getColumn(o),l=this.isContentHtml;return a&&(l=l||a.isContentHtml,a.header&&(o=a.header),a.dataMap?s=a.dataMap.getDisplayValue(s):a.format&&(s=e.Globalize.format(s,a.format))),t=r.getAggregate(e.Aggregate.CntAll,null,n.collectionView),e.format(i,{name:e.escapeHtml(o),value:l?s:e.escapeHtml(s),level:r.level,count:t})}return""},r.prototype._setCollapsed=function(i){var o,s=this,a=this.grid,l=a.rows,c=this.getCellRange(),u=new t.CellRangeEventArgs(a.cells,new t.CellRange(this.index,-1));a.onGroupCollapsedChanging(u),u.cancel||(a.deferUpdate(function(){s._setFlag(n.Collapsed,i);for(var t=c.topRow+1;t<=c.bottomRow&&t>-1&&t<l.length;t++)l[t]._setFlag(n.ParentCollapsed,i),o=e.tryCast(l[t],r),null!=o&&o.isCollapsed&&(t=o.getCellRange().bottomRow)}),a.onGroupCollapsedChanged(u))},r.prototype.getCellRange=function(){for(var n,i=this._list,o=this.index,s=i.length-1,a=o+1;s>=a;a++)if(n=e.tryCast(i[a],r),null!=n&&n.level<=this.level){s=a-1;break}return new t.CellRange(o,0,s,this.grid.columns.length-1)},r}(o),t.GroupRow=s,a=function(n){function i(i,r){n.call(this),this._frozen=0,this._szDef=28,this._szTot=0,this._dirty=!1,this._g=e.asType(i,t.FlexGrid),this._szDef=e.asNumber(r,!1,!0)}return __extends(i,n),Object.defineProperty(i.prototype,"defaultSize",{get:function(){return this._szDef},set:function(t){this._szDef!=t&&(this._szDef=e.asNumber(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frozen",{get:function(){return this._frozen},set:function(t){t!=this._frozen&&(this._frozen=e.asNumber(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),i.prototype.isFrozen=function(e){return e<this.frozen},Object.defineProperty(i.prototype,"minSize",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=e.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxSize",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=e.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),i.prototype.getTotalSize=function(){return this._update(),this._szTot},i.prototype.getItemAt=function(e){if(this._update(),0>=e&&this.length>0)return 0;for(var t,n,i=0,r=this.length-1;r>=i;)if(t=i+r>>>1,n=this[t],n._pos>e)r=t-1;else{if(!(n._pos+n.renderSize<e)){for(;t>0&&!this[t].visible;)t--;for(;t<this.length-1&&!this[t].visible;)t++;return t}i=t+1}return r},i.prototype.getNextCell=function(e,n,i){var r,o;switch(n){case t.SelMove.Next:for(r=e+1;r<this.length;r++)if(this[r].renderSize>0)return r;break;case t.SelMove.Prev:for(r=e-1;r>=0;r--)if(this[r].renderSize>0)return r;break;case t.SelMove.End:for(r=this.length-1;r>=0;r--)if(this[r].renderSize>0)return r;break;case t.SelMove.Home:for(r=0;r<this.length;r++)if(this[r].renderSize>0)return r;break;case t.SelMove.NextPage:return o=this.getItemAt(this[e].pos+i),0>o?this.getNextCell(e,t.SelMove.End,i):o;case t.SelMove.PrevPage:return o=this.getItemAt(this[e].pos-i),0>o?this.getNextCell(e,t.SelMove.Home,i):o}return e},i.prototype.canMoveElement=function(e,n){var i,r,o;if(n==e||0>e||e>=this.length||n>=this.length)return!1;for(0>n&&(n=this.length-1),i=Math.min(e,n),r=Math.max(e,n),o=i;r>=o;o++)if(!this[o].allowDragging)return!1;return this[n]instanceof t._NewRowTemplate?!1:!0},i.prototype.moveElement=function(e,t){if(this.canMoveElement(e,t)){var n=this[e];this.removeAt(e),0>t&&(t=this.length),this.insert(t,n)}},i.prototype.onCollectionChanged=function(t){void 0===t&&(t=e.collections.NotifyCollectionChangedEventArgs.reset),this._dirty=!0,this._g.invalidate(),n.prototype.onCollectionChanged.call(this,t)},i.prototype.push=function(e){return e._list=this,n.prototype.push.call(this,e)},i.prototype.splice=function(e,t,i){return i&&(i._list=this),n.prototype.splice.call(this,e,t,i)},i.prototype.beginUpdate=function(){this._update(),n.prototype.beginUpdate.call(this)},i.prototype._update=function(){var e,t,n;if(this._dirty&&!this.isUpdating){for(this._dirty=!1,e=0,n=0;n<this.length;n++)t=this[n],t._idx=n,t._list=this,t._pos=e,e+=t.renderSize;return this._szTot=e,!0}return!1},i}(e.collections.ObservableArray),t.RowColCollection=a,l=function(e){function t(){e.apply(this,arguments),this._firstVisible=-1}return __extends(t,e),t.prototype.getColumn=function(e){var t=this.indexOf(e);return t>-1?this[t]:null},t.prototype.indexOf=function(t){var n;if(t instanceof r)return e.prototype.indexOf.call(this,t);for(n=0;n<this.length;n++)if(this[n].name==t)return n;for(n=0;n<this.length;n++)if(this[n].binding==t)return n;return-1},Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this._update(),this._firstVisible},enumerable:!0,configurable:!0}),t.prototype._update=function(){if(e.prototype._update.call(this)){this._firstVisible=-1;for(var t=0;t<this.length;t++)if(this[t].visible){this._firstVisible=t;break}return!0}return!1},t.prototype._updateStarSizes=function(e){for(var t,n,i,o=0,s=0;s<this.length;s++)n=this[s],n.isVisible&&(n._szStar?(o+=r._parseStarSize(n._szStar),i=n):e-=n.renderWidth);if(i){for(t=e,s=0;s<this.length;s++)n=this[s],n.isVisible&&n._szStar&&(n==i&&t>0?n._sz=t:(n._sz=Math.max(0,Math.round(r._parseStarSize(n._szStar)/o*e)),t-=n.renderWidth));return this._dirty=!0,this._update(),!0}return!1},t}(a),t.ColumnCollection=l,c=function(t){function n(){t.apply(this,arguments),this._maxLevel=-1}return __extends(n,t),Object.defineProperty(n.prototype,"maxGroupLevel",{get:function(){return this._update(),this._maxLevel},enumerable:!0,configurable:!0}),n.prototype._update=function(){var n,i;if(t.prototype._update.call(this)){for(this._maxLevel=-1,n=0;n<this.length;n++)i=e.tryCast(this[n],s),i&&i.level>this._maxLevel&&(this._maxLevel=i.level);return!0}return!1},n}(a),t.RowCollection=c}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(n){"use strict";var i=function(){function i(t,r){var o,s,a,l;if(this._row=-1,this._col=-1,this._edge=0,t instanceof n.FlexGrid)o=this._g=t;else{if(!(t instanceof n.GridPanel))throw"First parameter should be a FlexGrid or GridPanel.";this._p=t,o=this._g=this._p.grid}r=e.mouseToPage(r),this._pt=r.clone();var c=o.controlRect,u=o._szClient,h=o.topLeftCells,p=o._eTL,d=o.headersVisibility,f=n.HeadersVisibility,g=d&f.Row?h.columns.getTotalSize():0,m=d&f.Column?h.rows.getTotalSize():0,v=d&f.Column?m+p.offsetTop:0,y=o._eBL,_=y.offsetHeight;if(r.x=Math.max(0,r.x-c.left),r.y=Math.max(0,r.y-c.top),this._g._rtl&&(r.x=c.width-r.x),!this._p&&r.x>=0&&r.y>=p.offsetTop&&u&&r.x<=u.width+g&&r.y<=u.height+v&&(this._p=r.y<=v?r.x<=g?o.topLeftCells:o.columnHeaders:r.y<=y.offsetTop?r.x<=g?o.rowHeaders:o.cells:r.x<=g?o.bottomLeftCells:o.columnFooters),null!=this._p){var w=this._p.rows,b=this._p.columns,C=this._p.cellType,x=this._p._getFrozenPos(),S=C==n.CellType.TopLeft||C==n.CellType.ColumnHeader?m:C==n.CellType.BottomLeft||C==n.CellType.ColumnFooter?_:w.getTotalSize(),E=C==n.CellType.TopLeft||C==n.CellType.BottomLeft||C==n.CellType.RowHeader?g:b.getTotalSize();if(C==n.CellType.RowHeader||C==n.CellType.Cell?(r.y-=m,(r.y>x.y||x.y<=0)&&(r.y-=o._ptScrl.y,r.y+=this._p._getOffsetY())):(C==n.CellType.BottomLeft||C==n.CellType.ColumnFooter)&&(r.y-=y.offsetTop),(C==n.CellType.ColumnHeader||C==n.CellType.Cell||C==n.CellType.ColumnFooter)&&(r.x-=g,(r.x>x.x||x.x<=0)&&(r.x-=o._ptScrl.x)),(C==n.CellType.ColumnHeader||C==n.CellType.TopLeft)&&(r.y-=v-m),this._row=r.y>S?-1:w.getItemAt(r.y),this._col=r.x>E?-1:b.getItemAt(r.x),this._row<0||this._col<0)return void(this._p=null);this._edge=0,s=i._SZEDGE[this._g.isTouching?1:0],this._col>-1&&(a=b[this._col],r.x-a.pos<=s&&(this._edge|=1),a.pos+a.renderSize-r.x<=s&&(this._edge|=4)),this._row>-1&&(l=w[this._row],r.y-l.pos<=s&&(this._edge|=2),l.pos+l.renderSize-r.y<=s&&(this._edge|=8))}}return Object.defineProperty(i.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellType",{get:function(){return this._p?this._p.cellType:t.CellType.None},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return new n.CellRange(this._row,this._col)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeLeft",{get:function(){return 0!=(1&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeTop",{get:function(){return 0!=(2&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeRight",{get:function(){return 0!=(4&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeBottom",{get:function(){return 0!=(8&this._edge)},enumerable:!0,configurable:!0}),i._SZEDGE=[5,30],i}();n.HitTestInfo=i}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";!function(e){e[e.None=0]="None",e[e.Cells=1]="Cells",e[e.ColumnHeaders=2]="ColumnHeaders",e[e.RowHeaders=4]="RowHeaders",e[e.AllHeaders=6]="AllHeaders",e[e.All=7]="All"}(t.AllowMerging||(t.AllowMerging={}));var n=t.AllowMerging,i=function(){function i(e){this._g=e}return i.prototype.getMergedRange=function(i,r,o,s){var a,l,c,u,h,p,d,f,g;void 0===s&&(s=!0);var m,v,y=i.cellType,_=i.columns,w=i.rows,b=w[r],C=_[o];if(b instanceof t._NewRowTemplate)return null;if(b instanceof t.GroupRow&&b.dataItem instanceof e.collections.CollectionViewGroup){if(m=new t.CellRange(r,o),C.aggregate==e.Aggregate.None){for(;m.col>0&&_[m.col-1].aggregate==e.Aggregate.None&&m.col!=_.frozen;)m.col--;for(;m.col2<_.length-1&&_[m.col2+1].aggregate==e.Aggregate.None&&m.col2+1!=_.frozen;)m.col2++}for(;m.col<o&&!_[m.col].visible;)m.col++;return m.isSingleCell?null:m}switch(a=!1,this._g.allowMerging){case n.None:a=!0;break;case n.Cells:a=y!=t.CellType.Cell;break;case n.ColumnHeaders:a=y!=t.CellType.ColumnHeader&&y!=t.CellType.TopLeft;break;case n.RowHeaders:a=y!=t.CellType.RowHeader&&y!=t.CellType.TopLeft;break;case n.AllHeaders:a=y==t.CellType.Cell}if(a)return null;if(_[o].allowMerging){for(m=new t.CellRange(r,o),l=0,c=w.length-1,r>=w.frozen?s&&(y==t.CellType.Cell||y==t.CellType.RowHeader)&&(v=i._getViewRange(!0),l=v.topRow,c=v.bottomRow):c=w.frozen-1,u=r-1;u>=l&&this._mergeCell(i,u,o,r,o);u--)m.row=u;for(h=r+1;c>=h&&this._mergeCell(i,r,o,h,o);h++)m.row2=h;for(;m.row<r&&!w[m.row].visible;)m.row++;if(!m.isSingleCell)return m}if(w[r].allowMerging){for(m=new t.CellRange(r,o),p=0,d=_.length-1,o>=_.frozen?s&&(y==t.CellType.Cell||y==t.CellType.ColumnHeader)&&(v=i._getViewRange(!0),p=v.leftCol,d=v.rightCol):d=_.frozen-1,f=o-1;f>=p&&this._mergeCell(i,r,f,r,o);f--)m.col=f;for(g=o+1;d>=g&&this._mergeCell(i,r,o,r,g);g++)m.col2=g;for(;m.col<o&&!_[m.col].visible;)m.col++;if(!m.isSingleCell)return m}return null},i.prototype._mergeCell=function(e,n,i,r,o){var s=e.rows[n],a=e.rows[r];return s instanceof t.GroupRow||s instanceof t._NewRowTemplate||a instanceof t.GroupRow||a instanceof t._NewRowTemplate?!1:n!=r&&e.rows.isFrozen(n)!=e.rows.isFrozen(r)?!1:i!=o&&e.columns.isFrozen(i)!=e.columns.isFrozen(o)?!1:n!=r&&(i>0&&(s.allowMerging&&this._mergeCell(e,n,i-1,n,i)||a.allowMerging&&this._mergeCell(e,r,i-1,r,i))||o<e.columns.length-1&&(s.allowMerging&&this._mergeCell(e,n,o,n,o+1)||a.allowMerging&&this._mergeCell(e,r,o,r,o+1)))?!1:e.getCellData(n,i,!0)!=e.getCellData(r,o,!0)?!1:!0},i}();t.MergeManager=i}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function t(t,n,i){var r,o;if(this.mapChanged=new e.Event,e.isArray(t)&&!n&&!i){for(r=[],o=0;o<t.length;o++)r.push({value:t[o]});t=r,n=i="value"}this._cv=e.asCollectionView(t),this._keyPath=e.asString(n,!1),this._displayPath=e.asString(i,!1),this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return Object.defineProperty(t.prototype,"sortByDisplayValues",{get:function(){return 1!=this._sortByKey},set:function(t){this._sortByKey=!e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._keyPath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._displayPath},enumerable:!0,configurable:!0}),t.prototype.getKeyValue=function(e){var t=this._indexOf(e,this._displayPath,!1);return t>-1?this._cv.sourceCollection[t][this._keyPath]:null},t.prototype.getDisplayValue=function(e){var t=this._indexOf(e,this._keyPath,!0);return t>-1?this._cv.sourceCollection[t][this._displayPath]:e},t.prototype.getDisplayValues=function(){var e,t,n=[];if(this._cv&&this._displayPath)for(e=this._cv.items,t=0;t<e.length;t++)n.push(e[t][this._displayPath]);return n},t.prototype.getKeyValues=function(){var e,t,n=[];if(this._cv&&this._keyPath)for(e=this._cv.items,t=0;t<e.length;t++)n.push(e[t][this._keyPath]);return n},Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=e.asBoolean(t)},enumerable:!0,configurable:!0}),t.prototype.onMapChanged=function(e){this.mapChanged.raise(this,e)},t.prototype._indexOf=function(e,t,n){var i,r,o,s=-1,a=-1;if(this._cv&&t){var l=null!=e?e.toString():"",c=n?l:l.toLowerCase(),u=this._cv.sourceCollection;for(i=0;i<u.length;i++)if(r=u[i],o=r[t],o==e?s=i:n||o.length!=c.length||o.toLowerCase()!=c?null!=o&&o.toString()==l&&(s=i):s=i,s==i){if(!this._cv.filter||this._cv.filter(r))return s;0>a&&(a=s)}}return a},t}();t.DataMap=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n,i,r,o;!function(e){e[e.None=0]="None",e[e.Cell=1]="Cell",e[e.CellRange=2]="CellRange",e[e.Row=3]="Row",e[e.RowRange=4]="RowRange",e[e.ListBox=5]="ListBox"}(t.SelectionMode||(t.SelectionMode={})),n=t.SelectionMode,function(e){e[e.None=0]="None",e[e.Selected=1]="Selected",e[e.Cursor=2]="Cursor"}(t.SelectedState||(t.SelectedState={})),i=t.SelectedState,function(e){e[e.None=0]="None",e[e.Next=1]="Next",e[e.Prev=2]="Prev",e[e.NextPage=3]="NextPage",e[e.PrevPage=4]="PrevPage",e[e.Home=5]="Home",e[e.End=6]="End",e[e.NextCell=7]="NextCell",e[e.PrevCell=8]="PrevCell"}(t.SelMove||(t.SelMove={})),r=t.SelMove,o=function(){function i(e){this._sel=new t.CellRange(0,0),this._mode=n.CellRange,this._g=e}return Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this._mode},set:function(e){var i,r,o,s;if(e!=this._mode){if(e==n.ListBox||this._mode==n.ListBox)for(i=this._g.rows,r=0;r<i.length;r++)o=i[r],s=e==n.ListBox?this._sel.containsRow(r):!1,o._setFlag(t.RowColFlags.Selected,s,!0);switch(e){case n.None:this._sel.setRange(-1,-1);break;case n.Cell:this._sel.row2=this._sel.row,this._sel.col2=this._sel.col;break;case n.Row:this._sel.row2=this._sel.row}this._mode=e,this._g.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selection",{get:function(){return this._sel},set:function(e){this.select(e)},enumerable:!0,
configurable:!0}),i.prototype.select=function(i,r){var o,s,a,l;void 0===r&&(r=!0),e.isNumber(i)&&e.isNumber(r)&&(i=new t.CellRange(i,r),r=!0),i=e.asType(i,t.CellRange);var c=this._g,u=this._sel,h=i,p=!1;switch(c.selectionMode){case n.Cell:i.row2=i.row,i.col2=i.col;break;case n.Row:i.row2=i.row;break;case n.ListBox:p=!0}if(o=h.equals(u),p&&h.row>-1&&!c.rows[h.row].isSelected&&(o=!1),o)return void(r&&c.scrollIntoView(h.row,h.col));if(s=new t.CellRangeEventArgs(c.cells,h),c.onSelectionChanging(s)){if(p){for(a=0;a<c.rows.length;a++)c.rows[a]._setFlag(t.RowColFlags.Selected,h.containsRow(a),!0);c.refreshCells(!1,!0,!0)}h.row=Math.min(h.row,c.rows.length-1),h.row2=Math.min(h.row2,c.rows.length-1),this._sel=h,c.refreshCells(!1,!0,!0),r&&c.scrollIntoView(h.row,h.col),c.collectionView&&(l=c._getCvIndex(h.row),c.collectionView.moveCurrentToPosition(l)),c.onSelectionChanged(s)}},i.prototype.moveSelection=function(e,n,i){var o,s,a,l=this._g,c=l.rows,u=l.columns,h=this._getReferenceCell(e,n,i),p=Math.max(0,l._szClient.height-l.columnHeaders.height);n==r.NextCell?(s=u.getNextCell(h.col,r.Next,p),o=h.row,s==h.col&&(o=c.getNextCell(o,r.Next,p),o>h.row&&(s=u.getNextCell(0,r.Next,p),s=u.getNextCell(s,r.Prev,p))),l.select(o,s)):n==r.PrevCell?(s=u.getNextCell(h.col,r.Prev,p),o=h.row,s==h.col&&(o=c.getNextCell(o,r.Prev,p),o<h.row&&(s=u.getNextCell(u.length-1,r.Prev,p),s=u.getNextCell(s,r.Next,p))),l.select(o,s)):(o=c.getNextCell(h.row,e,p),s=u.getNextCell(h.col,n,p),i?(a=l._selHdl._sel,l.select(new t.CellRange(o,s,a.row2,a.col2))):l.select(o,s))},i.prototype._getReferenceCell=function(e,t){var n=this._g,i=n._selHdl._sel,o=n.getMergedRange(n.cells,i.row,i.col);if(!o||o.isSingleCell)return i;switch(o=o.clone(),e){case r.Next:case r.NextCell:o.row=o.bottomRow;break;case r.None:o.row=i.row}switch(t){case r.Next:case r.NextCell:o.col=o.rightCol;break;case r.None:o.col=i.col}return o},i.prototype._adjustSelection=function(e){switch(this._mode){case n.Cell:return new t.CellRange(e.row,e.col,e.row,e.col);case n.Row:return new t.CellRange(e.row,0,e.row,this._g.columns.length-1);case n.RowRange:case n.ListBox:return new t.CellRange(e.row,0,e.row2,this._g.columns.length-1)}return e},i}(),t._SelectionHandler=o}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function n(e){this._g=e,e.addEventListener(e.hostElement,"keypress",this._keypress.bind(this)),e.addEventListener(e.hostElement,"keydown",this._keydown.bind(this))}return n.prototype._keydown=function(n){var i,r,o,s=this._g,a=s.selection,l=n.ctrlKey||n.metaKey,c=n.shiftKey,u=(n.target,!0);if(s.isRangeValid(a)&&!n.defaultPrevented){if(s._wantsInput(n.target))return;if(s.activeEditor&&s._edtHdl._keydown(n))return;var h=e.tryCast(s.rows[a.row],t.GroupRow),p=e.tryCast(s.collectionView,"IEditableCollectionView"),d=n.keyCode;if(s.autoClipboard){if(l&&(67==d||45==d))return r=new t.CellRangeEventArgs(s.cells,a),s.onCopying(r)&&(i=s.getClipString(),e.Clipboard.copy(i),s.onCopied(r)),void n.stopPropagation();if(l&&86==d||c&&45==d)return s.isReadOnly||(r=new t.CellRangeEventArgs(s.cells,a),s.onPasting(r)&&e.Clipboard.paste(function(e){s.setClipString(e),s.onPasted(r)})),void n.stopPropagation()}if(s._rtl)switch(d){case e.Key.Left:d=e.Key.Right;break;case e.Key.Right:d=e.Key.Left}switch(d){case 65:l?s.select(new t.CellRange(0,0,s.rows.length-1,s.columns.length-1)):u=!1;break;case e.Key.Left:a.isValid&&0==a.col&&null!=h&&!h.isCollapsed&&h.hasChildren?h.isCollapsed=!0:this._moveSel(t.SelMove.None,l?t.SelMove.Home:t.SelMove.Prev,c);break;case e.Key.Right:a.isValid&&0==a.col&&null!=h&&h.isCollapsed?h.isCollapsed=!1:this._moveSel(t.SelMove.None,l?t.SelMove.End:t.SelMove.Next,c);break;case e.Key.Up:if(n.altKey&&s._edtHdl._toggleListBox(this._g.selection))break;this._moveSel(l?t.SelMove.Home:t.SelMove.Prev,t.SelMove.None,c);break;case e.Key.Down:if(n.altKey&&s._edtHdl._toggleListBox(this._g.selection))break;this._moveSel(l?t.SelMove.End:t.SelMove.Next,t.SelMove.None,c);break;case e.Key.PageUp:this._moveSel(t.SelMove.PrevPage,t.SelMove.None,c);break;case e.Key.PageDown:this._moveSel(t.SelMove.NextPage,t.SelMove.None,c);break;case e.Key.Home:this._moveSel(l?t.SelMove.Home:t.SelMove.None,t.SelMove.Home,c);break;case e.Key.End:this._moveSel(l?t.SelMove.End:t.SelMove.None,t.SelMove.End,c);break;case e.Key.Tab:this._moveSel(t.SelMove.None,c?t.SelMove.PrevCell:t.SelMove.NextCell,!1);break;case e.Key.Enter:this._moveSel(c?t.SelMove.Prev:t.SelMove.Next,t.SelMove.None,!1),!c&&p&&null!=p.currentEditItem&&s._edtHdl._commitRowEdits();break;case e.Key.Escape:p&&(p.currentAddItem||p.currentEditItem)&&(o=new t.CellRangeEventArgs(s.cells,s.selection),o.cancel=!0,s.onRowEditEnding(o),p.currentAddItem&&p.cancelNew(),p.currentEditItem&&p.cancelEdit(),s.onRowEditEnded(o)),s._mouseHdl.resetMouseState();break;case e.Key.Delete:case e.Key.Back:u=this._deleteSel();break;case e.Key.F2:u=this._startEditing(!0,n);break;case e.Key.F4:u=s._edtHdl._toggleListBox(this._g.selection);break;case e.Key.Space:u=this._startEditing(!0,n),u&&setTimeout(function(){var t=s.activeEditor;t&&("checkbox"==t.type?(t.checked=!t.checked,s.finishEditing()):e.setSelectionRange(t,t.value.length))});break;default:u=!1}u&&(s.focus(),n.preventDefault(),n.stopPropagation())}},n.prototype._keypress=function(t){var n=this._g;n._wantsInput(t.target)||(n.activeEditor?n._edtHdl._keypress(t):t.charCode>e.Key.Space&&this._startEditing(!1,t)&&n.activeEditor&&setTimeout(function(){var i=n.activeEditor;i&&"checkbox"!=i.type&&(i.value=String.fromCharCode(t.charCode),e.setSelectionRange(i,1),i.dispatchEvent(n._edtHdl._evtInput),n._edtHdl._keypress(t))}),t.stopPropagation())},n.prototype._moveSel=function(e,n,i){this._g.selectionMode!=t.SelectionMode.None&&this._g._selHdl.moveSelection(e,n,i)},n.prototype._deleteSel=function(){var n,i,r,o,s,a,l=this._g,c=e.tryCast(l.collectionView,"IEditableCollectionView"),u=l.selection,h=l.rows,p=[];if(l.allowDelete&&!l.isReadOnly&&(null==c||c.canRemove&&!c.isAddingNew&&!c.isEditingItem))switch(l.selectionMode){case t.SelectionMode.CellRange:if(0==u.leftCol&&u.rightCol==l.columns.length-1)for(r=u.topRow;r>-1&&r<=u.bottomRow;r++)p.push(h[r]);break;case t.SelectionMode.ListBox:for(r=0;r<h.length;r++)h[r].isSelected&&p.push(h[r]);break;case t.SelectionMode.Row:u.topRow>-1&&p.push(h[u.topRow]);break;case t.SelectionMode.RowRange:for(r=u.topRow;r>-1&&r<=u.bottomRow;r++)p.push(h[r])}if(p.length>0){for(c&&c.beginUpdate(),l.beginUpdate(),n=new t.CellRange,i=new t.CellRangeEventArgs(l.cells,n),r=p.length-1;r>=0;r--)o=p[r],n.row=n.row2=o.index,l.onDeletingRow(i)&&(c&&o.dataItem?c.remove(o.dataItem):l.rows.removeAt(o.index),l.onDeletedRow(i));return l.endUpdate(),c&&c.endUpdate(),l.selectionMode==t.SelectionMode.ListBox&&(s=l.selection.row,s>-1&&s<l.rows.length&&(l.rows[s].isSelected=!0)),l.childItemsPath&&l.collectionView&&l.collectionView.refresh(),!0}return!l.isReadOnly&&0==p.length&&u.isSingleCell&&(a=l._getBindingColumn(l.cells,u.row,l.columns[u.col]),!a.getIsRequired()&&l.getCellData(u.row,u.col,!0)&&this._startEditing(!1,i,u.row,u.col))?(l.setCellData(u.row,u.col,"",!0),l.finishEditing(!0),l.invalidate(),!0):!1},n.prototype._startEditing=function(e,t,n,i){return this._g._edtHdl.startEditing(e,n,i,!0,t)},n}();t._KeyboardHandler=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n,i,r,o,s=4;!function(e){e[e.None=0]="None",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows",e[e.Both=3]="Both",e[e.ColumnsAllCells=e.Columns|s]="ColumnsAllCells",e[e.RowsAllCells=e.Rows|s]="RowsAllCells",e[e.BothAllCells=e.Both|s]="BothAllCells"}(t.AllowResizing||(t.AllowResizing={})),n=t.AllowResizing,function(e){e[e.None=0]="None",e[e.Headers=1]="Headers",e[e.Cells=2]="Cells",e[e.Both=3]="Both"}(t.AutoSizeMode||(t.AutoSizeMode={})),i=t.AutoSizeMode,function(e){e[e.None=0]="None",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows",e[e.Both=3]="Both"}(t.AllowDragging||(t.AllowDragging={})),r=t.AllowDragging,o=function(){function i(t){var n,i,r=this,o=t.hostElement;this._g=t,t.addEventListener(o,"mousedown",function(o){if(!o.defaultPrevented&&0==o.button){if(t._wantsInput(o.target))return;e.closest(o.target,".wj-flexgrid")==r._g.hostElement&&(t.addEventListener(document,"mousemove",n),t.addEventListener(document,"mouseup",i),r._mousedown(o))}}),n=function(e){r._mousemove(e)},i=function(e){t.removeEventListener(document,"mousemove"),t.removeEventListener(document,"mouseup"),r._mouseup(e)},t.addEventListener(o,"mousemove",this._hover.bind(this)),t.addEventListener(o,"dblclick",this._dblclick.bind(this)),t.addEventListener(o,"selectstart",function(e){"INPUT"!=e.target.tagName&&e.preventDefault()}),t.addEventListener(o,"wheel",function(n){var i=t.cells.hostElement.parentElement;i.scrollHeight>i.offsetHeight&&(n.deltaY<0&&0==i.scrollTop||n.deltaY>0&&i.scrollTop+i.offsetHeight>=i.scrollHeight)&&e.closest(n.target,".wj-flexgrid")==t.hostElement&&(n.preventDefault(),n.stopPropagation())}),t.addEventListener(o,"dragstart",this._dragstart.bind(this)),t.addEventListener(o,"dragover",this._dragover.bind(this)),t.addEventListener(o,"dragleave",this._dragover.bind(this)),t.addEventListener(o,"drop",this._drop.bind(this)),t.addEventListener(o,"dragend",this._dragend.bind(this)),this._dvMarker=e.createElement('<div class="wj-marker">&nbsp;</div>')}return i.prototype.resetMouseState=function(){var e,t;this._dragSource&&(this._dragSource.style.opacity=1),this._showDragMarker(null),e=this._g.hostElement,e&&(e.style.cursor="default"),t=this._g,t.removeEventListener(document,"mousemove"),t.removeEventListener(document,"mouseup"),this._htDown=null,this._lbSelRows=null,this._szRowCol=null,this._szArgs=null,this._dragSource=null},i.prototype._mousedown=function(n){var i,o,s,a,l,c=this._g;if(c._rcBounds=null,i=c.hitTest(n),o=i.cellType,o==t.CellType.None)return void c.finishEditing();if(!(o==t.CellType.Cell&&c.editRange&&c.editRange.contains(i.range)||(s=e.getActiveElement(),n.target==s&&c._isInputElement(n.target)))){if(n.target!=s&&c.focus(),this._htDown=i,this._eMouse=n,null!=this._szRowCol)return void this._handleResizing(n);switch(o){case t.CellType.Cell:n.ctrlKey&&c.selectionMode==t.SelectionMode.ListBox&&this._startListBoxSelection(i.row),this._mouseSelect(n,n.shiftKey);break;case t.CellType.RowHeader:0==(this._g.allowDragging&r.Rows)&&(n.ctrlKey&&c.selectionMode==t.SelectionMode.ListBox&&this._startListBoxSelection(i.row),this._mouseSelect(n,n.shiftKey))}if(o==t.CellType.Cell&&c.rows.maxGroupLevel>-1&&(a=e.tryCast(c.rows[i.row],t.GroupRow),l=e.closest(n.target,"."+t.CellFactory._WJC_COLLAPSE),a&&l))return n.ctrlKey?c.collapseGroupsToLevel(a.isCollapsed?a.level+1:a.level):a.isCollapsed=!a.isCollapsed,this.resetMouseState(),void n.preventDefault()}},i.prototype._mousemove=function(e){var n=this;if(null!=this._htDown)if(setTimeout(function(){e.which&&n._g.containsFocus()||n.resetMouseState()}),this._eMouse=e,this._szRowCol)this._handleResizing(e);else switch(this._htDown.cellType){case t.CellType.Cell:this._mouseSelect(e,!0);break;case t.CellType.RowHeader:0==(this._g.allowDragging&r.Rows)&&this._mouseSelect(e,!0)}},i.prototype._mouseup=function(e){var n,i,r,o;this._dragSource&&this._g.isTouching||(n=this._htDown,!n||n.cellType!=t.CellType.TopLeft||this._szArgs||e.defaultPrevented?this._szArgs?this._finishResizing(e):this._handleSort(e):(i=this._g,r=i.hitTest(e),r.panel==n.panel&&r.row==n.row&&r.col==n.col&&(o=i.getMergedRange(n.panel,n.row,n.col)||r.range,0==o.row&&0==o.col&&i.select(new t.CellRange(0,0,i.rows.length-1,i.columns.length-1)))),this.resetMouseState())},i.prototype._dblclick=function(e){var i,r,o,a=this._g,l=a.hitTest(e),c=l.cellType,u=a.selection,h=l.range;if(!e.defaultPrevented){if(l.edgeRight&&a.allowResizing&n.Columns){if(c==t.CellType.ColumnHeader||c==t.CellType.Cell&&a.allowResizing&s)for(e.preventDefault(),e.ctrlKey&&u.containsColumn(l.col)&&(h=u),r=h.leftCol;r<=h.rightCol;r++)a.columns[r].allowResizing&&(i=new t.CellRangeEventArgs(a.cells,new t.CellRange(-1,r)),a.onAutoSizingColumn(i)&&a.onResizingColumn(i))&&(a.autoSizeColumn(r),a.onResizedColumn(i),a.onAutoSizedColumn(i));else c==t.CellType.TopLeft&&a.topLeftCells.columns[l.col].allowResizing&&(e.preventDefault(),i=new t.CellRangeEventArgs(a.topLeftCells,new t.CellRange(-1,l.col)),a.onAutoSizingColumn(i)&&a.onResizingColumn(i))&&(a.autoSizeColumn(l.col,!0),a.onAutoSizedColumn(i),a.onResizedColumn(i));return void this.resetMouseState()}if(l.edgeBottom&&a.allowResizing&n.Rows){if(c==t.CellType.RowHeader||c==t.CellType.Cell&&a.allowResizing&s)for(e.ctrlKey&&u.containsRow(l.row)&&(h=u),o=h.topRow;o<=h.bottomRow;o++)a.rows[o].allowResizing&&(i=new t.CellRangeEventArgs(a.cells,new t.CellRange(o,-1)),a.onAutoSizingRow(i)&&a.onResizingRow(i))&&(a.autoSizeRow(o),a.onResizedRow(i),a.onAutoSizedRow(i));else c==t.CellType.TopLeft&&a.topLeftCells.rows[l.row].allowResizing&&(i=new t.CellRangeEventArgs(a.topLeftCells,new t.CellRange(l.row,-1)),a.onAutoSizingRow(i)&&a.onResizingRow(i))&&(a.autoSizeRow(l.row,!0),a.onResizedRow(i),a.onAutoSizedRow(i));this.resetMouseState()}}},i.prototype._hover=function(e){if(null==this._htDown){var i=this._g,r=i.hitTest(e),o=(r.panel,r.cellType),a="default";this._szRowCol=null,(o==t.CellType.ColumnHeader||o==t.CellType.TopLeft||o==t.CellType.Cell&&i.allowResizing&s)&&r.edgeRight&&0!=(i.allowResizing&n.Columns)&&(this._szRowCol=this._getResizeCol(r)),(o==t.CellType.RowHeader||o==t.CellType.TopLeft||o==t.CellType.Cell&&i.allowResizing&s)&&r.edgeBottom&&0!=(i.allowResizing&n.Rows)&&(this._szRowCol=this._getResizeRow(r)),this._szRowCol instanceof t.Column?a="col-resize":this._szRowCol instanceof t.Row&&(a="row-resize"),this._szStart=this._szRowCol?this._szRowCol.renderSize:0,i.hostElement.style.cursor=a}},i.prototype._getResizeCol=function(e){for(var n,i=e.panel.columns,r=i[e.col],o=e.col+1;o<i.length;o++)if(n=i[o],n.visible){n.size<1&&(r=n);break}if(e.col==i.length-1&&(e.cellType==t.CellType.TopLeft||e.cellType==t.CellType.RowHeader))for(i=this._g.columns,o=0;o<i.length;o++)if(n=i[o],n.visible){n.size<1&&(r=n);break}return r.allowResizing?r:null},i.prototype._getResizeRow=function(e){for(var n,i=e.panel.rows,r=i[e.row],o=e.row+1;o<i.length;o++)if(n=i[o],n.visible){n.size<1&&(r=n);break}if(e.row==i.length-1&&(e.cellType==t.CellType.TopLeft||e.cellType==t.CellType.ColumnHeader))for(i=this._g.rows,o=0;o<i.length;o++)if(n=i[o],n.visible){n.size<1&&(r=n);break}return r.allowResizing?r:null},i.prototype._mouseSelect=function(n,i){var r,o=this;this._htDown&&this._htDown.panel&&this._g.selectionMode!=t.SelectionMode.None&&(r=new t.HitTestInfo(this._htDown.panel,n),this._handleSelection(r,i),this._g._isInputElement(n.target)||n.preventDefault(),!e.isIE9()&&n.button>=0&&(r=new t.HitTestInfo(this._g,n),r.cellType!=t.CellType.Cell&&r.cellType!=t.CellType.RowHeader&&setTimeout(function(){o._mouseSelect(o._eMouse,i)},100)))},i.prototype._handleResizing=function(e){var n;if(e.preventDefault(),this._szRowCol instanceof t.Column){var r=this._g,o=e.clientX+pageXOffset,s=Math.round(Math.max(i._SZ_MIN,this._szStart+(o-this._htDown.point.x)*(r._rtl?-1:1)));this._szRowCol.renderSize!=s&&(null==this._szArgs&&(n=r.rowHeaders.columns.indexOf(this._szRowCol)>-1?r.rowHeaders:r.cells,this._szArgs=new t.CellRangeEventArgs(n,new t.CellRange(-1,this._szRowCol.index))),this._szArgs.cancel=!1,r.onResizingColumn(this._szArgs)&&(r.deferResizing||r.isTouching?this._showResizeMarker(s):this._szRowCol.width=s))}if(this._szRowCol instanceof t.Row){var r=this._g,a=e.clientY+pageYOffset,s=Math.round(Math.max(i._SZ_MIN,this._szStart+(a-this._htDown.point.y)));this._szRowCol.renderSize!=s&&(null==this._szArgs&&(n=r.columnHeaders.rows.indexOf(this._szRowCol)>-1?r.columnHeaders:r.cells,this._szArgs=new t.CellRangeEventArgs(n,new t.CellRange(this._szRowCol.index,-1))),this._szArgs.cancel=!1,r.onResizingRow(this._szArgs)&&(r.deferResizing||r.isTouching?this._showResizeMarker(s):this._szRowCol.height=s))}},i.prototype._dragstart=function(e){var n,i,o=this._g,s=this._htDown;s&&(this._dragSource=null,this._szRowCol||(n=new t.CellRangeEventArgs(o.cells,s.range),s.cellType==t.CellType.ColumnHeader&&o.allowDragging&r.Columns&&s.col>-1&&o.columns[s.col].allowDragging?o.onDraggingColumn(n)&&(this._dragSource=e.target):s.cellType==t.CellType.RowHeader&&o.allowDragging&r.Rows&&s.row>-1&&o.rows[s.row].allowDragging&&(i=o.rows[s.row],i instanceof t.GroupRow||i instanceof t._NewRowTemplate||o.onDraggingRow(n)&&(this._dragSource=e.target))),this._dragSource&&e.dataTransfer?(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",""),this._dragSource.style.opacity=.5,e.stopPropagation(),o.beginUpdate()):e.preventDefault())},i.prototype._dragend=function(){this._g.endUpdate(),this.resetMouseState()},i.prototype._dragover=function(e){var n=this._g,i=n.hitTest(e),r=!1;this._htDown&&i.cellType==this._htDown.cellType&&(i.cellType==t.CellType.ColumnHeader?r=n.columns.canMoveElement(this._htDown.col,i.col):i.cellType==t.CellType.RowHeader&&(r=n.rows.canMoveElement(this._htDown.row,i.row))),r?(e.dataTransfer.dropEffect="move",e.preventDefault(),this._showDragMarker(i)):this._showDragMarker(null)},i.prototype._drop=function(e){var n,i=this._g,r=i.hitTest(e),o=new t.CellRangeEventArgs(i.cells,r.range);this._htDown&&r.cellType==this._htDown.cellType&&(n=i.selection,r.cellType==t.CellType.ColumnHeader?(i.columns.moveElement(this._htDown.col,r.col),i.select(n.row,r.col),i.onDraggedColumn(o)):r.cellType==t.CellType.RowHeader&&(i.rows.moveElement(this._htDown.row,r.row),i.select(r.row,n.col),i.onDraggedRow(o))),this.resetMouseState()},i.prototype._showResizeMarker=function(n){var i,r,o=this._g,s=this._dvMarker;s.parentElement||o.cells.hostElement.appendChild(s),r=this._szArgs.panel.cellType,this._szRowCol instanceof t.Column?(i={display:"",left:this._szRowCol.pos+n-1,top:0,right:"",bottom:0,width:3,height:"",zIndex:1e3},o._rtl&&(i.left=s.parentElement.clientWidth-i.left-i.width),(r==t.CellType.TopLeft||r==t.CellType.RowHeader)&&(i.left-=o.topLeftCells.hostElement.offsetWidth)):(i={left:0,top:this._szRowCol.pos+n-1,right:0,bottom:"",width:"",height:3,zIndex:1e3},(r==t.CellType.TopLeft||r==t.CellType.ColumnHeader)&&(i.top-=o.topLeftCells.hostElement.offsetHeight)),e.setCss(s,i)},i.prototype._showDragMarker=function(n){var i,r,o,s=this._g,a=this._dvMarker;if(!n)return a.parentElement&&a.parentElement.removeChild(a),void(this._rngTarget=null);if(!n.range.equals(this._rngTarget)){switch(this._rngTarget=n.range,a.parentElement||n.panel.hostElement.appendChild(a),i={display:"",left:0,top:0,width:6,height:6},n.cellType){case t.CellType.ColumnHeader:i.height=n.panel.height,r=s.columns[n.col],i.left=r.pos-i.width/2,n.col>this._htDown.col&&(i.left+=r.renderWidth),s._rtl&&(i.left=a.parentElement.clientWidth-i.left-i.width);break;case t.CellType.RowHeader:i.width=n.panel.width,o=s.rows[n.row],i.top=o.pos-i.height/2,n.row>this._htDown.row&&(i.top+=o.renderHeight)}e.setCss(a,i)}},i.prototype._finishResizing=function(e){var n,r,o,s,a=this._g,l=a.selection,c=this._eMouse.ctrlKey,u=this._szArgs,h=e.clientX+pageXOffset,p=e.clientY+pageYOffset;if(u&&!u.cancel&&u.col>-1&&(n=u.col,r=Math.round(Math.max(i._SZ_MIN,this._szStart+(h-this._htDown.point.x)*(this._g._rtl?-1:1))),u.panel.columns[n].width=Math.round(r),a.onResizedColumn(u),c&&this._htDown.cellType==t.CellType.ColumnHeader&&l.containsColumn(n)))for(o=l.leftCol;o<=l.rightCol;o++)a.columns[o].allowResizing&&o!=n&&(u=new t.CellRangeEventArgs(a.cells,new t.CellRange(-1,o)),a.onResizingColumn(u))&&(a.columns[o].size=a.columns[n].size,a.onResizedColumn(u));if(u&&!u.cancel&&u.row>-1&&(n=u.row,r=Math.round(Math.max(i._SZ_MIN,this._szStart+(p-this._htDown.point.y))),u.panel.rows[n].height=Math.round(r),a.onResizedRow(u),c&&this._htDown.cellType==t.CellType.RowHeader&&l.containsRow(n)))for(s=l.topRow;s<=l.bottomRow;s++)a.rows[s].allowResizing&&s!=n&&(u=new t.CellRangeEventArgs(a.cells,new t.CellRange(s,-1)),a.onResizingRow(u))&&(a.rows[s].size=a.rows[n].size,a.onResizedRow(u))},i.prototype._startListBoxSelection=function(e){var t,n=this._g.rows;for(this._lbSelState=!n[e].isSelected,this._lbSelRows={},t=0;t<n.length;t++)n[t].isSelected&&(this._lbSelRows[t]=!0)},i.prototype._handleSelection=function(e,n){var i,r,o,s,a=this._g,l=a.rows,c=a._selHdl._sel,u=new t.CellRange(e.row,e.col);if(e.row>-1&&e.col>-1)if(null!=this._lbSelRows){for(i=!1,u=new t.CellRange(e.row,e.col,this._htDown.row,this._htDown.col),r=0;r<l.length;r++)o=u.containsRow(r)?this._lbSelState:null!=this._lbSelRows[r],o!=l[r].isSelected&&(s=new t.CellRangeEventArgs(a.cells,new t.CellRange(r,c.col,r,c.col2)),a.onSelectionChanging(s))&&(l[r]._setFlag(t.RowColFlags.Selected,o,!0),i=!0,a.onSelectionChanged(s));i&&a.refreshCells(!1,!0,!0),a.scrollIntoView(e.row,e.col)}else e.cellType==t.CellType.RowHeader&&(u.col=0,u.col2=a.columns.length-1),n&&(u.row2=c.row2,u.col2=c.col2),a.select(u)},i.prototype._handleSort=function(n){var i,r,o,s,a=this._g,l=a.collectionView,c=a.hitTest(n);if(this._htDown&&c.cellType==this._htDown.cellType&&c.col==this._htDown.col&&c.cellType==t.CellType.ColumnHeader&&!c.edgeRight&&c.col>-1&&l&&l.canSort&&a.allowSorting){var u=a.getMergedRange(c.panel,c.row,c.col),h=u?u.row2:c.row,p=a.columns[c.col],d=a._getBindingColumn(c.panel,c.row,p);if((h==a._getSortRowIndex()||p!=d)&&(i=d.currentSort,r="+"!=i,d.allowSorting&&d.binding)){if(!i&&n.ctrlKey)return;o=new t.CellRangeEventArgs(a.columnHeaders,new t.CellRange(-1,c.col)),a.onSortingColumn(o)&&(s=l.sortDescriptions,n.ctrlKey?s.clear():s.splice(0,s.length,new e.collections.SortDescription(d._getBindingSort(),r)),a.onSortedColumn(o))}}},i._SZ_MIN=0,i}(),t._MouseHandler=o}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function n(n){var i=this;this._fullEdit=!1,this._list=null,this._g=n,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),n.selectionChanging.addHandler(function(e,t){var r;if(i.finishEditing()){if(r=n._selHdl._sel.row,r!=t.row){var o=n.rows.length,s=r>-1&&o>r?n.rows[r].dataItem:null,a=t.row>-1&&t.row<o?n.rows[t.row].dataItem:null;s!=a&&i._commitRowEdits()}}else t.cancel=!0}),n.lostFocus.addHandler(function(){if(!i._g.containsFocus()){var t=e.getActiveElement();t&&"fixed"==getComputedStyle(t).position||i._commitRowEdits()}}),n.addEventListener(n.hostElement,"mousedown",function(r){var o,s,a,l;if(!r.defaultPrevented&&0==r.button&&!n._mouseHdl._szRowCol)if(o=n.selection,s=n.hitTest(r),i._htDown=null,i._cancelClick=!1,s.cellType!=t.CellType.Cell&&s.cellType!=t.CellType.None)i._lbx&&e.contains(i._lbx.hostElement,r.target)||i._commitRowEdits();else if(s.cellType!=t.CellType.None){if(a=e.tryCast(r.target,HTMLInputElement),a&&"checkbox"==a.type&&e.hasClass(a.parentElement,"wj-cell")&&(a!=i.activeEditor?i.startEditing(!1,s.row,s.col)&&setTimeout(function(){a=i.activeEditor,a&&"checkbox"==a.type?(a.checked=!a.checked,a.focus(),i.finishEditing()):i._cancelClick=!0}):i.finishEditing()),l=document.elementFromPoint(r.clientX,r.clientY),e.closest(l,"."+t.CellFactory._WJC_DROPDOWN))return i._toggleListBox(r,s.range),i._htDown=null,void r.preventDefault();null==a&&s.row==o.row&&s.col==o.col&&(i._htDown=s)}},!0),n.addEventListener(n.hostElement,"click",function(e){var t,r;return i._cancelClick?(e.preventDefault(),void e.stopPropagation()):(i._htDown&&!i.activeEditor&&(t=n.hitTest(e),t.range.equals(i._htDown.range)&&i.startEditing(!0,t.row,t.col,!0,e)),void(i._htDown||i.activeEditor||(t=n.hitTest(e),(t.row<n.rows.frozen||t.col<n.columns.frozen)&&(r=e.target,r instanceof HTMLInputElement&&"checkbox"==r.type&&n._updateFrozenCells()))))},!0)}return n.prototype.startEditing=function(n,i,r,o,s){var a,l,c,u,h,p,d,f;return void 0===n&&(n=!0),a=this._g,i=e.asNumber(i,!0,!0),r=e.asNumber(r,!0,!0),null==i&&(i=a.selection.row),null==r&&(r=a.selection.col),null==o&&(o=!0),this._allowEditing(i,r)&&(l=a.getMergedRange(a.cells,i,r),l||(l=new t.CellRange(i,r)),c=a.rows[i].dataItem,a.select(l,!0),a.rows[i]&&c==a.rows[i].dataItem)?l.equals(this._rng)?!0:(u=new t.CellRangeEventArgs(a.cells,l,s),a.onBeginningEdit(u)?((h=e.tryCast(a.collectionView,"IEditableCollectionView"))&&(c=a.rows[i].dataItem,(p=c!=h.currentEditItem)&&a.onRowEditStarting(u),h.editItem(c),p&&a.onRowEditStarted(u)),this._fullEdit=n,this._rng=l,this._list=null,d=a.columns[r].dataMap,d&&(this._list=d.getDisplayValues(c)),a.refresh(!1),(f=this._edt)&&("checkbox"==f.type?this._fullEdit=!1:o&&e.setSelectionRange(f,0,f.value.length),a.onPrepareCellForEdit(u),f=this._edt,f&&o&&f.focus()),!0):!1):!1},n.prototype.finishEditing=function(n){var i,r,o,s,a,l;if(void 0===n&&(n=!1),i=this._edt,!i)return this._removeListBox(),!0;var c=this._g,u=this._rng,h=new t.CellEditEndingEventArgs(c.cells,u),p=this._g.containsFocus();if(i&&p&&(r=e.Control.getControl(e.closest(e.getActiveElement(),".wj-control")),r&&r!=this._g)&&r.onLostFocus(h),h.cancel=n,!n&&c.validateEdits&&(o=this._getValidationError(),o&&(e.toggleClass(i.parentElement,"wj-state-invalid",!0),i.parentElement.title=o,h.cancel=h.stayInEditMode=!0)),!c.onCellEditEnding(h)&&h.stayInEditMode&&p)return p&&i&&setTimeout(function(){i.select()}),!1;if(!h.cancel)for(h.data=c.cells.getCellData(u.topRow,u.leftCol,!1),s=c.cellFactory.getEditorValue(c),a=u.topRow;a<=u.bottomRow&&a<c.rows.length;a++)for(l=u.leftCol;l<=u.rightCol&&l<c.columns.length;l++)c.cells.setCellData(a,l,s,!0);return this._edt=null,this._rng=null,this._list=null,this._removeListBox(),c.refresh(!1),p&&c.focus(),c.onCellEditEnded(h),!0},Object.defineProperty(n.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),n.prototype._getValidationError=function(){var t,n=this._g,i=n.collectionView,r=i?i.getError:null;if(e.isFunction(r)){var o=this._rng,s=n._getBindingColumn(n.cells,o.row,n.columns[o.col]),a=s.binding,l=s.dataType,c=n.rows[o.row].dataItem,u=n.cellFactory.getEditorValue(n),h=null;if(u=e.changeType(u,l,s.format),e.getType(u)==l&&c)return t=s._binding.getValue(c),s._binding.setValue(c,u),h=r(c,a),s._binding.setValue(c,t),h}return null},n.prototype._allowEditing=function(e,n){var i,r=this._g;return r.isReadOnly||r.selectionMode==t.SelectionMode.None?!1:0>e||e>=r.rows.length||r.rows[e].isReadOnly||!r.rows[e].isVisible?!1:0>n||n>=r.columns.length?!1:(i=r._getBindingColumn(r.cells,e,r.columns[n]),!i||!i.isReadOnly&&i.isVisible?!0:!1)},n.prototype._commitRowEdits=function(){var n,i,r;this.finishEditing(),n=this._g,i=e.tryCast(n.collectionView,"IEditableCollectionView"),i&&i.currentEditItem&&(r=new t.CellRangeEventArgs(n.cells,n.selection),n.onRowEditEnding(r),i.commitEdit(),n.onRowEditEnded(r))},n.prototype._keydown=function(t){switch(t.keyCode){case e.Key.F2:return this._fullEdit=!this._fullEdit,t.preventDefault(),!0;case e.Key.F4:return this._toggleListBox(t),t.preventDefault(),!0;case e.Key.Space:var n=this._edt;return n&&"checkbox"==n.type&&(n.checked=!n.checked,this.finishEditing(),t.preventDefault()),!0;case e.Key.Enter:case e.Key.Tab:return t.preventDefault(),!this.finishEditing();case e.Key.Escape:return t.preventDefault(),this.finishEditing(!0),!0;case e.Key.Up:case e.Key.Down:case e.Key.Left:case e.Key.Right:case e.Key.PageUp:case e.Key.PageDown:case e.Key.Home:case e.Key.End:if(this._lbx)return this._keydownListBox(t);if(t.altKey)switch(t.keyCode){case e.Key.Up:case e.Key.Down:return this._toggleListBox(t),t.preventDefault(),!0}if(!this._fullEdit&&this.finishEditing())return!1}return!0},n.prototype._keydownListBox=function(t){var n=!0;if(this._lbx)switch(t.keyCode){case e.Key.Up:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex>0&&this._lbx.selectedIndex--;break;case e.Key.Down:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex++;break;case e.Key.Home:case e.Key.PageUp:this._lbx.selectedIndex=0;break;case e.Key.End:case e.Key.PageDown:this._lbx.selectedIndex=this._lbx.collectionView.items.length-1;break;default:n=!1}return n?(t.preventDefault(),!0):!1},n.prototype._keypress=function(t){var n,i,r,o=this._edt;if(o&&"checkbox"!=o.type&&t.target==o&&this._list&&this._list.length>0&&t.charCode>=32)for(n=o.selectionStart,i=o.value.substr(0,n),t.target==o&&(n++,i+=String.fromCharCode(t.charCode)),i=i.toLowerCase(),r=0;r<this._list.length;r++)if(0==this._list[r].toLowerCase().indexOf(i)){o.value=this._list[r],e.setSelectionRange(o,n,this._list[r].length),o.dispatchEvent(this._evtInput),t.preventDefault();break}},n.prototype._toggleListBox=function(t,n){var i,r,o=this._g;return n||(n=o.selection),this._lbx&&(this._removeListBox(),o.selection.contains(n))?(o.activeEditor?o.activeEditor.focus():o.containsFocus()||o.focus(),!0):(i=o.isTouching,r=o._getBindingColumn(o.cells,n.row,o.columns[n.col]),e.input&&r.dataMap&&r.showDropDown!==!1&&e.input&&this.startEditing(!0,n.row,n.col,!i,t)?(this._lbx=this._createListBox(),this._lbx.showSelection(),i&&this._lbx.focus(),!0):!1)},n.prototype._createListBox=function(){var t=this,n=this._g,i=this._rng,r=n.rows[i.row],o=n._getBindingColumn(n.cells,i.row,n.columns[i.col]),s=document.createElement("div"),a=new e.input.ListBox(s);return e.addClass(s,"wj-dropdown-panel"),a.maxHeight=4*r.renderHeight,a.itemsSource=o.dataMap.getDisplayValues(r.dataItem),a.selectedValue=n.activeEditor?n.activeEditor.value:n.getCellData(i.row,i.col,!0),e.addClass(s,o.dropDownCssClass),a.addEventListener(a.hostElement,"click",function(){t._removeListBox(),t.finishEditing()}),a.lostFocus.addHandler(function(){t._removeListBox()}),a.selectedIndexChanged.addHandler(function(){var i=n.activeEditor;i&&(i.value=t._lbx.selectedValue,i.dispatchEvent(t._evtInput),e.setSelectionRange(i,0,i.value.length))}),e.showPopup(s,n.getCellBoundingRect(i.row,i.col)),a},n.prototype._removeListBox=function(){this._lbx&&(e.hidePopup(this._lbx.hostElement,!0),this._lbx.dispose(),this._lbx=null)},n}();t._EditHandler=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){"use strict";var n,i=function(){function i(e){this._nrt=new n,this._g=e,this._keydownBnd=this._keydown.bind(this),this._attach()}return Object.defineProperty(i.prototype,"newRowAtTop",{get:function(){return this._top},set:function(t){t!=this.newRowAtTop&&(this._top=e.asBoolean(t),this.updateNewRowTemplate())},enumerable:!0,configurable:!0}),i.prototype.updateNewRowTemplate=function(){var n,i=e.tryCast(this._g.collectionView,"IEditableCollectionView"),r=this._g,o=r.rows,s=i&&i.canAddNew&&r.allowAddNew&&!r.isReadOnly,a=o.indexOf(this._nrt),l=this._top?0:o.length-1,c=!1;!s&&a>-1?(n=r.selection,n.row==a&&r.select(n.row-1,n.col),o.removeAt(a)):s&&(0>a?c=!0:a!=l&&(o.removeAt(a),c=!0),c&&(this._top?o.insert(0,this._nrt):o.push(this._nrt)),this._nrt&&this._nrt._setFlag(t.RowColFlags.ParentCollapsed,!1))},i.prototype._attach=function(){var e=this._g;e&&(e.beginningEdit.addHandler(this._beginningEdit,this),e.pastingCell.addHandler(this._beginningEdit,this),e.rowEditEnded.addHandler(this._rowEditEnded,this),e.loadedRows.addHandler(this.updateNewRowTemplate,this),e.hostElement.addEventListener("keydown",this._keydownBnd,!0))},i.prototype._detach=function(){var e=this._g;e&&(e.beginningEdit.removeHandler(this._beginningEdit),e.pastingCell.removeHandler(this._beginningEdit),e.rowEditEnded.removeHandler(this._rowEditEnded),e.loadedRows.removeHandler(this.updateNewRowTemplate),e.hostElement.removeEventListener("keydown",this._keydownBnd,!0))},i.prototype._keydown=function(t){t.defaultPrevented||t.keyCode!=e.Key.Escape||null==this._g.activeEditor&&this._top&&this._nrt.dataItem&&(this._nrt.dataItem=null,this._g.invalidate())},i.prototype._beginningEdit=function(t,i){var r,o,s;if(!i.cancel&&(r=this._g.rows[i.row],e.tryCast(r,n)&&(o=e.tryCast(this._g.collectionView,"IEditableCollectionView"),
o&&o.canAddNew)))if(this._top){if(null==this._nrt.dataItem){var s=null,a=o.sourceCollection,l=o.newItemCreator;s=e.isFunction(l)?l():a&&a.length?new a[0].constructor:{},this._nrt.dataItem=s}}else s=o.currentAddItem&&o.currentAddItem==r.dataItem?o.currentAddItem:o.addNew(),o.moveCurrentTo(s),this.updateNewRowTemplate(),this._g.refresh(!0),this._g.onRowAdded(i),i.cancel&&o.cancelNew()},i.prototype._rowEditEnded=function(t,n){var i,r,o=this,s=e.tryCast(this._g.collectionView,"IEditableCollectionView"),a=this._nrt.dataItem;if(s)if(s.isAddingNew)s.commitNew();else if(a&&!n.cancel){this._nrt.dataItem=null,i=s.addNew();for(r in a)i[r]=a[r];s.commitNew(),setTimeout(function(){o._g.select(0,o._g.columns.firstVisibleIndex)},20)}},i}();t._AddNewHandler=i,n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(t.Row),t._NewRowTemplate=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function t(t){this._tbx=e.createElement('<input class="wj-grid-editor wj-form-control" wj-part="ime-target"/>'),this._cssHidden={opacity:"0",pointerEvents:"none",position:"absolute",left:-10,top:-10,width:0},e.setCss(this._tbx,this._cssHidden),this._g=t,this._g.cells.hostElement.parentElement.appendChild(this._tbx),this._updateImeFocus();var t=this._g,n=t.hostElement;t.addEventListener(this._tbx,"compositionstart",this._compositionstart.bind(this)),t.addEventListener(this._tbx,"keydown",this._keydown.bind(this)),t.addEventListener(n,"blur",this._updateImeFocus.bind(this),!0),t.addEventListener(n,"focus",this._updateImeFocus.bind(this),!0),t.addEventListener(n,"mousedown",this._mousedown.bind(this),!0),t.addEventListener(n,"mouseup",this._mouseup.bind(this),!0),t.cellEditEnded.addHandler(this._cellEditEnded,this),t.selectionChanged.addHandler(this._updateImeFocus,this)}return t.prototype.dispose=function(){var e=this._g,t=e.hostElement;e.removeEventListener(this._tbx,"compositionstart"),e.removeEventListener(t,"blur"),e.removeEventListener(t,"focus"),e.removeEventListener(t,"mousedown"),e.removeEventListener(t,"mouseup"),e.cellEditEnded.removeHandler(this._cellEditEnded),e.selectionChanged.removeHandler(this._updateImeFocus),this._tbx.parentElement&&this._tbx.parentElement.removeChild(this._tbx)},t.prototype._cellEditEnded=function(){e.setCss(this._tbx,this._cssHidden),this._tbx.value=""},t.prototype._compositionstart=function(){var t,n,i,r=this._g;null==r.activeEditor&&(t=r._selHdl.selection,r.startEditing(!1,t.row,t.col,!1)&&(n=r.getCellBoundingRect(t.row,t.col),i=r.cells.hostElement,e.setCss(this._tbx,{opacity:"",pointerEvents:"",left:r.columns[t.col].pos+i.offsetLeft,top:r.rows[t.row].pos+i.offsetTop,width:n.width-1,height:n.height-1}),r._edtHdl._edt=this._tbx))},t.prototype._keydown=function(t){switch(t.keyCode){case e.Key.Up:case e.Key.Down:case e.Key.PageUp:case e.Key.PageDown:this._g._keyHdl._keydown(t)}},t.prototype._mousedown=function(){this._mouseDown=!0,this._updateImeFocus()},t.prototype._mouseup=function(){this._mouseDown=!1,this._updateImeFocus()},t.prototype._updateImeFocus=function(){var t,n,i=this._g;!i.containsFocus()||i.activeEditor||i.isTouching||this._mouseDown||(t=this._tbx,this._enableIme()?(t.disabled=!1,t.select()):t.disabled||(t.disabled=!0,n=e.getActiveElement(),n instanceof HTMLElement&&n.blur(),i.focus()))},t.prototype._enableIme=function(){var t=this._g,n=t.selection;return n.row<0||n.col<0||!t._edtHdl._allowEditing(n.row,n.col)?!1:t.columns[n.col].dataType==e.DataType.Boolean?!1:!0},t}();t._ImeHandler=n}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={}));var __extends,wijmo;!function(e){var t;!function(e){var t;!function(){"use strict"}(t=e.filter||(e.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(){function t(t){this._maxValues=250,this._sortValues=!0,this._col=t,this._bnd=t.binding?new e.Binding(t.binding):null}return Object.defineProperty(t.prototype,"showValues",{get:function(){return this._values},set:function(e){this._values=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterText",{get:function(){return this._filterText},set:function(t){this._filterText=e.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxValues",{get:function(){return this._maxValues},set:function(t){this._maxValues=e.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniqueValues",{get:function(){return this._uniqueValues},set:function(t){this._uniqueValues=e.asArray(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortValues",{get:function(){return this._sortValues},set:function(t){this._sortValues=e.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return null!=this._values&&Object.keys(this._values).length>0},enumerable:!0,configurable:!0}),t.prototype.apply=function(t){var n=this.column;return this._bnd&&this._values&&Object.keys(this._values).length?(t=this._bnd.getValue(t),t=n.dataMap?n.dataMap.getDisplayValue(t):e.Globalize.format(t,n.format),void 0!=this._values[t]):!0},t.prototype.clear=function(){this.showValues=null,this.filterText=null},t.prototype.implementsInterface=function(e){return"IColumnFilter"==e},t}();t.ValueFilter=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(n){function i(i,r){var o,s;n.call(this,i),this._filter=e.asType(r,t.ValueFilter,!1),o=this.getTemplate(),this.applyTemplate("wj-control",o,{_divFilter:"div-filter",_cbSelectAll:"cb-select-all",_spSelectAll:"sp-select-all",_divValues:"div-values"}),this._spSelectAll.textContent=e.culture.FlexGridFilter.selectAll,this._view=new e.collections.CollectionView,r.sortValues&&(s=r.column.dataMap?"text":"value",this._view.sortDescriptions.push(new e.collections.SortDescription(s,!0))),this._view.filter=this._filterValues.bind(this),this._view.collectionChanged.addHandler(this._updateSelectAllCheck,this),this._filterText="",this._cmbFilter=new e.input.ComboBox(this._divFilter,{placeholder:e.culture.FlexGridFilter.search}),this._lbValues=new e.input.ListBox(this._divValues,{displayMemberPath:"text",checkedMemberPath:"show",itemsSource:this._view,itemFormatter:function(t,n){return n?n:e.culture.FlexGridFilter["null"]}}),this._cmbFilter.textChanged.addHandler(this._filterTextChanged,this),this._cbSelectAll.addEventListener("click",this._cbSelectAllClicked.bind(this)),this.updateEditor()}return __extends(i,n),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),i.prototype.updateEditor=function(){var t,n,i,r,o,s,a,l,c=this._filter.column,u=[];if(this._filter.uniqueValues)for(t=this._filter.uniqueValues,l=0;l<t.length;l++)r=t[l],u.push({value:r,text:r.toString()});else{var h={},p=c.collectionView?c.collectionView.sourceCollection:[],d=c.collectionView;if(d&&d.sourceCollection&&d.filter){for(n=this._filter.showValues,this._filter.showValues=null,i=[],l=0;l<p.length;l++)d.filter(p[l])&&i.push(p[l]);p=i,this._filter.showValues=n}for(l=0;l<p.length;l++)r=c._binding.getValue(p[l]),o=c.dataMap?c.dataMap.getDisplayValue(r):e.Globalize.format(r,c.format),h[o]||(h[o]=!0,u.push({value:r,text:o}))}if(s=this._filter.showValues,s&&0!=Object.keys(s).length){for(a in s)for(l=0;l<u.length;l++)if(u[l].text==a){u[l].show=!0;break}}else for(l=0;l<u.length;l++)u[l].show=!0;this._lbValues.isContentHtml=c.isContentHtml,this._cmbFilter.text=this._filter.filterText,this._filterText=this._cmbFilter.text.toLowerCase(),this._view.pageSize=this._filter.maxValues,this._view.sourceCollection=u,this._view.moveCurrentToPosition(-1)},i.prototype.clearEditor=function(){var e,t;for(this._cmbFilter.text="",this._filterText="",this._view.refresh(),e=this._view.items,t=0;t<e.length;t++)e[t].show=!1},i.prototype.updateFilter=function(){var e,t,n=null,i=this._view.items;if(this._filterText||this._cbSelectAll.indeterminate)for(n={},e=0;e<i.length;e++)t=i[e],t.show&&(n[t.text]=!0);this._filter.showValues=n,this._filter.filterText=this._filterText},i.prototype._filterTextChanged=function(){var e=this;this._toText&&clearTimeout(this._toText),this._toText=setTimeout(function(){var t=e._cmbFilter.text.toLowerCase();t!=e._filterText&&(e._filterText=t,e._view.refresh(),e._cbSelectAll.checked=!0,e._cbSelectAllClicked())},500)},i.prototype._filterValues=function(e){return this._filterText?e&&e.text?e.text.toLowerCase().indexOf(this._filterText)>-1:!1:!0},i.prototype._cbSelectAllClicked=function(){for(var e=this._cbSelectAll.checked,t=this._view.items,n=0;n<t.length;n++)t[n].show=e;this._view.refresh()},i.prototype._updateSelectAllCheck=function(){for(var e=0,t=this._view.items,n=0;n<t.length;n++)t[n].show&&e++;0==e?(this._cbSelectAll.checked=!1,this._cbSelectAll.indeterminate=!1):e==t.length?(this._cbSelectAll.checked=!0,this._cbSelectAll.indeterminate=!1):this._cbSelectAll.indeterminate=!0},i.controlTemplate='<div><div wj-part="div-filter"></div><div class="wj-listbox-item"><label><input wj-part="cb-select-all" type="checkbox"> <span wj-part="sp-select-all"></span></label></div><div wj-part="div-values" style="height:150px"></div></div>',i}(e.Control);t.ValueFilterEditor=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(){function n(n){this._c1=new t.FilterCondition,this._c2=new t.FilterCondition,this._and=!0,this._col=n,this._bnd=n.binding?new e.Binding(n.binding):null}return Object.defineProperty(n.prototype,"condition1",{get:function(){return this._c1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"condition2",{get:function(){return this._c2},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"and",{get:function(){return this._and},set:function(t){this._and=e.asBoolean(t),this._bnd=this._col&&this._col.binding?new e.Binding(this._col.binding):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return this._c1.isActive||this._c2.isActive},enumerable:!0,configurable:!0}),n.prototype.apply=function(t){var n,i,r=this._col,o=this._c1,s=this._c2;return this._bnd&&this.isActive?(t=this._bnd.getValue(t),r.dataMap?t=r.dataMap.getDisplayValue(t):e.isDate(t)?(e.isString(o.value)||e.isString(s.value))&&(t=e.Globalize.format(t,r.format)):e.isNumber(t)&&(t=e.Globalize.parseFloat(e.Globalize.format(t,r.format))),n=o.apply(t),i=s.apply(t),o.isActive&&s.isActive?this._and?n&&i:n||i:o.isActive?n:s.isActive?i:!0):!0},n.prototype.clear=function(){this._c1.clear(),this._c2.clear(),this.and=!0},n.prototype.implementsInterface=function(e){return"IColumnFilter"==e},n}();t.ConditionFilter=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(n){function i(i,r){var o,s;n.call(this,i),this._filter=e.asType(r,t.ConditionFilter,!1),o=this.getTemplate(),this.applyTemplate("wj-control",o,{_divHdr:"div-hdr",_divCmb1:"div-cmb1",_divVal1:"div-val1",_btnAnd:"btn-and",_btnOr:"btn-or",_spAnd:"sp-and",_spOr:"sp-or",_divCmb2:"div-cmb2",_divVal2:"div-val2"}),this._divHdr.textContent=e.culture.FlexGridFilter.header,this._spAnd.textContent=e.culture.FlexGridFilter.and,this._spOr.textContent=e.culture.FlexGridFilter.or,this._cmb1=this._createOperatorCombo(this._divCmb1),this._cmb2=this._createOperatorCombo(this._divCmb2),this._val1=this._createValueInput(this._divVal1),this._val2=this._createValueInput(this._divVal2),s=this._btnAndOrChanged.bind(this),this._btnAnd.addEventListener("change",s),this._btnOr.addEventListener("change",s),this.updateEditor()}return __extends(i,n),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),i.prototype.updateEditor=function(){var t=this._filter.condition1,n=this._filter.condition2;this._cmb1.selectedValue=t.operator,this._cmb2.selectedValue=n.operator,this._val1 instanceof e.input.ComboBox?(this._val1.text=e.changeType(t.value,e.DataType.String,null),this._val2.text=e.changeType(n.value,e.DataType.String,null)):(this._val1.value=t.value,this._val2.value=n.value),this._btnAnd.checked=this._filter.and,this._btnOr.checked=!this._filter.and},i.prototype.clearEditor=function(){this._cmb1.selectedValue=this._cmb2.selectedValue=null,this._val1.text=this._val2.text=null,this._btnAnd.checked=!0,this._btnOr.checked=!1},i.prototype.updateFilter=function(){var t,n=this._filter.column,i=this._filter.condition1,r=this._filter.condition2;i.operator=this._cmb1.selectedValue,r.operator=this._cmb2.selectedValue,this._val1 instanceof e.input.ComboBox?(t=n.dataType==e.DataType.Date?e.DataType.String:n.dataType,i.value=e.changeType(this._val1.text,t,n.format),r.value=e.changeType(this._val2.text,t,n.format)):(i.value=this._val1.value,r.value=this._val2.value),this._filter.and=this._btnAnd.checked},i.prototype._createOperatorCombo=function(t){var n,i=this._filter.column,r=e.culture.FlexGridFilter.stringOperators;return i.dataType!=e.DataType.Date||this._isTimeFormat(i.format)?i.dataType!=e.DataType.Number||i.dataMap?i.dataType!=e.DataType.Boolean||i.dataMap||(r=e.culture.FlexGridFilter.booleanOperators):r=e.culture.FlexGridFilter.numberOperators:r=e.culture.FlexGridFilter.dateOperators,n=new e.input.ComboBox(t),n.itemsSource=r,n.displayMemberPath="name",n.selectedValuePath="op",n},i.prototype._createValueInput=function(t){var n=this._filter.column,i=null;return n.dataType!=e.DataType.Date||this._isTimeFormat(n.format)?n.dataType!=e.DataType.Number||n.dataMap?(i=new e.input.ComboBox(t),n.dataMap?(i.itemsSource=n.dataMap.getDisplayValues(),i.isEditable=!0):n.dataType==e.DataType.Boolean&&(i.itemsSource=[!0,!1])):(i=new e.input.InputNumber(t),i.format=n.format):(i=new e.input.InputDate(t),i.format=n.format),i.isRequired=!1,i},i.prototype._isTimeFormat=function(t){return t?(t=e.culture.Globalize.calendar.patterns[t]||t,/[Hmst]+/.test(t)):!1},i.prototype._btnAndOrChanged=function(e){this._btnAnd.checked=e.target==this._btnAnd,this._btnOr.checked=e.target==this._btnOr},i.controlTemplate='<div><div wj-part="div-hdr"></div><div wj-part="div-cmb1"></div><br/><div wj-part="div-val1"></div><br/><div style="text-align:center"><label><input wj-part="btn-and" type="radio"> <span wj-part="sp-and"></span> </label>&nbsp;&nbsp;&nbsp;<label><input wj-part="btn-or" type="radio"> <span wj-part="sp-or"></span> </label></div><div wj-part="div-cmb2"></div><br/><div wj-part="div-val2"></div><br/></div>',i}(e.Control);t.ConditionFilterEditor=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n,i=function(){function t(){this._op=null}return Object.defineProperty(t.prototype,"operator",{get:function(){return this._op},set:function(t){this._op=e.asEnum(t,n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._val},set:function(t){this._val=t,this._strVal=e.isString(t)?t.toString().toLowerCase():null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){switch(this._op){case null:return!1;case n.EQ:case n.NE:return!0;default:return null!=this._val||null!=this._strVal}},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.operator=null,this.value=null},t.prototype.apply=function(t){var i=this._strVal||this._val;switch(e.isString(t)&&(t=t.toLowerCase()),this._op){case null:return!0;case n.EQ:return e.isDate(t)&&e.isDate(i)?e.DateTime.sameDate(t,i):t==i;case n.NE:return t!=i;case n.GT:return t>i;case n.GE:return t>=i;case n.LT:return i>t;case n.LE:return i>=t;case n.BW:return this._strVal&&e.isString(t)?0==t.indexOf(this._strVal):!1;case n.EW:return this._strVal&&e.isString(t)&&t.length>=this._strVal.length?t.substr(t.length-this._strVal.length)==i:!1;case n.CT:return this._strVal&&e.isString(t)?t.indexOf(this._strVal)>-1:!1;case n.NC:return this._strVal&&e.isString(t)?t.indexOf(this._strVal)<0:!1}throw"Unknown operator"},t}();t.FilterCondition=i,function(e){e[e.EQ=0]="EQ",e[e.NE=1]="NE",e[e.GT=2]="GT",e[e.GE=3]="GE",e[e.LT=4]="LT",e[e.LE=5]="LE",e[e.BW=6]="BW",e[e.EW=7]="EW",e[e.CT=8]="CT",e[e.NC=9]="NC"}(t.Operator||(t.Operator={})),n=t.Operator}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(){function n(e,n){this._owner=e,this._col=n,this._valueFilter=new t.ValueFilter(n),this._conditionFilter=new t.ConditionFilter(n)}return Object.defineProperty(n.prototype,"filterType",{get:function(){return null!=this._filterType?this._filterType:this._owner.defaultFilterType},set:function(n){if(n!=this._filterType){var i=this.isActive;this.clear(),this._filterType=e.asEnum(n,t.FilterType,!0),i?this._owner.apply():this._col.grid&&this._col.grid.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueFilter",{get:function(){return this._valueFilter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"conditionFilter",{get:function(){return this._conditionFilter},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return this._conditionFilter.isActive||this._valueFilter.isActive},enumerable:!0,configurable:!0}),n.prototype.apply=function(e){return this._conditionFilter.apply(e)&&this._valueFilter.apply(e)},n.prototype.clear=function(){this._valueFilter.clear(),this._conditionFilter.clear()},n.prototype.implementsInterface=function(e){return"IColumnFilter"==e},n}();t.ColumnFilter=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";e.culture.FlexGridFilter={ascending:"↑ Ascending",descending:"↓ Descending",apply:"Apply",clear:"Clear",conditions:"Filter by Condition",values:"Filter by Value",search:"Search",selectAll:"Select All","null":"(nothing)",header:"Show items where the value",and:"And",or:"Or",stringOperators:[{name:"(not set)",op:null},{name:"Equals",op:t.Operator.EQ},{name:"Does not equal",op:t.Operator.NE},{name:"Begins with",op:t.Operator.BW},{name:"Ends with",op:t.Operator.EW},{name:"Contains",op:t.Operator.CT},{name:"Does not contain",op:t.Operator.NC}],numberOperators:[{name:"(not set)",op:null},{name:"Equals",op:t.Operator.EQ},{name:"Does not equal",op:t.Operator.NE},{name:"Is Greater than",op:t.Operator.GT},{name:"Is Greater than or equal to",op:t.Operator.GE},{name:"Is Less than",op:t.Operator.LT},{name:"Is Less than or equal to",op:t.Operator.LE}],dateOperators:[{name:"(not set)",op:null},{name:"Equals",op:t.Operator.EQ},{name:"Is Before",op:t.Operator.LT},{name:"Is After",op:t.Operator.GT}],booleanOperators:[{name:"(not set)",op:null},{name:"Equals",op:t.Operator.EQ},{name:"Does not equal",op:t.Operator.NE}]};var n=function(n){function i(i,r,o){var s,a,l,c,u,h=this;void 0===o&&(o=!0),n.call(this,i),this.filterChanged=new e.Event,this.buttonClicked=new e.Event,this._filter=e.asType(r,t.ColumnFilter),s=this.getTemplate(),this.applyTemplate("wj-control wj-columnfiltereditor wj-content",s,{_divSort:"div-sort",_btnAsc:"btn-asc",_btnDsc:"btn-dsc",_divType:"div-type",_aVal:"a-val",_aCnd:"a-cnd",_divEdtVal:"div-edt-val",_divEdtCnd:"div-edt-cnd",_btnApply:"btn-apply",_btnClear:"btn-clear"}),this._btnAsc.textContent=e.culture.FlexGridFilter.ascending,this._btnDsc.textContent=e.culture.FlexGridFilter.descending,this._aVal.textContent=e.culture.FlexGridFilter.values,this._aCnd.textContent=e.culture.FlexGridFilter.conditions,this._btnApply.textContent=e.culture.FlexGridFilter.apply,this._btnClear.textContent=e.culture.FlexGridFilter.clear,a=this.filter.conditionFilter.isActive||0==(r.filterType&t.FilterType.Value)?t.FilterType.Condition:t.FilterType.Value,this._showFilter(a),l=this.filter.column,c=l.grid.collectionView,o&&c&&c.canSort||(this._divSort.style.display="none"),this.updateEditor(),u=this._btnClicked.bind(this),this._btnApply.addEventListener("click",u),this._btnClear.addEventListener("click",u),this._btnAsc.addEventListener("click",u),this._btnDsc.addEventListener("click",u),this._aVal.addEventListener("click",u),this._aCnd.addEventListener("click",u),this.hostElement.addEventListener("keydown",function(t){switch(t.keyCode){case e.Key.Enter:switch(t.target.tagName){case"A":case"BUTTON":h._btnClicked(t);break;default:h.updateFilter(),h.onFilterChanged(),h.onButtonClicked()}t.preventDefault();break;case e.Key.Escape:h.onButtonClicked(),t.preventDefault()}})}return __extends(i,n),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),i.prototype.updateEditor=function(){this._edtVal&&this._edtVal.updateEditor(),this._edtCnd&&this._edtCnd.updateEditor()},i.prototype.updateFilter=function(){switch(this._getFilterType()){case t.FilterType.Value:this._edtVal.updateFilter(),this.filter.conditionFilter.clear();break;case t.FilterType.Condition:this._edtCnd.updateFilter(),this.filter.valueFilter.clear()}},i.prototype.onFilterChanged=function(e){this.filterChanged.raise(this,e)},i.prototype.onButtonClicked=function(e){this.buttonClicked.raise(this,e)},i.prototype._showFilter=function(e){switch(e==t.FilterType.Value&&null==this._edtVal&&(this._edtVal=new t.ValueFilterEditor(this._divEdtVal,this.filter.valueFilter)),e==t.FilterType.Condition&&null==this._edtCnd&&(this._edtCnd=new t.ConditionFilterEditor(this._divEdtCnd,this.filter.conditionFilter)),0!=(e&this.filter.filterType)&&(e==t.FilterType.Value?(this._divEdtVal.style.display="",this._divEdtCnd.style.display="none",this._enableLink(this._aVal,!1),this._enableLink(this._aCnd,!0)):(this._divEdtVal.style.display="none",this._divEdtCnd.style.display="",this._enableLink(this._aVal,!0),this._enableLink(this._aCnd,!1))),this.filter.filterType){case t.FilterType.None:case t.FilterType.Condition:case t.FilterType.Value:this._divType.style.display="none";break;default:this._divType.style.display=""}},i.prototype._enableLink=function(e,t){e.style.textDecoration=t?"":"none",e.style.fontWeight=t?"":"bold",t?e.href="":e.removeAttribute("href")},i.prototype._getFilterType=function(){return"none"!=this._divEdtVal.style.display?t.FilterType.Value:t.FilterType.Condition},i.prototype._btnClicked=function(n){if(n.preventDefault(),n.stopPropagation(),!e.hasClass(n.target,"wj-state-disabled")){if(n.target==this._aVal)return this._showFilter(t.FilterType.Value),void this._edtVal.focus();if(n.target==this._aCnd)return this._showFilter(t.FilterType.Condition),void this._edtCnd.focus();if(n.target==this._btnAsc||n.target==this._btnDsc){var i=this.filter.column,r=i.sortMemberPath?i.sortMemberPath:i.binding,o=i.grid.collectionView,s=new e.collections.SortDescription(r,n.target==this._btnAsc);o.sortDescriptions.deferUpdate(function(){o.sortDescriptions.clear(),o.sortDescriptions.push(s)})}n.target==this._btnApply?(this.updateFilter(),this.onFilterChanged()):n.target==this._btnClear&&this.filter.isActive&&(this.filter.clear(),this.onFilterChanged()),this.updateEditor(),this.onButtonClicked()}},i.controlTemplate='<div><div wj-part="div-sort"><a wj-part="btn-asc" href="" style="min-width:95px" draggable="false"></a>&nbsp;&nbsp;&nbsp;<a wj-part="btn-dsc" href="" style="min-width:95px" draggable="false"></a></div><div style="text-align:right;margin:10px 0px;font-size:80%"><div wj-part="div-type"><a wj-part="a-cnd" href="" draggable="false"></a>&nbsp;|&nbsp;<a wj-part="a-val" href="" draggable="false"></a></div></div><div wj-part="div-edt-val"></div><div wj-part="div-edt-cnd"></div><div style="text-align:right;margin-top:10px"><a wj-part="btn-apply" href="" draggable="false"></a>&nbsp;&nbsp;<a wj-part="btn-clear" href="" draggable="false"></a></div>',i}(e.Control);t.ColumnFilterEditor=n}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(n){"use strict";!function(e){e[e.None=0]="None",e[e.Condition=1]="Condition",e[e.Value=2]="Value",e[e.Both=3]="Both"}(n.FilterType||(n.FilterType={}));var i=n.FilterType,r=function(){function r(n){this._showIcons=!0,this._showSort=!0,this._defFilterType=i.Both,this.filterApplied=new e.Event,this.filterChanging=new e.Event,this.filterChanged=new e.Event;var r="Missing dependency: FlexGridFilter requires ";e.assert(null!=e.grid,r+"wijmo.grid."),e.assert(null!=e.input,r+"wijmo.input."),this._filters=[],this._g=e.asType(n,t.FlexGrid,!1),this._g.formatItem.addHandler(this._formatItem.bind(this)),this._g.itemsSourceChanged.addHandler(this.clear.bind(this)),this._g.hostElement.addEventListener("mousedown",this._mouseDown.bind(this),!0),this._g.invalidate()}return Object.defineProperty(r.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterColumns",{get:function(){return this._filterColumns},set:function(t){this._filterColumns=e.asArray(t),this.clear()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showFilterIcons",{get:function(){return this._showIcons},set:function(t){t!=this.showFilterIcons&&(this._showIcons=e.asBoolean(t),this._g&&this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showSortButtons",{get:function(){return this._showSort},set:function(t){this._showSort=e.asBoolean(t)},enumerable:!0,configurable:!0}),r.prototype.getColumnFilter=function(i,r){var o,s;for(void 0===r&&(r=!0),e.isString(i)?i=this._g.columns.getColumn(i):e.isNumber(i)&&(i=this._g.columns[i]),i=e.asType(i,t.Column),o=0;o<this._filters.length;o++)if(this._filters[o].column==i)return this._filters[o];return r&&i.binding?(s=new n.ColumnFilter(this,i),this._filters.push(s),s):null},Object.defineProperty(r.prototype,"defaultFilterType",{get:function(){return this._defFilterType},set:function(t){t!=this.defaultFilterType&&(this._defFilterType=e.asEnum(t,i,!1),this._g.invalidate(),this.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filterDefinition",{get:function(){for(var e,t,n,i={defaultFilterType:this.defaultFilterType,filters:[]},r=0;r<this._filters.length;r++)e=this._filters[r],e&&e.column&&e.column.binding&&(e.conditionFilter.isActive?(t=e.conditionFilter,i.filters.push({binding:e.column.binding,type:"condition",condition1:{operator:t.condition1.operator,value:t.condition1.value},and:t.and,condition2:{operator:t.condition2.operator,value:t.condition2.value}})):e.valueFilter.isActive&&(n=e.valueFilter,i.filters.push({binding:e.column.binding,type:"value",filterText:n.filterText,showValues:n.showValues})));return JSON.stringify(i)},set:function(t){var n,i,r,o=JSON.parse(e.asString(t));for(this.clear(),this.defaultFilterType=o.defaultFilterType,n=0;n<o.filters.length;n++){var s=o.filters[n],a=this._g.columns.getColumn(s.binding),l=this.getColumnFilter(a,!0);if(l)switch(s.type){case"condition":i=l.conditionFilter,i.condition1.value=a.dataType==e.DataType.Date?e.changeType(s.condition1.value,a.dataType,null):s.condition1.value,i.condition1.operator=s.condition1.operator,i.and=s.and,i.condition2.value=a.dataType==e.DataType.Date?e.changeType(s.condition2.value,a.dataType,null):s.condition2.value,i.condition2.operator=s.condition2.operator;break;case"value":r=l.valueFilter,r.filterText=s.filterText,r.showValues=s.showValues}}this.apply()},enumerable:!0,configurable:!0}),r.prototype.editColumnFilter=function(i,r){var o,s=this;if(this.closeEditor(),i=e.isString(i)?this._g.columns.getColumn(i):e.asType(i,t.Column,!1),o=new t.CellRangeEventArgs(this._g.cells,new t.CellRange(-1,i.index)),this.onFilterChanging(o),!o.cancel){o.cancel=!0;var a=document.createElement("div"),l=this.getColumnFilter(i),c=new n.ColumnFilterEditor(a,l,this.showSortButtons);e.addClass(a,"wj-dropdown-panel"),this._g._rtl&&(a.dir="rtl"),c.filterChanged.addHandler(function(){o.cancel=!1,setTimeout(function(){o.cancel||s.apply()})}),c.buttonClicked.addHandler(function(){s.closeEditor(),s.onFilterChanged(o)}),c.lostFocus.addHandler(function(){setTimeout(function(){var t=e.Control.getControl(s._divEdt);t&&!t.containsFocus()&&s.closeEditor()},10)});var u=this._g.columnHeaders,h=r?r.row:u.rows.length-1,p=r?r.col:i.index,d=u.getCellBoundingRect(h,p),f=document.elementFromPoint(d.left+d.width/2,d.top+d.height/2);f=e.closest(f,".wj-cell"),f?e.showPopup(a,f,!1,!1,!1):e.showPopup(a,d),c.focus(),this._divEdt=a,this._edtCol=i}},r.prototype.closeEditor=function(){if(this._divEdt){e.hidePopup(this._divEdt,!0);var t=e.Control.getControl(this._divEdt);t&&t.dispose(),this._divEdt=null,this._edtCol=null}},r.prototype.apply=function(){var t,n=this._g.collectionView;n&&(n.filter?n.refresh():n.filter=this._filter.bind(this)),t=n?n.updateFilterDefinition:null,e.isFunction(t)&&t.call(n,this),this.onFilterApplied()},r.prototype.clear=function(){this._filters.length&&(this._filters=[],this.apply())},r.prototype.onFilterApplied=function(e){this.filterApplied.raise(this,e)},r.prototype.onFilterChanging=function(e){this.filterChanging.raise(this,e)},r.prototype.onFilterChanged=function(e){this.filterChanged.raise(this,e)},r.prototype._filter=function(e){for(var t=0;t<this._filters.length;t++)if(!this._filters[t].apply(e))return!1;return!0},r.prototype._formatItem=function(n,o){var s,a,l;if(o.panel.cellType==t.CellType.ColumnHeader){var c=this._g,u=c.getMergedRange(o.panel,o.row,o.col)||new t.CellRange(o.row,o.col),h=c.columns[u.col],p=c._getBindingColumn(o.panel,o.row,h);(u.row2==o.panel.rows.length-1||h!=p)&&(s=this.getColumnFilter(p,this.defaultFilterType!=i.None),this._filterColumns&&this._filterColumns.indexOf(p.binding)<0&&(s=null),s&&s.filterType!=i.None?(this._showIcons&&(r._filterGlyph||(r._filterGlyph=e.createElement('<div class="'+r._WJC_FILTER+'"><span class="wj-glyph-filter"></span></div>')),a=o.cell.querySelector("div")||o.cell,l=a.querySelector(".wj-glyph-filter"),l||a.insertBefore(r._filterGlyph.cloneNode(!0),a.firstChild)),e.toggleClass(o.cell,"wj-filter-on",s.isActive),e.toggleClass(o.cell,"wj-filter-off",!s.isActive)):(e.removeClass(o.cell,"wj-filter-on"),e.removeClass(o.cell,"wj-filter-off")))}},r.prototype._mouseDown=function(t){var n,i,o,s,a=this;t.defaultPrevented||0!=t.button||e.closest(t.target,"."+r._WJC_FILTER)&&(n=this._g,i=n.hitTest(t),i.panel==n.columnHeaders&&(o=n.columns[i.col],s=n._getBindingColumn(i.panel,i.row,o),this._divEdt&&this._edtCol==s?this.closeEditor():setTimeout(function(){a.editColumnFilter(s,i)},this._divEdt?100:0),t.stopPropagation(),t.preventDefault()))},r._WJC_FILTER="wj-elem-filter",r}();n.FlexGridFilter=r}(n=t.filter||(t.filter={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={}));var __extends,wijmo;!function(e){var t;!function(t){var n;!function(n){"use strict";!function(e){e[e.Code=0]="Code",e[e.Selection=1]="Selection",e[e.ExpandSingle=2]="ExpandSingle",e[e.ExpandMulti=3]="ExpandMulti"}(n.DetailVisibilityMode||(n.DetailVisibilityMode={}));var i=n.DetailVisibilityMode,r=function(){function r(e){var t=this;
this._mode=i.ExpandSingle,this._g=e,e.mergeManager=new n.DetailMergeManager(e),e.rowHeaders.hostElement.addEventListener("click",this._hdrClick.bind(this)),e.formatItem.addHandler(this._formatItem,this),e.selectionChanged.addHandler(this._selectionChanged,this),e.resizedRow.addHandler(this._resizedRow,this),e.loadingRows.addHandler(function(){t.hideDetail()}),e.draggingRow.addHandler(function(e,n){t.hideDetail(n.row)}),e.formatItem.addHandler(function(e,t){if(t.panel==e.cells){var i=e.rows[t.row];i instanceof n.DetailRow&&(t.cell.style.left="0")}})}return Object.defineProperty(r.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"detailVisibilityMode",{get:function(){return this._mode},set:function(t){t!=this._mode&&(this._mode=e.asEnum(t,i),this.hideDetail(),this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight=e.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"createDetailCell",{get:function(){return this._createDetailCellFn},set:function(t){this._createDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"disposeDetailCell",{get:function(){return this._disposeDetailCellFn},set:function(t){this._disposeDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowHasDetail",{get:function(){return this._rowHasDetailFn},set:function(t){this._rowHasDetailFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),r.prototype.isDetailVisible=function(e){var t=this._g.rows;return e=this._toIndex(e),t[e]instanceof n.DetailRow?!0:e<t.length-1&&t[e+1]instanceof n.DetailRow?!0:!1},r.prototype.isDetailAvailable=function(e){this._g.rows;return e=this._toIndex(e),this._hasDetail(e)},r.prototype.hideDetail=function(t){var i,r=this._g.rows;if(null!=t)t=this._toIndex(t),!(r[t]instanceof n.DetailRow)&&t<r.length-1&&r[t+1]instanceof n.DetailRow&&t++,r[t]instanceof n.DetailRow&&(this.disposeDetailCell&&this.disposeDetailCell(r[t]),e.Control.disposeAll(r[t].detail),r.removeAt(t));else for(i=0;i<r.length;i++)r[i]instanceof n.DetailRow&&this.hideDetail(i)},r.prototype.showDetail=function(e,t){var i,r,o,s,a;if(void 0===t&&(t=!1),i=this._g.rows,e=this._toIndex(e),!this.isDetailVisible(e)&&this._hasDetail(e)&&(r=new n.DetailRow(i[e]),r.detail=this._createDetailCell(i[e]),r.detail&&(i.insert(e+1,r),this._g.scrollIntoView(e,-1))),t){for(o=this._g.selection,s=!1,e>0&&i[e]instanceof n.DetailRow&&e--,a=0;a<i.length-1;a++)a!=e&&i[a+1]instanceof n.DetailRow&&(this.hideDetail(a),e>a&&e--,a<o.row&&(o.row--,o.row2--,s=!0));s&&this._g.select(o,!1)}},r.prototype._toIndex=function(n){return n instanceof t.Row&&(n=n.index),e.asNumber(n,!1,!0)},r.prototype._hdrClick=function(e){var n,r,o;(this._mode==i.ExpandMulti||this._mode==i.ExpandSingle)&&(n=this._g,r=n.hitTest(e),r.row>-1&&(o=n.rows[r.row],this.isDetailVisible(r.row)?this.hideDetail(r.row):(n.select(new t.CellRange(r.row,0,r.row,n.columns.length-1)),this.showDetail(r.row,this._mode==i.ExpandSingle)),e.preventDefault()))},r.prototype._selectionChanged=function(e){var t=this;this._mode==i.Selection&&(this._toSel&&clearTimeout(this._toSel),this._toSel=setTimeout(function(){e.selection.row>-1?t.showDetail(e.selection.row,!0):t.hideDetail()},300))},r.prototype._formatItem=function(t,r){var o,s,a,l,c=this._g,u=r.panel.rows[r.row];r.panel==c.cells&&u instanceof n.DetailRow&&null!=u.detail&&(e.addClass(r.cell,"wj-detail"),r.cell.textContent="",r.cell.style.textAlign="",r.cell.appendChild(u.detail),null==u.height?(e.Control.refreshAll(r.cell),o=getComputedStyle(r.cell),s=u.detail.scrollHeight+parseInt(o.paddingTop)+parseInt(o.paddingBottom),this._maxHeight>0&&s>this._maxHeight&&(s=this._maxHeight),u.height=s,u.detail.style.height||(u.detail.style.height="100%"),a=u.detail.querySelector(".wj-flexgrid"),a&&!a.style.height&&(a.style.height="100%")):setTimeout(function(){e.Control.refreshAll(u.detail)})),(this._mode==i.ExpandMulti||this._mode==i.ExpandSingle)&&r.panel==c.rowHeaders&&0==r.col&&this._hasDetail(r.row)&&(l=r.row<c.rows.length-1&&c.rows[r.row+1]instanceof n.DetailRow,r.cell.innerHTML=l?'<span class="wj-glyph-minus"></span>':'<span class="wj-glyph-plus"></span>')},r.prototype._resizedRow=function(t,i){var r=i.panel.rows[i.row];r instanceof n.DetailRow&&r.detail&&e.Control.refreshAll(r.detail)},r.prototype._hasVisibleDetail=function(e){return e instanceof n.DetailRow||e instanceof t.GroupRow||e instanceof t._NewRowTemplate?!1:!0},r.prototype._hasDetail=function(t){return e.isFunction(this._rowHasDetailFn)?this._rowHasDetailFn(this._g.rows[t]):!0},r.prototype._createDetailCell=function(e,t){return this.createDetailCell?this.createDetailCell(e,t):null},r}();n.FlexGridDetailProvider=r}(n=t.detail||(t.detail={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(n){function i(e){n.call(this,e)}return __extends(i,n),i.prototype.getMergedRange=function(i,r,o,s){switch(void 0===s&&(s=!0),i.cellType){case e.CellType.Cell:if(i.rows[r]instanceof t.DetailRow)return new e.CellRange(r,0,r,i.columns.length-1);break;case e.CellType.RowHeader:if(i.rows[r]instanceof t.DetailRow)return new e.CellRange(r-1,o,r,o);if(r<i.rows.length-1&&i.rows[r+1]instanceof t.DetailRow)return new e.CellRange(r,o,r+1,o)}return n.prototype.getMergedRange.call(this,i,r,o,s)},i}(e.MergeManager);t.DetailMergeManager=n}(t=e.detail||(e.detail={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(e){function t(){e.call(this),this.isReadOnly=!0}return __extends(t,e),Object.defineProperty(t.prototype,"detail",{get:function(){return this._detail},set:function(e){this._detail=e},enumerable:!0,configurable:!0}),t}(e.Row);t.DetailRow=n}(t=e.detail||(e.detail={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={}));var __extends,wijmo;!function(e){var t;!function(t){var n;!function(n){"use strict";var i,r,o,s,a,l,c=function(){function c(t){this._expressionCache={},this._idChars="$:!",this._functionTable={},this._cacheSize=0,this.unknownFunction=new e.Event,this._owner=t,this._buildSymbolTable(),this._registerAggregateFunction(),this._registerMathFunction(),this._registerLogicalFunction(),this._registerTextFunction(),this._registerDateFunction(),this._registLookUpReferenceFunction(),this._registFinacialFunction()}return c.prototype.onUnknownFunction=function(e,t){var i,r,o;if(t&&t.length>0)for(i=[],o=0;o<t.length;o++)i[o]=t[o].evaluate();if(r=new n.UnknownFunctionEventArgs(e,i),this.unknownFunction.raise(this,r),null!=r.value)return new n._Expression(r.value);throw'The function "'+e+'" has not supported in FlexSheet yet.'},c.prototype.evaluate=function(t,i,r,o,s){var a,l;try{if(t&&t.length>1&&"="===t[0]){for(a=this._checkCache(t),l=a.evaluate(r,o,s);l instanceof n._Expression;)l=l.evaluate(r);return i&&e.isPrimitive(l)?e.Globalize.format(l,i):l}return t?t:""}catch(c){return"Error: "+c}},c.prototype.addCustomFunction=function(e,t,i,o){var s=this;e=e.toLowerCase(),this._functionTable[e]=new r(function(e){var i,r,o=[];if(e.length>0)for(r=0;r<e.length;r++)i=e[r],o[r]=i instanceof n._CellRangeExpression?i.cells:i.evaluate();return t.apply(s,o)},o,i)},c.prototype._clearExpressionCache=function(){this._expressionCache=null,this._expressionCache={},this._cacheSize=0},c.prototype._parse=function(e){return this._expression=e,this._expressLength=e?e.length:0,this._pointer=0,this._expressLength>0&&"="===this._expression[0]&&this._pointer++,this._parseExpression()},c.prototype._buildSymbolTable=function(){this._tokenTable||(this._tokenTable={},this._addToken("+",s.ADD,o.ADDSUB),this._addToken("-",s.SUB,o.ADDSUB),this._addToken("(",s.OPEN,o.GROUP),this._addToken(")",s.CLOSE,o.GROUP),this._addToken("*",s.MUL,o.MULDIV),this._addToken(",",s.COMMA,o.GROUP),this._addToken(".",s.PERIOD,o.GROUP),this._addToken("/",s.DIV,o.MULDIV),this._addToken("\\",s.DIVINT,o.MULDIV),this._addToken("=",s.EQ,o.COMPARE),this._addToken(">",s.GT,o.COMPARE),this._addToken("<",s.LT,o.COMPARE),this._addToken("^",s.POWER,o.POWER),this._addToken("<>",s.NE,o.COMPARE),this._addToken(">=",s.GE,o.COMPARE),this._addToken("<=",s.LE,o.COMPARE),this._addToken("&",s.CONCAT,o.CONCAT))},c.prototype._registerAggregateFunction=function(){var t=this;t._functionTable.sum=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Sum,n,i)}),t._functionTable.average=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Avg,n,i)}),t._functionTable.max=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Max,n,i)}),t._functionTable.min=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Min,n,i)}),t._functionTable["var"]=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Var,n,i)}),t._functionTable.varp=new r(function(n,i){return t._getAggregateResult(e.Aggregate.VarPop,n,i)}),t._functionTable.stdev=new r(function(n,i){return t._getAggregateResult(e.Aggregate.Std,n,i)}),t._functionTable.stdevp=new r(function(n,i){return t._getAggregateResult(e.Aggregate.StdPop,n,i)}),t._functionTable.count=new r(function(e,n){return t._getFlexSheetAggregateResult(a.Count,e,n)}),t._functionTable.counta=new r(function(e,n){return t._getFlexSheetAggregateResult(a.CountA,e,n)}),t._functionTable.countblank=new r(function(e,n){return t._getFlexSheetAggregateResult(a.ConutBlank,e,n)}),t._functionTable.countif=new r(function(e,n){return t._getFlexSheetAggregateResult(a.CountIf,e,n)},2,2),t._functionTable.countifs=new r(function(e,n){return t._getFlexSheetAggregateResult(a.CountIfs,e,n)},254,2),t._functionTable.sumif=new r(function(e,n){return t._getFlexSheetAggregateResult(a.SumIf,e,n)},3,2),t._functionTable.sumifs=new r(function(e,n){return t._getFlexSheetAggregateResult(a.SumIfs,e,n)},255,2),t._functionTable.rank=new r(function(e,n){return t._getFlexSheetAggregateResult(a.Rank,e,n)},3,2),t._functionTable.product=new r(function(e,n){return t._getFlexSheetAggregateResult(a.Product,e,n)},255,1),t._functionTable.subtotal=new r(function(e,n){return t._handleSubtotal(e,n)},255,2),t._functionTable.dcount=new r(function(e,n){return t._handleDCount(e,n)},3,3)},c.prototype._registerMathFunction=function(){var t=this;t._functionTable.pi=new r(function(){return Math.PI},0,0),t._functionTable.rand=new r(function(){return Math.random()},0,0),t._functionTable.power=new r(function(e,t){return Math.pow(n._Expression.toNumber(e[0],t),n._Expression.toNumber(e[1],t))},2,2),t._functionTable.atan2=new r(function(e,t){var i=n._Expression.toNumber(e[0],t),r=n._Expression.toNumber(e[1],t);if(0===i&&0===r)throw"The x number and y number can't both be zero for the atan2 function";return Math.atan2(r,i)},2,2),t._functionTable.mod=new r(function(e,t){return n._Expression.toNumber(e[0],t)%n._Expression.toNumber(e[1],t)},2,2),t._functionTable.trunc=new r(function(e,t){var i,r=n._Expression.toNumber(e[0],t),o=2===e.length?n._Expression.toNumber(e[1],t):0;return 0===o?r>=0?Math.floor(r):Math.ceil(r):(i=Math.pow(10,o),r>=0?Math.floor(r*i)/i:Math.ceil(r*i)/i)},2,1),["round","rounddown","roundup"].forEach(function(i){t._functionTable[i]=new r(function(t,r){var o,s,a,l=n._Expression.toNumber(t[0],r),c=n._Expression.toNumber(t[1],r);if(0===c){switch(i){case"rounddown":o=l>=0?Math.floor(l):Math.ceil(l);break;case"roundup":o=l>=0?Math.ceil(l):Math.floor(l);break;case"round":o=Math.round(l);break;default:o=Math.floor(l)}s="n0"}else if(c>0&&e.isInt(c)){switch(a=Math.pow(10,c),i){case"rounddown":o=l>=0?Math.floor(l*a)/a:Math.ceil(l*a)/a;break;case"roundup":o=l>=0?Math.ceil(l*a)/a:Math.floor(l*a)/a;break;case"round":o=Math.round(l*a)/a}s="n"+c}if(null!=o)return{value:o,format:s};throw"Invalid precision!"},2,2)}),["abs","acos","asin","atan","ceiling","cos","exp","floor","ln","sin","sqrt","tan"].forEach(function(e){t._functionTable[e]=new r(function(t,i){switch(e){case"ceiling":return Math.ceil(n._Expression.toNumber(t[0],i));case"ln":return Math.log(n._Expression.toNumber(t[0],i));default:return Math[e](n._Expression.toNumber(t[0],i))}},1,1)})},c.prototype._registerLogicalFunction=function(){this._functionTable.and=new r(function(e,t){for(var i=!0,r=0;r<e.length&&(i=i&&n._Expression.toBoolean(e[r],t),i);r++);return i},Number.MAX_VALUE,1),this._functionTable.or=new r(function(e,t){for(var i=!1,r=0;r<e.length&&!(i=i||n._Expression.toBoolean(e[r],t));r++);return i},Number.MAX_VALUE,1),this._functionTable.not=new r(function(e,t){return!n._Expression.toBoolean(e[0],t)},1,1),this._functionTable["if"]=new r(function(e,t){return n._Expression.toBoolean(e[0],t)?e[1].evaluate(t):e[2].evaluate(t)},3,3),this._functionTable["true"]=new r(function(){return!0},0,0),this._functionTable["false"]=new r(function(){return!1},0,0)},c.prototype._registerTextFunction=function(){this._functionTable["char"]=new r(function(e,t){for(var i="",r=0;r<e.length;r++)i+=String.fromCharCode(n._Expression.toNumber(e[r],t));return i},Number.MAX_VALUE,1),this._functionTable.code=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i&&i.length>0?i.charCodeAt(0):-1},1,1),this._functionTable.concatenate=new r(function(e,t){for(var i="",r=0;r<e.length;r++)i=i.concat(n._Expression.toString(e[r],t));return i},Number.MAX_VALUE,1),this._functionTable.left=new r(function(e,t){var i=n._Expression.toString(e[0],t),r=Math.floor(n._Expression.toNumber(e[1],t));return i&&i.length>0?i.slice(0,r):void 0},2,2),this._functionTable.right=new r(function(e,t){var i=n._Expression.toString(e[0],t),r=Math.floor(n._Expression.toNumber(e[1],t));return i&&i.length>0?i.slice(-r):void 0},2,2),this._functionTable.find=new r(function(e,t){var i,r=n._Expression.toString(e[0],t),o=n._Expression.toString(e[1],t);return null!=o&&null!=r&&(i=o.indexOf(r),i>-1)?i+1:-1},2,2),this._functionTable.search=new r(function(e,t){var i,r,o=n._Expression.toString(e[0],t),s=n._Expression.toString(e[1],t);return null!=s&&null!=o&&(i=new RegExp(o,"i"),r=s.search(i),r>-1)?r+1:-1},2,2),this._functionTable.len=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i?i.length:-1},1,1),this._functionTable.mid=new r(function(e,t){var i=n._Expression.toString(e[0],t),r=Math.floor(n._Expression.toNumber(e[1],t)),o=Math.floor(n._Expression.toNumber(e[2],t));return i&&i.length>0&&r>0?i.substr(r-1,o):void 0},3,3),this._functionTable.lower=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i&&i.length>0?i.toLowerCase():void 0},1,1),this._functionTable.upper=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i&&i.length>0?i.toUpperCase():void 0},1,1),this._functionTable.proper=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i&&i.length>0?i[0].toUpperCase()+i.substring(1).toLowerCase():void 0},1,1),this._functionTable.trim=new r(function(e,t){var i=n._Expression.toString(e[0],t);return i&&i.length>0?i.trim():void 0},1,1),this._functionTable.replace=new r(function(e,t){var i=n._Expression.toString(e[0],t),r=Math.floor(n._Expression.toNumber(e[1],t)),o=Math.floor(n._Expression.toNumber(e[2],t)),s=n._Expression.toString(e[3],t);return i&&i.length>0&&r>0?i.substring(0,r-1)+s+i.slice(r-1+o):void 0},4,4),this._functionTable.substitute=new r(function(e,t){var i,r=n._Expression.toString(e[0],t),o=n._Expression.toString(e[1],t),s=n._Expression.toString(e[2],t);return r&&r.length>0&&o&&o.length>0?(i=new RegExp(o,"g"),r.replace(i,s)):void 0},3,3),this._functionTable.rept=new r(function(e,t){var i,r=n._Expression.toString(e[0],t),o=Math.floor(n._Expression.toNumber(e[1],t)),s="";if(r&&r.length>0&&o>0)for(i=0;o>i;i++)s=s.concat(r);return s},2,2),this._functionTable.text=new r(function(t,i){var r=t[0].evaluate(),o=n._Expression.toString(t[1],i);return e.Globalize.format(r,o)},2,2),this._functionTable.value=new r(function(e,t){return n._Expression.toNumber(e[0],t)},1,1)},c.prototype._registerDateFunction=function(){this._functionTable.now=new r(function(){return{value:new Date,format:"M/d/yyyy h:mm"}},0,0),this._functionTable.today=new r(function(){return{value:new Date,format:"d"}},0,0),this._functionTable.year=new r(function(t,i){var r=n._Expression.toDate(t[0],i);return!e.isPrimitive(r)&&r?r.value:e.isDate(r)?r.getFullYear():1900},1,1),this._functionTable.month=new r(function(t,i){var r=n._Expression.toDate(t[0],i);return!e.isPrimitive(r)&&r?r.value:e.isDate(r)?r.getMonth()+1:1},1,1),this._functionTable.day=new r(function(t,i){var r=n._Expression.toDate(t[0],i);return!e.isPrimitive(r)&&r?r.value:e.isDate(r)?r.getDate():0},1,1),this._functionTable.hour=new r(function(t,i){var r=t[0].evaluate(i);if(e.isNumber(r)&&!isNaN(r))return Math.floor(24*(r-Math.floor(r)));if(e.isDate(r)||(r=n._Expression.toDate(t[0],i),!e.isPrimitive(r)&&r&&(r=r.value),e.isDate(r)))return r.getHours();throw"Invalid parameter."},1,1),this._functionTable.time=new r(function(t,n){var i=t[0].evaluate(n),r=t[1].evaluate(n),o=t[2].evaluate(n);if(e.isNumber(i)&&e.isNumber(r)&&e.isNumber(o))return i%=24,r%=60,o%=60,{value:new Date(0,0,0,i,r,o),format:"t"};throw"Invalid parameters."},3,3),this._functionTable.date=new r(function(t,n){var i=t[0].evaluate(n),r=t[1].evaluate(n),o=t[2].evaluate(n);if(e.isNumber(i)&&e.isNumber(r)&&e.isNumber(o))return{value:new Date(i,r-1,o),format:"d"};throw"Invalid parameters."},3,3),this._functionTable.datedif=new r(function(t,i){var r,o,s,a,l,c=n._Expression.toDate(t[0],i),u=n._Expression.toDate(t[1],i),h=t[2].evaluate(i);if(!e.isPrimitive(c)&&c&&(c=c.value),!e.isPrimitive(u)&&u&&(u=u.value),e.isDate(c)&&e.isDate(u)&&e.isString(h)){if(r=c.getTime(),o=u.getTime(),r>o)throw"Start date is later than end date.";switch(s=u.getDate()-c.getDate(),a=u.getMonth()-c.getMonth(),l=u.getFullYear()-c.getFullYear(),h.toUpperCase()){case"Y":return a>0?l:0>a?l-1:s>=0?l:l-1;case"M":return s>=0?12*l+a:12*l+a-1;case"D":return(o-r)/864e5;case"YM":return a=s>=0?12*l+a:12*l+a-1,a%12;case"YD":return a>0?(new Date(c.getFullYear(),u.getMonth(),u.getDate()).getTime()-c.getTime())/864e5:0>a?(new Date(c.getFullYear()+1,u.getMonth(),u.getDate()).getTime()-c.getTime())/864e5:s>=0?s:(new Date(c.getFullYear()+1,u.getMonth(),u.getDate()).getTime()-c.getTime())/864e5;case"MD":return s>=0?s:new Date(u.getFullYear(),u.getMonth(),0).getDate()-new Date(u.getFullYear(),u.getMonth()-1,1).getDate()+1+s;default:throw"Invalid unit."}}throw"Invalid parameters."},3,3)},c.prototype._registLookUpReferenceFunction=function(){var e=this;e._functionTable.column=new r(function(t,i,r,o){var s;if(null==t)return o+1;if(s=t[0],s=e._ensureNonFunctionExpression(s),s instanceof n._CellRangeExpression)return s.cells.col+1;throw"Invalid Cell Reference."},1,0),e._functionTable.columns=new r(function(t){var i=t[0];if(i=e._ensureNonFunctionExpression(i),i instanceof n._CellRangeExpression)return i.cells.columnSpan;throw"Invalid Cell Reference."},1,1),e._functionTable.row=new r(function(t,i,r){var o;if(null==t)return r+1;if(o=t[0],o=e._ensureNonFunctionExpression(o),o instanceof n._CellRangeExpression)return o.cells.row+1;throw"Invalid Cell Reference."},1,0),e._functionTable.rows=new r(function(t){var i=t[0];if(i=e._ensureNonFunctionExpression(i),i instanceof n._CellRangeExpression)return i.cells.rowSpan;throw"Invalid Cell Reference."},1,1),e._functionTable.choose=new r(function(e,t){var i=n._Expression.toNumber(e[0],t);if(isNaN(i))throw"Invalid index number.";if(1>i||i>=e.length)throw"The index number is out of the list range.";return e[i].evaluate(t)},255,2),e._functionTable.index=new r(function(i,r){var o,s=i[0],a=n._Expression.toNumber(i[1],r),l=null!=i[2]?n._Expression.toNumber(i[2],r):0;if(isNaN(a)||0>a)throw"Invalid Row Number.";if(isNaN(l)||0>l)throw"Invalid Column Number.";if(s=e._ensureNonFunctionExpression(s),s instanceof n._CellRangeExpression){if(o=s.cells,a>o.rowSpan||l>o.columnSpan)throw"Index is out of the cell range.";if(a>0&&l>0)return e._owner.getCellValue(o.topRow+a-1,o.leftCol+l-1,!0,r);if(0===a&&0===l)return s;if(0===a)return new n._CellRangeExpression(new t.CellRange(o.topRow,o.leftCol+l-1,o.bottomRow,o.leftCol+l-1),s.sheetRef,e._owner);if(0===l)return new n._CellRangeExpression(new t.CellRange(o.topRow+a-1,o.leftCol,o.topRow+a-1,o.rightCol),s.sheetRef,e._owner)}throw"Invalid Cell Reference."},4,2),e._functionTable.hlookup=new r(function(t,n){return e._handleHLookup(t,n)},4,3)},c.prototype._registFinacialFunction=function(){var e=this;e._functionTable.rate=new r(function(t,n){var i=e._calculateRate(t,n);return{value:i,format:"p2"}},6,3)},c.prototype._addToken=function(e,t,n){var r=new i(e,t,n);this._tokenTable[e]=r},c.prototype._parseExpression=function(){return this._getToken(),this._parseCompareOrConcat()},c.prototype._parseCompareOrConcat=function(){for(var e,t,i=this._parseAddSub();this._token.tokenType===o.COMPARE||this._token.tokenType===o.CONCAT;)e=this._token,this._getToken(),t=this._parseAddSub(),i=new n._BinaryExpression(e,i,t);return i},c.prototype._parseAddSub=function(){for(var e,t,i=this._parseMulDiv();this._token.tokenType===o.ADDSUB;)e=this._token,this._getToken(),t=this._parseMulDiv(),i=new n._BinaryExpression(e,i,t);return i},c.prototype._parseMulDiv=function(){for(var e,t,i=this._parsePower();this._token.tokenType===o.MULDIV;)e=this._token,this._getToken(),t=this._parsePower(),i=new n._BinaryExpression(e,i,t);return i},c.prototype._parsePower=function(){for(var e,t,i=this._parseUnary();this._token.tokenType===o.POWER;)e=this._token,this._getToken(),t=this._parseUnary(),i=new n._BinaryExpression(e,i,t);return i},c.prototype._parseUnary=function(){var e,t;return this._token.tokenID===s.ADD||this._token.tokenID===s.SUB?(e=this._token,this._getToken(),t=this._parseAtom(),new n._UnaryExpression(e,t)):this._parseAtom()},c.prototype._parseAtom=function(){var e,t,i,r,a,l=null;switch(this._token.tokenType){case o.LITERAL:l=new n._Expression(this._token);break;case o.IDENTIFIER:if(e=this._token.value.toString(),t=this._functionTable[e.toLowerCase()]){if(i=this._getParameters(),r=i?i.length:0,-1!==t.paramMin&&r<t.paramMin)throw"Too few parameters.";if(-1!==t.paramMax&&r>t.paramMax)throw"Too many parameters.";l=new n._FunctionExpression(t,i);break}if(a=this._getCellRange(e)){l=new n._CellRangeExpression(a.cellRange,a.sheetRef,this._owner);break}i=this._getParameters(),l=this.onUnknownFunction(e,i);break;case o.GROUP:if(this._token.tokenID!==s.OPEN)throw"Expression expected.";if(this._getToken(),l=this._parseCompareOrConcat(),this._token.tokenID!==s.CLOSE)throw"Unbalanced parenthesis."}if(null===l)throw"";return this._getToken(),l},c.prototype._getToken=function(){for(var e,t,n,r,a,l,c="",u="",h=new RegExp("[　-〿぀-ゟ゠-ヿ＀-ﾟ一-龯㐀-䶿]");this._pointer<this._expressLength&&" "===this._expression[this._pointer];)this._pointer++;if(this._pointer>=this._expressLength)return void(this._token=new i(null,s.END,o.GROUP));if(t=this._expression[this._pointer],r=t>="a"&&"z">=t||t>="A"&&"Z">=t||h.test(t),a=t>="0"&&"9">=t||"."==t,!r&&!a&&(l=this._tokenTable[t]))return this._token=l,this._pointer++,void(this._pointer<this._expressLength&&(">"===t||"<"===t)&&(l=this._tokenTable[this._expression.substring(this._pointer-1,this._pointer+1)],l&&(this._token=l,this._pointer++)));if(a)return void this._parseDigit();if('"'===t)return void this._parseString();if("'"!==t||(u=this._parseSheetRef())){if("#"===t)return void this._parseDate();if(!r&&"_"!==t&&this._idChars.indexOf(t)<0&&!u)throw"Identifier expected.";for(e=1;e+this._pointer<this._expressLength;e++)if(t=this._expression[this._pointer+e],r=t>="a"&&"z">=t||t>="A"&&"Z">=t||h.test(t),a=t>="0"&&"9">=t,"'"!==t||":"!==n){if(n=t,!r&&!a&&"_"!==t&&this._idChars.indexOf(t)<0)break}else c=u+this._expression.substring(this._pointer,this._pointer+e),this._pointer+=e,u=this._parseSheetRef(),e=0;c+=u+this._expression.substring(this._pointer,this._pointer+e),this._pointer+=e,this._token=new i(c,s.ATOM,o.IDENTIFIER)}},c.prototype._parseDigit=function(){for(var e,t,n=-1,r=!1,a=!1,l=0,c=0;c+this._pointer<this._expressLength;c++)if(e=this._expression[this._pointer+c],e>="0"&&"9">=e)l=10*l+(+e-0),n>-1&&(n*=10);else if("."===e&&0>n)n=1;else{if("E"!==e&&"e"!==e||r){if("%"===e){a=!0,c++;break}break}r=!0,e=this._expression[this._pointer+c+1],("+"===e||"-"===e)&&c++}r?(t=this._expression.substring(this._pointer,this._pointer+c),l=+t):(n>1&&(l/=n),a&&(l/=100)),this._token=new i(l,s.ATOM,o.LITERAL),this._pointer+=c},c.prototype._parseString=function(){for(var e,t,n,r=1;r+this._pointer<this._expressLength;r++)if(e=this._expression[this._pointer+r],'"'===e){if(t=r+this._pointer<this._expressLength-1?this._expression[this._pointer+r+1]:" ",'"'!==t)break;r++}if('"'!==e)throw"Can't find final quote.";if(n=this._expression.substring(this._pointer+1,this._pointer+r),this._pointer+=r+1,"!"===this._expression[this._pointer])throw"Illegal cross sheet reference.";this._token=new i(n.replace('""','"'),s.ATOM,o.LITERAL)},c.prototype._parseDate=function(){for(var e,t,n=1;n+this._pointer<this._expressLength&&(e=this._expression[this._pointer+n],"#"!==e);n++);if("#"!==e)throw'Can\'t find final date delimiter ("#").';t=this._expression.substring(this._pointer+1,this._pointer+n),this._pointer+=n+1,this._token=new i(Date.parse(t),s.ATOM,o.LITERAL)},c.prototype._parseSheetRef=function(){for(var e,t,n,i=1;i+this._pointer<this._expressLength;i++)if(e=this._expression[this._pointer+i],"'"===e){if(t=i+this._pointer<this._expressLength-1?this._expression[this._pointer+i+1]:" ","'"!==t)break;i++}if("'"!==e)throw"Can't find final quote.";return n=this._expression.substring(this._pointer+1,this._pointer+i),this._pointer+=i+1,"!"===this._expression[this._pointer]?n.replace(/\'\'/g,"'"):""},c.prototype._getCellRange=function(e){var t,n,i,r,o;if(e&&(t=e.split(":"),t.length>0&&t.length<3&&(n=this._parseCell(t[0]),r=n.cellRange,r&&2===t.length))){if(i=this._parseCell(t[1]),o=i.cellRange,n.sheetRef&&!i.sheetRef&&(i.sheetRef=n.sheetRef),n.sheetRef!==i.sheetRef)throw"The cell reference must be in the same sheet!";o?(r.col2=o.col,r.row2=o.row):r=null}return null==r?null:{cellRange:r,sheetRef:n.sheetRef}},c.prototype._parseCellRange=function(e){for(var n,i=-1,r=-1,o=!1,s=!1,a=0;a<e.length;a++)if(n=e[a],"$"!==n||o){if(!(n>="a"&&"z">=n||n>="A"&&"Z">=n))break;0>i&&(i=0),i=26*i+(n.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1)}else o=!0;for(;a<e.length;a++)if(n=e[a],"$"!==n||s){if(!(n>="0"&&"9">=n))break;0>r&&(r=0),r=10*r+(+n-0)}else s=!0;return a<e.length&&(r=i=-1),-1===r||-1===i?null:new t.CellRange(r-1,i-1)},c.prototype._parseCell=function(e){var t,n,i,r;if(n=e.lastIndexOf("!"),n>0&&n<e.length-1)r=e.substring(0,n),i=e.substring(n+1);else{if(!(0>=n))return null;i=e}return t=this._parseCellRange(i),{cellRange:t,sheetRef:r}},c.prototype._getParameters=function(){var e,t,n=this._pointer,i=this._token;if(this._getToken(),this._token.tokenID!==s.OPEN)return this._pointer=n,this._token=i,null;if(n=this._pointer,this._getToken(),this._token.tokenID===s.CLOSE)return null;for(this._pointer=n,e=[],t=this._parseExpression(),e.push(t);this._token.tokenID===s.COMMA;)t=this._parseExpression(),e.push(t);if(this._token.tokenID!==s.CLOSE)throw"Syntax error.";return e},c.prototype._getAggregateResult=function(t,n,i){var r,o=this._getItemList(n,i);return r=e.getAggregate(t,o.items),o.isDate&&(r=new Date(r)),r},c.prototype._getFlexSheetAggregateResult=function(e,t,i){var r,o,s,l;switch(e){case a.Count:return r=this._getItemList(t,i,!0,!1),this._countNumberCells(r.items);case a.CountA:return r=this._getItemList(t,i,!1,!1),r.items.length;case a.ConutBlank:return r=this._getItemList(t,i,!1,!0),this._countBlankCells(r.items);case a.Rank:if(s=n._Expression.toNumber(t[0],i),l=t[2]?n._Expression.toNumber(t[2],i):0,isNaN(s))throw"Invalid number.";if(isNaN(l))throw"Invalid order.";if(t[1]=this._ensureNonFunctionExpression(t[1]),t[1]instanceof n._CellRangeExpression)return r=this._getItemList([t[1]],i),this._getRankOfCellRange(s,r.items,l);throw"Invalid Cell Reference.";case a.CountIf:if(t[0]=this._ensureNonFunctionExpression(t[0]),t[0]instanceof n._CellRangeExpression)return r=this._getItemList([t[0]],i,!1),this._countCellsByCriterias([r.items],[t[1]],i);throw"Invalid Cell Reference.";case a.CountIfs:return this._handleCountIfs(t,i);case a.SumIf:if(t[0]=this._ensureNonFunctionExpression(t[0]),t[0]instanceof n._CellRangeExpression)return r=this._getItemList([t[0]],i,!1),t[2]=this._ensureNonFunctionExpression(t[2]),null!=t[2]&&t[2]instanceof n._CellRangeExpression&&(o=this._getItemList([t[2]],i)),this._sumCellsByCriterias([r.items],[t[1]],o?o.items:null,i);throw"Invalid Cell Reference.";case a.SumIfs:return this._handleSumIfs(t,i);case a.Product:return r=this._getItemList(t,i),this._getProductOfNumbers(r.items)}throw"Invalid aggregate type."},c.prototype._getItemList=function(e,t,i,r,o,s){void 0===i&&(i=!0),void 0===r&&(r=!1),void 0===o&&(o=!0);for(var a,l,c,u,h=[],p=!0,d=0;d<e.length;d++)if(u=e[d],u=this._ensureNonFunctionExpression(u),u instanceof n._CellRangeExpression)for(c=u.getValues(o,s,t),l=0;l<c.length;l++)a=c[l],(r||null!=a&&""!==a)&&(p=p&&a instanceof Date,a=i?+a:a,h.push(a));else{if(a=u instanceof n._Expression?u.evaluate(t):u,!r&&(null==a||""===a))continue;p=p&&a instanceof Date,a=i?+a:a,h.push(a)}return 0===h.length&&(p=!1),{isDate:p,items:h}},c.prototype._countBlankCells=function(t){for(var n,i=0,r=0;i<t.length;i++)n=t[i],(null==n||e.isString(n)&&""===n||e.isNumber(n)&&isNaN(n))&&r++;return r},c.prototype._countNumberCells=function(t){for(var n,i=0,r=0;i<t.length;i++)n=t[i],null!=n&&e.isNumber(n)&&!isNaN(n)&&r++;return r},c.prototype._getRankOfCellRange=function(e,t,n){void 0===n&&(n=0);var i,r=0,o=0;for(n?t.sort(function(e,t){return isNaN(e)||isNaN(t)?-1:e-t}):t.sort(function(e,t){return isNaN(e)||isNaN(t)?1:t-e});r<t.length;r++)if(i=t[r],!isNaN(i)&&(o++,e===i))return o;throw e+" is not in the cell range."},c.prototype._handleCountIfs=function(e,t){var i,r,o,s,a=0,l=[],c=[];if(e.length%2!=0)throw"Invalid params.";for(;a<e.length/2;a++){if(r=e[2*a],r=this._ensureNonFunctionExpression(r),!(r instanceof n._CellRangeExpression))throw"Invalid Cell Reference.";if(0===a){if(!r.cells)throw"Invalid Cell Reference.";o=r.cells.rowSpan,s=r.cells.columnSpan}else{if(!r.cells)throw"Invalid Cell Reference.";if(r.cells.rowSpan!==o||r.cells.columnSpan!==s)throw"The row span and column span of each cell range has to be same with each other."}i=this._getItemList([r],t,!1),l[a]=i.items,c[a]=e[2*a+1]}return this._countCellsByCriterias(l,c,t)},c.prototype._countCellsByCriterias=function(t,i,r,o){for(var s,a,l,c,u,h=0,p=0,d=0,f=t[0].length,g=[];p<i.length;p++){if(u=n._Expression.toString(i[p],r),0===u.length)throw"Invalid Criteria.";"*"===u?g.push(u):g.push(this._parseRightExpr(u))}for(;f>h;h++){s=!1;e:for(p=0;p<t.length;p++)if(l=t[p],c=l[h],u=g[p],"string"==typeof u){if("*"!==u&&(null==c||""===c)){s=!1;break e}if(s="*"===u||this.evaluate(this._combineExpr(c,u),null,r),!s)break e}else if(s=s=u.reg.test(c.toString())===u.checkMathces,!s)break e;s&&(o?(a=o[h],null!=a&&e.isNumber(a)&&!isNaN(a)&&d++):d++)}return d},c.prototype._handleSumIfs=function(e,t){var i,r,o,s,a,l,c=1,u=[],h=[];if(e.length%2!=1)throw"Invalid params.";if(o=e[0],o=this._ensureNonFunctionExpression(o),!(o instanceof n._CellRangeExpression))throw"Invalid Sum Cell Reference.";if(!o.cells)throw"Invalid Sum Cell Reference.";for(a=o.cells.rowSpan,l=o.cells.columnSpan,r=this._getItemList([o],t);c<(e.length+1)/2;c++){if(s=e[2*c-1],s=this._ensureNonFunctionExpression(s),!(s instanceof n._CellRangeExpression))throw"Invalid Criteria Cell Reference.";if(!s.cells)throw"Invalid Criteria Cell Reference.";if(s.cells.rowSpan!==a||s.cells.columnSpan!==l)throw"The row span and column span of each cell range has to be same with each other.";
i=this._getItemList([s],t,!1),u[c-1]=i.items,h[c-1]=e[2*c]}return this._sumCellsByCriterias(u,h,r.items,t)},c.prototype._sumCellsByCriterias=function(t,i,r,o){var s,a,l,c,u,h=0,p=0,d=0,f=t[0].length,g=[];for(null==r&&(r=t[0]);p<i.length;p++){if(u=n._Expression.toString(i[p],o),0===u.length)throw"Invalid Criteria.";"*"===u?g.push(u):g.push(this._parseRightExpr(u))}for(;f>h;h++){a=!1,s=r[h];e:for(p=0;p<t.length;p++)if(l=t[p],c=l[h],u=g[p],"string"==typeof u){if("*"!==u&&(null==c||""===c)){a=!1;break e}if(a="*"===u||this.evaluate(this._combineExpr(c,u),null,o),!a)break e}else if(a=u.reg.test(c.toString())===u.checkMathces,!a)break e;a&&e.isNumber(s)&&!isNaN(s)&&(d+=s)}return d},c.prototype._getProductOfNumbers=function(t){var n,i=0,r=1,o=!1;if(t)for(;i<t.length;i++)n=t[i],e.isNumber(n)&&!isNaN(n)&&(r*=n,o=!0);return o?r:0},c.prototype._handleSubtotal=function(t,i){var r,o,s,a,c=!0;if(r=n._Expression.toNumber(t[0],i),r>=1&&11>=r||r>=101&&111>=r){switch(r>=101&&111>=r&&(c=!1),r=e.asEnum(r,l),o=this._getItemList(t.slice(1),i,!0,!1,c),r){case l.Count:case l.CountWithoutHidden:return this._countNumberCells(o.items);case l.CountA:case l.CountAWithoutHidden:return o.items.length;case l.Product:case l.ProductWithoutHidden:return this._getProductOfNumbers(o.items);case l.Average:case l.AverageWithoutHidden:s=e.Aggregate.Avg;break;case l.Max:case l.MaxWithoutHidden:s=e.Aggregate.Max;break;case l.Min:case l.MinWithoutHidden:s=e.Aggregate.Min;break;case l.Std:case l.StdWithoutHidden:s=e.Aggregate.Std;break;case l.StdPop:case l.StdPopWithoutHidden:s=e.Aggregate.StdPop;break;case l.Sum:case l.SumWithoutHidden:s=e.Aggregate.Sum;break;case l.Var:case l.VarWithoutHidden:s=e.Aggregate.Var;break;case l.VarPop:case l.VarPopWithoutHidden:s=e.Aggregate.VarPop}return a=e.getAggregate(s,o.items),o.isDate&&(a=new Date(a)),a}throw"Invalid Subtotal function."},c.prototype._handleDCount=function(e,t){var i,r,o,s=e[0],a=e[2];if(s=this._ensureNonFunctionExpression(s),a=this._ensureNonFunctionExpression(a),s instanceof n._CellRangeExpression&&a instanceof n._CellRangeExpression&&(i=e[1].evaluate(t),r=this._getColumnIndexByField(s,i),o=this._getItemList([s],t,!0,!1,!0,r),o.items&&o.items.length>1))return this._DCountWithCriterias(o.items.slice(1),s,a);throw"Invalid Count Cell Reference."},c.prototype._DCountWithCriterias=function(e,t,i){var r,o,s,a,l,c,u,h,p,d,f,g=i.cells,m=0;if(r=this._getSheet(t.sheetRef),o=this._getSheet(i.sheetRef),g.rowSpan>1){for(s=g.topRow,a=g.bottomRow;a>g.topRow;a--){for(d=[],f=[],l=g.leftCol;l<=g.rightCol;l++)if(u=this._owner.getCellValue(a,l,!1,o),null!=u&&""!==u){if(f.push(new n._Expression(u)),h=this._owner.getCellValue(s,l,!1,o),c=this._getColumnIndexByField(t,h),p=this._getItemList([t],r,!1,!1,!0,c),!(null!=p.items&&p.items.length>1))throw"Invalid Count Cell Reference.";d.push(p.items.slice(1))}m+=this._countCellsByCriterias(d,f,r,e)}return m}throw"Invalid Criteria Cell Reference."},c.prototype._getColumnIndexByField=function(t,n){var i,r,o,s,a;if(i=t.cells,a=i.topRow,-1===a)throw"Invalid Count Cell Reference.";if(e.isInt(n)&&!isNaN(n)){if(n>=1&&n<=i.columnSpan)return i.leftCol+n-1}else for(r=this._getSheet(t.sheetRef),o=i.leftCol;o<=i.rightCol;o++)if(s=this._owner.getCellValue(a,o,!1,r),n=e.isString(n)?n.toLowerCase():n,s=e.isString(s)?s.toLowerCase():s,n===s)return o;throw"Invalid field."},c.prototype._getSheet=function(e){var t,n=0;if(e)for(;n<this._owner.sheets.length&&(t=this._owner.sheets[n],t.name!==e);n++);return t},c.prototype._parseRightExpr=function(e){var t,n,i=!1;if(e.indexOf("?")>-1||e.indexOf("*")>-1){if(t=e.match(/([\?\*]*)(\w+)([\?\*]*)(\w+)([\?\*]*)/),null==t||6!==t.length)throw"Invalid Criteria.";return n=new RegExp("^"+(t[1].length>0?this._parseRegCriteria(t[1]):"")+t[2]+(t[3].length>0?this._parseRegCriteria(t[3]):"")+t[4]+(t[5].length>0?this._parseRegCriteria(t[5]):"")+"$","i"),/^[<>=]/.test(e)?"="===e.trim()[0]&&(i=!0):i=!0,{reg:n,checkMathces:i}}if(isNaN(+e))if(/^\w/.test(e))e='="'+e+'"';else{if(!/^[<>=]{1,2}\s*-?\w+$/.test(e))throw"Invalid Criteria.";e=e.replace(/([<>=]{1,2})\s*(-?\w+)/,'$1"$2"')}else e="="+e;return e},c.prototype._combineExpr=function(t,n){return e.isString(t)&&(t='"'+t+'"'),t="="+t,t+n},c.prototype._parseRegCriteria=function(e){for(var t=0,n=0,i="";t<e.length;t++)"*"===e[t]?(n>0&&(i+="\\w{"+n+"}",n=0),i+="\\w*"):"?"===e[t]&&n++;return n>0&&(i+="\\w{"+n+"}"),i},c.prototype._calculateRate=function(e,t){var i,r,o,s,a,l,c,u,h,p,d,f,g=1e-7,m=20,v=0,y=0;for(o=n._Expression.toNumber(e[0],t),s=n._Expression.toNumber(e[1],t),a=n._Expression.toNumber(e[2],t),l=null!=e[3]?n._Expression.toNumber(e[3],t):0,c=null!=e[4]?n._Expression.toNumber(e[4],t):0,u=null!=e[5]?n._Expression.toNumber(e[5],t):.1,r=u,Math.abs(r)<g?h=a*(1+o*r)+s*(1+r*c)*o+l:(p=Math.exp(o*Math.log(1+r)),h=a*p+s*(1/r+c)*(p-1)+l),d=a+s*o+l,f=a*p+s*(1/r+c)*(p-1)+l,i=r;Math.abs(d-f)>g&&m>v;)r=(f*y-d*i)/(f-d),y=i,i=r,Math.abs(r)<g?h=a*(1+o*r)+s*(1+r*c)*o+l:(p=Math.exp(o*Math.log(1+r)),h=a*p+s*(1/r+c)*(p-1)+l),d=f,f=h,++v;if(Math.abs(d-f)>g&&v===m)throw"It is not able to calculate the rate with current parameters.";return r},c.prototype._handleHLookup=function(e,t){var i,r,o=e[0].evaluate(t),s=e[1],a=n._Expression.toNumber(e[2],t),l=null!=e[3]?n._Expression.toBoolean(e[3],t):!0;if(null==o||""==o)throw"Invalid lookup value.";if(isNaN(a)||0>a)throw"Invalid row index.";if(s=this._ensureNonFunctionExpression(s),s instanceof n._CellRangeExpression){if(i=s.cells,a>i.rowSpan)throw"Row index is out of the cell range.";if(l?(r=this._exactMatch(o,i,t,!1),-1===r&&(r=this._approximateMatch(o,i,t))):r=this._exactMatch(o,i,t),-1===r)throw"Lookup Value is not found.";return this._owner.getCellValue(i.topRow+a-1,r,!1,t)}throw"Invalid Cell Reference."},c.prototype._exactMatch=function(t,n,i,r){void 0===r&&(r=!0);var o,s,a,l,c=n.topRow;if(e.isString(t)&&(t=t.toLowerCase()),r&&e.isString(t)&&(t.indexOf("?")>-1||t.indexOf("*")>-1)){if(a=t.match(/([\?\*]*)(\w+)([\?\*]*)(\w+)([\?\*]*)/),null==a||6!==a.length)throw"Invalid lookup value.";l=new RegExp("^"+(a[1].length>0?this._parseRegCriteria(a[1]):"")+a[2]+(a[3].length>0?this._parseRegCriteria(a[3]):"")+a[4]+(a[5].length>0?this._parseRegCriteria(a[5]):"")+"$","i")}for(o=n.leftCol;o<=n.rightCol;o++)if(s=this._owner.getCellValue(c,o,!1,i),null!=l){if(l.test(s))return o}else if(e.isString(s)&&(s=s.toLowerCase()),t===s)return o;return-1},c.prototype._approximateMatch=function(t,n,i){var r,o,s=n.topRow,a=[],l=0;for(e.isString(t)&&(t=t.toLowerCase()),o=n.leftCol;o<=n.rightCol;o++)r=this._owner.getCellValue(s,o,!1,i),r=isNaN(+r)?r:+r,a.push({value:r,index:o});for(a.sort(function(t,n){return e.isString(t.value)&&(t.value=t.value.toLowerCase()),e.isString(n.value)&&(n.value=n.value.toLowerCase()),t.value>n.value?-1:t.value===n.value?n.index-t.index:1});l<a.length;l++)if(r=a[l],e.isString(r.value)&&(r.value=r.value.toLowerCase()),t>r.value)return r.index;throw"Lookup Value is not found."},c.prototype._checkCache=function(e){var t=this._expressionCache[e];return t?t:(t=this._parse(e),this._cacheSize>1e4&&this._clearExpressionCache(),this._expressionCache[e]=t,this._cacheSize++,t)},c.prototype._ensureNonFunctionExpression=function(e,t){for(;e instanceof n._FunctionExpression;)e=e.evaluate(t);return e},c}();n._CalcEngine=c,i=function(){function e(e,t,n){this._value=e,this._tokenID=t,this._tokenType=n}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenID",{get:function(){return this._tokenID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenType",{get:function(){return this._tokenType},enumerable:!0,configurable:!0}),e}(),n._Token=i,r=function(){function t(t,n,i){this._paramMax=Number.MAX_VALUE,this._paramMin=Number.MIN_VALUE,this._func=t,e.isNumber(n)&&!isNaN(n)&&(this._paramMax=n),e.isNumber(i)&&!isNaN(i)&&(this._paramMin=i)}return Object.defineProperty(t.prototype,"paramMax",{get:function(){return this._paramMax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMin",{get:function(){return this._paramMin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"func",{get:function(){return this._func},enumerable:!0,configurable:!0}),t}(),n._FunctionDefinition=r,function(e){e[e.COMPARE=0]="COMPARE",e[e.ADDSUB=1]="ADDSUB",e[e.MULDIV=2]="MULDIV",e[e.POWER=3]="POWER",e[e.CONCAT=4]="CONCAT",e[e.GROUP=5]="GROUP",e[e.LITERAL=6]="LITERAL",e[e.IDENTIFIER=7]="IDENTIFIER"}(n._TokenType||(n._TokenType={})),o=n._TokenType,function(e){e[e.GT=0]="GT",e[e.LT=1]="LT",e[e.GE=2]="GE",e[e.LE=3]="LE",e[e.EQ=4]="EQ",e[e.NE=5]="NE",e[e.ADD=6]="ADD",e[e.SUB=7]="SUB",e[e.MUL=8]="MUL",e[e.DIV=9]="DIV",e[e.DIVINT=10]="DIVINT",e[e.MOD=11]="MOD",e[e.POWER=12]="POWER",e[e.CONCAT=13]="CONCAT",e[e.OPEN=14]="OPEN",e[e.CLOSE=15]="CLOSE",e[e.END=16]="END",e[e.COMMA=17]="COMMA",e[e.PERIOD=18]="PERIOD",e[e.ATOM=19]="ATOM"}(n._TokenID||(n._TokenID={})),s=n._TokenID,function(e){e[e.Count=0]="Count",e[e.CountA=1]="CountA",e[e.ConutBlank=2]="ConutBlank",e[e.CountIf=3]="CountIf",e[e.CountIfs=4]="CountIfs",e[e.Rank=5]="Rank",e[e.SumIf=6]="SumIf",e[e.SumIfs=7]="SumIfs",e[e.Product=8]="Product"}(a||(a={})),function(e){e[e.Average=1]="Average",e[e.Count=2]="Count",e[e.CountA=3]="CountA",e[e.Max=4]="Max",e[e.Min=5]="Min",e[e.Product=6]="Product",e[e.Std=7]="Std",e[e.StdPop=8]="StdPop",e[e.Sum=9]="Sum",e[e.Var=10]="Var",e[e.VarPop=11]="VarPop",e[e.AverageWithoutHidden=101]="AverageWithoutHidden",e[e.CountWithoutHidden=102]="CountWithoutHidden",e[e.CountAWithoutHidden=103]="CountAWithoutHidden",e[e.MaxWithoutHidden=104]="MaxWithoutHidden",e[e.MinWithoutHidden=105]="MinWithoutHidden",e[e.ProductWithoutHidden=106]="ProductWithoutHidden",e[e.StdWithoutHidden=107]="StdWithoutHidden",e[e.StdPopWithoutHidden=108]="StdPopWithoutHidden",e[e.SumWithoutHidden=109]="SumWithoutHidden",e[e.VarWithoutHidden=110]="VarWithoutHidden",e[e.VarPopWithoutHidden=111]="VarPopWithoutHidden"}(l||(l={}))}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(n){"use strict";var i,r,o,s,a=function(){function t(e){this._token=e?e instanceof n._Token?e:new n._Token(e,n._TokenID.ATOM,n._TokenType.LITERAL):new n._Token(null,n._TokenID.ATOM,n._TokenType.IDENTIFIER)}return Object.defineProperty(t.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(){if(this._token.tokenType!==n._TokenType.LITERAL)throw"Bad expression.";return this._token.value},t.toString=function(t,n){var i=t.evaluate(n);return e.isPrimitive(i)||(i=i.value),null!=i?i.toString():""},t.toNumber=function(t,n){var i=t.evaluate(n);return e.isPrimitive(i)||(i=i.value),e.isNumber(i)?i:e.isBoolean(i)?i?1:0:e.isDate(i)?this._toOADate(i):e.isString(i)?i?+i:0:e.changeType(i,e.DataType.Number,"")},t.toBoolean=function(t,n){var i=t.evaluate(n);return e.isPrimitive(i)||(i=i.value),e.isBoolean(i)?i:e.isNumber(i)?0===i?!1:!0:e.changeType(i,e.DataType.Boolean,"")},t.toDate=function(t,n){var i=t.evaluate(n);return e.isPrimitive(i)||(i=i.value),e.isDate(i)?i:e.isNumber(i)?this._fromOADate(i):e.changeType(i,e.DataType.Date,"")},t._toOADate=function(e){var t=Date.UTC(1899,11,30),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return(n-t)/864e5},t._fromOADate=function(e){var t=Date.UTC(1899,11,30);return new Date(864e5*e+t)},t}();n._Expression=a,i=function(e){function t(t,n){e.call(this,t),this._expr=n}return __extends(t,e),t.prototype.evaluate=function(e){if(this.token.tokenID===n._TokenID.SUB)return null==this._evaluatedValue&&(this._evaluatedValue=-a.toNumber(this._expr,e)),this._evaluatedValue;if(this.token.tokenID===n._TokenID.ADD)return null==this._evaluatedValue&&(this._evaluatedValue=+a.toNumber(this._expr,e)),this._evaluatedValue;throw"Bad expression."},t}(a),n._UnaryExpression=i,r=function(e){function t(t,n,i){e.call(this,t),this._leftExpr=n,this._rightExpr=i}return __extends(t,e),t.prototype.evaluate=function(e){var t,i,r,o,s;if(null!=this._evaluatedValue)return this._evaluatedValue;if(t=a.toString(this._leftExpr,e),i=a.toString(this._rightExpr,e),this.token.tokenType===n._TokenType.CONCAT)return this._evaluatedValue=t+i,this._evaluatedValue;if(r=a.toNumber(this._leftExpr,e),o=a.toNumber(this._rightExpr,e),s=r-o,this.token.tokenType===n._TokenType.COMPARE)switch(this.token.tokenID){case n._TokenID.GT:return s>0;case n._TokenID.LT:return 0>s;case n._TokenID.GE:return s>=0;case n._TokenID.LE:return 0>=s;case n._TokenID.EQ:return isNaN(s)?(this._evaluatedValue=t.toLowerCase()===i.toLowerCase(),this._evaluatedValue):(this._evaluatedValue=0===s,this._evaluatedValue);case n._TokenID.NE:return isNaN(s)?(this._evaluatedValue=t.toLowerCase()!==i.toLowerCase(),this._evaluatedValue):(this._evaluatedValue=0!==s,this._evaluatedValue)}switch(this.token.tokenID){case n._TokenID.ADD:this._evaluatedValue=r+o;break;case n._TokenID.SUB:this._evaluatedValue=r-o;break;case n._TokenID.MUL:this._evaluatedValue=r*o;break;case n._TokenID.DIV:this._evaluatedValue=r/o;break;case n._TokenID.DIVINT:this._evaluatedValue=Math.floor(r/o);break;case n._TokenID.MOD:this._evaluatedValue=Math.floor(r%o);break;case n._TokenID.POWER:0===o&&(this._evaluatedValue=1),.5===o&&(this._evaluatedValue=Math.sqrt(r)),1===o&&(this._evaluatedValue=r),2===o&&(this._evaluatedValue=r*r),3===o&&(this._evaluatedValue=r*r*r),4===o&&(this._evaluatedValue=r*r*r*r),this._evaluatedValue=Math.pow(r,o);break;default:this._evaluatedValue=NaN}if(!isNaN(this._evaluatedValue))return this._evaluatedValue;throw"Bad expression."},t}(a),n._BinaryExpression=r,o=function(n){function i(e,t,i){n.call(this),this._cells=e,this._sheetRef=t,this._flex=i,this._evalutingRange={}}return __extends(i,n),i.prototype.evaluate=function(e){return null==this._evaluatedValue&&(this._evaluatedValue=this._getCellValue(this._cells,e)),this._evaluatedValue},i.prototype.getValues=function(n,i,r){void 0===n&&(n=!0);var o,s,i,a,l,c=[],u=0;if(a=null==i||isNaN(+i)?this._cells.leftCol:i,l=null==i||isNaN(+i)?this._cells.rightCol:i,r=this._getSheet()||r||this._flex.selectedSheet,!r)return null;for(s=this._cells.topRow;s<=this._cells.bottomRow;s++){if(s>=r.grid.rows.length)throw"The cell reference is out of the cell range of the flexsheet.";if(n||r.grid.rows[s].isVisible!==!1)for(i=a;l>=i;i++){if(i>=r.grid.columns.length)throw"The cell reference is out of the cell range of the flexsheet.";(n||r.grid.columns[i].isVisible!==!1)&&(o=this._getCellValue(new t.CellRange(s,i),r),e.isPrimitive(o)||(o=o.value),c[u]=o,u++)}}return c},Object.defineProperty(i.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sheetRef",{get:function(){return this._sheetRef},enumerable:!0,configurable:!0}),i.prototype._getCellValue=function(e,t){var t,n;if(t=this._getSheet()||t||this._flex.selectedSheet,!t)return null;if(n=t.name+":"+e.row+","+e.col+"-"+e.row2+","+e.col2,this._evalutingRange[n])throw"Circular Reference";try{if(this._flex)return this._evalutingRange[n]=!0,this._flex.getCellValue(e.row,e.col,!1,t)}finally{delete this._evalutingRange[n]}},i.prototype._getSheet=function(){var e,t=0;if(!this._sheetRef)return null;for(;t<this._flex.sheets.length;t++)if(e=this._flex.sheets[t],e.name===this._sheetRef)return e;throw"Invalid sheet reference"},i}(a),n._CellRangeExpression=o,s=function(e){function t(t,n){e.call(this),this._funcDefinition=t,this._params=n}return __extends(t,e),t.prototype.evaluate=function(e,t,n){return null==this._evaluatedValue&&(this._evaluatedValue=this._funcDefinition.func(this._params,e,t,n)),this._evaluatedValue},t}(a),n._FunctionExpression=s}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n,i,r,o,s,a,l,c,u,h=function(){function e(e){this._owner=e,this._sheetIndex=e.selectedSheetIndex}return Object.defineProperty(e.prototype,"sheetIndex",{get:function(){return this._sheetIndex},enumerable:!0,configurable:!0}),e.prototype.undo=function(){throw"This abstract method must be overrided."},e.prototype.redo=function(){throw"This abstract method must be overrided."},e.prototype.saveNewState=function(){throw"This abstract method must be overrided."},e}();t._UndoAction=h,n=function(e){function t(t,n){var i,n,r,o,s;for(e.call(this,t),this._isPaste=!1,this._selections=n?[n]:t.selectedSheet.selectionRanges.slice(),this._oldValues=[],this._mergeAction=new l(t),i=0;i<this._selections.length;i++)for(n=this._selections[i],r=n.topRow;r<=n.bottomRow;r++)for(o=n.leftCol;o<=n.rightCol;o++)s=t.getCellData(r,o,!!t.columns[o].dataMap),s=void 0==s?"":s,this._oldValues.push(s)}return __extends(t,e),Object.defineProperty(t.prototype,"isPaste",{get:function(){return this._isPaste},enumerable:!0,configurable:!0}),t.prototype.undo=function(){var e,t,n,i,r=this,o=0;r._owner._clearCalcEngine(),r._owner.selectedSheet.selectionRanges.clear(),r._owner.deferUpdate(function(){for(e=0;e<r._selections.length;e++){for(t=r._selections[e],n=t.topRow;n<=t.bottomRow;n++)for(i=t.leftCol;i<=t.rightCol;i++)r._owner.setCellData(n,i,r._oldValues[o]),o++;r._owner.selectedSheet.selectionRanges.push(t)}r._mergeAction.undo(),r._owner.refresh(!1)})},t.prototype.redo=function(){var e,t,n,i,r=this,o=0;r._owner._clearCalcEngine(),r._owner.selectedSheet.selectionRanges.clear(),r._owner.deferUpdate(function(){for(e=0;e<r._selections.length;e++){for(t=r._selections[e],n=t.topRow;n<=t.bottomRow;n++)for(i=t.leftCol;i<=t.rightCol;i++)r._owner.setCellData(n,i,r._newValues[o]),o++;r._owner.selectedSheet.selectionRanges.push(t)}r._mergeAction.redo(),r._owner.refresh(!1)})},t.prototype.saveNewState=function(){var e,t,n,i,r,o;for(this._newValues=[],e=0;e<this._selections.length;e++)for(t=this._selections[e],i=t.topRow;i<=t.bottomRow;i++)for(r=t.leftCol;r<=t.rightCol;r++){if(n=this._owner.columns[r],!n)return!1;o=this._owner.getCellData(i,r,!!n.dataMap),o=void 0==o?"":o,this._newValues.push(o)}return this._mergeAction.saveNewState(),!this._checkActionState()},t.prototype.markIsPaste=function(){this._isPaste=!0},t.prototype.updateForPasting=function(e){var t=this._selections[this._selections.length-1],n=this._owner.getCellData(e.row,e.col,!!this._owner.columns[e.col].dataMap);this._addingValue||(this._addingValue=!0,this._oldValues=[]),n=void 0==n?"":n,this._oldValues.push(n),t.row=Math.min(t.topRow,e.topRow),t.row2=Math.max(t.bottomRow,e.bottomRow),t.col=Math.min(t.leftCol,e.leftCol),t.col2=Math.max(t.rightCol,e.rightCol)},t.prototype._checkActionState=function(){var e;if(this._oldValues.length!==this._newValues.length)return!1;for(e=0;e<this._oldValues.length;e++)if(this._oldValues[e]!==this._newValues[e])return!1;return!0},t}(h),t._EditAction=n,i=function(e){function t(t,n,i){e.call(this,t),this._panel=n,this._colIndex=i,this._oldColWidth=n.columns[i].width}return __extends(t,e),t.prototype.undo=function(){this._panel.columns[this._colIndex].width=this._oldColWidth},t.prototype.redo=function(){this._panel.columns[this._colIndex].width=this._newColWidth},t.prototype.saveNewState=function(){return this._newColWidth=this._panel.columns[this._colIndex].width,this._oldColWidth===this._newColWidth?!1:!0},t}(h),t._ColumnResizeAction=i,r=function(e){function t(t,n,i){e.call(this,t),this._panel=n,this._rowIndex=i,this._oldRowHeight=n.rows[i].height}return __extends(t,e),t.prototype.undo=function(){this._panel.rows[this._rowIndex].height=this._oldRowHeight},t.prototype.redo=function(){this._panel.rows[this._rowIndex].height=this._newRowHeight},t.prototype.saveNewState=function(){return this._newRowHeight=this._panel.rows[this._rowIndex].height,this._oldRowHeight===this._newRowHeight?!1:!0},t}(h),t._RowResizeAction=r,o=function(e){function t(t){var n,i=[];for(e.call(this,t),this._selection=t.selection,n=0;n<t.columns.length;n++)i.push(t.columns[n]);this._oldValue={columns:i,sortList:t.sortManager._committedList.slice(),styledCells:t.selectedSheet?JSON.parse(JSON.stringify(t.selectedSheet._styledCells)):null,mergedCells:t._cloneMergedCells()}}return __extends(t,e),t.prototype.undo=function(){var e,t,n,i,r=this;if(r._owner.selectedSheet){for(r._owner._clearCalcEngine(),r._owner.finishEditing(),r._owner.columns.clear(),r._owner.selectedSheet._styledCells=void 0,r._owner.selectedSheet._mergedRanges=void 0,r._owner.columns.beginUpdate(),e=0;e<r._oldValue.columns.length;e++)r._owner.columns.push(r._oldValue.columns[e]);r._owner.columns.endUpdate(),r._owner.selectedSheet._styledCells=r._oldValue.styledCells,r._owner.selectedSheet._mergedRanges=r._oldValue.mergedCells,r._affectedFormulas&&(i=r._affectedFormulas.oldFormulas),r._owner.deferUpdate(function(){if(r._owner.selection=r._selection,!!i&&i.length>0)for(t=0;t<i.length;t++)n=i[t],r._owner.setCellData(n.point.x,n.point.y,n.formula);r._owner._copyTo(r._owner.selectedSheet),r._owner._copyFrom(r._owner.selectedSheet)}),r._owner.selectedSheet.grid.wj_sheetInfo.styledCells=r._owner.selectedSheet._styledCells,r._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=r._owner.selectedSheet._mergedRanges,r._owner.sortManager.sortDescriptions.sourceCollection=r._oldValue.sortList.slice(),r._owner.sortManager.commitSort(!1),r._owner.sortManager._refresh(),r._owner.selection=r._selection,r._owner.refresh(!0),setTimeout(function(){r._owner._setFlexSheetToDirty(),r._owner.refresh(!0)},10)}},t.prototype.redo=function(){var e,t,n,i,r=this;if(r._owner.selectedSheet){for(r._owner._clearCalcEngine(),r._owner.finishEditing(),r._owner.columns.clear(),r._owner.selectedSheet._styledCells=void 0,r._owner.selectedSheet._mergedRanges=void 0,r._owner.columns.beginUpdate(),e=0;e<r._newValue.columns.length;e++)r._owner.columns.push(r._newValue.columns[e]);r._owner.columns.endUpdate(),r._owner.selectedSheet._styledCells=r._newValue.styledCells,r._owner.selectedSheet._mergedRanges=r._newValue.mergedCells,r._affectedFormulas&&(i=r._affectedFormulas.newFormulas),r._owner.deferUpdate(function(){if(r._owner.selection=r._selection,!!i&&i.length>0)for(t=0;t<i.length;t++)n=i[t],r._owner.setCellData(n.point.x,n.point.y,n.formula);r._owner._copyTo(r._owner.selectedSheet),r._owner._copyFrom(r._owner.selectedSheet)}),r._owner.selectedSheet.grid.wj_sheetInfo.styledCells=r._owner.selectedSheet._styledCells,r._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=r._owner.selectedSheet._mergedRanges,r._owner.sortManager.sortDescriptions.sourceCollection=r._newValue.sortList.slice(),r._owner.sortManager.commitSort(!1),r._owner.sortManager._refresh(),r._owner.selection=r._selection,r._owner.refresh(!0),setTimeout(function(){r._owner._setFlexSheetToDirty(),r._owner.refresh(!0)},10)}},t.prototype.saveNewState=function(){for(var e=[],t=0;t<this._owner.columns.length;t++)e.push(this._owner.columns[t]);return this._newValue={columns:e,sortList:this._owner.sortManager._committedList.slice(),styledCells:this._owner.selectedSheet?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells)):null,mergedCells:this._owner._cloneMergedCells()},!0},t}(h),t._ColumnsChangedAction=o,s=function(e){function n(t){var n,i,r=[],o=[];for(e.call(this,t),this._selection=t.selection,n=0;n<t.rows.length;n++)r.push(t.rows[n]);for(i=0;i<t.columns.length;i++)o.push(t.columns[i]);this._oldValue={rows:r,columns:o,itemsSource:t.itemsSource?t.itemsSource.slice():void 0,styledCells:t.selectedSheet?JSON.parse(JSON.stringify(t.selectedSheet._styledCells)):null,mergedCells:t._cloneMergedCells()}}return __extends(n,e),n.prototype.undo=function(){var e,n,i,r,o,s,a=this,l=!!a._oldValue.itemsSource;if(a._owner.selectedSheet){for(a._owner._clearCalcEngine(),a._owner.finishEditing(),a._owner.columns.clear(),a._owner.rows.clear(),a._owner.selectedSheet._styledCells=void 0,a._owner.selectedSheet._mergedRanges=void 0,l&&(a._owner.autoGenerateColumns=!1,a._owner.itemsSource=a._oldValue.itemsSource.slice()),a._owner.rows.beginUpdate(),e=0;e<a._oldValue.rows.length;e++)r=a._oldValue.rows[e],l?r.dataItem||r instanceof t.HeaderRow||a._owner.rows.splice(e,0,r):a._owner.rows.push(r);for(n=0;n<a._oldValue.columns.length;n++)a._owner.columns.push(a._oldValue.columns[n]);a._owner.rows.endUpdate(),a._owner.selectedSheet._styledCells=a._oldValue.styledCells,a._owner.selectedSheet._mergedRanges=a._oldValue.mergedCells,a._affecedFormulas&&(s=a._affecedFormulas.oldFormulas),a._owner.deferUpdate(function(){if(a._owner.selection=a._selection,!!s&&s.length>0)for(i=0;i<s.length;i++)o=s[i],a._owner.setCellData(o.point.x,o.point.y,o.formula);a._owner._copyTo(a._owner.selectedSheet),a._owner._copyFrom(a._owner.selectedSheet)}),a._owner.selectedSheet.grid.wj_sheetInfo.styledCells=a._owner.selectedSheet._styledCells,a._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=a._owner.selectedSheet._mergedRanges,a._owner.selection=a._selection,a._owner.refresh(!0),setTimeout(function(){a._owner._setFlexSheetToDirty(),a._owner.refresh(!0)},10)}},n.prototype.redo=function(){var e,n,i,r,o,s,a=this,l=!!a._newValue.itemsSource;if(a._owner.selectedSheet){for(a._owner._clearCalcEngine(),a._owner.finishEditing(),a._owner.columns.clear(),a._owner.rows.clear(),a._owner.selectedSheet._styledCells=void 0,a._owner.selectedSheet._mergedRanges=void 0,l&&(a._owner.autoGenerateColumns=!1,a._owner.itemsSource=a._newValue.itemsSource.slice()),a._owner.rows.beginUpdate(),e=0;e<a._newValue.rows.length;e++)r=a._newValue.rows[e],l?r.dataItem||r instanceof t.HeaderRow||a._owner.rows.splice(e,0,r):a._owner.rows.push(r);for(n=0;n<a._newValue.columns.length;n++)a._owner.columns.push(a._newValue.columns[n]);a._owner.rows.endUpdate(),a._owner.selectedSheet._styledCells=a._newValue.styledCells,a._owner.selectedSheet._mergedRanges=a._newValue.mergedCells,a._affecedFormulas&&(s=a._affecedFormulas.newFormulas),a._owner.deferUpdate(function(){if(s&&s.length>0)for(i=0;i<s.length;i++)o=s[i],a._owner.setCellData(o.point.x,o.point.y,o.formula);a._owner._copyTo(a._owner.selectedSheet),a._owner._copyFrom(a._owner.selectedSheet)}),a._owner.selectedSheet.grid.wj_sheetInfo.styledCells=a._owner.selectedSheet._styledCells,a._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=a._owner.selectedSheet._mergedRanges,a._owner.selection=a._selection,a._owner.refresh(!0),setTimeout(function(){a._owner._setFlexSheetToDirty(),a._owner.refresh(!0)},10)}},n.prototype.saveNewState=function(){for(var e,t=[],n=[],i=0;i<this._owner.rows.length;i++)t.push(this._owner.rows[i]);for(e=0;e<this._owner.columns.length;e++)n.push(this._owner.columns[e]);return this._newValue={rows:t,columns:n,itemsSource:this._owner.itemsSource?this._owner.itemsSource.slice():void 0,styledCells:this._owner.selectedSheet?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells)):null,mergedCells:this._owner._cloneMergedCells()},!0},n}(h),t._RowsChangedAction=s,a=function(e){function t(t,n){e.call(this,t),this._oldStyledCells=n?JSON.parse(JSON.stringify(n)):t.selectedSheet?JSON.parse(JSON.stringify(t.selectedSheet._styledCells)):null}return __extends(t,e),t.prototype.undo=function(){this._owner.selectedSheet&&(this._owner.selectedSheet._styledCells=JSON.parse(JSON.stringify(this._oldStyledCells)),this._owner.selectedSheet.grid.wj_sheetInfo.styledCells=this._owner.selectedSheet._styledCells,this._owner.refresh(!1))},t.prototype.redo=function(){this._owner.selectedSheet&&(this._owner.selectedSheet._styledCells=JSON.parse(JSON.stringify(this._newStyledCells)),this._owner.selectedSheet.grid.wj_sheetInfo.styledCells=this._owner.selectedSheet._styledCells,this._owner.refresh(!1))},t.prototype.saveNewState=function(){return this._newStyledCells=this._owner.selectedSheet?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells)):null,!0},t}(h),t._CellStyleAction=a,l=function(e){function t(t){e.call(this,t),this._oldMergedCells=t._cloneMergedCells()}return __extends(t,e),t.prototype.undo=function(){this._owner.selectedSheet&&(this._owner._clearCalcEngine(),this._owner.selectedSheet._mergedRanges=this._oldMergedCells,this._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=this._owner.selectedSheet._mergedRanges,this._owner.refresh(!0))},t.prototype.redo=function(){this._owner.selectedSheet&&(this._owner._clearCalcEngine(),this._owner.selectedSheet._mergedRanges=this._newMergedCells,this._owner.selectedSheet.grid.wj_sheetInfo.mergedRanges=this._owner.selectedSheet._mergedRanges,this._owner.refresh(!0))},t.prototype.saveNewState=function(){return this._newMergedCells=this._owner._cloneMergedCells(),!0},t}(h),t._CellMergeAction=l,c=function(e){function t(t){var n,i,r=[],o=[];if(e.call(this,t),!t.itemsSource){for(n=0;n<t.rows.length;n++)o.push(t.rows[n]);for(i=0;i<t.columns.length;i++)r.push(t.columns[i])}this._oldValue={sortList:t.sortManager._committedList.slice(),rows:o,columns:r}}return __extends(t,e),t.prototype.undo=function(){var e,t,n=this;if(n._owner.selectedSheet&&(n._owner._clearCalcEngine(),n._owner.sortManager.sortDescriptions.sourceCollection=n._oldValue.sortList.slice(),n._owner.sortManager.commitSort(!1),n._owner.sortManager._refresh(),!n._owner.itemsSource)){for(n._owner._isCopyingOrUndoing=!0,n._owner.rows.clear(),n._owner.columns.clear(),n._owner.selectedSheet.grid.rows.clear(),n._owner.selectedSheet.grid.columns.clear(),e=0;e<n._oldValue.rows.length;e++)n._owner.rows.push(n._oldValue.rows[e]),n._owner.selectedSheet.grid.rows.push(n._oldValue.rows[e]);for(t=0;t<n._oldValue.columns.length;t++)n._owner.columns.push(n._oldValue.columns[t]),n._owner.selectedSheet.grid.columns.push(n._oldValue.columns[t]);n._owner._isCopyingOrUndoing=!1,setTimeout(function(){n._owner._setFlexSheetToDirty(),n._owner.refresh(!0)},10)}},t.prototype.redo=function(){var e,t,n=this;if(n._owner.selectedSheet&&(n._owner._clearCalcEngine(),n._owner.sortManager.sortDescriptions.sourceCollection=n._newValue.sortList.slice(),n._owner.sortManager.commitSort(!1),n._owner.sortManager._refresh(),!n._owner.itemsSource)){for(n._owner._isCopyingOrUndoing=!0,n._owner.rows.clear(),n._owner.columns.clear(),n._owner.selectedSheet.grid.rows.clear(),n._owner.selectedSheet.grid.columns.clear(),e=0;e<n._newValue.rows.length;e++)n._owner.rows.push(n._newValue.rows[e]),n._owner.selectedSheet.grid.rows.push(n._newValue.rows[e]);for(t=0;t<n._newValue.columns.length;t++)n._owner.columns.push(n._newValue.columns[t]),n._owner.selectedSheet.grid.columns.push(n._newValue.columns[t]);n._owner._isCopyingOrUndoing=!1,setTimeout(function(){n._owner._setFlexSheetToDirty(),n._owner.refresh(!0)},10)}},t.prototype.saveNewState=function(){var e,t,n=[],i=[];if(!this._owner.itemsSource){for(e=0;e<this._owner.rows.length;e++)i.push(this._owner.rows[e]);for(t=0;t<this._owner.columns.length;t++)n.push(this._owner.columns[t])}return this._newValue={sortList:this._owner.sortManager._committedList.slice(),rows:i,columns:n},!0},t}(h),t._SortColumnAction=c,u=function(t){function n(e,n,i,r){var o,s,a,l,c;if(t.call(this,e),e.selectedSheet){for(this._isDraggingColumns=0===n.topRow&&n.bottomRow===e.rows.length-1?!0:!1,this._isCopyCells=r,this._dragRange=n,this._dropRange=i,this._oldDroppingCells=[],this._oldDroppingColumnSetting={},o=i.topRow;o<=i.bottomRow;o++)for(s=i.leftCol;s<=i.rightCol;s++)this._isDraggingColumns&&(this._oldDroppingColumnSetting[s]||(this._oldDroppingColumnSetting[s]={dataType:e.columns[s].dataType,align:e.columns[s].align,format:e.columns[s].format})),a=o*this._owner.columns.length+s,c=this._owner.selectedSheet._styledCells[a]?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells[a])):void 0,l=this._owner.getCellData(o,s,!1),this._oldDroppingCells.push({rowIndex:o,columnIndex:s,
cellContent:l,cellStyle:c});if(!r)for(this._draggingCells=[],this._draggingColumnSetting={},o=n.topRow;o<=n.bottomRow;o++)for(s=n.leftCol;s<=n.rightCol;s++)this._isDraggingColumns&&(this._draggingColumnSetting[s]||(this._draggingColumnSetting[s]={dataType:e.columns[s].dataType,align:e.columns[s].align,format:e.columns[s].format})),a=o*this._owner.columns.length+s,c=this._owner.selectedSheet._styledCells[a]?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells[a])):void 0,l=this._owner.getCellData(o,s,!1),this._draggingCells.push({rowIndex:o,columnIndex:s,cellContent:l,cellStyle:c})}}return __extends(n,t),n.prototype.undo=function(){var t,n,i,r,o,s=this;if(s._owner.selectedSheet){for(s._owner._clearCalcEngine(),t=0;t<s._oldDroppingCells.length;t++)n=s._oldDroppingCells[t],s._owner.setCellData(n.rowIndex,n.columnIndex,n.cellContent),i=n.rowIndex*s._owner.columns.length+n.columnIndex,n.cellStyle?s._owner.selectedSheet._styledCells[i]=n.cellStyle:delete s._owner.selectedSheet._styledCells[i];if(s._isDraggingColumns&&!!s._oldDroppingColumnSetting&&Object.keys(s._oldDroppingColumnSetting).forEach(function(t){s._owner.columns[+t].dataType=s._oldDroppingColumnSetting[+t].dataType?s._oldDroppingColumnSetting[+t].dataType:e.DataType.Object,s._owner.columns[+t].align=s._oldDroppingColumnSetting[+t].align,s._owner.columns[+t].format=s._oldDroppingColumnSetting[+t].format}),!s._isCopyCells){for(t=0;t<s._draggingCells.length;t++)n=s._draggingCells[t],s._owner.setCellData(n.rowIndex,n.columnIndex,n.cellContent),i=n.rowIndex*s._owner.columns.length+n.columnIndex,n.cellStyle&&(s._owner.selectedSheet._styledCells[i]=n.cellStyle);if(s._isDraggingColumns&&!!s._draggingColumnSetting&&Object.keys(s._draggingColumnSetting).forEach(function(t){s._owner.columns[+t].dataType=s._draggingColumnSetting[+t].dataType?s._draggingColumnSetting[+t].dataType:e.DataType.Object,s._owner.columns[+t].align=s._draggingColumnSetting[+t].align,s._owner.columns[+t].format=s._draggingColumnSetting[+t].format}),s._isDraggingColumns)if(s._dragRange.leftCol<s._dropRange.leftCol)for(o=s._dragRange.leftCol,r=s._dropRange.leftCol;r<=s._dropRange.rightCol;r++)s._owner._updateColumnFiler(r,o),o++;else for(o=s._dragRange.rightCol,r=s._dropRange.rightCol;r>=s._dropRange.leftCol;r--)s._owner._updateColumnFiler(r,o),o--}}},n.prototype.redo=function(){var t,n,i,r,o,s=this;if(s._owner.selectedSheet){if(s._owner._clearCalcEngine(),!s._isCopyCells){for(t=0;t<s._draggingCells.length;t++)n=s._draggingCells[t],s._owner.setCellData(n.rowIndex,n.columnIndex,null),i=n.rowIndex*s._owner.columns.length+n.columnIndex,s._owner.selectedSheet._styledCells[i]&&delete s._owner.selectedSheet._styledCells[i];s._isDraggingColumns&&!!s._draggingColumnSetting&&Object.keys(s._draggingColumnSetting).forEach(function(t){s._owner.columns[+t].dataType=e.DataType.Object,s._owner.columns[+t].align=null,s._owner.columns[+t].format=null})}for(t=0;t<s._newDroppingCells.length;t++)n=s._newDroppingCells[t],s._owner.setCellData(n.rowIndex,n.columnIndex,n.cellContent),i=n.rowIndex*s._owner.columns.length+n.columnIndex,n.cellStyle?s._owner.selectedSheet._styledCells[i]=n.cellStyle:delete s._owner.selectedSheet._styledCells[i];if(s._isDraggingColumns&&!!s._newDroppingColumnSetting&&Object.keys(s._newDroppingColumnSetting).forEach(function(t){s._owner.columns[+t].dataType=s._newDroppingColumnSetting[+t].dataType?s._newDroppingColumnSetting[+t].dataType:e.DataType.Object,s._owner.columns[+t].align=s._newDroppingColumnSetting[+t].align,s._owner.columns[+t].format=s._newDroppingColumnSetting[+t].format}),s._isDraggingColumns&&!s._isCopyCells)if(s._dragRange.leftCol>s._dropRange.leftCol)for(o=s._dropRange.leftCol,r=s._dragRange.leftCol;r<=s._dragRange.rightCol;r++)s._owner._updateColumnFiler(r,o),o++;else for(o=s._dropRange.rightCol,r=s._dragRange.rightCol;r>=s._dragRange.leftCol;r--)s._owner._updateColumnFiler(r,o),o--}},n.prototype.saveNewState=function(){var e,t,n,i,r;if(!this._owner.selectedSheet)return!1;if(this._dropRange){for(this._newDroppingCells=[],this._newDroppingColumnSetting={},e=this._dropRange.topRow;e<=this._dropRange.bottomRow;e++)for(t=this._dropRange.leftCol;t<=this._dropRange.rightCol;t++)this._isDraggingColumns&&(this._newDroppingColumnSetting[t]||(this._newDroppingColumnSetting[t]={dataType:this._owner.columns[t].dataType,align:this._owner.columns[t].align,format:this._owner.columns[t].format})),n=e*this._owner.columns.length+t,r=this._owner.selectedSheet._styledCells[n]?JSON.parse(JSON.stringify(this._owner.selectedSheet._styledCells[n])):void 0,i=this._owner.getCellData(e,t,!1),this._newDroppingCells.push({rowIndex:e,columnIndex:t,cellContent:i,cellStyle:r});return!0}return!1},n}(h),t._MoveCellsAction=u}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(e){function t(t,n){e.call(this,t),this._owner=n,this.applyTemplate("",this.getTemplate(),{_insRows:"insert-rows",_delRows:"delete-rows",_insCols:"insert-columns",_delCols:"delete-columns"}),this._init()}return __extends(t,e),t.prototype.show=function(e,t){var n=(t?t.x:e.clientX)+(e?window.pageXOffset:0),i=(t?t.y:e.clientY)+(e?window.pageYOffset:0);this.hostElement.style.position="absolute",this.hostElement.style.display="inline",i+this.hostElement.clientHeight>window.innerHeight&&(i-=this.hostElement.clientHeight),n+this.hostElement.clientWidth>window.innerWidth&&(n-=this.hostElement.clientWidth),this.hostElement.style.top=i+"px",this.hostElement.style.left=n+"px"},t.prototype.hide=function(){this.hostElement.style.display="none"},t.prototype._init=function(){var e=this;e.hostElement.style.zIndex="9999",document.querySelector("body").appendChild(e.hostElement),e.addEventListener(e.hostElement,"contextmenu",function(e){e.preventDefault()}),e.addEventListener(e._insRows,"click",function(){e._owner.insertRows(),e.hide(),e._owner.hostElement.focus()}),e.addEventListener(e._delRows,"click",function(){e._owner.deleteRows(),e.hide(),e._owner.hostElement.focus()}),e.addEventListener(e._insCols,"click",function(){e._owner.insertColumns(),e.hide(),e._owner.hostElement.focus()}),e.addEventListener(e._delCols,"click",function(){e._owner.deleteColumns(),e.hide(),e._owner.hostElement.focus()})},t.controlTemplate='<div class="wj-context-menu" width="150px"><div class="wj-context-menu-item" wj-part="insert-rows">Insert Row</div><div class="wj-context-menu-item" wj-part="delete-rows">Delete Rows</div><div class="wj-context-menu-item" wj-part="insert-columns">Insert Column</div><div class="wj-context-menu-item" wj-part="delete-columns">Delete Columns</div></div>',t}(e.Control);t._ContextMenu=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(e){function n(t,n){e.call(this,t),this._splitterMousedownHdl=this._splitterMousedownHandler.bind(this),this._owner=n,this.hostElement.attributes.tabindex&&this.hostElement.attributes.removeNamedItem("tabindex"),this.applyTemplate("",this.getTemplate(),{_divSheet:"left",_divSplitter:"splitter",_divRight:"right"}),this._init()}return __extends(n,e),Object.defineProperty(n.prototype,"sheetControl",{get:function(){return this._sheetControl},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return"none"!==this.hostElement.style.display},set:function(e){this.hostElement.style.display=e?"block":"none",this._divSheet.style.display=e?"block":"none"},enumerable:!0,configurable:!0}),n.prototype.getSheetBlanketSize=function(){return 20},n.prototype.adjustSize=function(){var e=this._owner.scrollSize.width-this._owner.clientSize.width,t=(this._owner.scrollSize.height-this._owner.clientSize.height,this._divSplitter.parentElement);0>=e?(t.style.minWidth="100px",this._divSplitter.style.display="none",this._divRight.style.display="none",this._divSheet.style.width="100%",this._divSplitter.removeEventListener("mousedown",this._splitterMousedownHdl,!0)):(t.style.minWidth="300px",this._divSplitter.style.display="none",this._divRight.style.display="none",this._divSheet.style.width="100%",this._divSplitter.removeEventListener("mousedown",this._splitterMousedownHdl,!0),this._divSplitter.addEventListener("mousedown",this._splitterMousedownHdl,!0)),this._sheetControl._adjustSize()},n.prototype._init=function(){var e=this;e._funSplitterMousedown=function(t){e._splitterMouseupHandler(t)},e._divSplitter.parentElement.style.height=e.getSheetBlanketSize()+"px",e._sheetControl=new t._SheetTabs(e._divSheet,this._owner)},n.prototype._splitterMousedownHandler=function(e){this._startPos=e.pageX,document.addEventListener("mousemove",this._splitterMousemoveHandler.bind(this),!0),document.addEventListener("mouseup",this._funSplitterMousedown,!0),e.preventDefault()},n.prototype._splitterMousemoveHandler=function(e){null!==this._startPos&&"undefined"!=typeof this._startPos&&this._adjustDis(e.pageX-this._startPos)},n.prototype._splitterMouseupHandler=function(e){document.removeEventListener("mousemove",this._splitterMousemoveHandler,!0),document.removeEventListener("mouseup",this._funSplitterMousedown,!0),this._adjustDis(e.pageX-this._startPos),this._startPos=null},n.prototype._adjustDis=function(e){var t=this._divRight.offsetWidth-e,n=this._divSheet.offsetWidth+e;100>=t?(t=100,e=this._divRight.offsetWidth-t,n=this._divSheet.offsetWidth+e):100>=n&&(n=100,e=n-this._divSheet.offsetWidth,t=this._divRight.offsetWidth-e),0!=e&&(this._divRight.style.width=t+"px",this._divSheet.style.width=n+"px",this._startPos=this._startPos+e)},n.controlTemplate='<div><div wj-part="left" style ="float:left;height:100%;overflow:hidden"></div><div wj-part="splitter" style="float:left;height:100%;width:6px;background-color:#e9eaee;padding:2px;cursor:e-resize"><div style="background-color:#8a9eb2;height:100%"></div></div><div wj-part="right" style="float:left;height:100%;background-color:#e9eaee"></div></div>',n}(e.Control);t._TabHolder=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(n){"use strict";var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.prototype.updateCell=function(r,o,s,a,l){var c,u,h,p,d,f,g,m,v,y,_,w,b,C,x,l,S,E=r.grid,P=o,k=s;switch(r.cellType===e.grid.CellType.Cell&&this._resetCellStyle(r.columns[s],a),i.prototype.updateCell.call(this,r,o,s,a,l),l&&!l.isSingleCell&&(o=l.row,s=l.col,P=l.row2,k=l.col2),_=E._getBindingColumn(r,o,r.columns[s]),r.cellType){case e.grid.CellType.RowHeader:a.textContent=o+1+"";break;case e.grid.CellType.ColumnHeader:c=n.FlexSheet.convertNumberToAlpha(s),a.innerHTML=a.innerHTML.replace(e.escapeHtml(a.textContent),"")+c,a.style.textAlign="center";break;case e.grid.CellType.Cell:if(h=r.grid,u=o*h.columns.length+s,m=h.selectedSheet&&h.selectedSheet._styledCells?h.selectedSheet._styledCells[u]:null,r.rows[o]instanceof n.HeaderRow)a.innerHTML=e.escapeHtml(r.columns[s].header),e.addClass(a,"wj-header-row");else if(d=h.getCellValue(o,s,!1),f=h.getCellData(o,s,!1),g=null!=f&&"string"==typeof f&&"="===f[0],w=(m?m.format:null)||_.format,h.editRange&&h.editRange.contains(o,s)?!e.isNumber(d)||_.dataMap||g||(w&&(d=this._getFormattedValue(d,w)),y=a.querySelector("input"),y&&(y.value=d)):r.rows[o]instanceof t.GroupRow||(r.columns[s].dataType===e.DataType.Boolean?(v=a.querySelector('[type="checkbox"]'),v&&(v.checked=h.getCellValue(o,s))):_.dataMap?(d=h.getCellValue(o,s,!0),p=a.firstChild,p&&3===p.nodeType&&p.nodeValue!==d&&(p.nodeValue=d)):(d=!e.isNumber(d)||g||w?h.getCellValue(o,s,!0):h.getCellData(o,s,!0),a.innerHTML=d)),m){b=a.style;for(x in m)"className"===x?m.className&&e.addClass(a,m.className+"-style"):"format"!==x&&(C=m[x])&&(b[x]=!e.hasClass(a,"wj-state-selected")&&!e.hasClass(a,"wj-state-multi-selected")||"color"!==x&&"backgroundColor"!==x?C:"")}E.itemFormatter&&E.itemFormatter(r,o,s,a),E.formatItem.hasHandlers&&(l=t.CellFactory._fmtRng,l?l.setRange(o,s,P,k):l=t.CellFactory._fmtRng=new t.CellRange(o,s,P,k),S=new t.FormatItemEventArgs(r,l,a),E.onFormatItem(S)),!a.style.backgroundColor&&!a.style.color||(m||(h.selectedSheet._styledCells[u]=m={}),!a.style.backgroundColor||(m.backgroundColor=a.style.backgroundColor),!a.style.color||(m.color=a.style.color))}r.cellType===t.CellType.Cell&&(o!==E._lastVisibleFrozenRow||e.hasClass(a,"wj-frozen-row")||e.addClass(a,"wj-frozen-row"),s!==E._lastVisibleFrozenColumn||e.hasClass(a,"wj-frozen-col")||e.addClass(a,"wj-frozen-col"))},r.prototype._resetCellStyle=function(e,t){["fontFamily","fontSize","fontStyle","fontWeight","textDecoration","textAlign","verticalAlign","backgroundColor","color"].forEach(function(n){"textAlign"===n?t.style.textAlign=e.getAlignment():t.style[n]=""})},r.prototype._getFormattedValue=function(t,n){return t!==Math.round(t)&&(n=n.replace(/([a-z])(\d*)(.*)/gi,"$0112$3")),e.Globalize.formatNumber(t,n,!0)},r}(t.CellFactory);n._FlexSheetCellFactory=i}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(n){"use strict";var i,r,o,s,a=[{name:"abs",description:"Returns the absolute value of a number."},{name:"acos",description:"Returns the arccosine of a number."},{name:"and",description:"Returns TRUE if all of its arguments are TRUE."},{name:"asin",description:"Returns the arcsine of a number."},{name:"atan",description:"Returns the arctangent of a number."},{name:"atan2",description:"Returns the arctangent from x- and y-coordinates."},{name:"average",description:"Returns the average of its arguments."},{name:"ceiling",description:"Rounds a number to the nearest integer or to the nearest multiple of significance."},{name:"char",description:"Returns the character specified by the code number."},{name:"choose",description:"Chooses a value from a list of values."},{name:"code",description:"Returns a numeric code for the first character in a text string."},{name:"column",description:"Returns the column number of a reference."},{name:"columns",description:"Returns the number of columns in a reference."},{name:"concatenate",description:"Joins several text items into one text item."},{name:"cos",description:"Returns the cosine of a number."},{name:"count",description:"Counts how many numbers are in the list of arguments."},{name:"counta",description:"Counts how many values are in the list of arguments."},{name:"countblank",description:"Counts the number of blank cells within a range."},{name:"countif",description:"Counts the number of cells within a range that meet the given criteria."},{name:"countifs",description:"Counts the number of cells within a range that meet multiple criteria."},{name:"date",description:"Returns the serial number of a particular date."},{name:"datedif",description:"Calculates the number of days, months, or years between two dates."},{name:"day",description:"Converts a serial number to a day of the month."},{name:"dcount",description:"Counts the cells that contain numbers in a database."},{name:"exp",description:"Returns e raised to the power of a given number."},{name:"false",description:"Returns the logical value FALSE."},{name:"find",description:"Finds one text value within another (case-sensitive)."},{name:"floor",description:"Rounds a number down, toward zero."},{name:"hlookup",description:"Looks in the top row of an array and returns the value of the indicated cell."},{name:"hour",description:"Converts a serial number to an hour."},{name:"if",description:"Specifies a logical test to perform."},{name:"index",description:"Uses an index to choose a value from a reference."},{name:"left",description:"Returns the leftmost characters from a text value."},{name:"len",description:"Returns the number of characters in a text string."},{name:"ln",description:"Returns the natural logarithm of a number."},{name:"lower",description:"Converts text to lowercase."},{name:"max",description:"Returns the maximum value in a list of arguments."},{name:"mid",description:"Returns a specific number of characters from a text string starting at the position you specify."},{name:"min",description:"Returns the minimum value in a list of arguments."},{name:"mod",description:"Returns the remainder from division."},{name:"month",description:"Converts a serial number to a month."},{name:"not",description:"Reverses the logic of its argument."},{name:"now",description:"Returns the serial number of the current date and time."},{name:"or",description:"Returns TRUE if any argument is TRUE."},{name:"pi",description:"Returns the value of pi."},{name:"power",description:"Returns the result of a number raised to a power."},{name:"product",description:"Multiplies its arguments."},{name:"proper",description:"Capitalizes the first letter in each word of a text value."},{name:"rand",description:"Returns a random number between 0 and 1."},{name:"rank",description:"Returns the rank of a number in a list of numbers."},{name:"rate",description:"Returns the interest rate per period of an annuity."},{name:"replace",description:"Replaces characters within text."},{name:"rept",description:"Repeats text a given number of times."},{name:"right",description:"Returns the rightmost characters from a text value."},{name:"round",description:"Rounds a number to a specified number of digits."},{name:"rounddown",description:"Rounds a number down, toward zero."},{name:"roundup",description:"Rounds a number up, away from zero."},{name:"row",description:"Returns the row number of a reference."},{name:"rows",description:"Returns the number of rows in a reference."},{name:"search",description:"Finds one text value within another (not case-sensitive)."},{name:"sin",description:"Returns the sine of the given angle."},{name:"sqrt",description:"Returns a positive square root."},{name:"stdev",description:"Estimates standard deviation based on a sample."},{name:"stdevp",description:"Calculates standard deviation based on the entire population."},{name:"substitute",description:"Substitutes new text for old text in a text string."},{name:"subtotal",description:"Returns a subtotal in a list or database."},{name:"sum",description:"Adds its arguments."},{name:"sumif",description:"Adds the cells specified by a given criteria."},{name:"sumifs",description:"Adds the cells in a range that meet multiple criteria."},{name:"tan",description:"Returns the tangent of a number."},{name:"text",description:"Formats a number and converts it to text."},{name:"time",description:"Returns the serial number of a particular time."},{name:"today",description:"Returns the serial number of today's date."},{name:"trim",description:"Removes spaces from text."},{name:"true",description:"Returns the logical value TRUE."},{name:"trunc",description:"Truncates a number to an integer."},{name:"upper",description:"Converts text to uppercase."},{name:"value",description:"Converts a text argument to a number."},{name:"var",description:"Estimates variance based on a sample."},{name:"varp",description:"Calculates variance based on the entire population."},{name:"year",description:"Converts a serial number to a year."}],l=function(r){function l(i,o){r.call(this,i,o),this._selectedSheetIndex=-1,this._columnHeaderClicked=!1,this._addingSheet=!1,this._mouseMoveHdl=this._mouseMove.bind(this),this._clickHdl=this._click.bind(this),this._touchStartHdl=this._touchStart.bind(this),this._touchEndHdl=this._touchEnd.bind(this),this._isClicking=!1,this.selectedSheetChanged=new e.Event,this.draggingRowColumn=new e.Event,this.droppingRowColumn=new e.Event,this.loaded=new e.Event,this.unknownFunction=new e.Event,this.sheetCleared=new e.Event,this._eCt.style.backgroundColor="white",e.addClass(this.hostElement,"wj-flexsheet"),e.setCss(this.hostElement,{fontFamily:"Arial"}),this._cf=new n._FlexSheetCellFactory,this._init(),this.showSort=!1,this.allowSorting=!1,this.showGroups=!1,this.showMarquee=!0,this.showSelectedHeaders=t.HeadersVisibility.All,this.allowResizing=t.AllowResizing.Both,this.allowDragging=t.AllowDragging.None}return __extends(l,r),Object.defineProperty(l.prototype,"sheets",{get:function(){return this._sheets||(this._sheets=new n.SheetCollection,this._sheets.selectedSheetChanged.addHandler(this._selectedSheetChange,this),this._sheets.collectionChanged.addHandler(this._sourceChange,this),this._sheets.sheetVisibleChanged.addHandler(this._sheetVisibleChange,this),this._sheets.sheetCleared.addHandler(this.onSheetCleared,this)),this._sheets},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectedSheetIndex",{get:function(){return this._selectedSheetIndex},set:function(e){e!==this._selectedSheetIndex&&(this._showSheet(e),this._sheets.selectedIndex=e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectedSheet",{get:function(){return this._sheets[this._selectedSheetIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isFunctionListOpen",{get:function(){return this._functionListHost&&"none"!==this._functionListHost.style.display},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isTabHolderVisible",{get:function(){return this._tabHolder.visible},set:function(e){e!==this._tabHolder.visible&&(this._divContainer.style.height=e?this._divContainer.parentElement.clientHeight-this._tabHolder.getSheetBlanketSize()+"px":this._divContainer.parentElement.clientHeight+"px",this._tabHolder.visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"undoStack",{get:function(){return this._undoStack},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"sortManager",{get:function(){return this._sortManager},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"showFilterIcons",{get:function(){return this._filter?this._filter.showFilterIcons:!1},set:function(e){!this._filter||this._filter.showFilterIcons===e||(this._filter.showFilterIcons=e)},enumerable:!0,configurable:!0}),l.prototype.onSelectedSheetChanged=function(e){this._sortManager._refresh(),this.selectedSheetChanged.raise(this,e)},l.prototype.onDraggingRowColumn=function(e){this.draggingRowColumn.raise(this,e)},l.prototype.onDroppingRowColumn=function(){this.droppingRowColumn.raise(this,new e.EventArgs)},l.prototype.onLoaded=function(){var t=this;t._toRefresh&&(clearTimeout(t._toRefresh),t._toRefresh=null),t._toRefresh=setTimeout(function(){t._setFlexSheetToDirty(),t.invalidate()},10),t.loaded.raise(this,new e.EventArgs)},l.prototype.onUnknownFunction=function(e){this.unknownFunction.raise(this,e)},l.prototype.onSheetCleared=function(){this.sheetCleared.raise(this,new e.EventArgs)},l.prototype.refresh=function(e){var t,n;if(void 0===e&&(e=!0),this._divContainer.style.height=this._divContainer.parentElement.clientHeight-(this.isTabHolderVisible?this._tabHolder.getSheetBlanketSize():0)+"px",this.preserveSelectedState||!this.selectedSheet||(this.selectedSheet.selectionRanges.clear(),this.selectedSheet.selectionRanges.push(this.selection)),e&&this._calcEngine._clearExpressionCache(),this._lastVisibleFrozenRow=-1,this.frozenRows>0)for(t=this.frozenRows-1;t>=0;t--)if(this.rows[t]&&this.rows[t].isVisible){this._lastVisibleFrozenRow=t;break}if(this._lastVisibleFrozenColumn=-1,this.frozenColumns>0)for(n=this.frozenColumns-1;n>=0;n--)if(this.columns[n]&&this.columns[n].isVisible){this._lastVisibleFrozenColumn=n;break}r.prototype.refresh.call(this,e),this._tabHolder.adjustSize()},l.prototype.setCellData=function(t,n,i,r){void 0===r&&(r=!1);var o=e.isString(i)&&i.length>1&&"="===i[0];return this._calcEngine._clearExpressionCache(),this.cells.setCellData(t,n,i,r&&!o)},l.prototype.containsFocus=function(){return this.isFunctionListOpen||r.prototype.containsFocus.call(this)},l.prototype.addUnboundSheet=function(e,t,n,i,r){var o=this._addSheet(e,t,n,i,r);return 0===o.selectionRanges.length&&o.selectionRanges.push(this.selection),o},l.prototype.addBoundSheet=function(e,t,n,i){var r=this._addSheet(e,0,0,n,i);return t&&(r.itemsSource=t),0===r.selectionRanges.length&&r.selectionRanges.push(this.selection),r},l.prototype.applyCellsStyle=function(e,t,i){void 0===i&&(i=!1);var r,o,s,a,l,c=t||[this.selection];if(this.selectedSheet){if(!e&&this._cloneStyle)return this.selectedSheet._styledCells=JSON.parse(JSON.stringify(this._cloneStyle)),this._cloneStyle=null,void this.refresh(!1);if(c){for(t||i?i&&!this._cloneStyle&&(this._cloneStyle=JSON.parse(JSON.stringify(this.selectedSheet._styledCells))):(l=new n._CellStyleAction(this,this._cloneStyle),this._cloneStyle=null),a=0;a<c.length;a++)for(s=c[a],r=s.topRow;r<=s.bottomRow;r++)for(o=s.leftCol;o<=s.rightCol;o++)this._applyStyleForCell(r,o,e);t||i||(l.saveNewState(),this._undoStack._addAction(l))}t||this.refresh(!1)}},l.prototype.freezeAtCursor=function(){var e,t,n,i,r,o,a=this;if(a.selectedSheet){if(a.selection&&0===a.frozenRows&&0===a.frozenColumns){if(a._ptScrl.y<0)for(e=0;e<a.selection.topRow-1;e++)if(r=a.rows[e],!(r instanceof s)){if(!(r._pos+a._ptScrl.y<0)){a.selectedSheet._freezeHiddenRowCnt=e;break}r.visible=!1}if(a._ptScrl.x<0)for(t=0;t<a.selection.leftCol-1;t++){if(o=a.columns[t],!(o._pos+a._ptScrl.x<0)){a.selectedSheet._freezeHiddenColumnCnt=t;break}a.columns[t].visible=!1}n=a.selection.leftCol>0?a.selection.leftCol:0,i=a.selection.topRow>0?a.selection.topRow:0}else{for(e=0;e<a.frozenRows-1;e++)a.rows[e].visible=!0;for(t=0;t<a.frozenColumns-1;t++)a.columns[t].visible=!0;a._filter.apply(),n=0,i=0,a.selectedSheet._freezeHiddenRowCnt=0,a.selectedSheet._freezeHiddenColumnCnt=0}a.frozenRows=a.selectedSheet.grid.frozenRows=i,a.frozenColumns=a.selectedSheet.grid.frozenColumns=n,setTimeout(function(){a._setFlexSheetToDirty(),a.invalidate(),a.scrollIntoView(a.selection.topRow,a.selection.leftCol)},10)}},l.prototype.showColumnFilter=function(){var e=this.selection.col>0?this.selection.col:0;this.columns.length>0&&this._filter.editColumnFilter(this.columns[e])},l.prototype.clear=function(){this.selection=new t.CellRange,this.sheets.clear(),this._selectedSheetIndex=-1,this.columns.clear(),this.rows.clear(),this.columnHeaders.columns.clear(),this.rowHeaders.rows.clear(),this._undoStack.clear(),this._ptScrl=new e.Point,this._clearCalcEngine(),this.addUnboundSheet()},l.prototype.getSelectionFormatState=function(){var e,t,n=this.rows.length,i=this.columns.length,r={isBold:!1,isItalic:!1,isUnderline:!1,textAlign:"left",isMergedCell:!1};if(0===n||0===i)return r;if(this.selection){if(this.selection.row>=n||this.selection.row2>=n||this.selection.col>=i||this.selection.col2>=i)return r;for(e=this.selection.topRow;e<=this.selection.bottomRow;e++)for(t=this.selection.leftCol;t<=this.selection.rightCol;t++)this._checkCellFormat(e,t,r)}return r},l.prototype.insertRows=function(i,r){var o,a=e.isNumber(i)&&i>=0?i:this.selection&&this.selection.topRow>-1?this.selection.topRow:0,l=e.isNumber(r)?r:1,c=new n._RowsChangedAction(this),u=this.rows[a];if(this.selectedSheet&&!this.itemsSource){for(this._clearCalcEngine(),this.finishEditing(),0===a&&u&&u.constructor===s&&(a=1),this._updateCellsForUpdatingRow(this.rows.length,a,l),c._affecedFormulas=this._updateAffectedFormula(a,l,!0,!0),this.rows.beginUpdate(),o=0;l>o;o++)this.rows.insert(a,new t.Row);this.rows.endUpdate(),this.selection&&-1!==this.selection.row&&-1!==this.selection.col||(this.selection=new t.CellRange(0,0)),this._copyTo(this.selectedSheet),c.saveNewState(),this._undoStack._addAction(c)}},l.prototype.deleteRows=function(i,r){var o,a,l,c=e.isNumber(r)&&r>=0?r:this.selection&&this.selection.topRow>-1?this.selection.bottomRow-this.selection.topRow+1:1,u=e.isNumber(i)&&i>=0?i:this.selection&&this.selection.topRow>-1?this.selection.topRow:-1,h=e.isNumber(i)&&i>=0?i+c-1:this.selection&&this.selection.topRow>-1?this.selection.bottomRow:-1,p=new n._RowsChangedAction(this),d=!1;if(this.selectedSheet&&!this.itemsSource&&(this._clearCalcEngine(),this.finishEditing(),u>-1&&h>-1)){for(this._updateCellsForUpdatingRow(this.rows.length,u,c,!0),p._affecedFormulas=this._updateAffectedFormula(h,h-u+1,!1,!0),this.rows.beginUpdate();h>=u;h--)o=this.rows[h],o&&o.constructor===s||(o.dataItem&&this.collectionView?(this.collectionView.beginUpdate(),a=this._getCvIndex(h),a>-1&&this.itemsSource.splice(h-1,1),this.collectionView.endUpdate()):this.rows.removeAt(h),d=!0);this.rows.endUpdate(),l=this.rows.length,0===l?(this.selectedSheet.selectionRanges.clear(),this.select(new t.CellRange),"move"===this.hostElement.style.cursor&&(this.hostElement.style.cursor="default")):h===l-1?this.select(new t.CellRange(h,0,h,this.columns.length-1)):this.select(new t.CellRange(this.selection.topRow,this.selection.col,this.selection.topRow,this.selection.col2)),this._copyTo(this.selectedSheet),d&&(p.saveNewState(),this._undoStack._addAction(p))}},l.prototype.insertColumns=function(i,r){var o,s=e.isNumber(i)&&i>=0?i:this.selection&&this.selection.leftCol>-1?this.selection.leftCol:0,a=e.isNumber(r)?r:1,l=new n._ColumnsChangedAction(this);if(this.selectedSheet&&!this.itemsSource){for(this._clearCalcEngine(),this.finishEditing(),this._updateCellsForUpdatingColumn(this.columns.length,s,a),l._affectedFormulas=this._updateAffectedFormula(s,a,!0,!1),this.columns.beginUpdate(),o=0;a>o;o++)this.columns.insert(s,new t.Column);this.columns.endUpdate(),this.selection&&-1!==this.selection.row&&-1!==this.selection.col||(this.selection=new t.CellRange(0,0)),this._copyTo(this.selectedSheet),l.saveNewState(),this._undoStack._addAction(l)}},l.prototype.deleteColumns=function(i,r){var o,s=e.isNumber(r)&&r>=0?r:this.selection&&this.selection.leftCol>-1?this.selection.rightCol-this.selection.leftCol+1:1,a=e.isNumber(i)&&i>=0?i:this.selection&&this.selection.leftCol>-1?this.selection.leftCol:-1,l=e.isNumber(i)&&i>=0?i+s-1:this.selection&&this.selection.leftCol>-1?this.selection.rightCol:-1,c=new n._ColumnsChangedAction(this);if(this.selectedSheet&&!this.itemsSource&&(this._clearCalcEngine(),this.finishEditing(),a>-1&&l>-1)){for(this._updateCellsForUpdatingColumn(this.columns.length,a,s,!0),c._affectedFormulas=this._updateAffectedFormula(l,l-a+1,!1,!1),this.columns.beginUpdate();l>=a;l--)this.columns.removeAt(l),this._sortManager.deleteSortLevel(l);this.columns.endUpdate(),this._sortManager.commitSort(!1),o=this.columns.length,0===o?(this.selectedSheet.selectionRanges.clear(),this.select(new t.CellRange),"move"===this.hostElement.style.cursor&&(this.hostElement.style.cursor="default")):l===o-1?this.select(new t.CellRange(0,l,this.rows.length-1,l)):this.select(new t.CellRange(this.selection.row,this.selection.leftCol,this.selection.row2,this.selection.leftCol)),this._copyTo(this.selectedSheet),c.saveNewState(),this._undoStack._addAction(c)}},l.prototype.mergeRange=function(e,i){void 0===i&&(i=!1);var r,o,s,a,l=e||this.selection;if(this.selectedSheet){if(l){if(1===l.rowSpan&&1===l.columnSpan)return;if(e||i||(a=new n._CellMergeAction(this),this.hostElement.focus()),!this._resetMergedRange(l))for(r=l.topRow;r<=l.bottomRow;r++)for(o=l.leftCol;o<=l.rightCol;o++)s=r*this.columns.length+o,this.selectedSheet._mergedRanges[s]=new t.CellRange(l.topRow,l.leftCol,l.bottomRow,l.rightCol);e||i||(a.saveNewState(),this._undoStack._addAction(a))}e||this.refresh()}},l.prototype.getMergedRange=function(e,n,i,o){void 0===o&&(o=!0);var s,a,l,c,u=n*this.columns.length+i,h=this.selectedSheet?this.selectedSheet._mergedRanges[u]:null;
return e===this.cells&&h?!h.isSingleCell&&(this.frozenRows>0||this.frozenColumns>0)&&(h.topRow<this.frozenRows&&h.bottomRow>=this.frozenRows||h.leftCol<this.frozenColumns&&h.rightCol>=this.frozenColumns)?(s=h.topRow,a=h.bottomRow,l=h.leftCol,c=h.rightCol,n>=this.frozenRows&&h.topRow<this.frozenRows&&(s=this.frozenRows),n<this.frozenRows&&h.bottomRow>=this.frozenRows&&(a=this.frozenRows-1),a>=this.rows.length&&(a=this.rows.length-1),i>=this.frozenColumns&&h.leftCol<this.frozenColumns&&(l=this.frozenColumns),i<this.frozenColumns&&h.rightCol>=this.frozenColumns&&(c=this.frozenColumns-1),c>=this.columns.length&&(c=this.columns.length-1),new t.CellRange(s,l,a,c)):h.bottomRow>=this.rows.length?new t.CellRange(h.topRow,h.leftCol,this.rows.length-1,h.rightCol):h.rightCol>=this.columns.length?new t.CellRange(h.topRow,h.leftCol,h.bottomRow,this.columns.length-1):h.clone():i>=0&&this.columns&&this.columns.length>i&&n>=0&&this.rows&&this.rows.length>i?r.prototype.getMergedRange.call(this,e,n,i,o):null},l.prototype.evaluate=function(e,t,n){return this._evaluate(e,t,n)},l.prototype.getCellValue=function(t,n,i,r){void 0===i&&(i=!1);var o,s,a,l=this.columns[n],c=t*this.columns.length+n;return o=r?r._styledCells[c]:this.selectedSheet?this.selectedSheet._styledCells[c]:null,s=o&&o.format?o.format:"",a=r?r.grid.getCellData(t,n,!1):this.getCellData(t,n,!1),e.isString(a)&&"="===a[0]&&(a=this._evaluate(a,i?s:"",r,t,n)),e.isPrimitive(a)?i&&(l.dataMap&&(a=l.dataMap.getDisplayValue(a)),a=null!=a?e.Globalize.format(a,s||l.format):""):a&&(a=i?e.Globalize.format(a.value,s||a.format||l.format):a.value),null==a?"":a},l.prototype.showFunctionList=function(t){var n,i,r=this,o=r._cumulativeOffset(t),s=r._cumulativeOffset(r._root);r._functionTarget=e.tryCast(t,HTMLInputElement),r._functionTarget&&r._functionTarget.value&&"="===r._functionTarget.value[0]?(r._functionList._cv.filter=function(e){var t,n=e.actualvalue.toLowerCase(),i=r._getCurrentFormulaIndex(r._functionTarget.value);return-1===i&&(i=0),t=r._functionTarget.value.substr(i+1).trim().toLowerCase(),t.length>0&&0===n.indexOf(t)||"="===r._functionTarget.value?!0:!1},r._functionList.selectedIndex=0,n=o.y+t.clientHeight+2+(e.hasClass(t,"wj-grid-editor")?this._ptScrl.y:0),i=o.x+(e.hasClass(t,"wj-grid-editor")?this._ptScrl.x:0),e.setCss(r._functionListHost,{height:r._functionList._cv.items.length>5?"218px":"auto",display:r._functionList._cv.items.length>0?"block":"none",top:"",left:""}),r._functionListHost.scrollTop=0,r._functionListHost.offsetHeight+n>s.y+r._root.offsetHeight?n=n-t.clientHeight-r._functionListHost.offsetHeight-5:n+=5,r._functionListHost.offsetWidth+i>s.x+r._root.offsetWidth&&(i=s.x+r._root.offsetWidth-r._functionListHost.offsetWidth),e.setCss(r._functionListHost,{top:n,left:i})):r.hideFunctionList()},l.prototype.hideFunctionList=function(){this._functionListHost.style.display="none"},l.prototype.selectPreviousFunction=function(){var e=this._functionList.selectedIndex;e>0&&this._functionList.selectedIndex--},l.prototype.selectNextFunction=function(){var e=this._functionList.selectedIndex;e<this._functionList.itemsSource.length&&this._functionList.selectedIndex++},l.prototype.applyFunctionToCell=function(){var e,t=this;t._functionTarget&&(e=t._getCurrentFormulaIndex(t._functionTarget.value),-1===e?e=t._functionTarget.value.indexOf("="):e+=1,t._functionTarget.value=t._functionTarget.value.substring(0,e)+t._functionList.selectedValue+"(","="!==t._functionTarget.value[0]&&(t._functionTarget.value="="+t._functionTarget.value),t._functionTarget.focus(),t.hideFunctionList())},l.prototype.save=function(e){var t=this._saveToWorkbook();return e&&t.save(e),t},l.prototype.saveToWorkbookOM=function(){var e=this._saveToWorkbook();return e._serialize()},l.prototype.load=function(t){var n,i,r=this;if(t instanceof Blob)i=new FileReader,i.onload=function(){var t=i.result;t=e.xlsx.Workbook._base64EncArr(new Uint8Array(t)),n=new e.xlsx.Workbook,n.load(t),r._loadFromWorkbook(n)},i.readAsArrayBuffer(t);else if(t instanceof e.xlsx.Workbook)r._loadFromWorkbook(t);else{if(t instanceof ArrayBuffer)t=e.xlsx.Workbook._base64EncArr(new Uint8Array(t));else if(!e.isString(t))throw"Invalid workbook.";n=new e.xlsx.Workbook,n.load(t),r._loadFromWorkbook(n)}},l.prototype.loadFromWorkbookOM=function(t){var n;t instanceof e.xlsx.Workbook?n=t:(n=new e.xlsx.Workbook,n._deserialize(t)),this._loadFromWorkbook(n)},l.prototype.undo=function(){var e=this;setTimeout(function(){e._undoStack.undo()},100)},l.prototype.redo=function(){var e=this;setTimeout(function(){e._undoStack.redo()},100)},l.prototype.select=function(e,t){void 0===t&&(t=!0);var n,i,o;if(e.rowSpan!==this.rows.length&&e.columnSpan!==this.columns.length)for(i=e.topRow;i<=e.bottomRow;i++)for(o=e.leftCol;o<=e.rightCol;o++)n=this.getMergedRange(this.cells,i,o),n&&!e.equals(n)&&(e.row<=e.row2?(e.row=Math.min(e.topRow,n.topRow),e.row2=Math.max(e.bottomRow,n.bottomRow)):(e.row=Math.max(e.bottomRow,n.bottomRow),e.row2=Math.min(e.topRow,n.topRow)),e.col<=e.col2?(e.col=Math.min(e.leftCol,n.leftCol),e.col2=Math.max(e.rightCol,n.rightCol)):(e.col=Math.max(e.rightCol,n.rightCol),e.col2=Math.min(e.leftCol,n.leftCol)));this.collectionView&&0===e.topRow&&e.bottomRow===this.rows.length-1&&0===e.leftCol&&e.rightCol===this.columns.length-1&&(e.row=1,e.row2=this.rows.length-1),r.prototype.select.call(this,e,t)},l.prototype.addCustomFunction=function(e,t,n,i,r){this._calcEngine.addCustomFunction(e,t,i,r),this._addCustomFunctionDescription(e,n)},l.prototype.dispose=function(){var e=window.navigator.userAgent;document.removeEventListener("mousemove",this._mouseMoveHdl),document.body.removeEventListener("click",this._clickHdl),(e.match(/iPad/i)||e.match(/iPhone/i))&&(document.body.removeEventListener("touchstart",this._touchStartHdl),document.body.removeEventListener("touchend",this._touchEndHdl)),this.hideFunctionList(),r.prototype.dispose.call(this)},l.prototype.getClipString=function(e){var t,n,i,o,s,a,l=r.prototype.getClipString.call(this,e);if(!e)if(this._isMultipleRowsSelected())for(l="",t=this.selectedSheet.selectionRanges.slice(0),t.sort(this._sortByRow),i=0;i<t.length;i++)l&&(l+="\n"),l+=this.getClipString(t[i]);else if(this._isMultipleColumnsSelected())for(l="",t=this.selectedSheet.selectionRanges.slice(0),t.sort(this._sortByColumn),n=0,o=!0;n<this.rows.length;n++)for(o||(l+="\n"),o=!1,i=0,s=!0;i<t.length;i++)a=t[i].clone(),a.row=a.row2=n,s||(l+="	"),s=!1,l+=this.getClipString(a);return l},l.prototype.setClipString=function(n,i){var o,s,a,l,c,u,h,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P=null==i,k=!1;if(!this._copiedRange)return void r.prototype.setClipString.call(this,n,i);for(i=i?e.asType(i,t.CellRange):this.selection,n=e.asString(n).replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n&&"\n"==n[n.length-1]&&(n=n.substring(0,n.length-1)),P&&!i.isSingleCell&&(n=this._expandClipString(n,i)),o=new t.CellRange(i.topRow,i.leftCol),this.beginUpdate(),s=i.topRow,a=this._copiedRange.topRow,C=s-a,d=n.split("\n"),v=0;v<d.length&&s<this.rows.length;v++,s++)if(this.rows[s].isVisible){for(f=d[v].split("	"),l=this._copiedRange.leftCol,c=i.leftCol,x=c-l,E=0;E<f.length&&c<this.columns.length;E++,c++)if(this.columns[c].isVisible){if(!this.columns[c].isReadOnly&&!this.rows[s].isReadOnly){if(g=f[E],!!g&&"string"==typeof g&&"="===g[0]&&(0!==C||0!==x)&&(m=g.match(/(?=\b\D)\$?[A-Za-z]+\$?\d+/g),!!m&&m.length>0))for(y=0;y<m.length;y++)_=m[y],"atan2"!==_.toLowerCase()&&(w=e.xlsx.Workbook.tableAddress(_),w.row+=C,w.col+=x,b=e.xlsx.Workbook.xlsxAddress(w.row,w.col,w.absRow,w.absCol),g=g.replace(_,b));u=this.getMergedRange(this.cells,a,l),!u||u.topRow!==a||u.leftCol!==l||(h=s+u.rowSpan-1,h=h<this.rows.length?h:this.rows.length-1,p=c+u.columnSpan-1,p=p<this.columns.length?p:this.columns.length-1,this.mergeRange(new t.CellRange(s,c,h,p),!0)),S=new t.CellRangeEventArgs(this.cells,new t.CellRange(s,c),g),this.onPastingCell(S)&&this.cells.setCellData(s,c,g)&&(this.onPastedCell(S),k=!0),o.row2=Math.max(o.row2,s),o.col2=Math.max(o.col2,c)}l++}else E--;a++}else v--;this.endUpdate(),this.collectionView&&k&&this.collectionView.refresh(),this.select(o)},l.prototype._getCvIndex=function(e){var t;return e>-1&&this.collectionView?(t=this.rows[e],t instanceof s?e:t.dataItem?r.prototype._getCvIndex.call(this,e):this.collectionView.currentPosition):-1},l.prototype._init=function(){var i=this,r=this,a=window.navigator.userAgent,l=function(e){document.removeEventListener("mouseup",l),r._mouseUp(e)};r._divContainer=r.hostElement.querySelector('[wj-part="container"]'),r._tabHolder=new n._TabHolder(r.hostElement.querySelector('[wj-part="tab-holder"]'),r),r._contextMenu=new n._ContextMenu(r.hostElement.querySelector('[wj-part="context-menu"]'),r),r._gpCells=new o(r,t.CellType.Cell,r.rows,r.columns,r._eCt),r._gpCHdr=new o(r,t.CellType.ColumnHeader,r._hdrRows,r.columns,r._eCHdrCt),r._gpRHdr=new o(r,t.CellType.RowHeader,r.rows,r._hdrCols,r._eRHdrCt),r._gpTL=new o(r,t.CellType.TopLeft,r._hdrRows,r._hdrCols,r._eTLCt),r._sortManager=new n.SortManager(r),r._filter=new n._FlexSheetFilter(r),r._filter.filterApplied.addHandler(function(){r._wholeColumnsSelected&&(r.selection=new t.CellRange(r.selection.topRow,r.selection.col,r.rows.length-1,r.selection.col2))}),r._calcEngine=new n._CalcEngine(r),r._calcEngine.unknownFunction.addHandler(function(e,t){r.onUnknownFunction(t)},r),r._initFuncsList(),r._undoStack=new n.UndoStack(r),r.loadedRows.addHandler(function(){!r.itemsSource||r.rows[0]instanceof s||r.rows.insert(0,new s),r._filter&&r._filter.apply()}),r.itemsSourceChanged.addHandler(function(){for(var e=0;e<r.columns.length;e++)r.columns[e].isRequired=!1}),r.copied.addHandler(function(e,t){var n;r._isMultipleRowsSelected()?(n=r.selectedSheet.selectionRanges.slice(0),n.sort(r._sortByRow),r._copiedRange=n[0]):r._isMultipleColumnsSelected()?(n=r.selectedSheet.selectionRanges.slice(0),n.sort(r._sortByColumn),r._copiedRange=n[0]):r._copiedRange=t.range}),r.rows.collectionChanged.addHandler(function(){r._clearForEmptySheet("rows")},r),r.columns.collectionChanged.addHandler(function(){r._clearForEmptySheet("columns")},r),r.addEventListener(r.hostElement,"mousedown",function(e){document.addEventListener("mouseup",l),r._isDescendant(r._divContainer,e.target)&&r._mouseDown(e)},!0),r.addEventListener(r.hostElement,"drop",function(){r._columnHeaderClicked=!1}),r.addEventListener(r.hostElement,"contextmenu",function(n){var o,s,a,l,c,u,h;n.defaultPrevented||r._edtHdl.activeEditor||(0===n.pageX&&0===n.pageY&&r.selection.row>-1&&r.selection.col>-1&&r.rows.length>0&&r.columns.length>0?(a=r.columns[r.selection.col],s=r.rows[r.selection.row],l=a.pos+r.hostElement.offsetLeft+i._ptScrl.x,c=s.pos+r.hostElement.offsetTop+i._ptScrl.y,u=new e.Point(l+a.renderSize,c+s.renderSize),o=r.hitTest(l,c)):o=r.hitTest(n),n.preventDefault(),o&&o.cellType!==t.CellType.None&&(i.itemsSource||r._contextMenu.show(n,u),h=new t.CellRange(o.row,o.col),o.cellType!==t.CellType.Cell||h.intersects(r.selection)||(r.selectedSheet&&r.selectedSheet.selectionRanges.clear(),r.selection=h,r.selectedSheet.selectionRanges.push(h))))}),r.prepareCellForEdit.addHandler(r._prepareCellForEditHandler,r),r.cellEditEnded.addHandler(function(){setTimeout(function(){r.hideFunctionList()},200)}),r.cellEditEnding.addHandler(function(){r._clearCalcEngine()}),r.pasted.addHandler(function(){r._clearCalcEngine()}),r.addEventListener(r.hostElement,"keydown",function(i){var o,s,a;if(i.ctrlKey&&(89===i.keyCode&&(r.finishEditing(),r.redo(),i.preventDefault()),90===i.keyCode&&(r.finishEditing(),r.undo(),i.preventDefault()),!r.selectedSheet||65!==i.keyCode||(r.selectedSheet.selectionRanges.clear(),r.selectedSheet.selectionRanges.push(r.selection)),88===i.keyCode))return r.finishEditing(),s=new t.CellRangeEventArgs(r.cells,r.selection),r.onCopying(s)&&(a=r.getClipString(),e.Clipboard.copy(a),r.deferUpdate(function(){for(var t,i,o=!1,s=new n._EditAction(r),a=r.selection.topRow;a<=r.selection.bottomRow;a++)for(t=r.selection.leftCol;t<=r.selection.rightCol;t++)i=r._getBindingColumn(r.cells,a,r.columns[t]),(0==i.isRequired||null==i.isRequired&&i.dataType==e.DataType.String)&&r.getCellData(a,t,!0)&&(r.setCellData(a,t,"",!0),o=!0);o&&(s.saveNewState(),r._undoStack._addAction(s))}),r.onCopied(s)),void i.stopPropagation();if(i.keyCode===e.Key.Escape&&(r._contextMenu.hide(),i.preventDefault()),r._edtHdl.activeEditor||(i.keyCode===e.Key.Delete||i.keyCode===e.Key.Back)&&(r._delSeletionContent(),i.preventDefault()),!!r.selectedSheet)switch(i.keyCode){case e.Key.Left:case e.Key.Right:case e.Key.Up:case e.Key.Down:case e.Key.PageUp:case e.Key.PageDown:case e.Key.Home:case e.Key.End:case e.Key.Tab:case e.Key.Enter:o=r.selectedSheet.selectionRanges.length,o>0&&(r.selectedSheet.selectionRanges[o-1]=r.selection)}}),document.body.addEventListener("click",r._clickHdl),document.addEventListener("mousemove",r._mouseMoveHdl),(a.match(/iPad/i)||a.match(/iPhone/i))&&(document.body.addEventListener("touchstart",r._touchStartHdl),document.body.addEventListener("touchend",r._touchEndHdl)),r.addEventListener(r.hostElement,"drop",function(){r._htDown=null})},l.prototype._initFuncsList=function(){var t=this;t._functionListHost=document.createElement("div"),e.addClass(t._functionListHost,"wj-flexsheet-formula-list"),document.querySelector("body").appendChild(t._functionListHost),t._functionListHost.style.display="none",t._functionListHost.style.position="absolute",t._functionList=new e.input.ListBox(t._functionListHost),t._functionList.isContentHtml=!0,t._functionList.itemsSource=t._getFunctions(),t._functionList.displayMemberPath="displayValue",t._functionList.selectedValuePath="actualvalue",t.addEventListener(t._functionListHost,"click",t.applyFunctionToCell.bind(t)),t.addEventListener(t._functionListHost,"keydown",function(n){n.keyCode===e.Key.Escape&&(t.hideFunctionList(),t.hostElement.focus(),n.preventDefault()),n.keyCode===e.Key.Enter&&(t.applyFunctionToCell(),t.hostElement.focus(),n.preventDefault())})},l.prototype._getFunctions=function(){for(var e,t=[],n=0;n<a.length;n++)e=a[n],t.push({displayValue:'<div class="wj-flexsheet-formula-name">'+e.name+'</div><div class="wj-flexsheet-formula-description">'+e.description+"</div>",actualvalue:e.name});return t},l.prototype._addCustomFunctionDescription=function(e,t){for(var n,i={displayValue:'<div class="wj-flexsheet-formula-name">'+e+"</div>"+(t?'<div class="wj-flexsheet-formula-description">'+t+"</div>":""),actualvalue:e},r=this._functionList.itemsSource,o=-1,s=0;s<r.length;s++)if(n=r[s],n.actualvalue===e){o=s;break}o>-1?r.splice(o,1,i):r.push(i)},l.prototype._getCurrentFormulaIndex=function(e){var t=-1;return["+","-","*","/","^","(","&"].forEach(function(n){var i=e.lastIndexOf(n);i>t&&(t=i)}),t},l.prototype._prepareCellForEditHandler=function(){var t=this,n=t._edtHdl._edt;n&&(t.addEventListener(n,"keydown",function(n){if(t.isFunctionListOpen)switch(n.keyCode){case e.Key.Up:t.selectPreviousFunction(),n.preventDefault();break;case e.Key.Down:t.selectNextFunction(),n.preventDefault();break;case e.Key.Tab:case e.Key.Enter:t.applyFunctionToCell(),n.preventDefault();break;case e.Key.Escape:t.hideFunctionList(),n.preventDefault()}}),t.addEventListener(n,"keyup",function(i){(i.keyCode>40||i.keyCode<32)&&i.keyCode!==e.Key.Tab&&i.keyCode!==e.Key.Escape&&setTimeout(function(){t.showFunctionList(n)},0)}))},l.prototype._addSheet=function(e,t,i,r,o){var s=new n.Sheet(this,o,e,t,i);return this.sheets.isValidSheetName(s)||s._setValidName(this.sheets.getValidSheetName(s)),"number"==typeof r?(0>r&&(r=0),r>=this.sheets.length&&(r=this.sheets.length)):r=this.sheets.length,this.sheets.insert(r,s),r<=this._selectedSheetIndex&&(this._selectedSheetIndex+=1),this.selectedSheetIndex=r,s},l.prototype._showSheet=function(e){!this.sheets||!this.sheets.length||e>=this.sheets.length||0>e||e===this.selectedSheetIndex||this.sheets[e]&&!this.sheets[e].visible||(this.finishEditing(),this.selectedSheetIndex>-1&&this.selectedSheetIndex<this.sheets.length&&(this._copyTo(this.sheets[this.selectedSheetIndex]),this._resetFilterDefinition()),this.sheets[e]&&(this._selectedSheetIndex=e,this._copyFrom(this.sheets[e])),this._filter.closeEditor())},l.prototype._selectedSheetChange=function(e,t){this._showSheet(t.newValue),this.invalidate(!0),this.onSelectedSheetChanged(t)},l.prototype._sourceChange=function(t,n){var i,r;if(n.action===e.collections.NotifyCollectionChangedAction.Add||n.action===e.collections.NotifyCollectionChangedAction.Change)i=n.item,i._attachOwner(this),n.action===e.collections.NotifyCollectionChangedAction.Add?(this._addingSheet=!0,n.index<=this.selectedSheetIndex&&(this._selectedSheetIndex+=1)):n.index===this.selectedSheetIndex&&this._copyFrom(n.item,!0),this.selectedSheetIndex=n.index;else if(n.action===e.collections.NotifyCollectionChangedAction.Reset){for(r=0;r<this.sheets.length;r++)i=this.sheets[r],i._attachOwner(this);this.sheets.length>0?(0===this.selectedSheetIndex&&this._copyFrom(this.selectedSheet,!0),this.selectedSheetIndex=0):(this.rows.clear(),this.columns.clear(),this._selectedSheetIndex=-1)}else this.sheets.length>0?this.selectedSheetIndex>=this.sheets.length?this.selectedSheetIndex=0:this.selectedSheetIndex>n.index&&(this._selectedSheetIndex-=1):(this.rows.clear(),this.columns.clear(),this._selectedSheetIndex=-1);this.invalidate(!0)},l.prototype._sheetVisibleChange=function(e,t){t.item.visible||t.index===this.selectedSheetIndex&&(this.selectedSheetIndex=this.selectedSheetIndex===this.sheets.length-1?t.index-1:t.index+1)},l.prototype._applyStyleForCell=function(e,t,n){var i,r,o,a=this,l=a.rows[e];l instanceof s||!l.isVisible||(o=e*a.columns.length+t,r=a.selectedSheet._mergedRanges[o],r&&(o=r.topRow*a.columns.length+r.leftCol),i=a.selectedSheet._styledCells[o],i?(i.className="normal"===n.className?"":n.className||i.className,i.textAlign=n.textAlign||i.textAlign,i.verticalAlign=n.verticalAlign||i.verticalAlign,i.fontFamily=n.fontFamily||i.fontFamily,i.fontSize=n.fontSize||i.fontSize,i.backgroundColor=n.backgroundColor||i.backgroundColor,i.color=n.color||i.color,i.fontStyle="none"===n.fontStyle?"":n.fontStyle||i.fontStyle,i.fontWeight="none"===n.fontWeight?"":n.fontWeight||i.fontWeight,i.textDecoration="none"===n.textDecoration?"":n.textDecoration||i.textDecoration,i.format=n.format||i.format):a.selectedSheet._styledCells[o]={className:n.className,textAlign:n.textAlign,verticalAlign:n.verticalAlign,fontStyle:n.fontStyle,fontWeight:n.fontWeight,fontFamily:n.fontFamily,fontSize:n.fontSize,textDecoration:n.textDecoration,backgroundColor:n.backgroundColor,color:n.color,format:n.format})},l.prototype._checkCellFormat=function(e,t,n){var i,r,o=e*this.columns.length+t;this.selectedSheet&&(i=this.selectedSheet._mergedRanges[o],i&&(n.isMergedCell=!0,o=i.topRow*this.columns.length+i.leftCol),r=this.selectedSheet._styledCells[o],r&&(n.isBold=n.isBold||"bold"===r.fontWeight,n.isItalic=n.isItalic||"italic"===r.fontStyle,n.isUnderline=n.isUnderline||"underline"===r.textDecoration),e===this.selection.row&&t===this.selection.col&&(r&&r.textAlign?n.textAlign=r.textAlign:t>-1&&(n.textAlign=this.columns[t].getAlignment()||n.textAlign)))},l.prototype._resetMergedRange=function(e){for(var t,n,i,r,o,s,a=!1,l=e.topRow;l<=e.bottomRow;l++)for(t=e.leftCol;t<=e.rightCol;t++)if(n=l*this.columns.length+t,s=this.selectedSheet._mergedRanges[n])for(a=!0,i=s.topRow;i<=s.bottomRow;i++)for(r=s.leftCol;r<=s.rightCol;r++)o=i*this.columns.length+r,delete this.selectedSheet._mergedRanges[o];return a},l.prototype._updateCellsForUpdatingRow=function(e,t,n,i){var r,o,s,a,l,c=this,u={},h=e*this.columns.length;if(i)for(r=t*this.columns.length,o=r;h>o;o++)s=o-n*this.columns.length,a=this.selectedSheet._styledCells[o],a&&(o>=(t+n)*this.columns.length&&(this.selectedSheet._styledCells[s]=a),delete this.selectedSheet._styledCells[o]),l=this.selectedSheet._mergedRanges[o],l&&(t<=l.topRow&&t+n>l.bottomRow?delete this.selectedSheet._mergedRanges[o]:l.bottomRow<t||l.topRow>=t+n?(l.topRow>t&&(l.row-=n),l.row2-=n,this.selectedSheet._mergedRanges[s]=l,delete this.selectedSheet._mergedRanges[o]):this._updateCellMergeRangeForRow(l,t,n,u,!0));else for(r=t*this.columns.length-1,o=h-1;o>r;o--)s=o+this.columns.length*n,a=this.selectedSheet._styledCells[o],a&&(this.selectedSheet._styledCells[s]=a,delete this.selectedSheet._styledCells[o]),l=this.selectedSheet._mergedRanges[o],l&&(l.topRow<t&&l.bottomRow>=t?this._updateCellMergeRangeForRow(l,t,n,u):(l.row+=n,l.row2+=n,this.selectedSheet._mergedRanges[s]=l,delete this.selectedSheet._mergedRanges[o]));Object.keys(u).forEach(function(e){c.selectedSheet._mergedRanges[e]=u[e]})},l.prototype._updateCellMergeRangeForRow=function(e,t,n,i,r){var o,s,a,l,c,u,h;if(r)for(o=e.topRow;o<=e.bottomRow;o++)for(s=e.leftCol;s<=e.rightCol;s++)a=o*this.columns.length+s,l=a-n*this.columns.length,u=this.selectedSheet._mergedRanges[a],u&&(h=u.clone(),h.row>t&&(h.row-=h.row-t),h.row2-=h.row2<t+n-1?h.row2-t+1:n,t>o?i[a]=h:(o>=t+n&&(i[l]=h),delete this.selectedSheet._mergedRanges[a]));else for(o=e.bottomRow;o>=e.topRow;o--)for(s=e.rightCol;s>=e.leftCol;s--)if(a=o*this.columns.length+s,u=this.selectedSheet._mergedRanges[a]){for(h=u.clone(),h.row2+=n,t>o&&(i[a]=h.clone()),c=1;n>=c;c++)l=a+this.columns.length*c,i[l]=h;delete this.selectedSheet._mergedRanges[a]}},l.prototype._updateCellsForUpdatingColumn=function(e,t,n,i){var r,o,s,a,l,c,u=this,h={},p=this.rows.length*e;if(i)for(r=t;p>r;r++)a=Math.floor(r/e),l=r%e,o=r-n*(a+(l>=t?1:0)),s=this.selectedSheet._styledCells[r],s&&((t>l||l>=t+n)&&(this.selectedSheet._styledCells[o]=s),delete this.selectedSheet._styledCells[r]),c=this.selectedSheet._mergedRanges[r],c&&(t<=c.leftCol&&t+n>c.rightCol?delete this.selectedSheet._mergedRanges[r]:c.rightCol<t||c.leftCol>=t+n?(c.leftCol>=t&&(c.col-=n,c.col2-=n),this.selectedSheet._mergedRanges[o]=c,delete this.selectedSheet._mergedRanges[r]):this._updateCellMergeRangeForColumn(c,t,n,e,h,!0));else for(r=p-1;r>=t;r--)a=Math.floor(r/e),l=r%e,o=r+a*n+(l>=t?1:0),s=this.selectedSheet._styledCells[r],s&&(this.selectedSheet._styledCells[o]=s,delete this.selectedSheet._styledCells[r]),c=this.selectedSheet._mergedRanges[r],c&&(c.leftCol<t&&c.rightCol>=t?this._updateCellMergeRangeForColumn(c,t,n,e,h):(c.leftCol>=t&&(c.col+=n,c.col2+=n),this.selectedSheet._mergedRanges[o]=c,delete this.selectedSheet._mergedRanges[r]));Object.keys(h).forEach(function(e){u.selectedSheet._mergedRanges[e]=h[e]})},l.prototype._updateCellMergeRangeForColumn=function(e,t,n,i,r,o){var s,a,l,c,u,h,p;if(o)for(s=e.topRow;s<=e.bottomRow;s++)for(a=e.leftCol;a<=e.rightCol;a++)l=s*i+a,c=l-n*(s+(a>=t?1:0)),h=this.selectedSheet._mergedRanges[l],h&&(p=h.clone(),p.col>t&&(p.col-=p.col-t),p.col2-=p.col2<t+n-1?p.col2-t+1:n,(t>a||a>=t+n)&&(r[c]=p),delete this.selectedSheet._mergedRanges[l]);else for(s=e.bottomRow;s>=e.topRow;s--)for(a=e.rightCol;a>=e.leftCol;a--)if(l=s*i+a,c=l+s*n+(a>=t?1:0),h=this.selectedSheet._mergedRanges[l]){if(p=h.clone(),p.col2+=n,a===t&&(r[c-1]=p.clone()),a>=t)for(u=0;n>u;u++)r[c+u]=p;else r[c]=p;delete this.selectedSheet._mergedRanges[l]}},l.prototype._cloneMergedCells=function(){var e,t,n;if(!this.selectedSheet)return null;if(t=this.selectedSheet._mergedRanges,null==t||"object"!=typeof t)return t;if(t instanceof Object){e={};for(n in t)t.hasOwnProperty(n)&&t[n]&&t[n].clone&&(e[n]=t[n].clone());return e}throw new Error("Unable to copy obj! Its type isn't supported.")},l.prototype._evaluate=function(e,t,n,i,r){return e&&e.length>1?(e="="===e[0]?e:"="+e,this._calcEngine.evaluate(e,t,n,i,r)):e},l.prototype._copyTo=function(n){var i,r,o,s=this,a=n.grid.autoGenerateColumns;if(n._storeRowSettings(),n.grid.selection=new t.CellRange,n.grid.rows.clear(),n.grid.columns.clear(),n.grid.columnHeaders.columns.clear(),n.grid.rowHeaders.rows.clear(),s.itemsSource){if(n.grid.autoGenerateColumns=!1,n.itemsSource=s.itemsSource,n.grid.collectionView.beginUpdate(),!(n.grid.itemsSource instanceof e.collections.CollectionView))for(n.grid.collectionView.sortDescriptions.clear(),o=0;o<s.collectionView.sortDescriptions.length;o++)n.grid.collectionView.sortDescriptions.push(s.collectionView.sortDescriptions[o])}else for(n.itemsSource=null,r=0;r<s.rows.length;r++)n.grid.rows.push(s.rows[r]);for(n._filterDefinition=s._filter.filterDefinition,i=0;i<s.columns.length;i++)n.grid.columns.push(s.columns[i]);n.grid.collectionView&&(s._resetMappedColumns(n.grid),n.grid.collectionView.endUpdate()),n.grid.autoGenerateColumns=a,n.grid.frozenRows=s.frozenRows,n.grid.frozenColumns=s.frozenColumns,n.grid.selection=s.selection,n._scrollPosition=s.scrollPosition,setTimeout(function(){s._setFlexSheetToDirty(),s.refresh(!0)},10)},l.prototype._copyFrom=function(n,i){void 0===i&&(i=!0);var r,o,a,l,c,u=this,h=u.autoGenerateColumns;if(u._isCopyingOrUndoing=!0,u._dragable=!1,u.rows.clear(),u.columns.clear(),u.columnHeaders.columns.clear(),u.rowHeaders.rows.clear(),u.selection=new t.CellRange,n.selectionRanges.length>1&&u.selectionMode===t.SelectionMode.CellRange&&(u._enableMulSel=!0),n.itemsSource){if(u.autoGenerateColumns=!1,u.itemsSource=n.itemsSource,u.collectionView.beginUpdate(),!(u.itemsSource instanceof e.collections.CollectionView))for(u.collectionView.sortDescriptions.clear(),a=0;a<n.grid.collectionView.sortDescriptions.length;a++)u.collectionView.sortDescriptions.push(n.grid.collectionView.sortDescriptions[a])}else for(u.itemsSource=null,o=0;o<n.grid.rows.length;o++)u.rows.push(n.grid.rows[o]);for(r=0;r<n.grid.columns.length;r++)u.columns.push(n.grid.columns[r]);if(u.collectionView)for(u._resetMappedColumns(u),u.collectionView.endUpdate(),u.collectionView.collectionChanged.addHandler(function(t,n){n.action===e.collections.NotifyCollectionChangedAction.Reset&&u.invalidate()},u),o=0;o<u.rows.length;o++)c=n._rowSettings[o],c&&(u.rows[o].height=c.height);if(u.rows.length&&u.columns.length&&(u.selection=n.grid.selection),n._filterDefinition&&(u._filter.filterDefinition=n._filterDefinition),u.autoGenerateColumns=h,n._freezeHiddenRowCnt>0)for(o=0;o<n._freezeHiddenRowCnt;o++)l=u.rows[o],l instanceof s||(l.visible=!1);if(n._freezeHiddenColumnCnt>0)for(r=0;r<n._freezeHiddenColumnCnt;r++)u.columns[r].visible=!1;u.frozenRows=n.grid.frozenRows,u.frozenColumns=n.grid.frozenColumns,u._isCopyingOrUndoing=!1,u._addingSheet?(u._toRefresh&&(clearTimeout(u._toRefresh),u._toRefresh=null),u._toRefresh=setTimeout(function(){u._setFlexSheetToDirty(),u.invalidate()},10),u._addingSheet=!1):i&&u.refresh(),u.scrollPosition=n._scrollPosition},l.prototype._resetMappedColumns=function(e){var t,n,i=0;if(e._mappedColumns=null,e.collectionView)for(n=e.collectionView.sortDescriptions;i<n.length;i++)t=e.columns.getColumn(n[i].property),t&&t.dataMap&&(e._mappedColumns||(e._mappedColumns={}),e._mappedColumns[t.binding]=t.dataMap)},l.prototype._resetFilterDefinition=function(){this._filter.filterDefinition=JSON.stringify({defaultFilterType:e.grid.filter.FilterType.Both,filters:[]})},l.prototype._loadFromWorkbook=function(t){var n,i=0,r=this;if(null!=t.sheets&&0!==t.sheets.length){for(r.clear(),r._reservedContent=t.reservedContent,n=t.sheets.length;n>i;i++)i>0&&r.addUnboundSheet(),e.grid.xlsx.FlexGridXlsxConverter.load(r.selectedSheet.grid,t,{sheetIndex:i,includeColumnHeaders:!1}),r.selectedSheet.grid.wj_sheetInfo&&(r.selectedSheet.name=r.selectedSheet.grid.wj_sheetInfo.name,r.selectedSheet.visible=r.selectedSheet.grid.wj_sheetInfo.visible,r.selectedSheet._styledCells=r.selectedSheet.grid.wj_sheetInfo.styledCells,r.selectedSheet._mergedRanges=r.selectedSheet.grid.wj_sheetInfo.mergedRanges),r._copyFrom(r.selectedSheet,!1);r.selectedSheetIndex=null!=t.activeWorksheet&&t.activeWorksheet>-1&&t.activeWorksheet<r.sheets.length?t.activeWorksheet:0,r.onLoaded()}},l.prototype._saveToWorkbook=function(){var t,n,i,r;if(0===this.sheets.length)throw"The flexsheet is empty.";for(i=this.sheets[0],0===this.selectedSheetIndex&&(i._storeRowSettings(),i._setRowSettings()),t=e.grid.xlsx.FlexGridXlsxConverter.save(i.grid,{sheetName:i.name,sheetVisible:i.visible,includeColumnHeaders:!1}),t.reservedContent=this._reservedContent,r=1;r<this.sheets.length;r++)i=this.sheets[r],this.selectedSheetIndex===r&&(i._storeRowSettings(),i._setRowSettings()),n=e.grid.xlsx.FlexGridXlsxConverter.save(i.grid,{sheetName:i.name,sheetVisible:i.visible,includeColumnHeaders:!1}),t._addWorkSheet(n.sheets[0],r);return t.activeWorksheet=this.selectedSheetIndex,t},l.prototype._mouseDown=function(n){var r,o,s,a=window.navigator.userAgent,l=this.hitTest(n);this.columns;if(this._wholeColumnsSelected=!1,this._dragable)return this._isDragging=!0,this._draggingMarker=document.createElement("div"),e.setCss(this._draggingMarker,{position:"absolute",display:"none",borderStyle:"dotted",cursor:"move"}),document.body.appendChild(this._draggingMarker),this._draggingTooltip=new e.Tooltip,this._draggingCells=this.selection,this.selectedSheet&&this.selectedSheet.selectionRanges.clear(),this.onDraggingRowColumn(new i(this._draggingRow,n.shiftKey)),void n.preventDefault();if(l.cellType!==t.CellType.None&&(s=e.tryCast(n.target,HTMLInputElement),null==s&&this._checkHitWithinSelection(l)&&(this._edtHdl._htDown=l),this._isClicking=!0),this.selectionMode===t.SelectionMode.CellRange?n.ctrlKey?this._enableMulSel||(this._enableMulSel=!0):l.cellType!==t.CellType.None&&(this.selectedSheet&&this.selectedSheet.selectionRanges.clear(),this._enableMulSel&&this.refresh(!1),this._enableMulSel=!1):(this._enableMulSel=!1,this.selectedSheet&&this.selectedSheet.selectionRanges.clear()),this._htDown=l,0!==this.rows.length&&0!==this.columns.length&&(a.match(/iPad/i)||a.match(/iPhone/i)||this._contextMenu.hide(),this.selectionMode===t.SelectionMode.CellRange)){if(l.cellType===t.CellType.RowHeader&&3===n.which)return o=new t.CellRange(l.row,0,l.row,this.columns.length-1),void(this.selection.contains(o)||(this.selection=o));if((l.cellType===t.CellType.ColumnHeader||l.cellType===t.CellType.None)&&(!(l.col>-1)||!this.columns[l.col].isSelected)&&e.hasClass(n.target,"wj-cell")&&!l.edgeRight)if(this._columnHeaderClicked=!0,this._wholeColumnsSelected=!0,n.shiftKey)this._multiSelectColumns(l);else{if(r=new t.CellRange(this.itemsSource?1:0,l.col,this.rows.length-1,l.col),3===n.which&&this.selection.contains(r))return;this.select(r)}}},l.prototype._mouseMove=function(e){var n,i=this.hitTest(e),r=this.selection,o=this.rows.length,s=this.columns.length,a=this.hostElement.style.cursor;return 0===this.rows.length||0===this.columns.length?(this._dragable=!1,void(i.cellType===t.CellType.Cell&&(this.hostElement.style.cursor="default"))):this._isDragging?(this.hostElement.style.cursor="move",void this._showDraggingMarker(e)):(n=this.itemsSource?0===r.topRow||1===r.topRow:0===r.topRow,r&&i.cellType!==t.CellType.None&&!this.itemsSource&&(this._draggingColumn=n&&r.bottomRow===o-1,this._draggingRow=0===r.leftCol&&r.rightCol===s-1,i.cellType===t.CellType.Cell?(this._draggingColumn&&((i.col===r.leftCol-1||i.col===r.rightCol)&&i.edgeRight||i.row===o-1&&i.edgeBottom)&&(a="move"),this._draggingRow&&!this._containsGroupRows(r)&&((i.row===r.topRow-1||i.row===r.bottomRow)&&i.edgeBottom||i.col===s-1&&i.edgeRight)&&(a="move")):i.cellType===t.CellType.ColumnHeader?i.edgeBottom&&(this._draggingColumn&&i.col>=r.leftCol&&i.col<=r.rightCol?a="move":this._draggingRow&&0===r.topRow&&(a="move")):i.cellType===t.CellType.RowHeader&&i.edgeRight&&(this._draggingColumn&&0===r.leftCol?a="move":this._draggingRow&&i.row>=r.topRow&&i.row<=r.bottomRow&&!this._containsGroupRows(r)&&(a="move")),this._dragable="move"===a?!0:!1,this.hostElement.style.cursor=a),this._htDown&&this._htDown.panel&&(i=new t.HitTestInfo(this._htDown.panel,e),this._multiSelectColumns(i),i.cellType===t.CellType.Cell&&this.scrollIntoView(i.row,i.col)),void 0)},l.prototype._mouseUp=function(e){this._isDragging&&(this._draggingCells.equals(this._dropRange)||(this._handleDropping(e),this.onDroppingRowColumn()),this._draggingCells=null,this._dropRange=null,document.body.removeChild(this._draggingMarker),this._draggingMarker=null,this._draggingTooltip.hide(),this._draggingTooltip=null,this._isDragging=!1,this._draggingColumn=!1,
this._draggingRow=!1),this._htDown&&this._htDown.cellType!==t.CellType.None&&this.selection.isValid&&this.selectedSheet&&(this.selectionMode===t.SelectionMode.ListBox||this.selectionMode===t.SelectionMode.Row||this.selectionMode===t.SelectionMode.RowRange?this.selectedSheet.selectionRanges.push(new t.CellRange(this.selection.row,0,this.selection.row2,this.columns.length-1)):this._htDown.cellType===t.CellType.TopLeft?this.selectedSheet.selectionRanges.push(new t.CellRange(this.selectedSheet.itemsSource?1:0,0,this.rows.length-1,this.columns.length-1)):this.selectedSheet.selectionRanges.push(this.selection),this._enableMulSel=!1),this._isClicking=!1,this._columnHeaderClicked=!1,this._htDown=null},l.prototype._click=function(){var e=this,t=window.navigator.userAgent;t.match(/iPad/i)||t.match(/iPhone/i)||e._contextMenu.hide(),setTimeout(function(){e.hideFunctionList()},200)},l.prototype._touchStart=function(n){var i=this;e.hasClass(n.target,"wj-context-menu-item")||i._contextMenu.hide(),i._longClickTimer=setTimeout(function(){var r;r=i.hitTest(n),r&&r.cellType!==t.CellType.None&&!i.itemsSource&&i._contextMenu.show(void 0,new e.Point(n.pageX+10,n.pageY+10))},500)},l.prototype._touchEnd=function(){clearTimeout(this._longClickTimer)},l.prototype._showDraggingMarker=function(n){var i,r,o,s,a,c,u,h,p,d=new t.HitTestInfo(this.cells,n),f=this.selection,g=this.columns.length,m=this.rows.length,v=this._cumulativeScrollOffset(this.hostElement),y=this._root.getBoundingClientRect(),_=y.left+v.x,w=y.top+v.y;if(this.scrollIntoView(d.row,d.col),this._draggingColumn){for(r=f.rightCol-f.leftCol+1,o=d.col,a=0,(0>o||o+r>g)&&(o=g-r),i=this.cells.getCellBoundingRect(0,o),c=this._root.offsetHeight-this._eCHdr.offsetHeight,s=this.cells.height,s=s>c?c:s,u=0;r>u;u++)a+=this.columns[o+u].renderSize;h=l.convertNumberToAlpha(o)+" : "+l.convertNumberToAlpha(o+r-1),this._dropRange?(this._dropRange.col=o,this._dropRange.col2=o+r-1):this._dropRange=new t.CellRange(0,o,this.rows.length-1,o+r-1)}else if(this._draggingRow){for(r=f.bottomRow-f.topRow+1,o=d.row,s=0,(0>o||o+r>m)&&(o=m-r),i=this.cells.getCellBoundingRect(o,0),c=this._root.offsetWidth-this._eRHdr.offsetWidth,u=0;r>u;u++)s+=this.rows[o+u].renderSize;a=this.cells.width,a=a>c?c:a,h=o+1+" : "+(o+r),this._dropRange?(this._dropRange.row=o,this._dropRange.row2=o+r-1):this._dropRange=new t.CellRange(o,0,o+r-1,this.columns.length-1)}if(i){if(p={display:"inline",zIndex:"9999",opacity:.5,top:i.top-(this._draggingColumn?this._ptScrl.y:0)+v.y,left:i.left-(this._draggingRow?this._ptScrl.x:0)+v.x,height:s,width:a},i.top=i.top-(this._draggingColumn?this._ptScrl.y:0),i.left=i.left-(this._draggingRow?this._ptScrl.x:0),this._rtl&&this._draggingRow&&(p.left=p.left-a+i.width+2*this._ptScrl.x,i.left=i.left+2*this._ptScrl.x),this._draggingRow){if(_+this._eRHdr.offsetWidth!==p.left||w+this._root.offsetHeight<p.top+p.height)return}else if(w+this._eCHdr.offsetHeight!==p.top||_+this._root.offsetWidth<p.left+p.width)return;e.setCss(this._draggingMarker,p),this._draggingTooltip.show(this.hostElement,h,i)}},l.prototype._handleDropping=function(t){var i,r,o,s,a,l=this;if(l.selectedSheet&&l._draggingCells&&l._dropRange&&!l._containsMergedCells(l._draggingCells)&&!l._containsMergedCells(l._dropRange)){if(l._clearCalcEngine(),l._draggingColumn&&l._draggingCells.leftCol>l._dropRange.leftCol||l._draggingRow&&l._draggingCells.topRow>l._dropRange.topRow)if(t.shiftKey){if(l._draggingColumn)for(s=l._dropRange.leftCol,r=l._draggingCells.leftCol;r<=l._draggingCells.rightCol;r++)l.columns.moveElement(r,s),s++;else if(l._draggingRow)for(o=l._dropRange.topRow,i=l._draggingCells.topRow;i<=l._draggingCells.bottomRow;i++)l.rows.moveElement(i,o),o++;l._exchangeCellStyle(!0)}else{for(a=new n._MoveCellsAction(l,l._draggingCells,l._dropRange,t.ctrlKey),o=l._dropRange.topRow,i=l._draggingCells.topRow;i<=l._draggingCells.bottomRow;i++){for(s=l._dropRange.leftCol,r=l._draggingCells.leftCol;r<=l._draggingCells.rightCol;r++)l._moveCellContent(i,r,o,s,t.ctrlKey),l._draggingColumn&&o===l._dropRange.topRow&&(l.columns[s].dataType=l.columns[r].dataType?l.columns[r].dataType:e.DataType.Object,l.columns[s].align=l.columns[r].align,l.columns[s].format=l.columns[r].format,t.ctrlKey||(l.columns[r].dataType=e.DataType.Object,l.columns[r].align=null,l.columns[r].format=null)),s++;o++}if(l._draggingColumn&&!t.ctrlKey)for(s=l._dropRange.leftCol,r=l._draggingCells.leftCol;r<=l._draggingCells.rightCol;r++)l._updateColumnFiler(r,s),s++;a.saveNewState()&&l._undoStack._addAction(a)}else if(l._draggingColumn&&l._draggingCells.leftCol<l._dropRange.leftCol||l._draggingRow&&l._draggingCells.topRow<l._dropRange.topRow)if(t.shiftKey){if(l._draggingColumn)for(s=l._dropRange.rightCol,r=l._draggingCells.rightCol;r>=l._draggingCells.leftCol;r--)l.columns.moveElement(r,s),s--;else if(l._draggingRow)for(o=l._dropRange.bottomRow,i=l._draggingCells.bottomRow;i>=l._draggingCells.topRow;i--)l.rows.moveElement(i,o),o--;l._exchangeCellStyle(!1)}else{for(a=new n._MoveCellsAction(l,l._draggingCells,l._dropRange,t.ctrlKey),o=l._dropRange.bottomRow,i=l._draggingCells.bottomRow;i>=l._draggingCells.topRow;i--){for(s=l._dropRange.rightCol,r=l._draggingCells.rightCol;r>=l._draggingCells.leftCol;r--)l._moveCellContent(i,r,o,s,t.ctrlKey),l._draggingColumn&&o===l._dropRange.bottomRow&&(l.columns[s].dataType=l.columns[r].dataType?l.columns[r].dataType:e.DataType.Object,l.columns[s].align=l.columns[r].align,l.columns[s].format=l.columns[r].format,t.ctrlKey||(l.columns[r].dataType=e.DataType.Object,l.columns[r].align=null,l.columns[r].format=null)),s--;o--}if(l._draggingColumn&&!t.ctrlKey)for(s=l._dropRange.rightCol,r=l._draggingCells.rightCol;r>=l._draggingCells.leftCol;r--)l._updateColumnFiler(r,s),s--;a.saveNewState()&&l._undoStack._addAction(a)}l.select(l._dropRange),l.selectedSheet.selectionRanges.push(l.selection),l.hostElement.focus()}},l.prototype._moveCellContent=function(e,t,n,i,r){var o=this.getCellData(e,t,!1),s=e*this.columns.length+t,a=n*this.columns.length+i,l=this.selectedSheet._styledCells[s];this.setCellData(n,i,o),l?this.selectedSheet._styledCells[a]=JSON.parse(JSON.stringify(l)):delete this.selectedSheet._styledCells[a],r||(this.setCellData(e,t,void 0),delete this.selectedSheet._styledCells[s])},l.prototype._exchangeCellStyle=function(e){for(var t,n,i,r,o=0,s=[],a=this._draggingCells.topRow;a<=this._draggingCells.bottomRow;a++)for(t=this._draggingCells.leftCol;t<=this._draggingCells.rightCol;t++)n=a*this.columns.length+t,this.selectedSheet._styledCells[n]?(s.push(JSON.parse(JSON.stringify(this.selectedSheet._styledCells[n]))),delete this.selectedSheet._styledCells[n]):s.push(void 0);if(e){if(this._draggingColumn)for(r=this._draggingCells.rightCol-this._draggingCells.leftCol+1,t=this._draggingCells.leftCol-1;t>=this._dropRange.leftCol;t--)for(a=0;a<this.rows.length;a++)n=a*this.columns.length+t,i=a*this.columns.length+t+r,this.selectedSheet._styledCells[n]?(this.selectedSheet._styledCells[i]=JSON.parse(JSON.stringify(this.selectedSheet._styledCells[n])),delete this.selectedSheet._styledCells[n]):delete this.selectedSheet._styledCells[i];else if(this._draggingRow)for(r=this._draggingCells.bottomRow-this._draggingCells.topRow+1,a=this._draggingCells.topRow-1;a>=this._dropRange.topRow;a--)for(t=0;t<this.columns.length;t++)n=a*this.columns.length+t,i=(a+r)*this.columns.length+t,this.selectedSheet._styledCells[n]?(this.selectedSheet._styledCells[i]=JSON.parse(JSON.stringify(this.selectedSheet._styledCells[n])),delete this.selectedSheet._styledCells[n]):delete this.selectedSheet._styledCells[i]}else if(this._draggingColumn)for(r=this._draggingCells.rightCol-this._draggingCells.leftCol+1,t=this._draggingCells.rightCol+1;t<=this._dropRange.rightCol;t++)for(a=0;a<this.rows.length;a++)n=a*this.columns.length+t,i=a*this.columns.length+t-r,this.selectedSheet._styledCells[n]?(this.selectedSheet._styledCells[i]=JSON.parse(JSON.stringify(this.selectedSheet._styledCells[n])),delete this.selectedSheet._styledCells[n]):delete this.selectedSheet._styledCells[i];else if(this._draggingRow)for(r=this._draggingCells.bottomRow-this._draggingCells.topRow+1,a=this._draggingCells.bottomRow+1;a<=this._dropRange.bottomRow;a++)for(t=0;t<this.columns.length;t++)n=a*this.columns.length+t,i=(a-r)*this.columns.length+t,this.selectedSheet._styledCells[n]?(this.selectedSheet._styledCells[i]=JSON.parse(JSON.stringify(this.selectedSheet._styledCells[n])),delete this.selectedSheet._styledCells[n]):delete this.selectedSheet._styledCells[i];for(a=this._dropRange.topRow;a<=this._dropRange.bottomRow;a++)for(t=this._dropRange.leftCol;t<=this._dropRange.rightCol;t++)n=a*this.columns.length+t,s[o]?this.selectedSheet._styledCells[n]=s[o]:delete this.selectedSheet._styledCells[n],o++},l.prototype._containsMergedCells=function(e){var t,n,i,r;if(!this.selectedSheet)return!1;for(t=e.topRow;t<=e.bottomRow;t++)for(n=e.leftCol;n<=e.rightCol;n++)if(i=t*this.columns.length+n,r=this.selectedSheet._mergedRanges[i],r&&r.isValid&&!r.isSingleCell)return!0;return!1},l.prototype._multiSelectColumns=function(e){var n;e&&this._columnHeaderClicked&&(n=new t.CellRange(e.row,e.col),n.row=this.selectedSheet.itemsSource?1:0,n.row2=this.rows.length-1,n.col2=this.selection.col2,this.select(n))},l.prototype._cumulativeOffset=function(t){var n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);return new e.Point(i,n)},l.prototype._cumulativeScrollOffset=function(t){var n=0,i=0;do n+=t.scrollTop||0,i+=t.scrollLeft||0,t=t.offsetParent;while(t&&!(t instanceof HTMLBodyElement));return n+=document.body.scrollTop||document.documentElement.scrollTop,i+=document.body.scrollLeft||document.documentElement.scrollLeft,new e.Point(i,n)},l.prototype._checkHitWithinSelection=function(e){var n;return null!=e&&e.cellType===t.CellType.Cell&&(n=this.getMergedRange(this.cells,e.row,e.col),n&&n.intersects(this.selection)||this.selection.row===e.row&&this.selection.col===e.col)?!0:!1},l.prototype._clearForEmptySheet=function(e){this.selectedSheet&&0===this[e].length&&this._isCopyingOrUndoing!==!0&&(this.selectedSheet._mergedRanges=null,this.selectedSheet._styledCells=null,this.select(new t.CellRange))},l.prototype._containsGroupRows=function(e){for(var n,i=e.topRow;i<=e.bottomRow;i++)if(n=this.rows[i],n instanceof t.GroupRow)return!0;return!1},l.prototype._delSeletionContent=function(){var t=this,i=t.selectedSheet.selectionRanges;t.isReadOnly||t.deferUpdate(function(){for(var r,o,s,a,l=!1,c=new n._EditAction(t),u=0;u<i.length;u++)for(r=i[u],s=r.topRow;s<=r.bottomRow;s++)for(o=r.leftCol;o<=r.rightCol;o++)a=t._getBindingColumn(t.cells,s,t.columns[o]),(0==a.isRequired||null==a.isRequired&&a.dataType==e.DataType.String)&&t.getCellData(s,o,!0)&&(t.setCellData(s,o,"",!0),l=!0);l&&(c.saveNewState(),t._undoStack._addAction(c))})},l.prototype._updateAffectedFormula=function(t,n,i,r){for(var o,s,a,l,c,u,h,p,d,f,g=[],m=[],v=0;v<this.rows.length;v++)for(o=0;o<this.columns.length;o++)if(f=this.getCellData(v,o,!1),!!f&&"string"==typeof f&&"="===f[0]&&(l=f.match(/(?=\b\D)\$?[A-Za-z]+\$?\d+/g),!!l&&l.length>0)){for(u=!1,c=0;c<l.length;c++)h=l[c],"atan2"!==h.toLowerCase()&&(d=e.xlsx.Workbook.tableAddress(h),r?d.row>t&&(i?d.row+=n:d.row-=n,u||(u=!0,g.push({point:new e.Point(v,o),formula:f}))):d.col>t&&(i?d.col+=n:d.col-=n,u||(u=!0,g.push({point:new e.Point(v,o),formula:f}))),p=e.xlsx.Workbook.xlsxAddress(d.row,d.col,d.absRow,d.absCol),f=f.replace(h,p));u&&(this.setCellData(v,o,f),s=v,a=o,r?v>t&&(i?s+=n:s-=n):o>t&&(i?a+=n:a-=n),m.push({point:new e.Point(s,a),formula:f}))}return{oldFormulas:g,newFormulas:m}},l.prototype._updateColumnFiler=function(e,t){for(var n,i=JSON.parse(this._filter.filterDefinition),r=0;r<i.filters.length;r++)if(n=i.filters[r],n.columnIndex===e){n.columnIndex=t;break}this._filter.filterDefinition=JSON.stringify(i)},l.prototype._isDescendant=function(e,t){for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1},l.prototype._clearCalcEngine=function(){this._calcEngine._clearExpressionCache()},l.prototype._isMultipleRowsSelected=function(){for(var e,t=this.selectedSheet.selectionRanges||[this.selection],n=0;n<t.length;n++)if(e=t[n],0!==e.leftCol||e.rightCol!==this.columns.length-1)return!1;return!0},l.prototype._isMultipleColumnsSelected=function(){for(var e,t=this.selectedSheet.selectionRanges||[this.selection],n=0;n<t.length;n++)if(e=t[n],e.bottomRow!==this.rows.length-1||!this.selectedSheet.itemsSource&&0!==e.topRow||this.selectedSheet.itemsSource&&1!==e.topRow)return!1;return!0},l.prototype._sortByRow=function(e,t){return e.topRow>t.topRow?1:e.topRow<t.topRow?-1:0},l.prototype._sortByColumn=function(e,t){return e.leftCol>t.leftCol?1:e.leftCol<t.leftCol?-1:0},l.prototype._setFlexSheetToDirty=function(){this.columns._dirty=!0,this.rows._dirty=!0,this.rowHeaders.columns._dirty=!0,this.rowHeaders.rows._dirty=!0,this.columnHeaders.columns._dirty=!0,this.columnHeaders.rows._dirty=!0},l.convertNumberToAlpha=function(e){var t,n,i="";if(e>=0)do t=Math.floor(e/26),n=e%26,i=String.fromCharCode(n+65)+i,e=t-1;while(t);return i},l.controlTemplate='<div style="width:100%;height:100%"><div wj-part="container" style="width:100%">'+t.FlexGrid.controlTemplate+'</div><div wj-part="tab-holder" style="width:100%; min-width:100px"></div><div wj-part="context-menu" style="display:none;z-index:100"></div></div>',l}(t.FlexGrid);n.FlexSheet=l,i=function(e){function t(t,n){e.call(this),this._isDraggingRows=t,this._isShiftKey=n}return __extends(t,e),Object.defineProperty(t.prototype,"isDraggingRows",{get:function(){return this._isDraggingRows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShiftKey",{get:function(){return this._isShiftKey},enumerable:!0,configurable:!0}),t}(e.EventArgs),n.DraggingRowColumnEventArgs=i,r=function(e){function t(t,n){e.call(this),this._funcName=t,this._params=n}return __extends(t,e),Object.defineProperty(t.prototype,"funcName",{get:function(){return this._funcName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),t}(e.EventArgs),n.UnknownFunctionEventArgs=r,o=function(n){function i(e,t,i,r,o){n.call(this,e,t,i,r,o)}return __extends(i,n),i.prototype.getSelectedState=function(e,i,r){var o,s,a,l,c,u;if(this.grid){if(u=this.grid.getMergedRange(this,e,i),o=this.grid.selectedSheet?this.grid.selectedSheet.selectionRanges:null,c=n.prototype.getSelectedState.call(this,e,i,r),s=o?o.length:0,c===t.SelectedState.None&&s>0&&this.grid._enableMulSel)for(a=0;a<o.length;a++)if(l=o[a],l&&l instanceof t.CellRange){if(this.cellType===t.CellType.Cell){if(u){if(u.contains(l.row,l.col))return a!==s-1||this.grid._isClicking?t.SelectedState.Selected:this.grid.showMarquee?t.SelectedState.None:t.SelectedState.Cursor;if(u.intersects(l))return t.SelectedState.Selected}if(l.row===e&&l.col===i)return a!==s-1||this.grid._isClicking?t.SelectedState.Selected:this.grid.showMarquee?t.SelectedState.None:t.SelectedState.Cursor;if(l.contains(e,i))return t.SelectedState.Selected}if(this.grid.showSelectedHeaders&t.HeadersVisibility.Row&&this.cellType===t.CellType.RowHeader&&l.containsRow(e)||this.grid.showSelectedHeaders&t.HeadersVisibility.Column&&this.cellType===t.CellType.ColumnHeader&&l.containsColumn(i))return t.SelectedState.Selected}return c}},i.prototype.getCellData=function(t,i,r){var o,s=n.prototype.getCellData.call(this,t,i,r),a=this.columns[e.asNumber(i,!1,!0)],l=this.grid?this.grid._getBindingColumn(this,t,a):a;return r&&(o=n.prototype.getCellData.call(this,t,i,!1),!e.isNumber(o)||0===o||!l||l.format||l.dataMap||(s=o)),s},i.prototype.setCellData=function(t,i,r,o){void 0===o&&(o=!0);var s;return o&&r&&e.isString(r)&&(e.isNullOrWhiteSpace(r)||isNaN(+r)?"="!==r[0]&&(s=e.Globalize.parseDate(r,""),s&&(r=s)):r=+r),r&&e.isString(r)&&"="===r[0]&&(o=!1),n.prototype.setCellData.call(this,t,i,r,o)},i.prototype._renderCell=function(t,i,r,o,s){var a,l=this.hostElement.childNodes[s],c=t*this.grid.columns.length+i,u=this.grid.getMergedRange(this,t,i);return s=n.prototype._renderCell.call(this,t,i,r,o,s),this.cellType!==e.grid.CellType.Cell?s:u&&c>u.topRow*this.grid.columns.length+u.leftCol?s:(e.hasClass(l,"wj-state-selected")||e.hasClass(l,"wj-state-multi-selected")?(l.style.backgroundColor="",l.style.color=""):this.grid.selectedSheet&&(a=this.grid.selectedSheet._styledCells[c],l&&a&&(l.style.backgroundColor=a.backgroundColor,l.style.color=a.color)),s)},i}(t.GridPanel),n.FlexSheetPanel=o,s=function(e){function t(){e.call(this),this.isReadOnly=!0}return __extends(t,e),t}(t.Row),n.HeaderRow=s}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(n){"use strict";var i,r,o,s=function(){function i(t,n,i,r,s){this._visible=!0,this._unboundSortDesc=new e.collections.ObservableArray,this._currentStyledCells={},this._currentMergedRanges={},this._isEmptyGrid=!1,this._rowSettings=[],this._scrollPosition=new e.Point,this._freezeHiddenRowCnt=0,this._freezeHiddenColumnCnt=0,this.nameChanged=new e.Event,this.visibleChanged=new e.Event;var a=this;a._owner=t,a._name=i,a._rowCount=e.isNumber(r)&&!isNaN(r)&&r>=0?r:200,a._columnCount=e.isNumber(s)&&!isNaN(s)&&s>=0?s:20,a._grid=n||this._createGrid(),a._grid.itemsSourceChanged.addHandler(this._gridItemsSourceChanged,this),a._unboundSortDesc.collectionChanged.addHandler(function(){for(var t,n=a._unboundSortDesc,i=0;i<n.length;i++)if(t=e.tryCast(n[i],o),!t)throw"sortDescriptions array must contain SortDescription objects.";a._owner&&(a._owner.rows.beginUpdate(),a._owner.rows.sort(a._compareRows()),a._owner.rows.endUpdate(),a._owner.rows._dirty=!0,a._owner.rows._update(),a._owner.selectedSheet&&(a._owner._copyTo(a._owner.selectedSheet),a._owner._copyFrom(a._owner.selectedSheet)))})}return Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){e.isNullOrWhiteSpace(t)||(!this._name||this._name.toLowerCase()===t.toLowerCase())&&this._name||(this._name=t,this._grid.wj_sheetInfo.name=t,this.onNameChanged(new e.EventArgs))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._grid.wj_sheetInfo.visible=t,this.onVisibleChanged(new e.EventArgs))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return null!=this._grid?this._grid.rows.length:0},set:function(n){var i;if(e.isNumber(n)&&!isNaN(n)&&n>=0&&this._rowCount!==n){if(this._rowCount<n)for(i=0;i<n-this._rowCount;i++)this._grid.rows.push(new t.Row);else this._grid.rows.splice(n,this._rowCount-n);this._rowCount=n,this._owner&&this._owner.selectedSheet&&this._name===this._owner.selectedSheet.name&&this._owner._copyFrom(this,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnCount",{get:function(){return null!=this._grid?this._grid.columns.length:0},set:function(n){var i;if(e.isNumber(n)&&!isNaN(n)&&n>=0&&this._columnCount!==n){if(this._columnCount<n)for(i=0;i<n-this._columnCount;i++)this._grid.columns.push(new t.Column);else this._grid.columns.splice(n,this._columnCount-n);this._columnCount=n,this._owner&&this._owner.selectedSheet&&this._name===this._owner.selectedSheet.name&&this._owner._copyFrom(this,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionRanges",{get:function(){var n=this;return this._selectionRanges||(this._selectionRanges=new e.collections.ObservableArray,this._selectionRanges.collectionChanged.addHandler(function(){var e,i;n._owner&&!n._owner._isClicking&&(e=n._selectionRanges.length,e>0&&(i=n._selectionRanges[e-1],i&&i instanceof t.CellRange&&(n._owner.selection=i)),e>1&&(n._owner._enableMulSel=!0),n._owner.refresh(),n._owner._enableMulSel=!1)},this)),this._selectionRanges},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemsSource",{get:function(){return null!=this._grid?this._grid.itemsSource:null},set:function(e){null==this._grid&&(this._createGrid(),this._grid.itemsSourceChanged.addHandler(this._gridItemsSourceChanged,this)),this._isEmptyGrid&&this._clearGrid(),this._grid.itemsSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_styledCells",{get:function(){return this._currentStyledCells||(this._currentStyledCells={}),this._currentStyledCells},set:function(e){this._currentStyledCells=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_mergedRanges",{get:function(){return this._currentMergedRanges||(this._currentMergedRanges={}),this._currentMergedRanges},set:function(e){this._currentMergedRanges=e},enumerable:!0,configurable:!0}),i.prototype.onNameChanged=function(e){this.nameChanged.raise(this,e)},i.prototype.onVisibleChanged=function(e){this.visibleChanged.raise(this,e)},i.prototype.getCellStyle=function(e,t){var n,i=this._grid.rows.length,r=this._grid.columns.length;return e>=i||t>=r?null:(n=e*r+t,this._styledCells[n])},i.prototype._attachOwner=function(e){this._owner!==e&&(this._owner=e)},i.prototype._setValidName=function(e){this._name=e,this._grid.wj_sheetInfo.name=e},i.prototype._storeRowSettings=function(){var e,t=0;for(this._rowSettings=[];t<this._grid.rows.length;t++)e=this._owner.rows[t],e&&(this._rowSettings[t]={height:e.height})},i.prototype._setRowSettings=function(){for(var e,t=0;t<this._rowSettings.length;t++)e=this._rowSettings[t],e&&(this._grid.rows[t].height=e.height)},i.prototype._compareRows=function(){var t=this,n=this._unboundSortDesc;return function(i,r){for(var o,s=0;s<n.length;s++){var a=n[s],l=i._ubv?i._ubv[a.column._hash]:"",c=r._ubv?r._ubv[a.column._hash]:"";if(e.isString(l)&&"="===l[0]&&(l=t._owner.evaluate(l),e.isPrimitive(l)||(l=l.value)),e.isString(c)&&"="===c[0]&&(c=t._owner.evaluate(c),e.isPrimitive(c)||(c=c.value)),l!==l&&(l=null),c!==c&&(c=null),e.isString(l)&&(l=l.toLowerCase()+l),e.isString(c)&&(c=c.toLowerCase()+c),o=c>l?-1:l>c?1:0,0!==o)return a.ascending?+o:-o}return 0}},i.prototype._createGrid=function(){var e,i,r,o,s=document.createElement("div");for(this._isEmptyGrid=!0,s.style.visibility="hidden",document.body.appendChild(s),e=new t.FlexGrid(s),document.body.removeChild(s),o=0;o<this._rowCount;o++)e.rows.push(new t.Row);for(r=0;r<this._columnCount;r++)i=new t.Column,i.isRequired=!1,e.columns.push(i);return e.loadedRows.addHandler(function(){!e.itemsSource||e.rows[0]instanceof n.HeaderRow||e.rows.insert(0,new n.HeaderRow)}),e.wj_sheetInfo={name:this.name,visible:this.visible,styledCells:this._styledCells,mergedRanges:this._mergedRanges},e},i.prototype._clearGrid=function(){this._grid.rows.clear(),this._grid.columns.clear(),this._grid.columnHeaders.columns.clear(),this._grid.rowHeaders.rows.clear()},i.prototype._gridItemsSourceChanged=function(){this._owner&&this._owner.selectedSheet&&this._name===this._owner.selectedSheet.name&&this._owner._copyFrom(this,!1)},i}();n.Sheet=s,i=function(t){function n(){t.apply(this,arguments),this._current=-1,this.sheetCleared=new e.Event,this.selectedSheetChanged=new e.Event,this.sheetNameChanged=new e.Event,this.sheetVisibleChanged=new e.Event}return __extends(n,t),n.prototype.onSheetCleared=function(){this.sheetCleared.raise(this,new e.EventArgs)},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._current},set:function(e){this._moveCurrentTo(+e)},enumerable:!0,configurable:!0}),n.prototype.onSelectedSheetChanged=function(e){this.selectedSheetChanged.raise(this,e)},n.prototype.insert=function(e,n){var i;i=n.name?this.getValidSheetName(n):this._getUniqueName(),i!==n.name&&(n.name=i),t.prototype.insert.call(this,e,n),this._postprocessSheet(n)},n.prototype.push=function(){for(var e,n,i,r=[],o=0;o<arguments.length;o++)r[+o]=arguments[o];for(e=this.length,n=0;n<r.length;n++)i=r[n].name?this.getValidSheetName(r[n]):this._getUniqueName(),i!==r[n].name&&(r[n].name=i),t.prototype.push.call(this,r[n]),this._postprocessSheet(r[n]);return this.length},n.prototype.splice=function(e,n,i){var r;return i?(r=i.name?this.getValidSheetName(i):this._getUniqueName(),r!==i.name&&(i.name=r),this._postprocessSheet(i),t.prototype.splice.call(this,e,n,i)):t.prototype.splice.call(this,e,n,i)},n.prototype.removeAt=function(e){var n=this.hide(e);n&&(t.prototype.removeAt.call(this,e),e<this.selectedIndex&&(this._current-=1))},n.prototype.onSheetNameChanged=function(e){this.sheetNameChanged.raise(this,e)},n.prototype.onSheetVisibleChanged=function(e){this.sheetVisibleChanged.raise(this,e)},n.prototype.selectFirst=function(){return this._moveCurrentTo(0)},n.prototype.selectLast=function(){return this._moveCurrentTo(this.length-1)},n.prototype.selectPrevious=function(){return this._moveCurrentTo(this._current-1)},n.prototype.selectNext=function(){return this._moveCurrentTo(this._current+1)},n.prototype.hide=function(e){return 0>e&&e>=this.length?!1:this[e].visible?(this[e].visible=!1,!0):!1},n.prototype.show=function(e){return 0>e&&e>=this.length?!1:(this[e].visible=!0,this._moveCurrentTo(e),!0)},n.prototype.clear=function(){t.prototype.clear.call(this),this._current=-1,this.onSheetCleared()},n.prototype.isValidSheetName=function(e){var t=this._getSheetIndexFrom(e.name),n=this.indexOf(e);return-1===t||t===n},n.prototype.getValidSheetName=function(e){for(var t,n=e.name,i=1,r=this.indexOf(e);;){if(t=this._getSheetIndexFrom(n),-1===t||t===r)break;n=e.name.concat((i+1).toString()),i+=1}return n},n.prototype._moveCurrentTo=function(t){var n,i=t;if(0>t||t>=this.length)return!1;if(this._current<i||0===i)for(;i<this.length&&!this[i].visible;)i++;else if(this._current>i)for(;i>=0&&!this[i].visible;)i--;if(i===this.length)for(i=t;i>=0&&!this[i].visible;)i--;return 0>i?!1:(i!==this._current&&(n=new e.PropertyChangedEventArgs("sheetIndex",this._current,i),this._current=i,this.onSelectedSheetChanged(n)),!0)},n.prototype._getSheetIndexFrom=function(e){var t,n,i,r=-1;if(!e)return r;for(e=e.toLowerCase(),i=0;i<this.length;i++)if(t=this[i],n=t.name?t.name.toLowerCase():"",n===e)return i;return r},n.prototype._postprocessSheet=function(t){var n=this;t.nameChanged.addHandler(function(){var i,r=n._getSheetIndexFrom(t.name);n.isValidSheetName(t)||t._setValidName(n.getValidSheetName(t)),i=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,t,e.isNumber(r)?r:n.length-1),n.onSheetNameChanged(i)}),t.visibleChanged.addHandler(function(){var i=n._getSheetIndexFrom(t.name),r=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,t,e.isNumber(i)?i:n.length-1);n.onSheetVisibleChanged(r)})},n.prototype._getUniqueName=function(){for(var e="Sheet1",t=0;;){if(-1===this._getSheetIndexFrom(e))break;e="Sheet".concat((t+1).toString()),t+=1}return e},n}(e.collections.ObservableArray),n.SheetCollection=i,r=function(n){function i(e,t,i){n.call(this,e,i),this._rtl=!1,this._sheetTabClicked=!1;var r=this;r._owner=t,r._sheets=t.sheets,r._rtl="rtl"==getComputedStyle(r._owner.hostElement).direction,r.hostElement.attributes.tabindex&&r.hostElement.attributes.removeNamedItem("tabindex"),r._initControl(),r.deferUpdate(function(){i&&r.initialize(i)})}return __extends(i,n),i.prototype.refresh=function(){this._tabContainer.innerHTML="",this._tabContainer.innerHTML=this._getSheetTabs(),this._rtl&&this._adjustSheetsPosition(),this._adjustSize()},i.prototype._sourceChanged=function(t,n){void 0===n&&(n=e.collections.NotifyCollectionChangedEventArgs.reset);var i,r=n;switch(r.action){case e.collections.NotifyCollectionChangedAction.Add:i=r.index-1,0>i&&(i=0),this._tabContainer.innerHTML="",this._tabContainer.innerHTML=this._getSheetTabs(),this._rtl&&this._adjustSheetsPosition(),this._adjustSize();break;case e.collections.NotifyCollectionChangedAction.Remove:this._tabContainer.removeChild(this._tabContainer.children[r.index]),this._tabContainer.hasChildNodes()&&this._updateTabActive(r.index,!0),this._adjustSize();break;default:this.invalidate()}},i.prototype._selectedSheetChanged=function(e,t){this._updateTabActive(t.oldValue,!1),this._updateTabActive(t.newValue,!0),this._sheetTabClicked?this._sheetTabClicked=!1:this._scrollToActiveSheet(t.newValue,t.oldValue),this._adjustSize()},i.prototype._initControl=function(){var e=this;e.applyTemplate("",e.getTemplate(),{_sheetContainer:"sheet-container",_tabContainer:"container",_sheetPage:"sheet-page",_newSheet:"new-sheet"}),e._rtl&&(e._sheetPage.style.right="0px",e._tabContainer.parentElement.style.right=e._sheetPage.clientWidth+"px",e._tabContainer.style.right="0px",e._tabContainer.style.cssFloat="right",e._newSheet.style.right=e._sheetPage.clientWidth+e._tabContainer.parentElement.clientWidth+"px"),e._adjustNavigationButtons(e._rtl),e.addEventListener(e._newSheet,"click",function(){var t=e._owner.selectedSheetIndex;e._owner.addUnboundSheet(),e._scrollToActiveSheet(e._owner.selectedSheetIndex,t)}),e._sheets.collectionChanged.addHandler(e._sourceChanged,e),e._sheets.selectedSheetChanged.addHandler(e._selectedSheetChanged,e),e._sheets.sheetNameChanged.addHandler(e._updateSheetName,e),e._sheets.sheetVisibleChanged.addHandler(e._updateTabShown,e),e._initSheetPage(),e._initSheetTab()},i.prototype._initSheetTab=function(){var e=this;e.addEventListener(e._tabContainer,"mousedown",function(t){var n,i=t.target;i instanceof HTMLLIElement&&(e._sheetTabClicked=!0,n=e._getItemIndex(e._tabContainer,i),e._scrollSheetTabContainer(i),n>-1&&(e._sheets.selectedIndex=n))})},i.prototype._initSheetPage=function(){var e=this;e.hostElement.querySelector("div.wj-sheet-page").addEventListener("click",function(t){var n="[object HTMLButtonElement]"===t.target.toString()?t.target:t.target.parentElement,i=e._getItemIndex(e._sheetPage,n);if(0!==e._sheets.length)switch(i){case 0:e._sheets.selectFirst();break;case 1:e._sheets.selectPrevious();break;case 2:e._sheets.selectNext();break;case 3:e._sheets.selectLast()}})},i.prototype._getSheetTabs=function(){for(var e="",t=0;t<this._sheets.length;t++)e+=this._getSheetElement(this._sheets[t],this._sheets.selectedIndex===t);return e},i.prototype._getSheetElement=function(e,t){void 0===t&&(t=!1);var n="<li";return e.visible?t&&(n+=' class="active"'):n+=' class="hidden"',n+(">"+e.name+"</li>")},i.prototype._updateTabActive=function(t,n){0>t||t>=this._tabContainer.children.length||(n?e.addClass(this._tabContainer.children[t],"active"):e.removeClass(this._tabContainer.children[t],"active"))},i.prototype._updateTabShown=function(t,n){n.index<0||n.index>=this._tabContainer.children.length||(n.item.visible?e.removeClass(this._tabContainer.children[n.index],"hidden"):e.addClass(this._tabContainer.children[n.index],"hidden"),this._adjustSize())},i.prototype._adjustSize=function(){var e,t,n=this._tabContainer.childElementCount,i=0,r=0;if("none"!==this.hostElement.style.display){for(r=this._tabContainer.parentElement.scrollLeft,this._tabContainer.parentElement.style.width="",this._tabContainer.style.width="",this._sheetPage.parentElement.style.width="",e=0;n>e;e++)i+=this._tabContainer.children[e].offsetWidth+1;t=this.hostElement.offsetWidth-this._sheetPage.offsetWidth-this._newSheet.offsetWidth-2,this._tabContainer.parentElement.style.width=(i>t?t:i)+"px",this._tabContainer.style.width=i+"px",this._sheetPage.parentElement.style.width=this._sheetPage.offsetWidth+this._newSheet.offsetWidth+this._tabContainer.parentElement.offsetWidth+3+"px",this._tabContainer.parentElement.scrollLeft=r}},i.prototype._getItemIndex=function(e,t){for(var n=0;n<e.children.length;n++)if(e.children[n]===t)return n;return-1},i.prototype._updateSheetName=function(e,t){this._tabContainer.querySelectorAll("li")[t.index].textContent=t.item.name,this._adjustSize()},i.prototype._scrollSheetTabContainer=function(e){var n,i=this._tabContainer.parentElement.scrollLeft,r=this._sheetPage.offsetWidth,o=this._newSheet.offsetWidth,s=this._tabContainer.parentElement.offsetWidth;
if(this._rtl)switch(t.FlexGrid._getRtlMode()){case"rev":n=-this._tabContainer.offsetLeft,n+e.offsetLeft+e.offsetWidth>s+i?this._tabContainer.parentElement.scrollLeft+=e.offsetWidth:n+e.offsetLeft<i&&(this._tabContainer.parentElement.scrollLeft-=e.offsetWidth);break;case"neg":e.offsetLeft<i?this._tabContainer.parentElement.scrollLeft-=e.offsetWidth:e.offsetLeft+e.offsetWidth>s+i&&(this._tabContainer.parentElement.scrollLeft+=e.offsetWidth);break;default:e.offsetLeft-o+i<0?this._tabContainer.parentElement.scrollLeft+=e.offsetWidth:e.offsetLeft+e.offsetWidth-o+i>s&&(this._tabContainer.parentElement.scrollLeft-=e.offsetWidth)}else e.offsetLeft+e.offsetWidth-r>s+i?this._tabContainer.parentElement.scrollLeft+=e.offsetWidth:e.offsetLeft-r<i&&(this._tabContainer.parentElement.scrollLeft-=e.offsetWidth)},i.prototype._adjustSheetsPosition=function(){for(var e,t=this._tabContainer.querySelectorAll("li"),n=0,i=0;i<t.length;i++)e=t[i],e.style.cssFloat="right",e.style.right=n+"px",n+=t[i].clientWidth},i.prototype._scrollToActiveSheet=function(e,n){var i,r,o,s=this._tabContainer.querySelectorAll("li");if(r=this._tabContainer.clientWidth>this._tabContainer.parentElement.clientWidth?this._tabContainer.clientWidth-this._tabContainer.parentElement.clientWidth:0,s.length>0&&e<s.length&&n<s.length){if(0===e&&!this._rtl||e===s.length-1&&this._rtl){if(this._rtl)switch(t.FlexGrid._getRtlMode()){case"rev":this._tabContainer.parentElement.scrollLeft=0;break;case"neg":this._tabContainer.parentElement.scrollLeft=-r;break;default:this._tabContainer.parentElement.scrollLeft=r}else this._tabContainer.parentElement.scrollLeft=0;return}if(0===e&&this._rtl||e===s.length-1&&!this._rtl){if(this._rtl)switch(t.FlexGrid._getRtlMode()){case"rev":this._tabContainer.parentElement.scrollLeft=r;break;case"neg":this._tabContainer.parentElement.scrollLeft=0;break;default:this._tabContainer.parentElement.scrollLeft=0}else this._tabContainer.parentElement.scrollLeft=r;return}if(e>=n)for(o=n+1;e>=o;o++)i=s[o],this._scrollSheetTabContainer(i);else for(o=n-1;o>=e;o--)i=s[o],this._scrollSheetTabContainer(i)}},i.prototype._adjustNavigationButtons=function(t){var n,i=this.hostElement.querySelectorAll(".wj-sheet-page button");i&&4===i.length&&(t?(n=i[0].querySelector("span"),e.removeClass(n,"wj-glyph-step-backward"),e.addClass(n,"wj-glyph-step-backward-rtl"),n=i[1].querySelector("span"),e.removeClass(n,"wj-glyph-left"),e.addClass(n,"wj-glyph-left-rtl"),n=i[2].querySelector("span"),e.removeClass(n,"wj-glyph-right"),e.addClass(n,"wj-glyph-right-rtl"),n=i[3].querySelector("span"),e.removeClass(n,"wj-glyph-step-forward"),e.addClass(n,"wj-glyph-step-forward-rtl")):(n=i[0].querySelector("span"),e.removeClass(n,"wj-glyph-step-backward-rtl"),e.addClass(n,"wj-glyph-step-backward"),n=i[1].querySelector("span"),e.removeClass(n,"wj-glyph-left-rtl"),e.addClass(n,"wj-glyph-left"),n=i[2].querySelector("span"),e.removeClass(n,"wj-glyph-right-rtl"),e.addClass(n,"wj-glyph-right"),n=i[3].querySelector("span"),e.removeClass(n,"wj-glyph-step-forward-rtl"),e.addClass(n,"wj-glyph-step-forward")))},i.controlTemplate='<div wj-part="sheet-container" class="wj-sheet" style="height:100%;position:relative"><div wj-part="sheet-page" class="wj-btn-group wj-sheet-page"><button type="button" class="wj-btn wj-btn-default"><span class="wj-sheet-icon wj-glyph-step-backward"></span></button><button type="button" class="wj-btn wj-btn-default"><span class="wj-sheet-icon wj-glyph-left"></span></button><button type="button" class="wj-btn wj-btn-default"><span class="wj-sheet-icon wj-glyph-right"></span></button><button type="button" class="wj-btn wj-btn-default"><span class="wj-sheet-icon wj-glyph-step-forward"></span></button></div><div class="wj-sheet-tab" style="height:100%;overflow:hidden"><ul wj-part="container"></ul></div><div wj-part="new-sheet" class="wj-new-sheet"><span class="wj-sheet-icon wj-glyph-file"></span></div></div>',i}(e.Control),n._SheetTabs=r,o=function(){function e(e,t){this._column=e,this._ascending=t}return Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ascending",{get:function(){return this._ascending},enumerable:!0,configurable:!0}),e}(),n._UnboundSortDescription=o}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n,i=function(){function i(t){this._owner=t,this._sortDescriptions=new e.collections.CollectionView,this._committedList=[new n(-1,!0)],this._sortDescriptions.newItemCreator=function(){return new n(-1,!0)},this._refresh()}return Object.defineProperty(i.prototype,"sortDescriptions",{get:function(){return this._sortDescriptions},set:function(e){this._sortDescriptions=e,this.commitSort(!0),this._refresh()},enumerable:!0,configurable:!0}),i.prototype.addSortLevel=function(t,n){void 0===n&&(n=!0);var i=this._sortDescriptions.addNew();null!=t&&!isNaN(t)&&e.isInt(t)&&(i.columnIndex=t),i.ascending=n,this._sortDescriptions.commitNew()},i.prototype.deleteSortLevel=function(e){var t;t=null!=e?this._getSortItem(e):this._sortDescriptions.currentItem,t&&this._sortDescriptions.remove(t)},i.prototype.copySortLevel=function(){var e,t=this._sortDescriptions.currentItem;t&&(e=this._sortDescriptions.addNew(),e.columnIndex=parseInt(t.columnIndex),e.ascending=t.ascending,this._sortDescriptions.commitNew())},i.prototype.editSortLevel=function(e,t){null!=e&&(this._sortDescriptions.currentItem.columnIndex=e),null!=t&&(this._sortDescriptions.currentItem.ascending=t)},i.prototype.moveSortLevel=function(e){var t=this._sortDescriptions.currentItem;if(t){var n=this._sortDescriptions.sourceCollection,i=n.indexOf(t),r=i+e;i>-1&&r>-1&&(n.splice(i,1),n.splice(r,0,t),this._sortDescriptions.refresh(),this._sortDescriptions.moveCurrentTo(t))}},i.prototype.checkSortItemExists=function(e){for(var t,n=0,i=this._sortDescriptions.itemCount;i>n;n++)if(t=this._sortDescriptions.items[n],+t.columnIndex===e)return n;return-1},i.prototype.commitSort=function(i){var r,o,s,a,l,c,u,h,p,d=this;if(void 0===i&&(i=!0),p=this._owner.itemsSource&&this._owner.itemsSource instanceof e.collections.CollectionView,this._owner.selectedSheet){if(c=this._owner.selectedSheet._unboundSortDesc,i&&(u=new t._SortColumnAction(this._owner)),this._committedList=this._sortDescriptions.itemCount>0?this._sortDescriptions.items.slice():[new n(-1,!0)],this._owner.collectionView){for(h=this._scanUnboundRows(),this._owner.collectionView.beginUpdate(),this._owner.selectedSheet.grid.collectionView.beginUpdate(),s=this._owner.collectionView.sortDescriptions,s.clear(),p===!1&&(a=this._owner.selectedSheet.grid.collectionView.sortDescriptions,a.clear()),l=0;l<this._sortDescriptions.itemCount;l++)r=this._sortDescriptions.items[l],r.columnIndex>-1&&(o=new e.collections.SortDescription(this._owner.columns[r.columnIndex].binding,r.ascending),s.push(o),p===!1&&a.push(o));this._owner.collectionView.endUpdate(),this._owner.selectedSheet.grid.collectionView.endUpdate(),h&&Object.keys(h).forEach(function(e){d._owner.rows.splice(+e,0,h[e])})}else for(c.clear(),l=0;l<this._sortDescriptions.itemCount;l++)r=this._sortDescriptions.items[l],r.columnIndex>-1&&c.push(new t._UnboundSortDescription(this._owner.columns[r.columnIndex],r.ascending));i&&(u.saveNewState(),this._owner.undoStack._addAction(u))}},i.prototype.cancelSort=function(){this._sortDescriptions.sourceCollection=this._committedList.slice(),this._refresh()},i.prototype._refresh=function(){var e,t,i=[];if(this._owner.selectedSheet){if(this._owner.collectionView&&this._owner.collectionView.sortDescriptions.length>0)for(e=0;e<this._owner.collectionView.sortDescriptions.length;e++)t=this._owner.collectionView.sortDescriptions[e],i.push(new n(this._getColumnIndex(t.property),t.ascending));else if(this._owner.selectedSheet&&this._owner.selectedSheet._unboundSortDesc.length>0)for(e=0;e<this._owner.selectedSheet._unboundSortDesc.length;e++)t=this._owner.selectedSheet._unboundSortDesc[e],i.push(new n(t.column.index,t.ascending));else i.push(new n(-1,!0));this._sortDescriptions.sourceCollection=i}},i.prototype._getColumnIndex=function(e){for(var t=0,n=this._owner.columns.length;n>t;t++)if(this._owner.columns[t].binding===e)return t;return-1},i.prototype._getSortItem=function(e){var t=this.checkSortItemExists(e);return t>-1?this._sortDescriptions.items[t]:void 0},i.prototype._scanUnboundRows=function(){for(var e,n,i=0;i<this._owner.rows.length;i++)e=this._owner.rows[i],e.dataItem||e instanceof t.HeaderRow||(n||(n={}),n[i]=e);return n},i}();t.SortManager=i,n=function(){function e(e,t){this._columnIndex=e,this._ascending=t}return Object.defineProperty(e.prototype,"columnIndex",{get:function(){return this._columnIndex},set:function(e){this._columnIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ascending",{get:function(){return this._ascending},set:function(e){this._ascending=e},enumerable:!0,configurable:!0}),e}(),t.ColumnSortDescription=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(){function n(n){this.MAX_STACK_SIZE=500,this._stack=[],this._pointer=-1,this._resizingTriggered=!1,this.undoStackChanged=new e.Event;var i=this;i._owner=n,i._owner.prepareCellForEdit.addHandler(i._initCellEditAction,i),i._owner.cellEditEnded.addHandler(function(){i._pendingAction instanceof t._EditAction&&!i._pendingAction.isPaste&&i._afterProcessCellEditAction(i)},i),i._owner.pasting.addHandler(i._initCellEditActionForPasting,i),i._owner.pastingCell.addHandler(function(e,n){i._pendingAction instanceof t._EditAction&&i._pendingAction.updateForPasting(n.range)},i),i._owner.pasted.addHandler(function(){i._pendingAction instanceof t._EditAction&&i._pendingAction.isPaste&&i._afterProcessCellEditAction(i)},i),i._owner.resizingColumn.addHandler(function(e,n){i._resizingTriggered||(i._pendingAction=new t._ColumnResizeAction(i._owner,n.panel,n.col),i._resizingTriggered=!0)},i),i._owner.resizedColumn.addHandler(function(){i._pendingAction instanceof t._ColumnResizeAction&&i._pendingAction.saveNewState()&&i._addAction(i._pendingAction),i._pendingAction=null,i._resizingTriggered=!1},i),i._owner.resizingRow.addHandler(function(e,n){i._resizingTriggered||(i._pendingAction=new t._RowResizeAction(i._owner,n.panel,n.row),i._resizingTriggered=!0)},i),i._owner.resizedRow.addHandler(function(){i._pendingAction instanceof t._RowResizeAction&&i._pendingAction.saveNewState()&&i._addAction(i._pendingAction),i._pendingAction=null,i._resizingTriggered=!1},i),i._owner.draggingRowColumn.addHandler(function(e,n){n.isShiftKey&&(i._pendingAction=n.isDraggingRows?new t._RowsChangedAction(i._owner):new t._ColumnsChangedAction(i._owner))},i),i._owner.droppingRowColumn.addHandler(function(){i._pendingAction&&i._pendingAction.saveNewState()&&i._addAction(i._pendingAction),i._pendingAction=null},i)}return Object.defineProperty(n.prototype,"canUndo",{get:function(){return this._pointer>-1&&this._pointer<this._stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canRedo",{get:function(){return this._pointer+1>-1&&this._pointer+1<this._stack.length},enumerable:!0,configurable:!0}),n.prototype.onUndoStackChanged=function(){this.undoStackChanged.raise(this)},n.prototype.undo=function(){var e;this.canUndo&&(e=this._stack[this._pointer],this._beforeUndoRedo(e),e.undo(),this._pointer--,this.onUndoStackChanged())},n.prototype.redo=function(){var e;this.canRedo&&(this._pointer++,e=this._stack[this._pointer],this._beforeUndoRedo(e),e.redo(),this.onUndoStackChanged())},n.prototype._addAction=function(e){this._stack.length>0&&this._stack.length>this._pointer+1&&this._stack.splice(this._pointer+1,this._stack.length-this._pointer-1),this._stack.length>=this.MAX_STACK_SIZE&&this._stack.splice(0,this._stack.length-this.MAX_STACK_SIZE+1),this._pointer=this._stack.length,this._stack.push(e),this.onUndoStackChanged()},n.prototype.clear=function(){this._stack.length=0},n.prototype._initCellEditAction=function(e,n){this._pendingAction=new t._EditAction(this._owner,n.range)},n.prototype._initCellEditActionForPasting=function(){this._pendingAction=new t._EditAction(this._owner),this._pendingAction.markIsPaste()},n.prototype._afterProcessCellEditAction=function(e){e._pendingAction instanceof t._EditAction&&e._pendingAction.saveNewState()&&e._addAction(this._pendingAction),e._pendingAction=null},n.prototype._beforeUndoRedo=function(e){this._owner.selectedSheetIndex=e.sheetIndex},n}();t.UndoStack=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.apply=function(e){var n=this.column.grid;return n instanceof t.FlexSheet?this.showValues&&Object.keys(this.showValues).length?(e=n.getCellValue(e,this.column.index,!0),void 0!=this.showValues[e]):!0:!1},n}(e.grid.filter.ValueFilter);t._FlexSheetValueFilter=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.updateEditor=function(){var n,i,r,o,s,a,l,c,u,h,p=this.filter.column,d=p.grid,f=p.index,g=[],m={};if(this.filter.uniqueValues)return void e.prototype.updateEditor.call(this);for(h=0;h<d.rows.length;h++)s=this.filter.apply(h),o=this.filter.showValues,this.filter.showValues=null,a=d._filter._filter(h),this.filter.showValues=o,i=d.getMergedRange(d.cells,h,f),i&&(h!==i.topRow||f!==i.leftCol)||(n=d.rows[h],n instanceof t.HeaderRow||!n.isVisible&&(s||!a))||(r=d.getCellValue(h,f),l=d.getCellValue(h,f,!0),m[l]||(m[l]=!0,g.push({value:r,text:l})));if(c=this.filter.showValues,c&&0!=Object.keys(c).length){for(u in c)for(h=0;h<g.length;h++)if(g[h].text==u){g[h].show=!0;break}}else for(h=0;h<g.length;h++)g[h].show=!0;this._lbValues.isContentHtml=p.isContentHtml,this._cmbFilter.text=this.filter.filterText,this._filterText=this._cmbFilter.text.toLowerCase(),this._view.pageSize=this.filter.maxValues,this._view.sourceCollection=g,this._view.moveCurrentToPosition(-1)},n}(e.grid.filter.ValueFilterEditor);t._FlexSheetValueFilterEditor=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.apply=function(n){var i,r,o,s,a,l=this.column,c=l.grid,u=this.condition1,h=this.condition2;return c instanceof t.FlexSheet?this.isActive?(i=c.getCellValue(n,l.index),r=o=i,l.dataMap?(i=l.dataMap.getDisplayValue(i),r=o=i):e.isDate(i)?(e.isString(u.value)||e.isString(h.value))&&(i=c.getCellValue(n,l.index,!0),r=o=i):e.isNumber(i)&&(i=e.Globalize.parseFloat(c.getCellValue(n,l.index,!0)),r=o=i,0!==i||l.dataType||(u.isActive&&""===u.value&&(r=null),h.isActive&&""===h.value&&(o=null))),s=u.apply(r),a=h.apply(o),u.isActive&&h.isActive?this.and?s&&a:s||a:u.isActive?s:h.isActive?a:!0):!0:!1},i}(e.grid.filter.ConditionFilter);t._FlexSheetConditionFilter=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(e){function n(n,i){e.call(this,n,i),this._valueFilter=new t._FlexSheetValueFilter(i),this._conditionFilter=new t._FlexSheetConditionFilter(i)}return __extends(n,e),n}(e.grid.filter.ColumnFilter);t._FlexSheetColumnFilter=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(n){function i(e,t,i){void 0===i&&(i=!0),n.call(this,e,t,i);var r,o,s=this;i&&(this._divSort.style.display=""),r=this.cloneElement(this._btnAsc),o=this.cloneElement(this._btnDsc),this._btnAsc.parentNode.replaceChild(r,this._btnAsc),this._btnDsc.parentNode.replaceChild(o,this._btnDsc),r.addEventListener("click",function(e){s._sortBtnClick(e,!0)}),o.addEventListener("click",function(e){s._sortBtnClick(e,!1)})}return __extends(i,n),i.prototype._showFilter=function(i){i==e.grid.filter.FilterType.Value&&null==this._edtVal&&(this._edtVal=new t._FlexSheetValueFilterEditor(this._divEdtVal,this.filter.valueFilter)),n.prototype._showFilter.call(this,i)},i.prototype._sortBtnClick=function(e,t){var n,i,r,o=this.filter.column,s=o.grid.sortManager;e.preventDefault(),e.stopPropagation(),n=s.checkSortItemExists(o.index),n>-1?(s.sortDescriptions.moveCurrentToPosition(n),r=s.sortDescriptions.currentItem,r.ascending=t,i=-n):(s.addSortLevel(o.index,t),i=-(s.sortDescriptions.items.length-1)),s.moveSortLevel(i),s.commitSort(),this.updateEditor(),this.onButtonClicked()},i.prototype.cloneElement=function(e){for(var t=e.cloneNode();e.firstChild;)t.appendChild(e.lastChild);return t},i}(e.grid.filter.ColumnFilterEditor);t._FlexSheetColumnFilterEditor=n}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n;!function(n){"use strict";var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),Object.defineProperty(r.prototype,"filterDefinition",{get:function(){for(var e,t,n,i={defaultFilterType:this.defaultFilterType,filters:[]},r=0;r<this._filters.length;r++)e=this._filters[r],e&&e.column&&(e.conditionFilter.isActive?(t=e.conditionFilter,i.filters.push({columnIndex:e.column.index,type:"condition",condition1:{operator:t.condition1.operator,value:t.condition1.value},and:t.and,condition2:{operator:t.condition2.operator,value:t.condition2.value}})):e.valueFilter.isActive&&(n=e.valueFilter,i.filters.push({columnIndex:e.column.index,type:"value",filterText:n.filterText,showValues:n.showValues})));return JSON.stringify(i)},set:function(t){var n,i,r,o=JSON.parse(e.asString(t));for(this.clear(),this.defaultFilterType=o.defaultFilterType,n=0;n<o.filters.length;n++){var s=o.filters[n],a=this.grid.columns[s.columnIndex],l=this.getColumnFilter(a,!0);if(l)switch(s.type){case"condition":i=l.conditionFilter,i.condition1.value=a.dataType==e.DataType.Date?e.changeType(s.condition1.value,a.dataType,null):s.condition1.value,i.condition1.operator=s.condition1.operator,i.and=s.and,i.condition2.value=a.dataType==e.DataType.Date?e.changeType(s.condition2.value,a.dataType,null):s.condition2.value,i.condition2.operator=s.condition2.operator;break;case"value":r=l.valueFilter,r.filterText=s.filterText,r.showValues=s.showValues}}this.apply()},enumerable:!0,configurable:!0}),r.prototype.apply=function(){var e=this;e.grid.deferUpdate(function(){for(var t,i=0;i<e.grid.rows.length;i++)t=e.grid.rows[i],t instanceof n.HeaderRow||(t.visible=e._filter(i))})},r.prototype.editColumnFilter=function(i,r){var o,s=this;if(this.closeEditor(),i=e.isString(i)?this.grid.columns.getColumn(i):e.asType(i,t.Column,!1),o=new t.CellRangeEventArgs(this.grid.cells,new t.CellRange(-1,i.index)),this.onFilterChanging(o),!o.cancel){o.cancel=!0;var a=document.createElement("div"),l=this.getColumnFilter(i),c=new n._FlexSheetColumnFilterEditor(a,l,this.showSortButtons);e.addClass(a,"wj-dropdown-panel"),this.grid._rtl&&(a.dir="rtl"),c.filterChanged.addHandler(function(){o.cancel=!1,setTimeout(function(){o.cancel||s.apply()})}),c.buttonClicked.addHandler(function(){s.closeEditor(),s.onFilterChanged(o)}),c.lostFocus.addHandler(function(){setTimeout(function(){var t=e.Control.getControl(s._divEdt);t&&!t.containsFocus()&&s.closeEditor()},10)});var u=this.grid.columnHeaders,h=r?r.row:u.rows.length-1,p=r?r.col:i.index,d=u.getCellBoundingRect(h,p),f=document.elementFromPoint(d.left+d.width/2,d.top+d.height/2);f=e.closest(f,".wj-cell"),f?e.showPopup(a,f,!1,!1,!1):e.showPopup(a,d),c.focus(),this._divEdt=a,this._edtCol=i}},r.prototype.getColumnFilter=function(i,r){var o,s;if(void 0===r&&(r=!0),e.isString(i)?i=this.grid.columns.getColumn(i):e.isNumber(i)&&(i=this.grid.columns[i]),!i)return null;for(i=e.asType(i,t.Column),o=0;o<this._filters.length;o++)if(this._filters[o].column==i)return this._filters[o];return r?(s=new n._FlexSheetColumnFilter(this,i),this._filters.push(s),s):null},r}(e.grid.filter.FlexGridFilter);n._FlexSheetFilter=i}(n=t.sheet||(t.sheet={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={}));var wijmo;!function(e){var t;!function(t){var n;!function(n){"use strict";var i=function(){function n(){}return n["export"]=function(t,n){e._deprecated("FlexGridXlsxConverter.export","FlexGridXlsxConverter.save");var i=this.toWorkbookOM(t,n);return e.xlsx.XlsxConverter["export"](i)},n["import"]=function(t,n,i,r){e._deprecated("FlexGridXlsxConverter.import","FlexGridXlsxConverter.load");var o=e.xlsx.XlsxConverter["import"](t);this.fromWorkbookOM(o,n,i,r)},n.toWorkbookOM=function(t,n){e._deprecated("FlexGridXlsxConverter.toWorkbookOM","FlexGridXlsxConverter.save");var i,r,o={sheets:[],creator:"",created:new Date,lastModifiedBy:"",modified:new Date,activeWorksheet:0};if(n&&null!=n.activeWorksheet&&n.activeWorksheet>0&&(o.activeWorksheet=n.activeWorksheet),e.isArray(t))for(i=0;i<t.length;i++)r=t[i],this._exportFlexGrid(r,o,n);else this._exportFlexGrid(t,o,n);return o},n.fromWorkbookOM=function(n,i,r,o){e._deprecated("FlexGridXlsxConverter.fromWorkbookOM","FlexGridXlsxConverter.load");var s,a,l,c,u,h,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P,k,T,$,D,A,R,j,M,O,I,F,N,L=r?r.includeColumnHeader:!0,H=r?r.includeColumnHeader:!0,V=1,B=0,U=0,z=0,W=!1,q={};if(i.itemsSource=null,i.columns.clear(),i.rows.clear(),i.frozenColumns=0,i.frozenRows=0,0!==n.sheets.length)for(o&&(V=n.sheets.length);V>B;B++){for(j={},M={},z=0,c=[],O=[],v=n.sheets[B],L&&(z=1,v.rows.length<=1&&(H=!1,z=0),d=v.rows[0]),_=this._getColumnCount(v.rows),y=this._getRowCount(v.rows,_),S=v.summaryBelow,B>0&&(D=document.createElement("div"),i=new t.FlexGrid(D)),l=v.columns||v.cols,U=0;_>U;U++)i.columns.push(new t.Column),!l[U]||(isNaN(+l[U].width)||(i.columns[U].width=+l[U].width),l[U].visible||void 0==l[U].visible||(i.columns[U].visible=!!l[U].visible),l[U].style&&!!l[U].style.wordWrap&&(i.columns[U].wordWrap=l[U].style.wordWrap));for(;y>z;z++){if(w=!1,N=!0,m=v.rows[z])for(C=z+1;C<v.rows.length;){if(x=v.rows[C]){(isNaN(m.groupLevel)&&!isNaN(x.groupLevel)||!isNaN(m.groupLevel)&&m.groupLevel<x.groupLevel)&&(w=!0);break}C++}for(w&&!S?(P&&(P.isCollapsed=W),P=new t.GroupRow,P.isReadOnly=!1,W=null==m.collapsed?!1:m.collapsed,P.level=isNaN(m.groupLevel)?0:m.groupLevel,q[P.level]=W,this._checkParentCollapsed(q,P.level)&&P._setFlag(t.RowColFlags.ParentCollapsed,!0),i.rows.push(P)):(E=new t.Row,m&&this._checkParentCollapsed(q,m.groupLevel)&&E._setFlag(t.RowColFlags.ParentCollapsed,!0),i.rows.push(E)),!m||!m.height||isNaN(m.height)||(i.rows[H?z-1:z].height=m.height),U=0;_>U;U++)if(m){if(b=m.cells[U],$=b?b.formula:void 0,$&&"="!==$[0]&&($="="+$),$=$?this._parseToFlexSheetFormula($):void 0,i.setCellData(H?z-1:z,U,$&&o?$:this._getItemValue(b)),!w&&b&&null!=b.value&&""!==b.value&&this._setColumn(c,U,b),A=z*_+U,R=b?b.style:void 0){if(N=N&&!!R.wordWrap,I=this._getItemType(b),R.hAlign)F=e.xlsx.Workbook._parseHAlignToString(e.asEnum(R.hAlign,e.xlsx.HAlign));else switch(I){case e.DataType.Number:F="right";break;case e.DataType.Boolean:F="center";break;default:F="left"}j[A]={fontWeight:R.font&&R.font.bold?"bold":"none",fontStyle:R.font&&R.font.italic?"italic":"none",textDecoration:R.font&&R.font.underline?"underline":"none",textAlign:F,fontFamily:R.font&&R.font.family?R.font.family:"",fontSize:R.font&&R.font.size?R.font.size+"px":"",color:R.font&&R.font.color?R.font.color:"",backgroundColor:R.fill&&R.fill.color?R.fill.color:"",format:e.xlsx.Workbook._parseExcelFormat(b)},R.font&&-1===O.indexOf(R.font.family)&&O.push(R.font.family)}if(b&&e.isNumber(b.rowSpan)&&e.isNumber(b.colSpan))for(s=z;s<z+b.rowSpan;s++)for(a=U;a<U+b.colSpan;a++)A=s*_+a,M[A]=new t.CellRange(z,U,z+b.rowSpan-1,U+b.colSpan-1)}else i.setCellData(H?z-1:z,U,""),this._setColumn(c,U,void 0);m&&(this._checkParentCollapsed(q,m.groupLevel)||m.visible||void 0==m.visible||(i.rows[H?z-1:z].visible=m.visible),i.rows[H?z-1:z].wordWrap=!!m.style&&!!m.style.wordWrap||N)}for(P&&(P.isCollapsed=W),v.frozenPane&&(k=v.frozenPane.columns,e.isNumber(k)&&!isNaN(k)&&(i.frozenColumns=k),T=v.frozenPane.rows,e.isNumber(T)&&!isNaN(T)&&(i.frozenRows=H&&T>0?T-1:T)),U=0;U<i.columnHeaders.columns.length;U++)u=c[U],h=i.columns[U],h.isRequired=!1,H?(f=d?d.cells[U]:void 0,f&&f.value?(g=e.xlsx.Workbook._parseExcelFormat(f),p=e.Globalize.format(f.value,g)):p=this._numAlpha(U)):p=this._numAlpha(U),h.header=p,u&&(u.dataType===e.DataType.Boolean&&(h.dataType=u.dataType),h.format=u.format,h.align=u.hAlign,h.wordWrap=h.wordWrap||u.wordWrap);o&&(i.wj_sheetInfo={name:v.name,visible:v.visible!==!1,styledCells:j,mergedRanges:M,fonts:O}),o&&B>0&&o.push(i)}},n.save=function(n,i,r){var o,s,a,l,c,u,h,p,d,f,g,m,v,y=new e.xlsx.Workbook,_=new e.xlsx.WorkSheet,w=new e.xlsx.WorkbookFrozenPane,b=i&&null!=i.includeColumnHeaders?i.includeColumnHeaders:!0,C=i&&null!=i.includeRowHeaders?i.includeRowHeaders:!1,x=i&&null!=i.includeCellStyles?i.includeCellStyles:!0,S=i?i.activeWorksheet:null,E=i?i.includeColumns:null,P=0,k=0,T=0,$=0;if(d=n.wj_sheetInfo,_.name=i?i.sheetName:"",_.visible=i?i.sheetVisible!==!1:!0,_.style=new e.xlsx.WorkbookStyle,_.style.font=new e.xlsx.WorkbookFont,_.style.font.family="Arial",_.style.font.size=14,u=[],!d&&x&&(f=document.createElement("div"),f.style.visibility="hidden",n.hostElement.appendChild(f)),C){for(h=0;h<n.rowHeaders.rows.length;h++)for(u[h]=[],p=0;p<n.rowHeaders.columns.length;p++)a=n._getBindingColumn(n.rowHeaders,h,n.rowHeaders.columns[p]),l=this._getColumnSetting(a,n.columnHeaders.columns.defaultSize),u[h][p]=l,0===h&&(c=new e.xlsx.WorkbookColumn,c._deserialize(l),_._addWorkbookColumn(c,p));$=p}if(b&&n.columnHeaders.rows.length>0){for(h=0;h<n.columnHeaders.rows.length;h++){for(u[h]||(u[h]=[]),p=0;p<n.columnHeaders.columns.length;p++)a=n._getBindingColumn(n.columnHeaders,h,n.columnHeaders.columns[p]),l=this._getColumnSetting(a,n.columnHeaders.columns.defaultSize),u[h][$+p]=l,0===h&&(!E||E(a))&&(c=new e.xlsx.WorkbookColumn,c._deserialize(l),_._addWorkbookColumn(c));$=0,o={},s=new e.xlsx.WorkbookRow,C&&($=this._parseFlexGridRowToSheetRow(n.topLeftCells,o,h,0,u,x,f,!1,0,E)),this._parseFlexGridRowToSheetRow(n.columnHeaders,o,h,$,u,x,f,!1,0,E),o.cells.length>0&&(s._deserialize(o),_._addWorkbookRow(s,h))}k=h}else for(u[0]||(u[0]=[]),p=0;p<n.columnHeaders.columns.length;p++)a=n._getBindingColumn(n.columnHeaders,0,n.columnHeaders.columns[p]),l=this._getColumnSetting(a,n.columnHeaders.columns.defaultSize),u[0][$+p]=l,(!E||E(a))&&(c=new e.xlsx.WorkbookColumn,c._deserialize(l),_._addWorkbookColumn(c));for(h=0;h<n.cells.rows.length;h++)$=0,o={},s=new e.xlsx.WorkbookRow,g=n.rows[h],g instanceof t._NewRowTemplate||(v=g instanceof t.GroupRow,v&&(m=e.tryCast(g,t.GroupRow),P=m.level+1),C&&($=this._parseFlexGridRowToSheetRow(n.rowHeaders,o,h,0,u,x,f,v,P,E)),this._parseFlexGridRowToSheetRow(n.cells,o,h,$,u,x,f,v,P,E),o.cells.length>0&&(s._deserialize(o),_._addWorkbookRow(s,k+h)));for(T=n.cells.rows.length,h=0;h<n.columnFooters.rows.length;h++)$=0,o={},s=new e.xlsx.WorkbookRow,g=n.columnFooters.rows[h],v=g instanceof t.GroupRow,C&&($=this._parseFlexGridRowToSheetRow(n.rowHeaders,o,h,0,u,x,f,v,0,E)),this._parseFlexGridRowToSheetRow(n.columnFooters,o,h,$,u,x,f,v,0,E),o.cells.length>0&&(s._deserialize(o),_._addWorkbookRow(s,k+T+h));return w.rows=b?n.frozenRows+n.columnHeaders.rows.length:n.frozenRows,w.columns=C?n.frozenColumns+n.rowHeaders.columns.length:n.frozenColumns,_.frozenPane=w,y._addWorkSheet(_),!d&&x&&n.hostElement.removeChild(f),y.activeWorksheet=S,r&&y.save(r),y},n.load=function(t,n,i){var r,o,s=this;if(n instanceof Blob)o=new FileReader,o.onload=function(){var n=e.xlsx.Workbook._base64EncArr(new Uint8Array(o.result));r=new e.xlsx.Workbook,r.load(n),s._loadToFlexGrid(t,r,i)},o.readAsArrayBuffer(n);else if(n instanceof e.xlsx.Workbook)s._loadToFlexGrid(t,n,i);else{if(n instanceof ArrayBuffer)n=e.xlsx.Workbook._base64EncArr(new Uint8Array(n));else if(!e.isString(n))throw"Invalid workbook.";r=new e.xlsx.Workbook,r.load(n),s._loadToFlexGrid(t,r,i)}},n._exportFlexGrid=function(n,i,r){var o,s,a,l,c,u,h,p,d,f,g=[],m=[],v={columns:[],rows:[],summaryBelow:!1},y=r?null!=r.includeColumnHeaders?r.includeColumnHeaders:null!=r.includeColumnHeader?r.includeColumnHeader:!0:!0,_=r&&null!=r.includeRowHeaders?r.includeRowHeaders:!1,w=r?null!=r.includeCellStyles?r.includeCellStyles:null!=r.needGetCellStyle?r.needGetCellStyle:!0:!0,b=r?r.includeColumns:null,C=0,x=0,S=0;if(u=n.wj_sheetInfo,v.name=u?u.name:"",v.visible=u?u.visible!==!1:!0,v.style={font:{family:"Arial",size:14}},v.columns=[],!u&&w&&(h=document.createElement("div"),h.style.visibility="hidden",n.hostElement.appendChild(h)),_){for(l=0;l<n.rowHeaders.rows.length;l++)for(m[l]=[],v.columns[l]=[],c=0;c<n.rowHeaders.columns.length;c++)s=n._getBindingColumn(n.rowHeaders,l,n.rowHeaders.columns[c]),a=this._getColumnSetting(s,n.columnHeaders.columns.defaultSize),m[l][c]=a,v.columns[l][c]=a;S=c}if(y&&n.columnHeaders.rows.length>0){for(l=0;l<n.columnHeaders.rows.length;l++){for(m[l]||(m[l]=[]),v.columns[l]||(v.columns[l]=[]),c=0;c<n.columnHeaders.columns.length;c++)s=n._getBindingColumn(n.rowHeaders,l,n.columnHeaders.columns[c]),a=this._getColumnSetting(s,n.columnHeaders.columns.defaultSize),m[l][S+c]=a,(!b||b(s))&&v.columns[l].push(a);S=0,o={},_&&(S=this._parseFlexGridRowToSheetRow(n.topLeftCells,o,l,0,m,w,h,!1,0,b)),this._parseFlexGridRowToSheetRow(n.columnHeaders,o,l,S,m,w,h,!1,0,b),o.cells.length>0&&(g[l]=o)}x=l}else for(m[0]||(m[0]=[]),v.columns[l]||(v.columns[l]=[]),c=0;c<n.columnHeaders.columns.length;c++)s=n.columnHeaders.columns[c],a=this._getColumnSetting(s,n.columnHeaders.columns.defaultSize),m[0][S+c]=a,(!b||b(s))&&v.columns[l].push(a);for(v.columns=m,l=0;l<n.cells.rows.length;l++)S=0,o={},p=n.rows[l],f=p instanceof t.GroupRow,f&&(d=e.tryCast(p,t.GroupRow),C=d.level+1),_&&(S=this._parseFlexGridRowToSheetRow(n.rowHeaders,o,l,0,m,w,h,f,C,b)),this._parseFlexGridRowToSheetRow(n.cells,o,l,S,m,w,h,f,C,b),o.cells.length>0&&(g[x+l]=o);v.rows=g,v.frozenPane={rows:y?n.frozenRows+n.columnHeaders.rows.length:n.frozenRows,columns:_?n.frozenColumns+n.rowHeaders.columns.length:n.frozenColumns},i.sheets.push(v),!u&&w&&n.hostElement.removeChild(h)},n._loadToFlexGrid=function(n,i,r){var o,s,a,l,c,u,h,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P,k,T,$,D,A,R,j,M,O,I,F=r&&null!=r.includeColumnHeaders?r.includeColumnHeaders:!0,N=r&&null!=r.includeColumnHeaders?r.includeColumnHeaders:!0,L=r&&null!=r.sheetIndex&&!isNaN(r.sheetIndex)?r.sheetIndex:0,H=r?r.sheetName:null,V=r?r.sheetVisible:!0,B=r&&(null!=r.sheetIndex&&!isNaN(r.sheetIndex)||null!=r.sheetName||null!=r.sheetVisible),U=0,z=0,W=!1,q={};if(n.itemsSource=null,n.columns.clear(),n.rows.clear(),n.frozenColumns=0,n.frozenRows=0,A={},R={},z=0,
l=[],j=[],0>L||L>=i.sheets.length)throw"The sheet index option is out of the sheet range of current workbook.";if(m=i.sheets[L],null!=m.rows){for(F&&(z=1,m.rows.length<=1&&(N=!1,z=0),p=m.rows[0]),y=this._getColumnCount(m.rows),v=this._getRowCount(m.rows,y),x=m.summaryBelow,a=m.columns||m.cols,U=0;y>U;U++)n.columns.push(new t.Column),!a[U]||(isNaN(+a[U].width)||(n.columns[U].width=+a[U].width),a[U].visible||void 0==a[U].visible||(n.columns[U].visible=!!a[U].visible),a[U].style&&!!a[U].style.wordWrap&&(n.columns[U].wordWrap=a[U].style.wordWrap));for(;v>z;z++){if(_=!1,I=!0,g=m.rows[z])for(b=z+1;b<m.rows.length;){if(C=m.rows[b]){(isNaN(g.groupLevel)&&!isNaN(C.groupLevel)||!isNaN(g.groupLevel)&&g.groupLevel<C.groupLevel)&&(_=!0);break}b++}for(_&&!x?(E&&(E.isCollapsed=W),E=new t.GroupRow,E.isReadOnly=!1,W=null==g.collapsed?!1:g.collapsed,E.level=isNaN(g.groupLevel)?0:g.groupLevel,q[E.level]=W,this._checkParentCollapsed(q,E.level)&&E._setFlag(t.RowColFlags.ParentCollapsed,!0),n.rows.push(E)):(S=new t.Row,g&&this._checkParentCollapsed(q,g.groupLevel)&&S._setFlag(t.RowColFlags.ParentCollapsed,!0),n.rows.push(S)),!g||!g.height||isNaN(g.height)||(n.rows[N?z-1:z].height=g.height),U=0;y>U;U++)if(g){if(w=g.cells[U],T=w?w.formula:void 0,T&&"="!==T[0]&&(T="="+T),T=T?this._parseToFlexSheetFormula(T):void 0,n.setCellData(N?z-1:z,U,T&&B?T:this._getItemValue(w)),_||this._setColumn(l,U,w),$=z*y+U,D=w?w.style:void 0){if(I=I&&!!D.wordWrap,M=this._getItemType(w),D.hAlign)O=e.xlsx.Workbook._parseHAlignToString(e.asEnum(D.hAlign,e.xlsx.HAlign));else switch(M){case e.DataType.Number:O="right";break;case e.DataType.Boolean:O="center";break;default:O="left"}A[$]={fontWeight:D.font&&D.font.bold?"bold":"none",fontStyle:D.font&&D.font.italic?"italic":"none",textDecoration:D.font&&D.font.underline?"underline":"none",textAlign:O,fontFamily:D.font&&D.font.family?D.font.family:"",fontSize:D.font&&D.font.size?D.font.size+"px":"",color:D.font&&D.font.color?D.font.color:"",backgroundColor:D.fill&&D.fill.color?D.fill.color:"",format:e.xlsx.Workbook._parseExcelFormat(w)},D.font&&-1===j.indexOf(D.font.family)&&j.push(D.font.family)}if(w&&e.isNumber(w.rowSpan)&&w.rowSpan>0&&e.isNumber(w.colSpan)&&w.colSpan>0&&(w.rowSpan>1||w.colSpan>1))for(o=z;o<z+w.rowSpan;o++)for(s=U;s<U+w.colSpan;s++)$=o*y+s,R[$]=new t.CellRange(z,U,z+w.rowSpan-1,U+w.colSpan-1)}else n.setCellData(N?z-1:z,U,""),this._setColumn(l,U,void 0);g&&(this._checkParentCollapsed(q,g.groupLevel)||g.visible||void 0==g.visible||(n.rows[N?z-1:z].visible=g.visible),n.rows[N?z-1:z].wordWrap=!!g.style&&!!g.style.wordWrap||I)}for(E&&(E.isCollapsed=W),m.frozenPane&&(P=m.frozenPane.columns,e.isNumber(P)&&!isNaN(P)&&(n.frozenColumns=P),k=m.frozenPane.rows,e.isNumber(k)&&!isNaN(k)&&(n.frozenRows=N&&k>0?k-1:k)),U=0;U<n.columnHeaders.columns.length;U++)c=l[U],u=n.columns[U],u.isRequired=!1,N?(d=p?p.cells[U]:void 0,d&&d.value?(f=e.xlsx.Workbook._parseExcelFormat(d),h=e.Globalize.format(d.value,f)):h=this._numAlpha(U)):h=this._numAlpha(U),u.header=h,c&&(c.dataType===e.DataType.Boolean&&(u.dataType=c.dataType),u.format=c.format,u.align=c.hAlign,u.wordWrap=u.wordWrap||c.wordWrap);n.wj_sheetInfo={name:H||m.name,visible:V===!0?!0:m.visible!==!1,styledCells:A,mergedRanges:R,fonts:j}}},n._parseFlexGridRowToSheetRow=function(t,n,i,r,o,s,a,l,c,u){var h,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P,k,T,$,D,A=!1;for(h=t.grid,P=h.wj_sheetInfo,p=t.rows[i],D=null!=p.recordIndex?p.recordIndex:0,n.cells||(n.cells=[]),n.visible=p.isVisible,n.height=p.renderHeight||t.rows.defaultSize,n.groupLevel=l?c-1:c,l&&(n.collapsed=p.isCollapsed),p.wordWrap&&(n.style={wordWrap:p.wordWrap}),(p.constructor===e.grid.Row||p.constructor===e.grid._NewRowTemplate||e.grid.detail&&p.constructor===e.grid.detail.DetailRow||e.grid.multirow&&p.constructor===e.grid.multirow._MultiRow)&&(A=!0),f=0;f<t.columns.length;f++)if(E=1,S=1,$=!1,T=h._getBindingColumn(t,i,t.columns[f]),x=null,P&&t===h.cells?(b=i*t.columns.length+f,P.mergedRanges&&(x=P.mergedRanges[b]),P.styledCells&&(C=P.styledCells[b])):s&&(C=this._getCellStyle(t,a,i,f)||{}),x||(x=h.getMergedRange(t,i,f,!1)),x?i===x.topRow&&f===x.leftCol&&(S=x.bottomRow-x.topRow+1,E=this._getColSpan(t,x,u),$=!0):$=!0,!u||u(T))if(d=o[D][f+r],A||l?(m=$?t.getCellData(i,f,!0):null,v=$?t.getCellData(i,f,!1):null,_=!1,m&&e.isString(m)&&m.length>1&&"="===m[0]&&(_=!0),k=e.isDate(v),g=C&&C.format?e.xlsx.Workbook._parseCellFormat(C.format,k):d&&d.style&&d.style.format?e.xlsx.Workbook._parseCellFormat(d.style.format,k):null,g||(k?g="m/d/yyyy":e.isNumber(v)&&!T.dataMap?g=e.isInt(v)?"#,##0":"#,##0.00":_?(w=m.toLowerCase(),"=now()"===w?(g="m/d/yyyy h:mm",k=!0):"=today()"===w||"=date"===w.substring(0,w.indexOf("("))?(g="m/d/yyyy",k=!0):"=time"===w.substring(0,w.indexOf("("))&&(g="h:mm AM/PM",k=!0)):g="General")):(m=$?h.columnHeaders.getCellData(0,f,!0):null,g="General"),t===h.cells&&l&&p.hasChildren&&f===h.columns.firstVisibleIndex){if(m?y=m:$&&(y=p.getGroupHeader().replace(/<\/?\w+>/g,"")),null==y&&!C)continue;k=e.isDate(y),n.cells.push({value:y,isDate:k,formula:_?this._parseToExcelFormula(m,k):null,colSpan:E,rowSpan:S,style:this._extend(this._parseCellStyle(C),{format:g,font:{bold:!0},hAlign:e.xlsx.HAlign.Left,indent:c-1})})}else n.cells.push({value:_?void 0:"General"===g?m:v,isDate:k,formula:_?this._parseToExcelFormula(m,k):null,colSpan:E,rowSpan:S,style:this._extend(this._parseCellStyle(C),{format:g,hAlign:C&&C.textAlign?e.xlsx.Workbook._parseStringToHAlign(C.textAlign):e.isDate(v)&&null==d.style.hAlign?e.xlsx.HAlign.Left:e.asEnum(d.style.hAlign,e.xlsx.HAlign,!0),vAlign:S>1?t===h.cells?e.xlsx.VAlign.Top:e.xlsx.VAlign.Center:null})});return r+f},n._parseCellStyle=function(t){var n=t&&t.fontSize?+t.fontSize.substring(0,t.fontSize.indexOf("px")):null;return isNaN(n)&&(n=null),{font:{bold:t&&t.fontWeight&&("bold"===t.fontWeight||!isNaN(+t.fontWeight)&&+t.fontWeight>=700),italic:t&&t.fontStyle&&"italic"===t.fontStyle,underline:t&&t.textDecoration&&"underline"===t.textDecoration,family:t?this._parseToExcelFontFamily(t.fontFamily):null,size:n,color:t&&t.color?t.color:null},fill:{color:t&&t.backgroundColor?t.backgroundColor:null},borders:t?this._parseBorder(t):null,hAlign:t&&t.textAlign?e.xlsx.Workbook._parseStringToHAlign(t.textAlign):null}},n._parseBorder=function(e){var t,n;for(var i in{Left:0,Right:0,Top:0,Bottom:0})n=this._parseEgdeBorder(e,i),n&&(t||(t={}),t[i.toLowerCase()]=n);return t},n._parseEgdeBorder=function(t,n){var i,r,o="border"+n+"Color",s=t["border"+n+"Style"];if(s&&"none"!==s&&"hidden"!==s){switch(i={},s=s.toLowerCase()){case"dotted":i.style=e.xlsx.BorderStyle.Dotted;break;case"dashed":i.style=e.xlsx.BorderStyle.Dashed;break;case"double":i.style=e.xlsx.BorderStyle.Double;break;default:i.style=e.xlsx.BorderStyle.Thin}t[o]&&(r=new e.Color(t[o]),i.color=r.toString())}return i},n._parseToExcelFontFamily=function(e){var t;return e?(t=e.split(","),t&&t.length>0&&(e=t[0].replace(/\"|\'/g,""))):e="Arial",e},n._parseToExcelFormula=function(t,n){var i,r=t.substring(1,t.indexOf("(")).toLowerCase();switch(r){case"ceiling":case"floor":t=t.substring(0,t.lastIndexOf(")"))+", 1)";break;case"text":i=t.substring(t.lastIndexOf(","),t.lastIndexOf('"')),i=e.xlsx.Workbook._parseCellFormat(i.substring(i.lastIndexOf('"')+1),n),t=t.substring(0,t.lastIndexOf(",")+1)+'"'+i+'")'}return t},n._parseToFlexSheetFormula=function(t){var n,i,r,o,s,a=t.substring(1).match(/\W+(\w+)\(/);switch(i=a&&2===a.length?a[1]:t.substring(1,t.indexOf("(")),r=t.indexOf(i),i.toLowerCase()){case"ceiling":case"floor":t=t.substring(0,t.lastIndexOf(","))+")";break;case"text":n=t.substring(r),s=n.substring(n.indexOf('"'),n.lastIndexOf('"')),s=s.substring(s.lastIndexOf('"')+1),o=s.indexOf("0")>-1?0:"",s=e.xlsx.Workbook._parseExcelFormat({value:o,style:{format:s}}),s=s.replace(/m+/g,function(e){return e.toUpperCase()}).replace(/Y+/g,function(e){return e.toLowerCase()}).replace(/M+:?|:?M+/gi,function(e){return e.indexOf(":")>-1?e.toLowerCase():e}),t=t.substring(0,r)+n.substring(0,n.indexOf('"')+1)+s+'")'}return t},n._getColumnSetting=function(t,n){var i=t.renderWidth;return i=i||n,{autoWidth:!0,width:i,visible:t.visible,style:{format:t.format?e.xlsx.Workbook._parseCellFormat(t.format,t.dataType===e.DataType.Date):"",hAlign:e.xlsx.Workbook._parseStringToHAlign(this._toExcelHAlign(t.getAlignment())),wordWrap:t.wordWrap}}},n._toExcelHAlign=function(e){return e=e?e.trim().toLowerCase():e,e?e.indexOf("center")>-1?"center":e.indexOf("right")>-1||e.indexOf("end")>-1?"right":e.indexOf("justify")>-1?"justify":"left":e},n._getColumnCount=function(t){for(var n,i=0,r=0,o=0;o<t.length;o++)n=t[o]&&t[o].cells?t[o].cells:[],n&&n.length>0&&(r=n.length,e.isInt(n[r-1].colSpan)&&n[r-1].colSpan>1&&(r=r+n[r-1].colSpan-1),r>i&&(i=r));return i},n._getRowCount=function(t,n){for(var i,r,o,s=t.length,a=s-1,l=0;n>l;l++)e:for(;a>=0;a--)if(i=t[a],r=i&&i.cells?i.cells:[],o=r[l],o&&(null!=o.value&&""!==o.value||e.isInt(o.rowSpan)&&o.rowSpan>1)){e.isInt(o.rowSpan)&&o.rowSpan>1&&a+o.rowSpan>s&&(s=a+o.rowSpan);break e}return s},n._numAlpha=function(e){var t=Math.floor(e/26)-1;return(t>-1?this._numAlpha(t):"")+String.fromCharCode(65+e%26)},n._getItemType=function(t){return void 0===t||null===t||void 0===t.value||null===t.value||isNaN(t.value)?void 0:e.getType(t.value)},n._setColumn=function(t,n,i){var r,o,s,a=t[n];a?(r=this._getItemType(i),a.dataType!==r&&a.dataType===e.DataType.Boolean&&r!==e.DataType.Boolean&&(a.dataType=r),i&&null!=i.value&&""!==i.value&&(o=e.xlsx.Workbook._parseExcelFormat(i),o&&a.format!==o&&"General"!==o&&(a.format=o)),i&&i.style&&(i.style.hAlign&&(s=e.xlsx.Workbook._parseHAlignToString(e.asEnum(i.style.hAlign,e.xlsx.HAlign))),a.wordWrap=a.wordWrap&&!!i.style.wordWrap),s||r!==e.DataType.Number||(s="right"),a.hAlign=s):t[n]={dataType:this._getItemType(i),format:e.xlsx.Workbook._parseExcelFormat(i),hAlign:"",wordWrap:!0}},n._getItemValue=function(t){if(void 0!==t&&null!==t&&void 0!==t.value&&null!==t.value){var n=t.value;return e.isNumber(n)&&isNaN(n)?"":n instanceof Date&&isNaN(n.getTime())?"":n}},n._getCellStyle=function(e,t,n,i){try{this._resetCellStyle(t),e.grid.cellFactory.updateCell(e,n,i,t)}catch(r){return}return window.getComputedStyle(t)},n._resetCellStyle=function(e){for(var t in e.style)"string"==typeof e.style[t]&&isNaN(+t)&&(e.style[t]="")},n._extend=function(t,n){var i,r;for(i in n)r=n[i],e.isObject(r)&&t[i]?e.copy(t[i],r):t[i]=r;return t},n._checkParentCollapsed=function(e,t){var n=!1;return Object.keys(e).forEach(function(i){e[i]===!0&&n===!1&&!isNaN(t)&&t>+i&&(n=!0)}),n},n._getColSpan=function(e,t,n){for(var i=0,r=t.leftCol;r<=t.rightCol;r++)(!n||n(e.columns[r]))&&i++;return i},n}();n.FlexGridXlsxConverter=i}(n=t.xlsx||(t.xlsx={}))}(t=e.grid||(e.grid={}))}(wijmo||(wijmo={}));var JSZip=window.JSZip,wijmo;"undefined"!=typeof JSZip&&JSZip||"function"!=typeof require||(JSZip=window.require("node-zip")),function(e){var t;!function(t){"use strict";function n(n){function i(e){var t=Math.floor(e/26)-1;return(t>-1?i(t):"")+yt.charAt(e%26)}function r(e){var t=0;return 2===e.length&&(t=r(e.charAt(0))+1),26*t+yt.indexOf(e.substr(-1))}function o(t){var n,i=new Date(1900,0,0),r="[object Date]"===Object.prototype.toString.call(t),o=6e4*((r?t.getTimezoneOffset():(new Date).getTimezoneOffset())-i.getTimezoneOffset());return r?(t.getTime()-i.getTime()-o)/864e5+1:e.isNumber(t)?(n=new Date(1e3*Math.round((+i+864e5*(t-1))/1e3)),o=6e4*(n.getTimezoneOffset()-i.getTimezoneOffset()),0!==o?new Date(1e3*Math.round((+i+o+864e5*(t-1))/1e3)):n):null}function s(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(e,t){var n,i,r,o=t?e.querySelector("fgColor"):e.querySelector("color");return o?(o.hasAttribute("rgb")?(r=o.getAttribute("rgb"),r&&8===r.length&&(r=r.substring(2))):o.hasAttribute("indexed")?(i=+o.getAttribute("indexed"),r=bt[i]||""):(n=+o.getAttribute("theme"),o.hasAttribute("tint")&&(r=+o.getAttribute("tint")),r=l(n,r)),r&&"#"===r[0]?r:"#"+r):null}function l(t,n){var i,r,o=Ze[t];return null!=n?(i=new e.Color("#"+o),r=i.getHsl(),r[2]=0>n?r[2]*(1+n):r[2]*(1-n)+(1-1*(1-n)),i=e.Color.fromHsl(r[0],r[1],r[2]),i.toString().substring(1)):o}function c(t){var n=new e.Color(t);return n.a<1&&(n=e.Color.toOpaque(n)),n.toString()}function u(e){return"string"==typeof e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'"):""}function h(e){return null==e||isNaN(+e)?null:((+e-5)/7*100+.5)/100}function p(e){return null==e||isNaN(+e)?null:(256*+e+128/7)/256*7}function d(e){return null==e||isNaN(+e)?null:(7*+e+5)/7/1}function f(n){var i,r;for(i in{left:0,right:0,top:0,bottom:0,diagonal:0})r=n[i],r&&(r.color&&(r.color=c(r.color)),null==r.style||e.isString(r.style)||(r.style=t.Workbook._parseBorderTypeToString(e.asEnum(r.style,t.BorderStyle,!1))))}function g(e){var t,n,i;if(!e.basedOn)return e;for(n in e.basedOn)if("basedOn"===n){t=g(e.basedOn);for(n in t)i=t[n],e[n]=null==e[n]?i:_(e[n],i)}else i=e.basedOn[n],e[n]=null==e[n]?i:_(e[n],i);return delete e.basedOn,e}function m(e){var t,n,i,r,o=e.querySelectorAll("sheetData>row>c>f[ref]");if(de=[],o&&o.length>0)for(r=0;r<o.length;r++)t=o[r],n=t.getAttribute("si"),i=t.getAttribute("ref"),i=i?i.substring(0,i.indexOf(":")):"",t=t.textContent,de[+n]=v(i,t)}function v(e,n){var i,r,o,s,a,l,c=n.match(/(\'?\w+\'?\!)?(\$?[A-Za-z]+)(\$?\d+)/g);if(s=t.Workbook.tableAddress(e),c&&c.length>0)for(a=[],l=0;l<c.length;l++)i=c[l],n=n.replace(i,"{"+l+"}"),r=i.indexOf("!"),r>0&&(o=i.substring(0,r),i=i.substring(r+1)),a[l]={cellAddress:t.Workbook.tableAddress(i),sheetRef:o};return{cellRef:s,formula:n,formulaRefs:a}}function y(e,n){var i,r,o,s,a,l,c,u,h,p,d;if(de&&de.length>0&&(i=de[+e])){if(c=i.formula,u=i.formulaRefs,u&&u.length>0)for(r=t.Workbook.tableAddress(n),o=r.row-i.cellRef.row,s=r.col-i.cellRef.col,d=0;d<u.length;d++)h=u[d],a=h.cellAddress.row+(h.cellAddress.absRow?0:o),l=h.cellAddress.col+(h.cellAddress.absCol?0:s),p=t.Workbook.xlsxAddress(a,l,h.cellAddress.absRow,h.cellAddress.absCol),null!=h.sheetRef&&""!==h.sheetRef&&(p=h.sheetRef+"!"+p),c=c.replace("{"+d+"}",p);return c}return""}function _(t,n){var i,r;if(e.isObject(t)&&e.isObject(n)){for(i in n)r=n[i],e.isObject(r)&&null!=t[i]?_(t[i],r):null!=r&&null==t[i]&&(t[i]=r);return t}return n}function w(e){var t,n=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(t in e)if(n.call(e,t))return!1;return!0}function b(){var e=document.implementation.createDocument(Pt,"Relationships",null),t=e.createElementNS(Pt,"Relationship");return t.setAttribute("Id","rId3"),t.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties"),t.setAttribute("Target","docProps/app.xml"),e.documentElement.appendChild(t),t=e.createElementNS(Pt,"Relationship"),t.setAttribute("Id","rId2"),t.setAttribute("Type","http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties"),t.setAttribute("Target","docProps/core.xml"),e.documentElement.appendChild(t),t=e.createElementNS(Pt,"Relationship"),t.setAttribute("Id","rId1"),t.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument"),t.setAttribute("Target","xl/workbook.xml"),e.documentElement.appendChild(t),e}function C(){var e,t,n,i,r,o,s=document.implementation.createDocument("","",null),a=s.createElement("a:theme");return a.setAttribute("xmlns:a","http://schemas.openxmlformats.org/drawingml/2006/main"),a.setAttribute("name","Office Theme"),e=s.createElement("a:themeElements"),t=x(s),e.appendChild(t),n=S(s),e.appendChild(n),i=E(s),e.appendChild(i),a.appendChild(e),r=s.createElement("a:objectDefaults"),a.appendChild(r),o=s.createElement("a:extraClrSchemeLst"),a.appendChild(o),s.appendChild(a),s}function x(e){var t,n,i=e.createElement("a:clrScheme");return i.setAttribute("name","Office"),t=e.createElement("a:dk1"),n=e.createElement("a:sysClr"),n.setAttribute("val","windowText"),n.setAttribute("lastClr","000000"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:lt1"),n=e.createElement("a:sysClr"),n.setAttribute("val","window"),n.setAttribute("lastClr","FFFFFF"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:dk2"),n=e.createElement("a:srgbClr"),n.setAttribute("val","1F497D"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:lt2"),n=e.createElement("a:srgbClr"),n.setAttribute("val","EEECE1"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent1"),n=e.createElement("a:srgbClr"),n.setAttribute("val","4F81BD"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent2"),n=e.createElement("a:srgbClr"),n.setAttribute("val","C0504D"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent3"),n=e.createElement("a:srgbClr"),n.setAttribute("val","9BBB59"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent4"),n=e.createElement("a:srgbClr"),n.setAttribute("val","8064A2"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent5"),n=e.createElement("a:srgbClr"),n.setAttribute("val","4BACC6"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:accent6"),n=e.createElement("a:srgbClr"),n.setAttribute("val","F79646"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:hlink"),n=e.createElement("a:srgbClr"),n.setAttribute("val","0000FF"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:folHlink"),n=e.createElement("a:srgbClr"),n.setAttribute("val","800080"),t.appendChild(n),i.appendChild(t),i}function S(e){var t,n,i=e.createElement("a:fontScheme");return i.setAttribute("name","Office"),t=e.createElement("a:majorFont"),n=e.createElement("a:latin"),n.setAttribute("typeface","Cambria"),t.appendChild(n),n=e.createElement("a:ea"),n.setAttribute("typeface",""),t.appendChild(n),n=e.createElement("a:cs"),n.setAttribute("typeface",""),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Jpan"),n.setAttribute("typeface","ＭＳ Ｐゴシック"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hang"),n.setAttribute("typeface","맑은 고딕"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hans"),n.setAttribute("typeface","宋体"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hant"),n.setAttribute("typeface","新細明體"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Arab"),n.setAttribute("typeface","Times New Roman"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hebr"),n.setAttribute("typeface","Times New Roman"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hebr"),n.setAttribute("typeface","Times New Roman"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Thai"),n.setAttribute("typeface","Tahoma"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Ethi"),n.setAttribute("typeface","Nyala"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Beng"),n.setAttribute("typeface","Vrinda"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Gujr"),n.setAttribute("typeface","Shruti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Khmr"),n.setAttribute("typeface","MoolBoran"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Knda"),n.setAttribute("typeface","Tunga"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Guru"),n.setAttribute("typeface","Raavi"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Cans"),n.setAttribute("typeface","Euphemia"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Cher"),n.setAttribute("typeface","Plantagenet Cherokee"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Yiii"),n.setAttribute("typeface","Microsoft Yi Baiti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Tibt"),n.setAttribute("typeface","Microsoft Himalaya"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Thaa"),n.setAttribute("typeface","MV Boli"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Deva"),n.setAttribute("typeface","Mangal"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Telu"),n.setAttribute("typeface","Gautami"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Taml"),n.setAttribute("typeface","Latha"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Syrc"),n.setAttribute("typeface","Estrangelo Edessa"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Orya"),n.setAttribute("typeface","Kalinga"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Mlym"),n.setAttribute("typeface","Kartika"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Laoo"),n.setAttribute("typeface","DokChampa"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Sinh"),n.setAttribute("typeface","Iskoola Pota"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Mong"),n.setAttribute("typeface","Mongolian Baiti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Viet"),n.setAttribute("typeface","Times New Roman"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Uigh"),n.setAttribute("typeface","Microsoft Uighur"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Geor"),n.setAttribute("typeface","Sylfaen"),t.appendChild(n),i.appendChild(t),t=e.createElement("a:minorFont"),n=e.createElement("a:latin"),n.setAttribute("typeface","Calibri"),t.appendChild(n),n=e.createElement("a:ea"),n.setAttribute("typeface",""),t.appendChild(n),n=e.createElement("a:cs"),n.setAttribute("typeface",""),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Jpan"),n.setAttribute("typeface","ＭＳ Ｐゴシック"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hang"),n.setAttribute("typeface","맑은 고딕"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hans"),n.setAttribute("typeface","宋体"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hant"),n.setAttribute("typeface","新細明體"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Arab"),n.setAttribute("typeface","Arial"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hebr"),n.setAttribute("typeface","Arial"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Hebr"),n.setAttribute("typeface","Times New Roman"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Thai"),n.setAttribute("typeface","Tahoma"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Ethi"),n.setAttribute("typeface","Nyala"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Beng"),n.setAttribute("typeface","Vrinda"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Gujr"),n.setAttribute("typeface","Shruti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Khmr"),n.setAttribute("typeface","DaunPenh"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Knda"),n.setAttribute("typeface","Tunga"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Guru"),n.setAttribute("typeface","Raavi"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Cans"),n.setAttribute("typeface","Euphemia"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Cher"),n.setAttribute("typeface","Plantagenet Cherokee"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Yiii"),n.setAttribute("typeface","Microsoft Yi Baiti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Tibt"),n.setAttribute("typeface","Microsoft Himalaya"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Thaa"),n.setAttribute("typeface","MV Boli"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Deva"),n.setAttribute("typeface","Mangal"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Telu"),n.setAttribute("typeface","Gautami"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Taml"),n.setAttribute("typeface","Latha"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Syrc"),n.setAttribute("typeface","Estrangelo Edessa"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Orya"),n.setAttribute("typeface","Kalinga"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Mlym"),n.setAttribute("typeface","Kartika"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Laoo"),n.setAttribute("typeface","DokChampa"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Sinh"),n.setAttribute("typeface","Iskoola Pota"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Mong"),n.setAttribute("typeface","Mongolian Baiti"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Viet"),n.setAttribute("typeface","Arial"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Uigh"),n.setAttribute("typeface","Microsoft Uighur"),t.appendChild(n),n=e.createElement("a:font"),n.setAttribute("script","Geor"),n.setAttribute("typeface","Sylfaen"),t.appendChild(n),i.appendChild(t),i}function E(e){var t,n,i,r,o=e.createElement("a:fmtScheme");return o.setAttribute("name","Office"),t=P(e),o.appendChild(t),n=k(e),o.appendChild(n),i=T(e),o.appendChild(i),r=$(e),o.appendChild(r),o}function P(e){var t,n,i,r,o,s,a=e.createElement("a:fillStyleLst"),l=e.createElement("a:solidFill"),c=e.createElement("a:schemeClr");return c.setAttribute("val","phClr"),l.appendChild(c),a.appendChild(l),l=e.createElement("a:gradFill"),l.setAttribute("rotWithShape","1"),t=e.createElement("a:gsLst"),n=e.createElement("a:gs"),n.setAttribute("pos","0"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","50000"),c.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","300000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","35000"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","37000"),c.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","300000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","100000"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","15000"),c.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","350000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),l.appendChild(t),o=e.createElement("a:lin"),o.setAttribute("ang","16200000"),o.setAttribute("scaled","1"),l.appendChild(o),a.appendChild(l),l=e.createElement("a:gradFill"),l.setAttribute("rotWithShape","1"),t=e.createElement("a:gsLst"),n=e.createElement("a:gs"),n.setAttribute("pos","0"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),s=e.createElement("a:shade"),s.setAttribute("val","51000"),c.appendChild(s),r=e.createElement("a:satMod"),r.setAttribute("val","130000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","80000"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),s=e.createElement("a:shade"),s.setAttribute("val","93000"),c.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","130000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","100000"),c=e.createElement("a:schemeClr"),c.setAttribute("val","phClr"),s=e.createElement("a:shade"),s.setAttribute("val","94000"),c.appendChild(s),r=e.createElement("a:satMod"),r.setAttribute("val","135000"),c.appendChild(r),n.appendChild(c),t.appendChild(n),l.appendChild(t),o=e.createElement("a:lin"),o.setAttribute("ang","16200000"),o.setAttribute("scaled","0"),l.appendChild(o),a.appendChild(l),a}function k(e){var t,n,i,r,o,s=e.createElement("a:lnStyleLst"),a=e.createElement("a:ln");return a.setAttribute("w","9525"),a.setAttribute("cap","flat"),a.setAttribute("cmpd","sng"),a.setAttribute("algn","ctr"),t=e.createElement("a:solidFill"),n=e.createElement("a:schemeClr"),n.setAttribute("val","phClr"),i=e.createElement("a:shade"),i.setAttribute("val","95000"),n.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","105000"),n.appendChild(r),t.appendChild(n),a.appendChild(t),o=e.createElement("a:prstDash"),o.setAttribute("val","solid"),a.appendChild(o),s.appendChild(a),a=e.createElement("a:ln"),a.setAttribute("w","25400"),a.setAttribute("cap","flat"),a.setAttribute("cmpd","sng"),a.setAttribute("algn","ctr"),t=e.createElement("a:solidFill"),n=e.createElement("a:schemeClr"),n.setAttribute("val","phClr"),t.appendChild(n),a.appendChild(t),o=e.createElement("a:prstDash"),o.setAttribute("val","solid"),a.appendChild(o),s.appendChild(a),a=e.createElement("a:ln"),a.setAttribute("w","38100"),a.setAttribute("cap","flat"),a.setAttribute("cmpd","sng"),a.setAttribute("algn","ctr"),t=e.createElement("a:solidFill"),n=e.createElement("a:schemeClr"),n.setAttribute("val","phClr"),t.appendChild(n),a.appendChild(t),o=e.createElement("a:prstDash"),o.setAttribute("val","solid"),a.appendChild(o),s.appendChild(a),s}function T(e){var t,n,i,r,o,s,a,l,c=e.createElement("a:effectStyleLst"),u=e.createElement("a:effectStyle"),h=e.createElement("a:effectLst"),p=e.createElement("a:outerShdw");return p.setAttribute("blurRad","40000"),p.setAttribute("dist","23000"),p.setAttribute("dir","5400000"),p.setAttribute("rotWithShape","0"),t=e.createElement("a:srgbClr"),t.setAttribute("val","000000"),n=e.createElement("a:alpha"),n.setAttribute("val","38000"),t.appendChild(n),p.appendChild(t),h.appendChild(p),u.appendChild(h),c.appendChild(u),u=e.createElement("a:effectStyle"),h=e.createElement("a:effectLst"),p=e.createElement("a:outerShdw"),p.setAttribute("blurRad","40000"),p.setAttribute("dist","23000"),p.setAttribute("dir","5400000"),p.setAttribute("rotWithShape","0"),t=e.createElement("a:srgbClr"),t.setAttribute("val","000000"),n=e.createElement("a:alpha"),n.setAttribute("val","35000"),t.appendChild(n),p.appendChild(t),h.appendChild(p),u.appendChild(h),c.appendChild(u),h.appendChild(p),u.appendChild(h),c.appendChild(u),u=e.createElement("a:effectStyle"),h=e.createElement("a:effectLst"),p=e.createElement("a:outerShdw"),p.setAttribute("blurRad","40000"),p.setAttribute("dist","23000"),p.setAttribute("dir","5400000"),p.setAttribute("rotWithShape","0"),t=e.createElement("a:srgbClr"),t.setAttribute("val","000000"),n=e.createElement("a:alpha"),n.setAttribute("val","35000"),t.appendChild(n),p.appendChild(t),h.appendChild(p),u.appendChild(h),i=e.createElement("a:scene3d"),r=e.createElement("a:camera"),r.setAttribute("prst","orthographicFront"),o=e.createElement("a:rot"),o.setAttribute("lat","0"),o.setAttribute("lon","0"),o.setAttribute("rev","0"),r.appendChild(o),i.appendChild(r),s=e.createElement("a:lightRig"),s.setAttribute("rig","threePt"),s.setAttribute("dir","t"),o=e.createElement("a:rot"),o.setAttribute("lat","0"),o.setAttribute("lon","0"),o.setAttribute("rev","1200000"),s.appendChild(o),i.appendChild(s),u.appendChild(i),a=e.createElement("a:sp3d"),l=e.createElement("a:bevelT"),l.setAttribute("w","63500"),l.setAttribute("h","25400"),a.appendChild(l),u.appendChild(a),c.appendChild(u),c}function $(e){var t,n,i,r,o,s,a,l=e.createElement("a:bgFillStyleLst"),c=e.createElement("a:solidFill"),u=e.createElement("a:schemeClr");return u.setAttribute("val","phClr"),c.appendChild(u),l.appendChild(c),c=e.createElement("a:gradFill"),c.setAttribute("rotWithShape","1"),t=e.createElement("a:gsLst"),n=e.createElement("a:gs"),n.setAttribute("pos","0"),u=e.createElement("a:schemeClr"),u.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","40000"),u.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","350000"),u.appendChild(r),n.appendChild(u),t.appendChild(n),n=e.createElement("a:gs"),
n.setAttribute("pos","40000"),u=e.createElement("a:schemeClr"),u.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","45000"),u.appendChild(i),o=e.createElement("a:shade"),o.setAttribute("val","99000"),u.appendChild(o),r=e.createElement("a:satMod"),r.setAttribute("val","350000"),u.appendChild(r),n.appendChild(u),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","100000"),u=e.createElement("a:schemeClr"),u.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","20000"),u.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","255000"),u.appendChild(r),n.appendChild(u),t.appendChild(n),c.appendChild(t),s=e.createElement("a:path"),s.setAttribute("path","circle"),a=e.createElement("a:fillToRect"),a.setAttribute("b","180000"),a.setAttribute("r","50000"),a.setAttribute("t","-80000"),a.setAttribute("l","50000"),s.appendChild(a),c.appendChild(s),l.appendChild(c),c=e.createElement("a:gradFill"),c.setAttribute("rotWithShape","1"),t=e.createElement("a:gsLst"),n=e.createElement("a:gs"),n.setAttribute("pos","0"),u=e.createElement("a:schemeClr"),u.setAttribute("val","phClr"),i=e.createElement("a:tint"),i.setAttribute("val","80000"),u.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","300000"),u.appendChild(r),n.appendChild(u),t.appendChild(n),n=e.createElement("a:gs"),n.setAttribute("pos","100000"),u=e.createElement("a:schemeClr"),u.setAttribute("val","phClr"),o=e.createElement("a:shade"),o.setAttribute("val","30000"),u.appendChild(i),r=e.createElement("a:satMod"),r.setAttribute("val","200000"),u.appendChild(r),n.appendChild(u),t.appendChild(n),c.appendChild(t),s=e.createElement("a:path"),s.setAttribute("path","circle"),a=e.createElement("a:fillToRect"),a.setAttribute("b","50000"),a.setAttribute("r","50000"),a.setAttribute("t","50000"),a.setAttribute("l","50000"),s.appendChild(a),c.appendChild(s),l.appendChild(c),l}function D(){var e,t,i,r,o=document.implementation.createDocument("","",null),s=o.createElement("cp:coreProperties");return s.setAttribute("xmlns:cp","http://schemas.openxmlformats.org/package/2006/metadata/core-properties"),s.setAttribute("xmlns:dc","http://purl.org/dc/elements/1.1/"),s.setAttribute("xmlns:dcterms","http://purl.org/dc/terms/"),s.setAttribute("xmlns:dcmitype","http://purl.org/dc/dcmitype/"),s.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),e=o.createElement("dc:creator"),!n.creator||(e.textContent=n.creator),s.appendChild(e),t=o.createElement("cp:lastModifiedBy"),!n.lastModifiedBy||(t.textContent=n.lastModifiedBy),s.appendChild(t),i=o.createElement("dcterms:created"),i.setAttribute("xsi:type","dcterms:W3CDTF"),i.textContent=(n.created||new Date).toISOString(),s.appendChild(i),r=o.createElement("dcterms:modified"),r.setAttribute("xsi:type","dcterms:W3CDTF"),r.textContent=(n.modified||new Date).toISOString(),s.appendChild(r),o.appendChild(s),o}function A(e,t){var n,r,o,s,a,l,c,u=t.rows&&t.rows[0]&&t.rows[0].cells?t.rows[0].cells.length:0;e.documentElement.setAttribute("xmlns:r","http://schemas.openxmlformats.org/officeDocument/2006/relationships"),e.documentElement.setAttribute("xmlns:mc","http://schemas.openxmlformats.org/markup-compatibility/2006"),e.documentElement.setAttribute("mc:Ignorable","x14ac"),e.documentElement.setAttribute("xmlns:x14ac","http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"),n=e.createElementNS(St,"sheetPr"),r=e.createElementNS(St,"outlinePr"),r.setAttribute("summaryBelow","0"),n.appendChild(r),e.documentElement.appendChild(n),o=e.createElementNS(St,"dimension"),o.setAttribute("ref","A1"+(u>0?":"+i(u-1)+t.rows.length:"")),e.documentElement.appendChild(o),s=e.createElementNS(St,"sheetViews"),a=e.createElementNS(St,"sheetView"),a.setAttribute("workbookViewId","0"),a.setAttribute("tabSelected","1"),t.frozenPane&&(0!==t.frozenPane.rows||0!==t.frozenPane.columns)&&(l=e.createElementNS(St,"pane"),l.setAttribute("state","frozen"),l.setAttribute("activePane",0!==t.frozenPane.rows&&0!==t.frozenPane.columns?"bottomRight":0!==t.frozenPane.rows?"bottomLeft":"topRight"),l.setAttribute("topLeftCell",i(t.frozenPane.columns)+(t.frozenPane.rows+1)),l.setAttribute("ySplit",t.frozenPane.rows.toString()),l.setAttribute("xSplit",t.frozenPane.columns.toString()),a.appendChild(l)),s.appendChild(a),e.documentElement.appendChild(s),c=e.createElementNS(St,"sheetFormatPr"),c.setAttribute("defaultRowHeight","15"),c.setAttribute("x14ac:dyDescent","0.25"),e.documentElement.appendChild(c)}function R(e,t,n,r,o,s,a){var l,c,u=e.createElementNS(St,"c");return u.setAttribute("r",i(n)+(t+1)),u.setAttribute("s",r.toString()),!o||u.setAttribute("t",o),!a||(l=e.createElementNS(St,"f"),l.setAttribute("ca","1"),l.textContent=a,u.appendChild(l)),null!=s&&(c=e.createElementNS(St,"v"),c.textContent=s,u.appendChild(c)),u}function j(e,t){var n,i,r=e.createElementNS(St,"mergeCells");for(r.setAttribute("count",t.length.toString()),n=0;n<t.length;n++)i=e.createElementNS(St,"mergeCell"),i.setAttribute("ref",t[n].join(":")),r.appendChild(i);return r}function M(){var e,t,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,_,w,b="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac",C=document.implementation.createDocument(St,"styleSheet",null);C.documentElement.setAttribute("xmlns:mc","http://schemas.openxmlformats.org/markup-compatibility/2006"),C.documentElement.setAttribute("mc:Ignorable","x14ac"),C.documentElement.setAttribute("xmlns:x14ac",b);var x=0,S=0,E=C.createElementNS(St,"numFmts"),P=C.createElementNS(St,"fonts");for(P.setAttribute("x14ac:knownFonts","1"),P.appendChild(I(C,{},!0)),e=C.createElementNS(St,"fills"),e.appendChild(F(C,"none",null)),e.appendChild(F(C,"gray125",null)),t=C.createElementNS(St,"borders"),t.appendChild(O(C,{})),n=C.createElementNS(St,"cellXfs"),n.appendChild(N(C,0,0,0,0,{}));x<le.length;)i=le[x],!i||(i=JSON.parse(i),r=0,i.format&&"General"!==i.format&&(r=vt.indexOf(i.format),0>r&&(r=164+S,o=C.createElementNS(St,"numFmt"),o.setAttribute("formatCode",i.format),o.setAttribute("numFmtId",r.toString()),E.appendChild(o),S++)),s=0,i.borders&&(a=JSON.stringify(i.borders),s=we.indexOf(a),0>s&&(s=we.push(a)-1,t.appendChild(O(C,i.borders)))),l=0,i.font&&(c=JSON.stringify(i.font),l=be.indexOf(c),0>l&&(l=be.push(c)-1,P.appendChild(I(C,i.font)))),u=0,i.fill&&i.fill.color&&(h=JSON.stringify(i.fill),u=We.indexOf(h),0>u&&(u=We.push(h)-1,e.appendChild(F(C,"solid",i.fill.color)))),n.appendChild(N(C,r,s,l,u,i))),x++;return E.setAttribute("count",E.childElementCount.toString()),C.documentElement.appendChild(E),P.setAttribute("count",P.childElementCount.toString()),C.documentElement.appendChild(P),e.setAttribute("count",e.childElementCount.toString()),C.documentElement.appendChild(e),t.setAttribute("count",t.childElementCount.toString()),C.documentElement.appendChild(t),p=C.createElementNS(St,"cellStyleXfs"),d=C.createElementNS(St,"xf"),d.setAttribute("numFmtId","0"),d.setAttribute("borderId","0"),d.setAttribute("fillId","0"),d.setAttribute("fontId","0"),p.appendChild(d),p.setAttribute("count","1"),C.documentElement.appendChild(p),n.setAttribute("count",n.childElementCount.toString()),C.documentElement.appendChild(n),f=C.createElementNS(St,"cellStyles"),g=C.createElementNS(St,"cellStyle"),g.setAttribute("name","Normal"),g.setAttribute("xfId","0"),g.setAttribute("builtinId","0"),f.appendChild(g),f.setAttribute("count","1"),C.documentElement.appendChild(f),m=C.createElementNS(St,"dxfs"),m.setAttribute("count","0"),C.documentElement.appendChild(m),v=C.createElementNS(St,"tableStyles"),v.setAttribute("count","0"),v.setAttribute("defaultTableStyle","TableStyleMedium2"),v.setAttribute("defaultPivotStyle","PivotStyleLight16"),C.documentElement.appendChild(v),y=C.createElementNS(St,"extLst"),_=C.createElementNS(St,"ext"),_.setAttribute("uri","{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}"),w=C.createElementNS(b,"x14:slicerStyles"),w.setAttribute("defaultSlicerStyle","SlicerStyleLight1"),_.appendChild(w),y.appendChild(_),C.documentElement.appendChild(y),C}function O(e,t){var n,i,r,o,s=e.createElementNS(St,"border");for(n in{left:0,right:0,top:0,bottom:0,diagonal:0})i=e.createElementNS(St,n),t[n]&&(r=t[n].color,r=r?"#"===r[0]?r.substring(1):r:"",6===r.length&&(r="FF"+r),r||(r="FF000000"),i.setAttribute("style",t[n].style),o=e.createElementNS(St,"color"),o.setAttribute("rgb",r),i.appendChild(o)),s.appendChild(i);return s}function I(e,t,n){var i,r,o,s,a,l,c,u;return void 0===n&&(n=!1),i=e.createElementNS(St,"font"),t.bold&&(r=e.createElementNS(St,"b"),i.appendChild(r)),t.italic&&(r=e.createElementNS(St,"i"),i.appendChild(r)),t.underline&&(r=e.createElementNS(St,"u"),i.appendChild(r)),o=e.createElementNS(St,"sz"),s=Math.round(72*t.size/96)||wt,o.setAttribute("val",s.toString()),i.appendChild(o),a=e.createElementNS(St,"color"),t.color?a.setAttribute("rgb","FF"+("#"===t.color[0]?t.color.substring(1):t.color)):a.setAttribute("theme","1"),i.appendChild(a),l=e.createElementNS(St,"name"),l.setAttribute("val",t.family||_t),i.appendChild(l),c=e.createElementNS(St,"family"),c.setAttribute("val","2"),i.appendChild(c),n&&(u=e.createElementNS(St,"scheme"),u.setAttribute("val","minor"),i.appendChild(u)),i}function F(e,t,n){var i,r,o=e.createElementNS(St,"fill"),s=e.createElementNS(St,"patternFill");return s.setAttribute("patternType",t),!n||(i=e.createElementNS(St,"fgColor"),i.setAttribute("rgb","FF"+("#"===n[0]?n.substring(1):n)),s.appendChild(i),r=e.createElementNS(St,"bgColor"),r.setAttribute("indexed","64"),s.appendChild(r)),o.appendChild(s),o}function N(e,t,n,i,r,o){var s,a=e.createElementNS(St,"xf");return a.setAttribute("xfId","0"),a.setAttribute("numFmtId",t.toString()),t>0&&a.setAttribute("applyNumberFormat","1"),a.setAttribute("borderId",n.toString()),n>0&&a.setAttribute("applyBorder","1"),a.setAttribute("fontId",i.toString()),i>0&&a.setAttribute("applyFont","1"),a.setAttribute("fillId",r.toString()),r>0&&a.setAttribute("applyFill","1"),(o.hAlign||o.vAlign||o.indent||o.wordWrap)&&(s=e.createElementNS(St,"alignment"),o.hAlign&&s.setAttribute("horizontal",o.hAlign),o.vAlign&&s.setAttribute("vertical",o.vAlign),o.indent&&s.setAttribute("indent",o.indent),o.wordWrap&&s.setAttribute("wrapText","1"),a.setAttribute("applyAlignment","1"),a.appendChild(s)),a}function L(){var e,t,n,i=document.implementation.createDocument(Et,"Types",null);for(Ge&&(e=i.createElementNS(Et,"Default"),e.setAttribute("Extension","bin"),e.setAttribute("ContentType","application/vnd.ms-office.vbaProject"),i.documentElement.appendChild(e)),e=i.createElementNS(Et,"Default"),e.setAttribute("Extension","rels"),e.setAttribute("ContentType","application/vnd.openxmlformats-package.relationships+xml"),i.documentElement.appendChild(e),e=i.createElementNS(Et,"Default"),e.setAttribute("Extension","xml"),e.setAttribute("ContentType","application/xml"),i.documentElement.appendChild(e),t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/xl/workbook.xml"),t.setAttribute("ContentType",Ge?"application/vnd.ms-excel.sheet.macroEnabled.main+xml":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"),i.documentElement.appendChild(t),n=0;n<dt.length;n++)i.documentElement.appendChild(dt[n]);return t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/xl/theme/theme1.xml"),t.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.theme+xml"),i.documentElement.appendChild(t),t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/xl/styles.xml"),t.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"),i.documentElement.appendChild(t),t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/xl/sharedStrings.xml"),t.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"),i.documentElement.appendChild(t),t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/docProps/core.xml"),t.setAttribute("ContentType","application/vnd.openxmlformats-package.core-properties+xml"),i.documentElement.appendChild(t),t=i.createElementNS(Et,"Override"),t.setAttribute("PartName","/docProps/app.xml"),t.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.extended-properties+xml"),i.documentElement.appendChild(t),i}function H(){var e,t,i,r,o,s,a,l,c,u,h,p,d,f,g,m="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",v="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",y=document.implementation.createDocument(m,"Properties",null),_=y.createElementNS(m,"Application");for(_.textContent=n.application||"wijmo.xlsx",y.documentElement.appendChild(_),e=y.createElementNS(m,"DocSecurity"),e.textContent="0",y.documentElement.appendChild(e),t=y.createElementNS(m,"ScaleCrop"),t.textContent="false",y.documentElement.appendChild(t),i=y.createElementNS(m,"HeadingPairs"),r=y.createElementNS(v,"vt:vector"),r.setAttribute("size","2"),r.setAttribute("baseType","variant"),o=y.createElementNS(v,"vt:variant"),s=y.createElementNS(v,"vt:lpstr"),s.textContent="Worksheets",o.appendChild(s),r.appendChild(o),o=y.createElementNS(v,"vt:variant"),a=y.createElementNS(v,"vt:i4"),a.textContent=n.sheets.length,o.appendChild(a),r.appendChild(o),i.appendChild(r),y.documentElement.appendChild(i),l=y.createElementNS(m,"TitlesOfParts"),r=y.createElementNS(v,"vt:vector"),r.setAttribute("size",ft.length.toString()),r.setAttribute("baseType","lpstr"),c=0;c<ft.length;c++)s=y.createElementNS(v,"vt:lpstr"),s.textContent=ft[c],r.appendChild(s);return l.appendChild(r),y.documentElement.appendChild(l),u=y.createElementNS(m,"Manager"),y.documentElement.appendChild(u),h=y.createElementNS(m,"Company"),h.textContent=n.company||"GrapeCity, Inc.",y.documentElement.appendChild(h),p=y.createElementNS(m,"LinksUpToDate"),p.textContent="false",y.documentElement.appendChild(p),d=y.createElementNS(m,"SharedDoc"),d.textContent="false",y.documentElement.appendChild(d),f=y.createElementNS(m,"HyperlinksChanged"),f.textContent="false",y.documentElement.appendChild(f),g=y.createElementNS(m,"AppVersion"),g.textContent="1.0",y.documentElement.appendChild(g),y}function V(){for(var e,t=document.implementation.createDocument(Pt,"Relationships",null),n=0;n<gt.length;n++)t.documentElement.appendChild(gt[n]);return e=t.createElementNS(Pt,"Relationship"),e.setAttribute("Id","rId"+(gt.length+1)),e.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings"),e.setAttribute("Target","sharedStrings.xml"),t.documentElement.appendChild(e),e=t.createElementNS(Pt,"Relationship"),e.setAttribute("Id","rId"+(gt.length+2)),e.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles"),e.setAttribute("Target","styles.xml"),t.documentElement.appendChild(e),e=t.createElementNS(Pt,"Relationship"),e.setAttribute("Id","rId"+(gt.length+3)),e.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme"),e.setAttribute("Target","theme/theme1.xml"),t.documentElement.appendChild(e),Ge&&(e=t.createElementNS(Pt,"Relationship"),e.setAttribute("Id","rId"+(gt.length+4)),e.setAttribute("Type","http://schemas.microsoft.com/office/2006/relationships/vbaProject"),e.setAttribute("Target","vbaProject.bin"),t.documentElement.appendChild(e)),t}function B(){var e,t,i,r,o,s,a,l=document.implementation.createDocument(St,"workbook",null);for(l.documentElement.setAttribute("xmlns:r","http://schemas.openxmlformats.org/officeDocument/2006/relationships"),e=l.createElementNS(St,"fileVersion"),e.setAttribute("appName","xl"),e.setAttribute("lastEdited","5"),e.setAttribute("lowestEdited","5"),e.setAttribute("rupBuild","9303"),l.documentElement.appendChild(e),t=l.createElementNS(St,"workbookPr"),t.setAttribute("defaultThemeVersion","124226"),l.documentElement.appendChild(t),i=l.createElementNS(St,"bookViews"),r=l.createElementNS(St,"workbookView"),r.setAttribute("activeTab",null!=n.activeWorksheet?n.activeWorksheet.toString():"0"),r.setAttribute("xWindow","480"),r.setAttribute("yWindow","60"),r.setAttribute("windowWidth","18195"),r.setAttribute("windowHeight","8505"),i.appendChild(r),l.documentElement.appendChild(i),o=l.createElementNS(St,"sheets"),s=0;s<mt.length;s++)o.appendChild(mt[s]);return l.documentElement.appendChild(o),a=l.createElementNS(St,"calcPr"),a.setAttribute("fullCalcOnLoad","1"),l.documentElement.appendChild(a),l}function U(){var e,t,n,i=document.implementation.createDocument(St,"sst",null);for(i.documentElement.setAttribute("count",ae[1]),i.documentElement.setAttribute("uniqueCount",ae[0].length),e=0;e<ae[0].length;e++)t=i.createElementNS(St,"si"),n=i.createElementNS(St,"t"),n.textContent=ae[0][e],t.appendChild(n),i.documentElement.appendChild(t);return i}var z,W,q,G,K;e.assert(null!=JSZip,"wijmo.c1xlsx requires the JSZip library.");var Y,J,X,Q,Z,ee,te,ne,ie,re,oe,se,ae,le,ce,ue,he,pe,de,fe,ge,me,ve,ye,_e,we,be,Ce,xe,Se,Ee,Pe,ke,Te,$e,De,Ae,Re,je,Me,Oe,Ie,Fe,Ne,Le,He,Ve,Be,Ue,ze,We,qe,Ge,Ke,Ye,Je,Xe,Qe,Ze,et,tt,nt,it,rt,ot,st,at,lt,ct,ut,ht,pt=new JSZip,dt=[],ft=[],gt=[],mt=[],vt=["General","0","0.00","#,##0","#,##0.00",,,"$#,##0.00_);($#,##0.00)",,"0%","0.00%","0.00E+00","# ?/?","# ??/??","m/d/yyyy","d-mmm-yy","d-mmm","mmm-yy","h:mm AM/PM","h:mm:ss AM/PM","h:mm","h:mm:ss","m/d/yy h:mm",,,,,,,,,,,,,,,"#,##0 ;(#,##0)","#,##0 ;[Red](#,##0)","#,##0.00;(#,##0.00)","#,##0.00;[Red](#,##0.00)",,,,,"mm:ss","[h]:mm:ss","mmss.0","##0.0E+0","@"],yt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",_t="Calibri",wt=11,bt=["000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","800000","008000","000080","808000","800080","008080","C0C0C0","808080","9999FF","993366","FFFFCC","CCFFFF","660066","FF8080","0066CC","CCCCFF","000080","FF00FF","FFFF00","00FFFF","800080","800000","008080","0000FF","00CCFF","CCFFFF","CCFFCC","FFFF99","99CCFF","FF99CC","CC99FF","FFCC99","3366FF","33CCCC","99CC00","FFCC00","FF9900","FF6600","666699","969696","003366","339966","003300","333300","993300","993366","333399","333333","000000","FFFFFF"],Ct='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',xt=/xmlns\:NS\d+=\"\"\s+NS\d+\:/g,St="http://schemas.openxmlformats.org/spreadsheetml/2006/main",Et="http://schemas.openxmlformats.org/package/2006/content-types",Pt="http://schemas.openxmlformats.org/package/2006/relationships";if("string"==typeof n){if(J=Date.now(),st=new DOMParser,pt=pt.load(n,{base64:!0}),Y={sheets:[],zipTime:Date.now()-J},X=Date.now(),ae=[],le=[],be=[],We=[],Ze=[],Q=pt.file("xl/sharedStrings.xml"))for(Q=st.parseFromString(Q.asText(),"application/xml").querySelectorAll("sst>si"),te=Q.length-1;te>=0;){for(ne=0,Z=Q[te].querySelectorAll("t"),ae[te]="";ne<Z.length;)ae[te]+=Z[ne].textContent,ne++;te--}if((Q=pt.file("docProps/core.xml"))&&(Q=st.parseFromString(Q.asText(),"application/xml"),Y.creator=Q.querySelector("creator")?Q.querySelector("creator").textContent:"",Y.lastModifiedBy=Q.querySelector("lastModifiedBy")?Q.querySelector("lastModifiedBy").textContent:"",Y.created=Q.querySelector("created")?new Date(Q.querySelector("created").textContent):null,Y.modified=Q.querySelector("modified")?new Date(Q.querySelector("modified").textContent):null),Q=pt.file("xl/workbook.xml"))for(Q=st.parseFromString(Q.asText(),"application/xml"),ce=Q.querySelector("workbookView")?Q.querySelector("workbookView").getAttribute("activeTab"):null,Y.activeWorksheet=null!=ce?+ce:0,Q=Q.querySelectorAll("sheets>sheet"),te=Q.length-1;te>=0;)Ae=Q[te].getAttribute("name"),ke="hidden"!==Q[te].getAttribute("state"),Y.sheets.unshift({name:Ae,visible:ke,cols:[],columns:[],rows:[]}),te--;if((Q=pt.file("xl/theme/theme1.xml"))&&(Q=st.parseFromString(Q.asText(),"application/xml"),Ze[0]=Q.querySelector("themeElements>clrScheme>lt1>sysClr").getAttribute("lastClr"),Ze[1]=Q.querySelector("themeElements>clrScheme>dk1>sysClr").getAttribute("lastClr"),Ze[2]=Q.querySelector("themeElements>clrScheme>lt2>srgbClr").getAttribute("val"),Ze[3]=Q.querySelector("themeElements>clrScheme>dk2>srgbClr").getAttribute("val"),Ze[4]=Q.querySelector("themeElements>clrScheme>accent1>srgbClr").getAttribute("val"),Ze[5]=Q.querySelector("themeElements>clrScheme>accent2>srgbClr").getAttribute("val"),Ze[6]=Q.querySelector("themeElements>clrScheme>accent3>srgbClr").getAttribute("val"),Ze[7]=Q.querySelector("themeElements>clrScheme>accent4>srgbClr").getAttribute("val"),Ze[8]=Q.querySelector("themeElements>clrScheme>accent5>srgbClr").getAttribute("val"),Ze[9]=Q.querySelector("themeElements>clrScheme>accent6>srgbClr").getAttribute("val")),Q=pt.file("xl/styles.xml")){for(Q=st.parseFromString(Q.asText(),"application/xml"),Je=Q.querySelectorAll("numFmts>numFmt"),te=Je.length-1;te>=0;)oe=Je[te],vt[+oe.getAttribute("numFmtId")]=oe.getAttribute("formatCode"),te--;for(Xe=Q.querySelectorAll("fonts>font"),te=Xe.length-1;te>=0;)oe=Xe[te],be[te]={bold:null!=oe.querySelector("b"),italic:null!=oe.querySelector("i"),underline:null!=oe.querySelector("u"),size:Math.round(96*+oe.querySelector("sz").getAttribute("val")/72),family:oe.querySelector("name").getAttribute("val"),color:a(oe,!1)},te--;for(Qe=Q.querySelectorAll("fills>fill"),te=Qe.length-1;te>=0;)We[te]=a(Qe[te],!0),te--;for(Q=Q.querySelectorAll("cellXfs>xf"),te=Q.length-1;te>=0;)Ae=+Q[te].getAttribute("numFmtId"),ee=vt[Ae],oe=ee?/[hsmy\:]/i.test(ee)?"date":ee.indexOf("0")>-1?"number":"@"===ee?"string":"unknown":"unknown",Ae=+Q[te].getAttribute("fontId"),Ce=Ae>0?be[Ae]:null,Ae=+Q[te].getAttribute("fillId"),qe=Ae>1?We[Ae]:null,le.unshift({formatCode:ee,type:oe,font:Ce,fillColor:qe,hAlign:null!=Q[te].querySelector("alignment")?t.Workbook._parseStringToHAlign(Q[te].querySelector("alignment").getAttribute("horizontal")):null,wordWrap:null!=Q[te].querySelector("alignment")?"1"===Q[te].querySelector("alignment").getAttribute("wrapText"):null}),te--}for(Y.styles=le,(Q=pt.file("xl/vbaProject.bin"))&&(null==Y.reservedContent&&(Y.reservedContent={}),Y.reservedContent.macros=Q.asUint8Array()),te=Y.sheets.length;te--;){if(Q=pt.file("xl/worksheets/sheet"+(te+1)+".xml").asText(),Q=st.parseFromString(Q,"application/xml"),rt=[],nt=Q.querySelectorAll("mergeCells>mergeCell"),nt.length>0)for(ne=nt.length-1;ne>=0;)it=nt[ne].getAttribute("ref").split(":"),2===it.length&&rt.unshift({topRow:+it[0].match(/\d*/g).join("")-1,leftCol:r(it[0].match(/[a-zA-Z]*/g)[0]),bottomRow:+it[1].match(/\d*/g).join("")-1,rightCol:r(it[1].match(/[a-zA-Z]*/g)[0])}),ne--;if(m(Q),se=Y.sheets[te],oe=Q.querySelector("dimension")?Q.querySelector("dimension").getAttribute("ref"):null,!oe||(oe=oe.substr(oe.indexOf(":")+1),se.maxCol=r(oe.match(/[a-zA-Z]*/g)[0])+1,se.maxRow=+oe.match(/\d*/g).join("")),je=Q.querySelectorAll("cols>col"),et=[],je.length>0)for(He=je.length-1;He>=0;He--)for(Oe=p(+je[He].getAttribute("width")),ee=null,je[He].hasAttribute("style")&&(ee=le[+je[He].getAttribute("style")]||{type:"General",formatCode:null}),_e=null,ee&&(ee.font||ee.fillColor||ee.hAlign||ee.formatCode&&"General"!==ee.formatCode)&&(_e={format:ee.formatCode&&"General"!==ee.formatCode?ee.formatCode:null,font:ee.font,fill:{color:ee.fillColor},hAlign:ee.hAlign,wordWrap:ee.wordWrap}),Ve=+je[He].getAttribute("min")-1;Ve<+je[He].getAttribute("max");Ve++)et[Ve]={visible:"1"!==je[He].getAttribute("hidden"),autoWidth:"1"===je[He].getAttribute("bestFit"),width:Oe,style:_e};for(se.cols=se.columns=et,Ie=Q.querySelector("pane"),!Ie||"frozen"===Ie.getAttribute("state")&&(Ue=Ie.getAttribute("ySplit"),Ue=Ue?+Ue:NaN,ze=Ie.getAttribute("xSplit"),ze=ze?+ze:NaN,se.frozenPane={rows:Ue,columns:ze}),Ye=Q.querySelector("sheetPr>outlinePr"),se.summaryBelow=Ye?"0"!==Ye.getAttribute("summaryBelow"):!0,Q=Q.querySelectorAll("sheetData>row"),se=se.rows,ne=Q.length-1;ne>=0;){for(Ne=se[+Q[ne].getAttribute("r")-1]={visible:!0,groupLevel:NaN,cells:[]},Q[ne].hasAttribute("hidden")&&(Ne.visible="1"!==Q[ne].getAttribute("hidden")),"1"===Q[ne].getAttribute("customHeight")&&(tt=+Q[ne].getAttribute("ht"),Ne.height=96*tt/72),"1"===Q[ne].getAttribute("customFormat")?(ee=le[+Q[ne].getAttribute("s")]||{type:"General",formatCode:null},_e=ee.font||ee.fillColor||ee.hAlign||ee.formatCode&&"General"!==ee.formatCode?{format:ee.formatCode&&"General"!==ee.formatCode?ee.formatCode:null,font:ee.font,fill:{color:ee.fillColor},hAlign:ee.hAlign,wordWrap:ee.wordWrap}:null):_e=null,Ne.style=_e,Be=Q[ne].getAttribute("outlineLevel"),Ne.groupLevel=Be&&""!==Be?+Be:NaN,Ne.collapsed="1"===Q[ne].getAttribute("collapsed"),Re=Q[ne].querySelectorAll("row>c"),ie=Re.length-1;ie>=0;){switch(Fe=Re[ie],ee=le[+Fe.getAttribute("s")]||{type:"General",formatCode:null},_e=ee.font||ee.fillColor||ee.hAlign||ee.formatCode&&"General"!==ee.formatCode?{format:ee.formatCode&&"General"!==ee.formatCode?ee.formatCode:null,font:ee.font,fill:{color:ee.fillColor},hAlign:ee.hAlign,wordWrap:ee.wordWrap}:null,oe=Fe.getAttribute("t")||ee.type,he=Fe.querySelector("v"),!he||(he=he.textContent),pe=Fe.querySelector("f"),ge=null,fe=null,!pe||(pe.textContent?pe=pe.textContent:(ge=pe.getAttribute("si"),ge&&(fe=Fe.getAttribute("r"),pe=y(ge,fe)))),"str"!==oe&&(he=he?+he:""),Ve=r(Fe.getAttribute("r").match(/[a-zA-Z]*/g)[0]),oe){case"s":he=ae[he];break;case"b":he=1===he;break;case"date":he=he?o(he):""}Ne.cells[Ve]={value:he,isDate:"date"===oe,formula:u(pe),style:_e},ie--}ne--}for(ie=0;ie<rt.length;ie++)ot=rt[ie],Y.sheets[te].rows[ot.topRow].cells[ot.leftCol].rowSpan=ot.bottomRow-ot.topRow+1,Y.sheets[te].rows[ot.topRow].cells[ot.leftCol].colSpan=ot.rightCol-ot.leftCol+1}Y.processTime=Date.now()-X}else{for(X=Date.now(),at=new XMLSerializer,ae=[[],0],pt.folder("_rels").file(".rels",Ct+at.serializeToString(b())),xe=pt.folder("docProps"),Se=pt.folder("xl"),z=at.serializeToString(C()),e.isIE()&&(z=z.replace(xt,"")),Se.folder("theme").file("theme1.xml",Ct+z),Ge=!(!n.reservedContent||!n.reservedContent.macros),Ge&&Se.file("vbaProject.bin",n.reservedContent.macros),Ee=Se.folder("worksheets"),W=at.serializeToString(D()),e.isIE()&&(W=W.replace(xt,"")),xe.file("core.xml",Ct+W),le=new Array(1),we=new Array(1),be=new Array(1),We=new Array(2),se=n.sheets.length;se--;){if(Ae=se+1,Pe=n.sheets[se],Me=Pe.columns||Pe.cols,!Pe)throw"Worksheet should not be empty!";for(lt=document.implementation.createDocument(St,"worksheet",null),A(lt,Pe),ct=lt.createElementNS(St,"sheetData"),ye=Pe.style,ue=Pe.rows,Q="",Re=[],Le=[],te=-1,re=ue?ue.length:0;++te<re;){for(ne=-1,ie=ue[te]&&ue[te].cells?ue[te].cells.length:0,me=null,Ne=lt.createElementNS(St,"row"),Ne.setAttribute("r",te+1),Ne.setAttribute("x14ac:dyDescent","0.25"),!ue[te]||(ue[te].height&&(Ne.setAttribute("customHeight","1"),Ne.setAttribute("ht",72*+ue[te].height/96)),ue[te].groupLevel&&Ne.setAttribute("outlineLevel",ue[te].groupLevel),me=ue[te].style,me&&(me=g(me),me.font&&me.font.color&&(me.font.color=c(me.font.color)),me.fill&&me.fill.color&&(me.fill.color=c(me.fill.color)),null==me.hAlign||e.isString(me.hAlign)||(me.hAlign=t.Workbook._parseHAlignToString(e.asEnum(me.hAlign,t.HAlign))),null==me.vAlign||e.isString(me.vAlign)||(me.vAlign=t.Workbook._parseVAlignToString(e.asEnum(me.vAlign,t.VAlign))),_e=JSON.stringify(me),ce=le.indexOf(_e),_e=0>ce?le.push(_e)-1:ce,Ne.setAttribute("customFormat","1"),Ne.setAttribute("s",_e))),ue[te]&&ue[te].visible===!1&&Ne.setAttribute("hidden","1"),ue[te]&&ue[te].collapsed===!0&&Ne.setAttribute("collapsed","1");++ne<ie;)Fe=ue[te].cells[ne],he=void 0,_e=void 0,oe="",ce=-1,he=Fe&&Fe.hasOwnProperty("value")?Fe.value:Fe,_e=Fe&&Fe.style?JSON.parse(JSON.stringify(Fe.style)):{},he&&"string"==typeof he&&(+he).toString()!==he?(ae[1]++,ce=ae[0].indexOf(he),0>ce&&(ce=ae[0].push(he)-1),he=ce,oe="s"):"boolean"==typeof he?(he=he?1:0,oe="b"):"date"===s(he)||Fe&&Fe.isDate?(he=o(he),_e.format=_e.format||"mm-dd-yy"):"object"==typeof he&&(he=null),_e=g(_e),ve=Me&&Me[ne]?Me[ne].style:null,ve&&(ve=g(ve),_e=_(_e,ve)),me&&(_e=_(_e,me)),ye&&(ye=g(ye),_e=_(_e,ye)),null==_e.hAlign||e.isString(_e.hAlign)||(_e.hAlign=t.Workbook._parseHAlignToString(e.asEnum(_e.hAlign,t.HAlign))),null==_e.vAlign||e.isString(_e.vAlign)||(_e.vAlign=t.Workbook._parseVAlignToString(e.asEnum(_e.vAlign,t.VAlign))),_e.font&&_e.font.color&&(_e.font.color=c(_e.font.color)),_e.fill&&_e.fill.color&&(_e.fill.color=c(_e.fill.color)),_e.borders&&f(_e.borders),_e=JSON.stringify(_e),ce=le.indexOf(_e),_e=0>ce?le.push(_e)-1:ce,Fe&&(null!=Fe.colSpan&&Fe.colSpan>1||null!=Fe.rowSpan&&Fe.rowSpan>1)&&(Fe.colSpan=Fe.colSpan||1,Fe.rowSpan=Fe.rowSpan||1,Le.push([i(ne)+(te+1),i(ne+Fe.colSpan-1)+(te+Fe.rowSpan)])),Ne.appendChild(R(lt,te,ne,_e,oe,he,Fe&&Fe.formula?Fe.formula:null));ct.appendChild(Ne)}if(je=null,Me)for(je=lt.createElementNS(St,"cols"),te=0;te<Me.length;te++)w(Me[te])||(ve=Me[te].style,ve&&(ve=g(ve),ve.font&&ve.font.color&&(ve.font.color=c(ve.font.color)),ve.fill&&ve.fill.color&&(ve.fill.color=c(ve.fill.color)),null==ve.hAlign||e.isString(ve.hAlign)||(ve.hAlign=t.Workbook._parseHAlignToString(e.asEnum(ve.hAlign,t.HAlign))),null==ve.vAlign||e.isString(ve.vAlign)||(ve.vAlign=t.Workbook._parseVAlignToString(e.asEnum(ve.vAlign,t.VAlign))),ve=JSON.stringify(ve),ce=le.indexOf(ve),ve=0>ce?le.push(ve)-1:ce),Oe=Me[te].width,Oe=null!=Oe?"string"==typeof Oe&&Oe.indexOf("ch")>-1?d(Oe.substring(0,Oe.indexOf("ch"))):h(Oe):8.43,ut=lt.createElementNS(St,"col"),ut.setAttribute("min",te+1),ut.setAttribute("max",te+1),!ve||ut.setAttribute("style",ve),!Oe||(ut.setAttribute("width",Oe),ut.setAttribute("customWidth","1")),Me[te].autoWidth!==!1&&ut.setAttribute("bestFit","1"),Me[te].visible===!1&&ut.setAttribute("hidden","1"),je.appendChild(ut));!je||lt.documentElement.appendChild(je),lt.documentElement.appendChild(ct),Le.length>0&&lt.documentElement.appendChild(j(lt,Le)),ht=lt.createElementNS(St,"pageMargins"),ht.setAttribute("left","0.7"),ht.setAttribute("right","0.7"),ht.setAttribute("top","0.75"),ht.setAttribute("bottom","0.75"),ht.setAttribute("header","0.3"),ht.setAttribute("footer","0.3"),lt.documentElement.appendChild(ht),q=at.serializeToString(lt),e.isIE()&&(q=q.replace(xt,"")),Ee.file("sheet"+Ae+".xml",Ct+q),Te=lt.createElementNS(Et,"Override"),Te.setAttribute("PartName","/xl/worksheets/sheet"+Ae+".xml"),Te.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"),dt.unshift(Te),ft.unshift(Pe.name||"Sheet"+Ae),$e=lt.createElementNS(Pt,"Relationship"),$e.setAttribute("Id","rId"+Ae),$e.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"),$e.setAttribute("Target","worksheets/sheet"+Ae+".xml"),gt.unshift($e),De=lt.createElementNS(St,"sheet"),De.setAttribute("name",Pe.name||"Sheet"+Ae),De.setAttribute("sheetId",Ae.toString()),De.setAttribute("r:id","rId"+Ae),Pe.visible===!1&&De.setAttribute("state","hidden"),mt.unshift(De)}G=at.serializeToString(M()),e.isIE()&&(G=G.replace(xt,"")),Se.file("styles.xml",Ct+G),pt.file("[Content_Types].xml",Ct+at.serializeToString(L())),xe.file("app.xml",Ct+at.serializeToString(H())),Se.folder("_rels").file("workbook.xml.rels",Ct+at.serializeToString(V())),Se.file("sharedStrings.xml",Ct+at.serializeToString(U())),K=at.serializeToString(B()),e.isIE()&&(K=K.replace(xt,"")),Se.file("workbook.xml",Ct+K),Ke=Ge?"application/vnd.ms-excel.sheet.macroEnabled.12;":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;",X=Date.now()-X,J=Date.now(),Y={base64:pt.generate({compression:"DEFLATE"}),zipTime:Date.now()-J,processTime:X,href:function(){return"data:"+Ke+"base64,"+this.base64}}}return Y}t._xlsx=n}(t=e.xlsx||(e.xlsx={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n,i,r,o,s,a,l,c,u,h,p,d,f,g=function(){function i(){}return Object.defineProperty(i.prototype,"sheets",{get:function(){return null==this._sheets&&(this._sheets=[]),this._sheets},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styles",{get:function(){return null==this._styles&&(this._styles=[]),this._styles},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reservedContent",{get:function(){return null==this._reservedContent&&(this._reservedContent={}),this._reservedContent;
},set:function(e){this._reservedContent=e},enumerable:!0,configurable:!0}),i.prototype.save=function(e){var n,r,o,s=t._xlsx(this._serialize()),a=this._reservedContent&&this._reservedContent.macros?"xlsm":"xlsx",l="xlsm"===a?"application/vnd.ms-excel.sheet.macroEnabled.12":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(e){if(r=e.lastIndexOf("."),0>r)e+="."+a;else{if(0===r)throw"Invalid file name.";n=e.substring(r+1),""===n?e+="."+a:n!==a&&(e+="."+a)}o=new Blob([i._base64DecToArr(s.base64)],{type:l}),this._saveToFile(o,e)}return s.base64},i.prototype.load=function(e){var n;if(null==e||0===e.length)throw"Invalid xlsx file content.";n=e.search(/base64,/i),-1!==n&&(e=e.substring(n+7)),this._deserialize(t._xlsx(e))},i.prototype._serialize=function(){var e={sheets:[]};return e.sheets=this._serializeWorkSheets(),this._styles&&this._styles.length>0&&(e.styles=this._serializeWorkbookStyles()),this._reservedContent&&(e.reservedContent=this._reservedContent),null!=this.activeWorksheet&&!isNaN(this.activeWorksheet)&&this.activeWorksheet>=0&&(e.activeWorksheet=this.activeWorksheet),this.application&&(e.application=this.application),this.company&&(e.company=this.company),null!=this.created&&(e.created=this.created),this.creator&&(e.creator=this.creator),this.lastModifiedBy&&(e.lastModifiedBy=this.lastModifiedBy),null!=this.modified&&(e.modified=this.modified),e},i.prototype._deserialize=function(e){this._deserializeWorkSheets(e.sheets),e.styles&&e.styles.length>0&&this._deserializeWorkbookStyles(e.styles),this.activeWorksheet=e.activeWorksheet,this.application=e.application,this.company=e.company,this.created=e.created,this.creator=e.creator,this.lastModifiedBy=e.lastModifiedBy,this.modified=e.modified,this.reservedContent=e.reservedContent},i.prototype._addWorkSheet=function(e,t){null==this._sheets&&(this._sheets=[]),null==t||isNaN(t)?this._sheets.push(e):this._sheets[t]=e},i.prototype._saveToFile=function(e,t){var n,i,r;navigator.msSaveBlob?navigator.msSaveBlob(e,t):(n=new FileReader,i=document.createElement("a"),r=function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},n.onload=function(){i.download=t,i.href=n.result,r(i),i=null},n.readAsDataURL(e))},i.toXlsxDateFormat=function(t){var n;if(1===t.length)switch(t){case"r":case"R":return"ddd, dd MMM yyyy HH:mm:ss &quot;GMT&quot;";case"u":return"yyyy-MM-dd&quot;T&quot;HH:mm:ss&quot;Z&quot;";case"o":case"O":n=e.culture.Globalize.calendar.patterns[t],n=n.replace(/f+k/gi,"000");break;default:n=e.culture.Globalize.calendar.patterns[t]}return n||(n=t),n=n.replace(/"/g,"").replace(/tt/,"AM/PM").replace(/t/,"A/P").replace(/M+/gi,function(e){return e.toLowerCase()}).replace(/g+y+/gi,function(e){return e.substring(0,e.indexOf("y"))+"e"}),/FY|Q/i.test(n)?"General":n},i.toXlsxNumberFormat=function(t){var n,i,r=-1,o=t?t.toLowerCase():"",s=o[0],a=this._formatMap[s],l=e.culture.Globalize.numberFormat.currency.symbol,c=o.split(","),u=[];if(a){if("c"===s&&(a=a.replace(/\{1\}/g,l)),r=o.length>1?parseInt(c[0].substr(1)):2,!isNaN(r))for(i=0;r>i;i++)u.push(0);for(i=0;i<c.length-1;i++)u.push(",");n=u.length>0?"d"===s?a.replace(/\{0\}/g,u.join("")):a.replace(/\{0\}/g,(!isNaN(r)&&r>0?".":"")+u.join("")):"d"===s?a.replace(/\{0\}/g,"0"):a.replace(/\{0\}/g,"")}else n=o;return n},i.fromXlsxFormat=function(t){var n,i,r,o,s,a,l,c,u,h=[],p=e.culture.Globalize.numberFormat.currency.symbol;if(!t||"General"===t)return[""];for(t=t.replace(/;@/g,"").replace(/&quot;?/g,""),i=t.split(";"),o=0;o<i.length;o++){if(r=i[o],/[hsmy\:]/i.test(r))n=r.replace(/\[\$\-.+\]/g,"").replace(/(\\)(.)/g,"$2").replace(/H+/g,function(e){return e.toLowerCase()}).replace(/m+/g,function(e){return e.toUpperCase()}).replace(/S+/g,function(e){return e.toLowerCase()}).replace(/AM\/PM/gi,"tt").replace(/A\/P/gi,"t").replace(/\.000/g,".fff").replace(/\.00/g,".ff").replace(/\.0/g,".f").replace(/\\[\-\s,]/g,function(e){return e.substring(1)}).replace(/Y+/g,function(e){return e.toLowerCase()}).replace(/D+/g,function(e){return e.toLowerCase()}).replace(/M+:?|:?M+/gi,function(e){return e.indexOf(":")>-1?e.toLowerCase():e}).replace(/g+e/gi,function(e){return e.substring(0,e.length-1)+"yy"});else if(a=r.lastIndexOf("."),l=r.lastIndexOf("0"),c=r.lastIndexOf(","),n=r.search(/\[\$([^\-\]]+)[^\]]*\]/)>-1||r.indexOf(p)>-1&&-1===r.search(/\[\$([\-\]]+)[^\]]*\]/)?"c":"%"===r[t.length-1]?"p":"n",n+=a>-1&&l>a?r.substring(a,l).length:"0",/^0+,*$/.test(r)&&(l=r.lastIndexOf("0"),n="d"+(l+1)),c>-1&&c>l)for(u=r.substring(l+1,c+1).split(""),s=0;s<u.length;s++)n+=",";h.push(n)}return h},i._parseCellFormat=function(e,t){return t?this.toXlsxDateFormat(e):this.toXlsxNumberFormat(e)},i._parseExcelFormat=function(t){if(void 0!==t&&null!==t&&void 0!==t.value&&null!==t.value&&!isNaN(t.value)){var n=t.style&&t.style.format?t.style.format:"";return t.isDate||e.isDate(t.value)?this.fromXlsxFormat(n)[0]:e.isNumber(t.value)?n&&"General"!==n?this.fromXlsxFormat(n)[0]:e.isInt(t.value)?"d":"f2":n}},i.xlsxAddress=function(e,t,n,i){var r=n?"$":"",o=null==i?r:i?"$":"";return(isNaN(t)?"":o+this._numAlpha(t))+(isNaN(e)?"":r+(e+1).toString())},i.tableAddress=function(e){var t=e&&/^((\$?)([A-Za-z]+))?((\$?)(\d+))?$/.exec(e),n={};return t?(t[3]&&(n.col=this._alphaNum(t[3]),n.absCol=!!t[2]),t[6]&&(n.row=+t[6]-1,n.absRow=!!t[5]),n):null},i._parseHAlignToString=function(e){switch(e){case p.Left:return"left";case p.Center:return"center";case p.Right:return"right";default:return null}},i._parseStringToHAlign=function(e){var t=e?e.toLowerCase():"";return"left"===t?p.Left:"center"===t?p.Center:"right"===t?p.Right:null},i._parseVAlignToString=function(e){switch(e){case d.Bottom:return"bottom";case d.Center:return"center";case d.Top:return"top";default:return null}},i._parseStringToVAlign=function(e){var t=e?e.toLowerCase():"";return"top"===t?d.Top:"center"===t?d.Center:"bottom"===t?d.Bottom:null},i._parseBorderTypeToString=function(e){switch(e){case f.Dashed:return"dashed";case f.Dotted:return"dotted";case f.Double:return"double";case f.Hair:return"hair";case f.Medium:return"medium";case f.MediumDashDotDotted:return"mediumDashDotDot";case f.MediumDashDotted:return"mediumDashDot";case f.MediumDashed:return"mediumDashed";case f.SlantedMediumDashDotted:return"slantDashDot";case f.Thick:return"thick";case f.Thin:return"thin";case f.ThinDashDotDotted:return"dashDotDot";case f.ThinDashDotted:return"dashDot";case f.None:default:return"none"}},i._parseStringToBorderType=function(e){return"dashed"===e?f.Dashed:"dotted"===e?f.Dotted:"double"===e?f.Double:"hair"===e?f.Hair:"medium"===e?f.Medium:"mediumDashDotDot"===e?f.MediumDashDotDotted:"mediumDashDot"===e?f.MediumDashDotted:"mediumDashed"===e?f.MediumDashed:"slantDashDot"===e?f.SlantedMediumDashDotted:"thick"===e?f.Thick:"thin"===e?f.Thin:"dashDotDot"===e?f.ThinDashDotDotted:"dashDot"===e?f.ThinDashDotted:null},i._numAlpha=function(e){var t=Math.floor(e/26)-1;return(t>-1?this._numAlpha(t):"")+this._alphabet.charAt(e%26)},i._alphaNum=function(e){var t=0;return!e||(e=e.toUpperCase()),2===e.length&&(t=this._alphaNum(e.charAt(0))+1),26*t+this._alphabet.indexOf(e.substr(-1))},i._b64ToUint6=function(e){return e>64&&91>e?e-65:e>96&&123>e?e-71:e>47&&58>e?e+4:43===e?62:47===e?63:0},i._base64DecToArr=function(e,t){for(var n,i,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=r.length,s=t?Math.ceil((3*o+1>>2)/t)*t:3*o+1>>2,a=new Uint8Array(s),l=0,c=0,u=0;o>u;u++)if(i=3&u,l|=this._b64ToUint6(r.charCodeAt(u))<<18-6*i,3===i||o-u==1){for(n=0;3>n&&s>c;n++,c++)a[c]=l>>>(16>>>n&24)&255;l=0}return a},i._uint6ToB64=function(e){return 26>e?e+65:52>e?e+71:62>e?e-4:62===e?43:63===e?47:65},i._base64EncArr=function(e){for(var t=2,n="",i=e.length,r=0,o=0;i>o;o++)t=o%3,o>0&&4*o/3%76==0&&(n+="\r\n"),r|=e[o]<<(16>>>t&24),(2===t||e.length-o==1)&&(n+=String.fromCharCode(this._uint6ToB64(r>>>18&63),this._uint6ToB64(r>>>12&63),this._uint6ToB64(r>>>6&63),this._uint6ToB64(63&r)),r=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")},i.prototype._serializeWorkSheets=function(){for(var e,t=[],n=0;n<this._sheets.length;n++)e=this._sheets[n],e&&(t[n]=e._serialize());return t},i.prototype._serializeWorkbookStyles=function(){for(var e,t=[],n=0;n<this._styles.length;n++)e=this._styles[n],e&&(t[n]=e._serialize());return t},i.prototype._deserializeWorkSheets=function(e){var t,i,r;for(this._sheets=[],r=0;r<e.length;r++)i=e[r],i&&(t=new n,t._deserialize(i),this._sheets[r]=t)},i.prototype._deserializeWorkbookStyles=function(e){var t,n,i;for(this._styles=[],i=0;i<e.length;i++)n=e[i],n&&(t=new a,t._deserialize(n),this._styles[i]=t)},i._alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i._formatMap={n:"#,##0{0}",c:"{1}#,##0{0}_);({1}#,##0{0})",p:"0{0}%",f:"0{0}",d:"{0}",g:"0{0}"},i}();t.Workbook=g,n=function(){function t(){}return Object.defineProperty(t.prototype,"columns",{get:function(){return null==this._columns&&(this._columns=[]),this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return e._deprecated("WorkSheet.cols","WorkSheet.columns"),this.columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return null==this._rows&&(this._rows=[]),this._rows},enumerable:!0,configurable:!0}),t.prototype._serialize=function(){var e;return this._checkEmptyWorkSheet()?null:(e={},this.style&&(e.style=this.style._serialize()),this._columns&&this._columns.length>0&&(e.cols=e.columns=this._serializeWorkbookColumns()),this._rows&&this._rows.length>0&&(e.rows=this._serializeWorkbookRows()),this.frozenPane&&(e.frozenPane=this.frozenPane._serialize()),this.name&&(e.name=this.name),null!=this.summaryBelow&&(e.summaryBelow=this.summaryBelow),null!=this.visible&&(e.visible=this.visible),e)},t.prototype._deserialize=function(e){var t,n;e.style&&(n=new a,n._deserialize(e.style),this.style=n),e.columns&&e.columns.length>0&&this._deserializeWorkbookColumns(e.columns),e.rows&&e.rows.length>0&&this._deserializeWorkbookRows(e.rows),e.frozenPane&&(t=new s,t._deserialize(e.frozenPane),this.frozenPane=t),this.name=e.name,this.summaryBelow=e.summaryBelow,this.visible=e.visible},t.prototype._addWorkbookColumn=function(e,t){null==this._columns&&(this._columns=[]),null==t||isNaN(t)?this._columns.push(e):this._columns[t]=e},t.prototype._addWorkbookRow=function(e,t){null==this._rows&&(this._rows=[]),null==t||isNaN(t)?this._rows.push(e):this._rows[t]=e},t.prototype._serializeWorkbookColumns=function(){for(var e,t=[],n=0;n<this._columns.length;n++)e=this._columns[n],e&&(t[n]=e._serialize());return t},t.prototype._serializeWorkbookRows=function(){for(var e,t=[],n=0;n<this._rows.length;n++)e=this._rows[n],e&&(t[n]=e._serialize());return t},t.prototype._deserializeWorkbookColumns=function(e){var t,n,r;for(this._columns=[],r=0;r<e.length;r++)t=e[r],t&&(n=new i,n._deserialize(t),this._columns[r]=n)},t.prototype._deserializeWorkbookRows=function(e){var t,n,i;for(this._rows=[],i=0;i<e.length;i++)t=e[i],t&&(n=new r,n._deserialize(t),this._rows[i]=n)},t.prototype._checkEmptyWorkSheet=function(){return null==this._rows&&null==this._columns&&null==this.visible&&null==this.summaryBelow&&null==this.frozenPane&&null==this.style&&(null==this.name||""===this.name)},t}(),t.WorkSheet=n,i=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookColumn()?null:(e={},this.style&&(e.style=this.style._serialize()),null!=this.autoWidth&&(e.autoWidth=this.autoWidth),null!=this.width&&(e.width=this.width),null!=this.visible&&(e.visible=this.visible),e)},e.prototype._deserialize=function(e){var t;e.style&&(t=new a,t._deserialize(e.style),this.style=t),this.autoWidth=e.autoWidth,this.visible=e.visible,this.width=e.width},e.prototype._checkEmptyWorkbookColumn=function(){return null==this.style&&null==this.width&&null==this.autoWidth&&null==this.visible},e}(),t.WorkbookColumn=i,r=function(){function e(){}return Object.defineProperty(e.prototype,"cells",{get:function(){return null==this._cells&&(this._cells=[]),this._cells},enumerable:!0,configurable:!0}),e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookRow()?null:(e={},this._cells&&this._cells.length>0&&(e.cells=this._serializeWorkbookCells()),this.style&&(e.style=this.style._serialize()),null!=this.collapsed&&(e.collapsed=this.collapsed),null==this.groupLevel||isNaN(this.groupLevel)||(e.groupLevel=this.groupLevel),null==this.height||isNaN(this.height)||(e.height=this.height),null!=this.visible&&(e.visible=this.visible),e)},e.prototype._deserialize=function(e){var t;e.cells&&e.cells.length>0&&this._deserializeWorkbookCells(e.cells),e.style&&(t=new a,t._deserialize(e.style),this.style=t),this.collapsed=e.collapsed,this.groupLevel=e.groupLevel,this.height=e.height,this.visible=e.visible},e.prototype._addWorkbookCell=function(e,t){null==this._cells&&(this._cells=[]),null==t||isNaN(t)?this._cells.push(e):this._cells[t]=e},e.prototype._serializeWorkbookCells=function(){for(var e,t=[],n=0;n<this._cells.length;n++)e=this._cells[n],e&&(t[n]=e._serialize());return t},e.prototype._deserializeWorkbookCells=function(e){var t,n,i;for(this._cells=[],i=0;i<e.length;i++)t=e[i],t&&(n=new o,n._deserialize(t),this._cells[i]=n)},e.prototype._checkEmptyWorkbookRow=function(){return null==this._cells&&null==this.style&&null==this.collapsed&&null==this.visible&&(null==this.height||isNaN(this.height))&&(null==this.groupLevel||isNaN(this.groupLevel))},e}(),t.WorkbookRow=r,o=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookCell()?null:(e={},this.style&&(e.style=this.style._serialize()),null!=this.value&&(e.value=this.value),this.formula&&(e.formula=this.formula),null!=this.isDate&&(e.isDate=this.isDate),null!=this.colSpan&&!isNaN(this.colSpan)&&this.colSpan>1&&(e.colSpan=this.colSpan),null!=this.rowSpan&&!isNaN(this.rowSpan)&&this.rowSpan>1&&(e.rowSpan=this.rowSpan),e)},e.prototype._deserialize=function(e){var t;e.style&&(t=new a,t._deserialize(e.style),this.style=t),this.value=e.value,this.formula=e.formula,this.isDate=e.isDate,this.colSpan=e.colSpan,this.rowSpan=e.rowSpan},e.prototype._checkEmptyWorkbookCell=function(){return null==this.style&&null==this.value&&null==this.isDate&&(null==this.formula||""===this.formula)&&(null==this.colSpan||isNaN(this.colSpan)||this.colSpan<=1)&&(null==this.rowSpan||isNaN(this.rowSpan)||this.rowSpan<=1)},e}(),t.WorkbookCell=o,s=function(){function e(){}return e.prototype._serialize=function(){return null!=this.columns&&!isNaN(this.columns)&&0!==this.columns||null!=this.rows&&!isNaN(this.rows)&&0!==this.rows?{columns:this.columns,rows:this.rows}:null},e.prototype._deserialize=function(e){this.columns=e.columns,this.rows=e.rows},e}(),t.WorkbookFrozenPane=s,a=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookStyle()?null:(t={},this.basedOn&&(t.basedOn=this.basedOn._serialize()),this.fill&&(t.fill=this.fill._serialize()),this.font&&(t.font=this.font._serialize()),this.borders&&(t.borders=this.borders._serialize()),this.format&&(t.format=this.format),null!=this.hAlign&&(t.hAlign=e.asEnum(this.hAlign,p,!1)),null!=this.vAlign&&(t.vAlign=e.asEnum(this.vAlign,d,!1)),null==this.indent||isNaN(this.indent)||(t.indent=this.indent),!this.wordWrap||(t.wordWrap=this.wordWrap),t)},t.prototype._deserialize=function(n){var i,r,o,s;n.basedOn&&(i=new t,i._deserialize(n.basedOn),this.basedOn=i),n.fill&&(r=new c,r._deserialize(n.fill),this.fill=r),n.font&&(o=new l,o._deserialize(n.font),this.font=o),n.borders&&(s=new u,s._deserialize(n.borders),this.borders=s),this.format=n.format,null!=n.hAlign&&(this.hAlign=e.asEnum(n.hAlign,p,!1)),null!=n.vAlign&&(this.vAlign=e.asEnum(n.vAlign,d,!1)),null==n.indent||isNaN(n.indent)||(this.indent=n.indent),!n.wordWrap||(this.wordWrap=n.wordWrap)},t.prototype._checkEmptyWorkbookStyle=function(){return null==this.basedOn&&null==this.fill&&null==this.font&&null==this.borders&&(null==this.format||""===this.format)&&null==this.hAlign&&null==this.vAlign&&null==this.wordWrap},t}(),t.WorkbookStyle=a,l=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookFont()?null:(e={},null!=this.bold&&(e.bold=this.bold),null!=this.italic&&(e.italic=this.italic),null!=this.underline&&(e.underline=this.underline),this.color&&(e.color=this.color),this.family&&(e.family=this.family),null==this.size||isNaN(this.size)||(e.size=this.size),e)},e.prototype._deserialize=function(e){this.bold=e.bold,this.color=e.color,this.family=e.family,this.italic=e.italic,this.size=e.size,this.underline=e.underline},e.prototype._checkEmptyWorkbookFont=function(){return null==this.bold&&null==this.italic&&null==this.underline&&(null==this.color||""===this.color)&&(null==this.family||""===this.family)&&(null==this.size||isNaN(this.size))},e}(),t.WorkbookFont=l,c=function(){function e(){}return e.prototype._serialize=function(){return this.color?{color:this.color}:null},e.prototype._deserialize=function(e){this.color=e.color},e}(),t.WorkbookFill=c,u=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookBorder()?null:(e={},this.top&&(e.top=this.top._serialize()),this.bottom&&(e.bottom=this.bottom._serialize()),this.left&&(e.left=this.left._serialize()),this.right&&(e.right=this.right._serialize()),this.diagonal&&(e.diagonal=this.diagonal._serialize()),e)},e.prototype._deserialize=function(e){var t,n,i,r,o;e.top&&(t=new h,t._deserialize(e.top),this.top=t),e.bottom&&(n=new h,n._deserialize(e.bottom),this.bottom=n),e.left&&(i=new h,i._deserialize(e.left),this.left=i),e.right&&(r=new h,r._deserialize(e.right),this.right=r),e.diagonal&&(o=new h,o._deserialize(e.diagonal),this.diagonal=o)},e.prototype._checkEmptyWorkbookBorder=function(){return null==this.top&&null==this.bottom&&null==this.left&&null==this.right&&null==this.diagonal},e}(),t.WorkbookBorder=u,h=function(){function t(){}return t.prototype._serialize=function(){var t;return null!=this.color&&""!==this.color||null!=this.style?(t={},this.color&&(t.color=this.color),null!=this.style&&(t.style=e.asEnum(this.style,f,!1)),t):null},t.prototype._deserialize=function(t){this.color=t.color,null!=t.style&&(this.style=e.asEnum(t.style,f,!1))},t}(),t.WorkbookBorderSetting=h,function(e){e[e.General=0]="General",e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right",e[e.Fill=4]="Fill",e[e.Justify=5]="Justify"}(t.HAlign||(t.HAlign={})),p=t.HAlign,function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Bottom=2]="Bottom",e[e.Justify=3]="Justify"}(t.VAlign||(t.VAlign={})),d=t.VAlign,function(e){e[e.None=0]="None",e[e.Thin=1]="Thin",e[e.Medium=2]="Medium",e[e.Dashed=3]="Dashed",e[e.Dotted=4]="Dotted",e[e.Thick=5]="Thick",e[e.Double=6]="Double",e[e.Hair=7]="Hair",e[e.MediumDashed=8]="MediumDashed",e[e.ThinDashDotted=9]="ThinDashDotted",e[e.MediumDashDotted=10]="MediumDashDotted",e[e.ThinDashDotDotted=11]="ThinDashDotDotted",e[e.MediumDashDotDotted=12]="MediumDashDotDotted",e[e.SlantedMediumDashDotted=13]="SlantedMediumDashDotted"}(t.BorderStyle||(t.BorderStyle={})),f=t.BorderStyle}(t=e.xlsx||(e.xlsx={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){"use strict";var n=function(){function n(){}return n["export"]=function(n){e._deprecated("XlsxConverter.export","Workbook.save");var i=t._xlsx(n);return i.base64Array=t.Workbook._base64DecToArr(i.base64),i},n.exportToFile=function(t,i){var r,o;if(e._deprecated("XlsxConverter.exportToFile","Workbook.save"),r=n["export"](t),o=new Blob([r.base64Array]),i)if(navigator.msSaveBlob)navigator.msSaveBlob(o,i);else{var s=document.createElement("a"),a=function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},l=new FileReader;l.onloadend=function(){s.download=i,s.href=r.href(),a(s),s=null},l.readAsDataURL(o)}},n["import"]=function(n){e._deprecated("XlsxConverter.import","Workbook.load");var i="string"==typeof n?n:t.Workbook._base64EncArr(new Uint8Array(n));return t._xlsx(i)},n.xlsxDateFormat=function(n){return e._deprecated("XlsxConverter.xlsxDateFormat","Workbook.toXlsxDateFormat"),t.Workbook.toXlsxDateFormat(n)},n.xlsxNumberFormat=function(n){return e._deprecated("XlsxConverter.xlsxNumberFormat","Workbook.toXlsxNumberFormat"),t.Workbook.toXlsxNumberFormat(n)},n.netFormat=function(n){return e._deprecated("XlsxConverter.netFormat","Workbook.fromXlsxFormat"),t.Workbook.fromXlsxFormat(n)},n.xlsxIndex=function(n,i,r,o){return e._deprecated("XlsxConverter.xlsxIndex","Workbook.xlsxAddress"),t.Workbook.xlsxAddress(n,i,r,o)},n.numericIndex=function(n){return e._deprecated("XlsxConverter.numericIndex","Workbook.numericAddress"),t.Workbook.tableAddress(n)},n}();t.XlsxConverter=n}(t=e.xlsx||(e.xlsx={}))}(wijmo||(wijmo={}));var wj,__extends,wijmo;!function(e){var t;!function(e){function t(e){return e<=i.Enum}var n,i,r,o,s,a,l=function(){function e(){}return e.CreateProp=function(e,t,i,r,o,s){return new n(e,t,i,r,o,s)},e.CreateEvent=function(e,t){return new o(e,t)},e.CreateComplexProp=function(e,t,n){return new s(e,t,n)},e.findProp=function(e,t){return this.findInArr(t,"propertyName",e)},e.findEvent=function(e,t){return this.findInArr(t,"eventName",e)},e.findComplexProp=function(e,t){return this.findInArr(t,"propertyName",e)},e.getMetaData=function(e){switch(e){case wijmo.Control:return new a([this.CreateProp("isDisabled",i.Boolean),this.CreateProp("disabled",i.Boolean)],[this.CreateEvent("gotFocus"),this.CreateEvent("lostFocus")]);case wijmo.input&&wijmo.input.DropDown:return this.getMetaData(wijmo.Control).add([this.CreateProp("isDroppedDown",i.Boolean,"isDroppedDownChanged"),this.CreateProp("showDropDownButton",i.Boolean),this.CreateProp("autoExpandSelection",i.Boolean),this.CreateProp("placeholder",i.String),this.CreateProp("dropDownCssClass",i.String),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("isRequired",i.Boolean),this.CreateProp("required",i.Boolean),this.CreateProp("text",i.String,"textChanged",null,!0,1e3)],[this.CreateEvent("isDroppedDownChanging"),this.CreateEvent("isDroppedDownChanged",!0),this.CreateEvent("textChanged",!0)]);case wijmo.input&&wijmo.input.ComboBox:return this.getMetaData(wijmo.input.DropDown).add([this.CreateProp("displayMemberPath",i.String),this.CreateProp("selectedValuePath",i.String),this.CreateProp("headerPath",i.String),this.CreateProp("isContentHtml",i.Boolean),this.CreateProp("isEditable",i.Boolean),this.CreateProp("maxDropDownHeight",i.Number),this.CreateProp("maxDropDownWidth",i.Number),this.CreateProp("itemFormatter",i.Function),this.CreateProp("itemsSource",i.Any,"",null,!0,900),this.CreateProp("selectedIndex",i.Number,"selectedIndexChanged",null,!0,1e3),this.CreateProp("selectedItem",i.Any,"selectedIndexChanged",null,!0,1e3),this.CreateProp("selectedValue",i.Any,"selectedIndexChanged",null,!0,1e3)],[this.CreateEvent("selectedIndexChanged",!0)]).addOptions({ngModelProperty:"selectedValue"});case wijmo.input&&wijmo.input.AutoComplete:return this.getMetaData(wijmo.input.ComboBox).add([this.CreateProp("delay",i.Number),this.CreateProp("maxItems",i.Number),this.CreateProp("minLength",i.Number),this.CreateProp("cssMatch",i.String),this.CreateProp("itemsSourceFunction",i.Function),this.CreateProp("searchMemberPath",i.String)]);case wijmo.input&&wijmo.input.Calendar:return this.getMetaData(wijmo.Control).add([this.CreateProp("monthView",i.Boolean),this.CreateProp("showHeader",i.Boolean),this.CreateProp("itemFormatter",i.Function),this.CreateProp("itemValidator",i.Function),this.CreateProp("displayMonth",i.Date,"displayMonthChanged"),this.CreateProp("firstDayOfWeek",i.Number),this.CreateProp("max",i.Date),this.CreateProp("min",i.Date),this.CreateProp("selectionMode",i.Enum,"",wijmo.input.DateSelectionMode),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("value",i.Date,"valueChanged")],[this.CreateEvent("valueChanged",!0),this.CreateEvent("displayMonthChanged",!0),this.CreateEvent("formatItem",!1)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.ColorPicker:return this.getMetaData(wijmo.Control).add([this.CreateProp("showAlphaChannel",i.Boolean),this.CreateProp("showColorString",i.Boolean),this.CreateProp("palette",i.Any),this.CreateProp("value",i.String,"valueChanged")],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.ListBox:return this.getMetaData(wijmo.Control).add([this.CreateProp("isContentHtml",i.Boolean),this.CreateProp("maxHeight",i.Number),this.CreateProp("selectedValuePath",i.String),this.CreateProp("itemFormatter",i.Function),this.CreateProp("displayMemberPath",i.String),this.CreateProp("checkedMemberPath",i.String),this.CreateProp("itemsSource",i.Any),this.CreateProp("selectedIndex",i.Number,"selectedIndexChanged"),this.CreateProp("selectedItem",i.Any,"selectedIndexChanged"),this.CreateProp("selectedValue",i.Any,"selectedIndexChanged")],[this.CreateEvent("formatItem",!1),this.CreateEvent("itemsChanged",!0),this.CreateEvent("itemChecked",!0),this.CreateEvent("selectedIndexChanged",!0)]).addOptions({ngModelProperty:"selectedValue"});case"ItemTemplate":return new a([],[],[],void 0,void 0,void 0,"owner");case wijmo.input&&wijmo.input.Menu:return this.getMetaData(wijmo.input.ComboBox).add([this.CreateProp("header",i.String),this.CreateProp("commandParameterPath",i.String),this.CreateProp("commandPath",i.String),this.CreateProp("isButton",i.Boolean),this.CreateProp("value",i.Any,"itemClicked",null,!1,1e3)],[this.CreateEvent("itemClicked")]);case"MenuItem":return new a([this.CreateProp("value",i.Any,""),this.CreateProp("cmd",i.Any,""),this.CreateProp("cmdParam",i.Any,"")],[],[],"itemsSource",!0);case"MenuSeparator":return new a([],[],[],"itemsSource",!0);case wijmo.input&&wijmo.input.InputDate:return this.getMetaData(wijmo.input.DropDown).add([this.CreateProp("selectionMode",i.Enum,"",wijmo.input.DateSelectionMode),this.CreateProp("format",i.String),this.CreateProp("mask",i.String),this.CreateProp("max",i.Date),this.CreateProp("min",i.Date),this.CreateProp("inputType",i.String),this.CreateProp("value",i.Date,"valueChanged",null,!0,1e3),this.CreateProp("itemValidator",i.Function),this.CreateProp("itemFormatter",i.Function)],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.InputDateTime:return this.getMetaData(wijmo.input.InputDate).add([this.CreateProp("timeMax",i.Date),this.CreateProp("timeMin",i.Date),this.CreateProp("timeStep",i.Number),this.CreateProp("timeFormat",i.String)],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.InputNumber:return this.getMetaData(wijmo.Control).add([this.CreateProp("showSpinner",i.Boolean),this.CreateProp("max",i.Number),this.CreateProp("min",i.Number),this.CreateProp("step",i.Number),this.CreateProp("isRequired",i.Boolean),this.CreateProp("required",i.Boolean),this.CreateProp("placeholder",i.String),this.CreateProp("inputType",i.String),this.CreateProp("format",i.String),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("value",i.Number,"valueChanged"),this.CreateProp("text",i.String,"textChanged")],[this.CreateEvent("valueChanged",!0),this.CreateEvent("textChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.InputMask:return this.getMetaData(wijmo.Control).add([this.CreateProp("mask",i.String),this.CreateProp("isRequired",i.Boolean),this.CreateProp("promptChar",i.String),this.CreateProp("placeholder",i.String),this.CreateProp("rawValue",i.String,"valueChanged"),this.CreateProp("value",i.String,"valueChanged")],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.InputTime:return this.getMetaData(wijmo.input.ComboBox).add([this.CreateProp("max",i.Date),this.CreateProp("min",i.Date),this.CreateProp("step",i.Number),this.CreateProp("format",i.String),this.CreateProp("mask",i.String),this.CreateProp("inputType",i.String),this.CreateProp("value",i.Date,"valueChanged",null,!0,1e3)],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.InputColor:return this.getMetaData(wijmo.input.DropDown).add([this.CreateProp("showAlphaChannel",i.Boolean),this.CreateProp("value",i.String,"valueChanged")],[this.CreateEvent("valueChanged",!0)]).addOptions({ngModelProperty:"value"});case wijmo.input&&wijmo.input.Popup:return this.getMetaData(wijmo.Control).add([this.CreateProp("owner",i.String),this.CreateProp("showTrigger",i.Enum,"",wijmo.input.PopupTrigger),this.CreateProp("hideTrigger",i.Enum,"",wijmo.input.PopupTrigger),this.CreateProp("fadeIn",i.Boolean),this.CreateProp("fadeOut",i.Boolean),this.CreateProp("dialogResultEnter",i.String),this.CreateProp("modal",i.Boolean)],[this.CreateEvent("showing"),this.CreateEvent("shown"),this.CreateEvent("hiding"),this.CreateEvent("hidden")]);case wijmo.input&&wijmo.input.MultiSelect:return this.getMetaData(wijmo.input.ComboBox).add([this.CreateProp("checkedMemberPath",i.String),this.CreateProp("maxHeaderItems",i.Number),this.CreateProp("headerFormat",i.String),this.CreateProp("headerFormatter",i.Function),this.CreateProp("checkedItems",i.Any,"checkedItemsChanged",r.TwoWay,!0,950)],[this.CreateEvent("checkedItemsChanged",!0)]);case"CollectionViewNavigator":return new a([this.CreateProp("cv",i.Any)]);case"CollectionViewPager":return new a([this.CreateProp("cv",i.Any)]);case wijmo.grid&&wijmo.grid.FlexGrid:return this.getMetaData(wijmo.Control).add([this.CreateProp("newRowAtTop",i.Boolean),this.CreateProp("allowAddNew",i.Boolean),this.CreateProp("allowDelete",i.Boolean),this.CreateProp("allowDragging",i.Enum,"",wijmo.grid.AllowDragging),this.CreateProp("allowMerging",i.Enum,"",wijmo.grid.AllowMerging),this.CreateProp("allowResizing",i.Enum,"",wijmo.grid.AllowResizing),this.CreateProp("allowSorting",i.Boolean),this.CreateProp("autoSizeMode",i.Enum,"",wijmo.grid.AutoSizeMode),this.CreateProp("autoGenerateColumns",i.Boolean),this.CreateProp("childItemsPath",i.Any),this.CreateProp("groupHeaderFormat",i.String),this.CreateProp("headersVisibility",i.Enum,"",wijmo.grid.HeadersVisibility),this.CreateProp("showSelectedHeaders",i.Enum,"",wijmo.grid.HeadersVisibility),this.CreateProp("showMarquee",i.Boolean),this.CreateProp("itemFormatter",i.Function),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("imeEnabled",i.Boolean),this.CreateProp("mergeManager",i.Any),this.CreateProp("selectionMode",i.Enum,"",wijmo.grid.SelectionMode),this.CreateProp("showGroups",i.Boolean),this.CreateProp("showSort",i.Boolean),this.CreateProp("showAlternatingRows",i.Boolean),this.CreateProp("showErrors",i.Boolean),this.CreateProp("validateEdits",i.Boolean),this.CreateProp("treeIndent",i.Number),this.CreateProp("itemsSource",i.Any),this.CreateProp("autoClipboard",i.Boolean),this.CreateProp("frozenRows",i.Number),this.CreateProp("frozenColumns",i.Number),this.CreateProp("deferResizing",i.Boolean),this.CreateProp("sortRowIndex",i.Number),this.CreateProp("stickyHeaders",i.Boolean),this.CreateProp("preserveSelection",i.Boolean),this.CreateProp("preserveOutlineState",i.Boolean)],[this.CreateEvent("beginningEdit"),this.CreateEvent("cellEditEnded"),this.CreateEvent("cellEditEnding"),this.CreateEvent("prepareCellForEdit"),this.CreateEvent("formatItem"),this.CreateEvent("resizingColumn"),this.CreateEvent("resizedColumn"),this.CreateEvent("autoSizingColumn"),this.CreateEvent("autoSizedColumn"),this.CreateEvent("draggingColumn"),this.CreateEvent("draggedColumn"),this.CreateEvent("sortingColumn"),this.CreateEvent("sortedColumn"),this.CreateEvent("resizingRow"),this.CreateEvent("resizedRow"),this.CreateEvent("autoSizingRow"),this.CreateEvent("autoSizedRow"),this.CreateEvent("draggingRow"),this.CreateEvent("draggedRow"),this.CreateEvent("deletingRow"),this.CreateEvent("loadingRows"),this.CreateEvent("loadedRows"),this.CreateEvent("rowEditStarting"),this.CreateEvent("rowEditStarted"),this.CreateEvent("rowEditEnding"),this.CreateEvent("rowEditEnded"),this.CreateEvent("rowAdded"),this.CreateEvent("groupCollapsedChanged"),this.CreateEvent("groupCollapsedChanging"),this.CreateEvent("itemsSourceChanged",!0),this.CreateEvent("selectionChanging"),this.CreateEvent("selectionChanged",!0),this.CreateEvent("scrollPositionChanged",!1),this.CreateEvent("updatingView"),this.CreateEvent("updatedView"),this.CreateEvent("updatingLayout"),this.CreateEvent("updatedLayout"),this.CreateEvent("pasting"),this.CreateEvent("pasted"),this.CreateEvent("pastingCell"),this.CreateEvent("pastedCell"),this.CreateEvent("copying"),this.CreateEvent("copied")]);
case wijmo.grid&&wijmo.grid.Column:return new a([this.CreateProp("name",i.String),this.CreateProp("dataMap",i.Any),this.CreateProp("dataType",i.Enum,"",wijmo.DataType),this.CreateProp("binding",i.String),this.CreateProp("sortMemberPath",i.String),this.CreateProp("format",i.String),this.CreateProp("header",i.String),this.CreateProp("width",i.Number),this.CreateProp("minWidth",i.Number),this.CreateProp("maxWidth",i.Number),this.CreateProp("align",i.String),this.CreateProp("allowDragging",i.Boolean),this.CreateProp("allowSorting",i.Boolean),this.CreateProp("allowResizing",i.Boolean),this.CreateProp("allowMerging",i.Boolean),this.CreateProp("aggregate",i.Enum,"",wijmo.Aggregate),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("cssClass",i.String),this.CreateProp("isContentHtml",i.Boolean),this.CreateProp("isSelected",i.Boolean,"grid.selectionChanged"),this.CreateProp("visible",i.Boolean),this.CreateProp("wordWrap",i.Boolean),this.CreateProp("mask",i.String),this.CreateProp("inputType",i.String),this.CreateProp("isRequired",i.Boolean),this.CreateProp("required",i.Boolean),this.CreateProp("showDropDown",i.Boolean),this.CreateProp("dropDownCssClass",i.String)],[],[],"columns",!0);case"FlexGridCellTemplate":return new a([this.CreateProp("cellType",i.String,"",null,!1),this.CreateProp("cellOverflow",i.String,"")],[],[],void 0,void 0,void 0,"owner");case wijmo.grid&&wijmo.grid.filter&&wijmo.grid.filter.FlexGridFilter:return new a([this.CreateProp("showFilterIcons",i.Boolean),this.CreateProp("showSortButtons",i.Boolean),this.CreateProp("defaultFilterType",i.Enum,"",wijmo.grid.filter.FilterType),this.CreateProp("filterColumns",i.Any)],[this.CreateEvent("filterChanging"),this.CreateEvent("filterChanged"),this.CreateEvent("filterApplied")],[],void 0,void 0,void 0,"");case wijmo.grid&&wijmo.grid.grouppanel&&wijmo.grid.grouppanel.GroupPanel:return this.getMetaData(wijmo.Control).add([this.CreateProp("hideGroupedColumns",i.Boolean),this.CreateProp("maxGroups",i.Number),this.CreateProp("placeholder",i.String),this.CreateProp("grid",i.Any)]);case wijmo.grid&&wijmo.grid.detail&&wijmo.grid.detail.FlexGridDetailProvider:return new a([this.CreateProp("maxHeight",i.Number),this.CreateProp("detailVisibilityMode",i.Enum,"",wijmo.grid.detail.DetailVisibilityMode),this.CreateProp("rowHasDetail",i.Function)],[],[],void 0,void 0,void 0,"");case wijmo.grid&&wijmo.grid.sheet&&wijmo.grid.sheet.FlexSheet:return this.getMetaData(wijmo.grid.FlexGrid).add([this.CreateProp("isTabHolderVisible",i.Boolean),this.CreateProp("selectedSheetIndex",i.Number,"selectedSheetChanged")],[this.CreateEvent("selectedSheetChanged",!0),this.CreateEvent("draggingRowColumn"),this.CreateEvent("droppingRowColumn"),this.CreateEvent("loaded"),this.CreateEvent("unknownFunction"),this.CreateEvent("sheetCleared")]);case wijmo.grid&&wijmo.grid.sheet&&wijmo.grid.sheet.Sheet:return new a([this.CreateProp("name",i.String),this.CreateProp("itemsSource",i.Any),this.CreateProp("visible",i.Boolean),this.CreateProp("rowCount",i.Number,"",null,!1),this.CreateProp("columnCount",i.Number,"",null,!1)],[this.CreateEvent("nameChanged")]).addOptions({parentReferenceProperty:""});case wijmo.grid&&wijmo.grid.multirow&&wijmo.grid.multirow.MultiRow:return this.getMetaData(wijmo.grid.FlexGrid).add([this.CreateProp("layoutDefinition",i.Any),this.CreateProp("centerHeadersVertically",i.Boolean),this.CreateProp("collapsedHeaders",i.Boolean),this.CreateProp("showHeaderCollapseButton",i.Boolean)]);case wijmo.chart&&wijmo.chart.FlexChartBase:return this.getMetaData(wijmo.Control).add([this.CreateProp("binding",i.String),this.CreateProp("footer",i.String),this.CreateProp("header",i.String),this.CreateProp("selectionMode",i.Enum,"",wijmo.chart.SelectionMode),this.CreateProp("palette",i.Any),this.CreateProp("plotMargin",i.Any),this.CreateProp("footerStyle",i.Any),this.CreateProp("headerStyle",i.Any),this.CreateProp("tooltipContent",i.String,"",null,!1),this.CreateProp("itemsSource",i.Any)],[this.CreateEvent("rendering"),this.CreateEvent("rendered")]);case wijmo.chart&&wijmo.chart.FlexChartCore:return this.getMetaData(wijmo.chart.FlexChartBase).add([this.CreateProp("bindingX",i.String),this.CreateProp("interpolateNulls",i.Boolean),this.CreateProp("legendToggle",i.Boolean),this.CreateProp("symbolSize",i.Number),this.CreateProp("options",i.Any),this.CreateProp("selection",i.Any,"selectionChanged"),this.CreateProp("itemFormatter",i.Function),this.CreateProp("labelContent",i.String,"",null,!1)],[this.CreateEvent("seriesVisibilityChanged"),this.CreateEvent("selectionChanged",!0)],[this.CreateComplexProp("axisX",!1,!1),this.CreateComplexProp("axisY",!1,!1),this.CreateComplexProp("axes",!0),this.CreateComplexProp("plotAreas",!0)]);case wijmo.chart&&wijmo.chart.FlexChart:return this.getMetaData(wijmo.chart.FlexChartCore).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.ChartType),this.CreateProp("rotated",i.Boolean),this.CreateProp("stacking",i.Enum,"",wijmo.chart.Stacking)]);case wijmo.chart&&wijmo.chart.FlexPie:return this.getMetaData(wijmo.chart.FlexChartBase).add([this.CreateProp("bindingName",i.String),this.CreateProp("innerRadius",i.Number),this.CreateProp("isAnimated",i.Boolean),this.CreateProp("offset",i.Number),this.CreateProp("reversed",i.Boolean),this.CreateProp("startAngle",i.Number),this.CreateProp("selectedItemPosition",i.Enum,"",wijmo.chart.Position),this.CreateProp("selectedItemOffset",i.Number),this.CreateProp("itemFormatter",i.Function),this.CreateProp("labelContent",i.String,"",null,!1)]);case wijmo.chart&&wijmo.chart.FlexPie&&wijmo.chart.hierarchical&&wijmo.chart.hierarchical.Sunburst:return this.getMetaData(wijmo.chart.FlexChartBase).add([this.CreateProp("bindingName",i.Any),this.CreateProp("innerRadius",i.Number),this.CreateProp("isAnimated",i.Boolean),this.CreateProp("offset",i.Number),this.CreateProp("reversed",i.Boolean),this.CreateProp("startAngle",i.Number),this.CreateProp("selectedItemPosition",i.Enum,"",wijmo.chart.Position),this.CreateProp("selectedItemOffset",i.Number),this.CreateProp("itemFormatter",i.Function),this.CreateProp("labelContent",i.String,"",null,!1),this.CreateProp("childItemsPath",i.Any)]);case wijmo.chart&&wijmo.chart.Axis:return new a([this.CreateProp("axisLine",i.Boolean),this.CreateProp("format",i.String),this.CreateProp("labels",i.Boolean),this.CreateProp("majorGrid",i.Boolean),this.CreateProp("majorTickMarks",i.Enum,"",wijmo.chart.TickMark),this.CreateProp("majorUnit",i.Number),this.CreateProp("max",i.Number),this.CreateProp("min",i.Number),this.CreateProp("position",i.Enum,"",wijmo.chart.Position),this.CreateProp("reversed",i.Boolean),this.CreateProp("title",i.String),this.CreateProp("labelAngle",i.Number),this.CreateProp("minorGrid",i.Boolean),this.CreateProp("minorTickMarks",i.Enum,"",wijmo.chart.TickMark),this.CreateProp("minorUnit",i.Number),this.CreateProp("origin",i.Number),this.CreateProp("logBase",i.Number),this.CreateProp("plotArea",i.Any),this.CreateProp("labelAlign",i.String),this.CreateProp("name",i.String),this.CreateProp("overlappingLabels",i.Enum,"",wijmo.chart.OverlappingLabels),this.CreateProp("labelPadding",i.Number),this.CreateProp("itemFormatter",i.Function),this.CreateProp("itemsSource",i.Any),this.CreateProp("binding",i.String)],[this.CreateEvent("rangeChanged")],[],"axes",!0);case wijmo.chart&&wijmo.chart.Legend:return new a([this.CreateProp("position",i.Enum,"",wijmo.chart.Position)],[],[],"legend",!1,!1);case wijmo.chart&&wijmo.chart.DataLabelBase:return new a([this.CreateProp("content",i.Any,""),this.CreateProp("border",i.Boolean)],[],[],"dataLabel",!1,!1);case wijmo.chart&&wijmo.chart.DataLabel:return this.getMetaData(wijmo.chart.DataLabelBase).add([this.CreateProp("position",i.Enum,"",wijmo.chart.LabelPosition)]);case wijmo.chart&&wijmo.chart.PieDataLabel:return this.getMetaData(wijmo.chart.DataLabelBase).add([this.CreateProp("position",i.Enum,"",wijmo.chart.PieLabelPosition)]);case wijmo.chart&&wijmo.chart.SeriesBase:return new a([this.CreateProp("axisX",i.Any),this.CreateProp("axisY",i.Any),this.CreateProp("binding",i.String),this.CreateProp("bindingX",i.String),this.CreateProp("cssClass",i.String),this.CreateProp("name",i.String),this.CreateProp("style",i.Any),this.CreateProp("altStyle",i.Any),this.CreateProp("symbolMarker",i.Enum,"",wijmo.chart.Marker),this.CreateProp("symbolSize",i.Number),this.CreateProp("symbolStyle",i.Any),this.CreateProp("visibility",i.Enum,"chart.seriesVisibilityChanged",wijmo.chart.SeriesVisibility),this.CreateProp("itemsSource",i.Any)],[this.CreateEvent("rendering"),this.CreateEvent("rendered")],[this.CreateComplexProp("axisX",!1,!0),this.CreateComplexProp("axisY",!1,!0)],"series",!0);case wijmo.chart&&wijmo.chart.Series:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.ChartType)]);case wijmo.chart&&wijmo.chart.LineMarker:return new a([this.CreateProp("isVisible",i.Boolean),this.CreateProp("seriesIndex",i.Number),this.CreateProp("horizontalPosition",i.Number),this.CreateProp("content",i.Function),this.CreateProp("verticalPosition",i.Number),this.CreateProp("alignment",i.Enum,"",wijmo.chart.LineMarkerAlignment),this.CreateProp("lines",i.Enum,"",wijmo.chart.LineMarkerLines),this.CreateProp("interaction",i.Enum,"",wijmo.chart.LineMarkerInteraction),this.CreateProp("dragLines",i.Boolean),this.CreateProp("dragThreshold",i.Number),this.CreateProp("dragContent",i.Boolean)],[this.CreateEvent("positionChanged")],[],void 0,void 0,void 0,"");case wijmo.chart&&wijmo.chart.DataPoint:return new a([this.CreateProp("x",i.AnyPrimitive),this.CreateProp("y",i.AnyPrimitive)],[],[],"");case wijmo.chart&&wijmo.chart.annotation&&wijmo.chart.annotation.AnnotationLayer:return new a([],[],[],void 0,void 0,void 0,"");case"FlexChartAnnotation":return new a([this.CreateProp("type",i.String,"",null,!1),this.CreateProp("attachment",i.Enum,"",wijmo.chart.annotation.AnnotationAttachment),this.CreateProp("position",i.Enum,"",wijmo.chart.annotation.AnnotationPosition),this.CreateProp("point",i.Any),this.CreateProp("seriesIndex",i.Number),this.CreateProp("pointIndex",i.Number),this.CreateProp("offset",i.Any),this.CreateProp("style",i.Any),this.CreateProp("isVisible",i.Boolean),this.CreateProp("tooltip",i.String),this.CreateProp("text",i.String),this.CreateProp("content",i.String),this.CreateProp("name",i.String),this.CreateProp("width",i.Number),this.CreateProp("height",i.Number),this.CreateProp("start",i.Any),this.CreateProp("end",i.Any),this.CreateProp("radius",i.Number),this.CreateProp("length",i.Number),this.CreateProp("href",i.String)],[],[this.CreateComplexProp("point",!1,!0),this.CreateComplexProp("start",!1,!0),this.CreateComplexProp("end",!1,!0),this.CreateComplexProp("points",!0)],"items",!0);case wijmo.chart&&wijmo.chart.interaction&&wijmo.chart.interaction.RangeSelector:return new a([this.CreateProp("isVisible",i.Boolean),this.CreateProp("min",i.Number),this.CreateProp("max",i.Number),this.CreateProp("orientation",i.Enum,"",wijmo.chart.interaction.Orientation),this.CreateProp("seamless",i.Boolean),this.CreateProp("minScale",i.Number),this.CreateProp("maxScale",i.Number)],[this.CreateEvent("rangeChanged")],[],void 0,void 0,void 0,"");case wijmo.chart&&wijmo.chart.interaction&&wijmo.chart.interaction.ChartGestures:return new a([this.CreateProp("mouseAction",i.Enum,"",wijmo.chart.interaction.MouseAction),this.CreateProp("interactiveAxes",i.Enum,"",wijmo.chart.interaction.InteractiveAxes),this.CreateProp("enable",i.Boolean),this.CreateProp("scaleX",i.Number),this.CreateProp("scaleY",i.Number),this.CreateProp("posX",i.Number),this.CreateProp("posY",i.Number)],[],[],void 0,void 0,void 0,"");case wijmo.chart&&wijmo.chart.animation&&wijmo.chart.animation.ChartAnimation:return new a([this.CreateProp("animationMode",i.Enum,"",wijmo.chart.animation.AnimationMode),this.CreateProp("easing",i.Enum,"",wijmo.chart.animation.Easing),this.CreateProp("duration",i.Number),this.CreateProp("axisAnimation",i.Boolean)],[],[],void 0,void 0,void 0,"");case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.FinancialChart:return this.getMetaData(wijmo.chart.FlexChartCore).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.finance.FinancialChartType)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.FinancialSeries:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.finance.FinancialChartType)]);case wijmo.chart&&wijmo.chart.radar&&wijmo.chart.radar.FlexRadar:return this.getMetaData(wijmo.chart.FlexChartCore).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.radar.RadarChartType),this.CreateProp("startAngle",i.Number),this.CreateProp("totalAngle",i.Number),this.CreateProp("reversed",i.Boolean),this.CreateProp("stacking",i.Enum,"",wijmo.chart.Stacking)]);case wijmo.chart&&wijmo.chart.radar&&wijmo.chart.radar.FlexRadarSeries:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("chartType",i.Enum,"",wijmo.chart.radar.RadarChartType)]);case wijmo.chart&&wijmo.chart.radar&&wijmo.chart.radar.FlexRadarAxis:return this.getMetaData(wijmo.chart.Axis);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.TrendLineBase:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("sampleCount",i.Number)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.TrendLine:return this.getMetaData(wijmo.chart.analytics.TrendLineBase).add([this.CreateProp("order",i.Number),this.CreateProp("fitType",i.Enum,"",wijmo.chart.analytics.TrendLineFitType)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.MovingAverage:return this.getMetaData(wijmo.chart.analytics.TrendLineBase).add([this.CreateProp("period",i.Number),this.CreateProp("type",i.Enum,"",wijmo.chart.analytics.MovingAverageType)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.FunctionSeries:return this.getMetaData(wijmo.chart.analytics.TrendLineBase).add([this.CreateProp("min",i.Number),this.CreateProp("max",i.Number)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.YFunctionSeries:return this.getMetaData(wijmo.chart.analytics.FunctionSeries).add([this.CreateProp("func",i.Function)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.ParametricFunctionSeries:return this.getMetaData(wijmo.chart.analytics.FunctionSeries).add([this.CreateProp("func",i.Function),this.CreateProp("xFunc",i.Function),this.CreateProp("yFunc",i.Function)]);case wijmo.chart&&wijmo.chart.analytics&&wijmo.chart.analytics.Waterfall:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("relativeData",i.Boolean),this.CreateProp("start",i.Number),this.CreateProp("startLabel",i.String),this.CreateProp("showTotal",i.Boolean),this.CreateProp("totalLabel",i.String),this.CreateProp("showIntermediateTotal",i.Boolean),this.CreateProp("intermediateTotalPositions",i.Any),this.CreateProp("intermediateTotalLabels",i.Any),this.CreateProp("connectorLines",i.Boolean),this.CreateProp("styles",i.Any)]);case wijmo.chart&&wijmo.chart.PlotArea:return new a([this.CreateProp("column",i.Number),this.CreateProp("height",i.String),this.CreateProp("name",i.String),this.CreateProp("row",i.Number),this.CreateProp("style",i.Any),this.CreateProp("width",i.String)],[],[],"plotAreas",!0);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.Fibonacci:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("high",i.Number),this.CreateProp("low",i.Number),this.CreateProp("labelPosition",i.Enum,"",wijmo.chart.LabelPosition),this.CreateProp("levels",i.Any),this.CreateProp("minX",i.AnyPrimitive),this.CreateProp("maxX",i.AnyPrimitive),this.CreateProp("uptrend",i.Boolean)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.FibonacciTimeZones:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("startX",i.Any),this.CreateProp("endX",i.Any),this.CreateProp("labelPosition",i.Enum,"",wijmo.chart.LabelPosition),this.CreateProp("levels",i.Any)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.FibonacciArcs:case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.FibonacciFans:return this.getMetaData(wijmo.chart.SeriesBase).add([this.CreateProp("start",i.Any),this.CreateProp("end",i.Any),this.CreateProp("labelPosition",i.Enum,"",wijmo.chart.LabelPosition),this.CreateProp("levels",i.Any)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.OverlayIndicatorBase:return this.getMetaData(wijmo.chart.SeriesBase);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.SingleOverlayIndicatorBase:return this.getMetaData(wijmo.chart.finance.analytics.OverlayIndicatorBase).add([this.CreateProp("period",i.Number)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.MacdBase:return this.getMetaData(wijmo.chart.finance.analytics.OverlayIndicatorBase).add([this.CreateProp("fastPeriod",i.Number),this.CreateProp("slowPeriod",i.Number),this.CreateProp("smoothingPeriod",i.Number)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.Macd:return this.getMetaData(wijmo.chart.finance.analytics.MacdBase).add([this.CreateProp("styles",i.Any)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.MacdHistogram:return this.getMetaData(wijmo.chart.finance.analytics.MacdBase);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.ATR:case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.RSI:case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.WilliamsR:return this.getMetaData(wijmo.chart.finance.analytics.SingleOverlayIndicatorBase);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.CCI:return this.getMetaData(wijmo.chart.finance.analytics.SingleOverlayIndicatorBase).add([this.CreateProp("constant",i.Number)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.Stochastic:return this.getMetaData(wijmo.chart.finance.analytics.OverlayIndicatorBase).add([this.CreateProp("dPeriod",i.Number),this.CreateProp("kPeriod",i.Number),this.CreateProp("smoothingPeriod",i.Number),this.CreateProp("styles",i.Any)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.Envelopes:return this.getMetaData(wijmo.chart.finance.analytics.OverlayIndicatorBase).add([this.CreateProp("period",i.Number),this.CreateProp("size",i.Number),this.CreateProp("type",i.Enum,"",wijmo.chart.finance.analytics.MovingAverageType)]);case wijmo.chart&&wijmo.chart.finance&&wijmo.chart.finance.analytics&&wijmo.chart.finance.analytics.BollingerBands:return this.getMetaData(wijmo.chart.finance.analytics.OverlayIndicatorBase).add([this.CreateProp("period",i.Number),this.CreateProp("multiplier",i.Number)]);case wijmo.gauge&&wijmo.gauge.Gauge:return this.getMetaData(wijmo.Control).add([this.CreateProp("value",i.Number,"valueChanged"),this.CreateProp("min",i.Number),this.CreateProp("max",i.Number),this.CreateProp("origin",i.Number),this.CreateProp("isReadOnly",i.Boolean),this.CreateProp("step",i.Number),this.CreateProp("format",i.String),this.CreateProp("thickness",i.Number),this.CreateProp("hasShadow",i.Boolean),this.CreateProp("isAnimated",i.Boolean),this.CreateProp("showText",i.Enum,"",wijmo.gauge.ShowText),this.CreateProp("showTicks",i.Boolean),this.CreateProp("showRanges",i.Boolean),this.CreateProp("thumbSize",i.Number),this.CreateProp("getText",i.Function)],[this.CreateEvent("valueChanged",!0)],[this.CreateComplexProp("ranges",!0),this.CreateComplexProp("pointer",!1,!1),this.CreateComplexProp("face",!1,!1)]).addOptions({ngModelProperty:"value"});case wijmo.gauge&&wijmo.gauge.LinearGauge:return this.getMetaData(wijmo.gauge.Gauge).add([this.CreateProp("direction",i.Enum,"",wijmo.gauge.GaugeDirection)]);case wijmo.gauge&&wijmo.gauge.BulletGraph:return this.getMetaData(wijmo.gauge.LinearGauge).add([this.CreateProp("target",i.Number),this.CreateProp("good",i.Number),this.CreateProp("bad",i.Number)]);case wijmo.gauge&&wijmo.gauge.RadialGauge:return this.getMetaData(wijmo.gauge.Gauge).add([this.CreateProp("autoScale",i.Boolean),this.CreateProp("startAngle",i.Number),this.CreateProp("sweepAngle",i.Number)]);case wijmo.gauge&&wijmo.gauge.Range:return new a([this.CreateProp("color",i.String),this.CreateProp("min",i.Number),this.CreateProp("max",i.Number),this.CreateProp("name",i.String),this.CreateProp("thickness",i.Number)],[],[],"ranges",!0);case wijmo.olap&&wijmo.olap.PivotGrid:return this.getMetaData(wijmo.grid.FlexGrid).add([this.CreateProp("showDetailOnDoubleClick",i.Boolean),this.CreateProp("customContextMenu",i.Boolean),this.CreateProp("collapsibleSubtotals",i.Boolean),this.CreateProp("centerHeadersVertically",i.Boolean)]);case wijmo.olap&&wijmo.olap.PivotChart:return new a([this.CreateProp("chartType",i.Enum,"",wijmo.olap.PivotChartType),this.CreateProp("showHierarchicalAxes",i.Boolean),this.CreateProp("showTotals",i.Boolean),this.CreateProp("stacking",i.Enum,"",wijmo.chart.Stacking),this.CreateProp("maxSeries",i.Number),this.CreateProp("maxPoints",i.Number),this.CreateProp("itemsSource",i.Any)]);case wijmo.olap&&wijmo.olap.PivotPanel:return new a([this.CreateProp("autoGenerateFields",i.Boolean),this.CreateProp("viewDefinition",i.String),this.CreateProp("engine",i.Any),this.CreateProp("itemsSource",i.Any)],[this.CreateEvent("itemsSourceChanged"),this.CreateEvent("viewDefinitionChanged"),this.CreateEvent("updatingView"),this.CreateEvent("updatedView")]);case wijmo.olap&&wijmo.olap.PivotField:return new a([this.CreateProp("binding",i.String),this.CreateProp("header",i.String),this.CreateProp("dataType",i.Enum,"",wijmo.DataType)],[],[],"",!0,!0,"");case wijmo.viewer&&wijmo.viewer.ViewerBase:return new a([this.CreateProp("serviceUrl",i.String),this.CreateProp("filePath",i.String),this.CreateProp("fullScreen",i.Boolean,"fullScreenChanged"),this.CreateProp("zoomFactor",i.Number,"zoomFactorChanged"),this.CreateProp("selectMouseMode",i.Boolean,"selectMouseModeChanged"),this.CreateProp("viewMode",i.Enum,"viewModeChanged",wijmo.viewer.ViewMode)],[this.CreateEvent("pageIndexChanged"),this.CreateEvent("viewModeChanged"),this.CreateEvent("selectMouseModeChanged"),this.CreateEvent("fullScreenChanged"),this.CreateEvent("zoomFactorChanged"),this.CreateEvent("queryLoadingData")]);case wijmo.viewer&&wijmo.viewer.ReportViewer:return this.getMetaData(wijmo.viewer.ViewerBase).add([this.CreateProp("paginated",i.Boolean),this.CreateProp("reportName",i.String)]);case wijmo.viewer&&wijmo.viewer.PdfViewer:return this.getMetaData(wijmo.viewer.ViewerBase)}return new a([])},e.getClassName=function(e){return(e.toString().match(/function (.+?)\(/)||[,""])[1]},e.toCamelCase=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},e.findInArr=function(e,t,n){for(var i in e)if(e[i][t]===n)return e[i];return null},e}();e.ControlMetaFactory=l,n=function(){function e(e,t,n,i,r,o){void 0===r&&(r=!0),void 0===o&&(o=0),this._priority=0,this._propertyName=e,this._propertyType=t,this._changeEvent=n,this._enumType=i,this._isNativeControlProperty=r,this._priority=o}return Object.defineProperty(e.prototype,"propertyName",{get:function(){return this._propertyName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propertyType",{get:function(){return this._propertyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeEvent",{get:function(){return this._changeEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enumType",{get:function(){return this._enumType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingMode",{get:function(){return this.changeEvent?r.TwoWay:r.OneWay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNativeControlProperty",{get:function(){return this._isNativeControlProperty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldUpdateSource",{get:function(){return this.bindingMode===r.TwoWay&&this.propertyType!=i.EventHandler},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){wijmo.copy(this,e)},e.prototype.castValueToType=function(e){var t,n,r;if(void 0==e)return e;if(t=this.propertyType,n=i,t===n.AnyPrimitive){if(!wijmo.isString(e))return e;if("true"!==e&&"false"!==e)return r=+e,isNaN(r)?(r=this._parseDate(e),wijmo.isString(r)?e:r):r;t=n.Boolean}switch(t){case n.Number:if("string"==typeof e){if(e.indexOf("*")>=0)return e;if(""===e.trim())return null}return+e;case n.Boolean:return"true"===e?!0:"false"===e?!1:!!e;case n.String:return e+"";case n.Date:return this._parseDate(e);case n.Enum:return"number"==typeof e?e:this.enumType[e];default:return e}},e.prototype._parseDate=function(e){if(e&&wijmo.isString(e)){e=e.replace(/["']/g,"");var t=wijmo.changeType(e,wijmo.DataType.Date,"r");if(wijmo.isDate(t))return t}return e},e}(),e.PropDescBase=n,function(e){e[e.Boolean=0]="Boolean",e[e.Number=1]="Number",e[e.Date=2]="Date",e[e.String=3]="String",e[e.AnyPrimitive=4]="AnyPrimitive",e[e.Enum=5]="Enum",e[e.Function=6]="Function",e[e.EventHandler=7]="EventHandler",e[e.Any=8]="Any"}(e.PropertyType||(e.PropertyType={})),i=e.PropertyType,e.isSimpleType=t,function(e){e[e.OneWay=0]="OneWay",e[e.TwoWay=1]="TwoWay"}(e.BindingMode||(e.BindingMode={})),r=e.BindingMode,o=function(){function e(e,t){this._eventName=e,this._isPropChanged=t}return Object.defineProperty(e.prototype,"eventName",{get:function(){return this._eventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPropChanged",{get:function(){return this._isPropChanged===!0},enumerable:!0,configurable:!0}),e}(),e.EventDescBase=o,s=function(){function e(e,t,n){void 0===n&&(n=!1),this.isArray=!1,this._ownsObject=!1,this.propertyName=e,this.isArray=t,this._ownsObject=n}return Object.defineProperty(e.prototype,"ownsObject",{get:function(){return this.isArray||this._ownsObject},enumerable:!0,configurable:!0}),e}(),e.ComplexPropDescBase=s,a=function(){function e(e,t,n,i,r,o,s,a){this._props=[],this._events=[],this._complexProps=[],this.props=e,this.events=t,this.complexProps=n,this.parentProperty=i,this.isParentPropertyArray=r,this.ownsObject=o,this.parentReferenceProperty=s,this.ngModelProperty=a}return Object.defineProperty(e.prototype,"props",{get:function(){return this._props},set:function(e){this._props=e||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._events},set:function(e){this._events=e||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complexProps",{get:function(){return this._complexProps},set:function(e){this._complexProps=e||[]},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t,n,i,r,o,s,a){return this.addOptions({props:e,events:t,complexProps:n,parentProperty:i,isParentPropertyArray:r,ownsObject:o,parentReferenceProperty:s,ngModelProperty:a})},e.prototype.addOptions=function(e){var t,n,i;for(t in e)n=this[t],i=e[t],n instanceof Array?this[t]=n.concat(i||[]):void 0!==i&&(this[t]=i);return this},e.prototype.prepare=function(){var e=[].concat(this._props);this._props.sort(function(t,n){var i=t.priority-n.priority;return i||(i=e.indexOf(t)-e.indexOf(n)),i})},e}(),e.MetaDataBase=a}(t=e.interop||(e.interop={}))}(wj||(wj={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(e){var t,n,i,r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.CreateProp=function(e,n,i,r,o,s){return new t(e,n,i,r,o,s)},r.CreateEvent=function(e,t){return new n(e,t)},r.CreateComplexProp=function(e,t,n){return new i(e,t,n)},r.findProp=function(e,t){return wj.interop.ControlMetaFactory.findProp(e,t)},r.findEvent=function(e,t){return wj.interop.ControlMetaFactory.findEvent(e,t)},r.findComplexProp=function(e,t){return wj.interop.ControlMetaFactory.findComplexProp(e,t)},r}(wj.interop.ControlMetaFactory);e.MetaFactory=r,t=function(e){function t(t,n,i,r,o,s){e.call(this,t,n,i,r,o,s),this._scopeBindingMode=this.propertyType===wj.interop.PropertyType.EventHandler?"&":this.bindingMode==wj.interop.BindingMode.OneWay&&wj.interop.isSimpleType(this.propertyType)?"@":"="}return __extends(t,e),Object.defineProperty(t.prototype,"scopeBindingMode",{get:function(){return this._scopeBindingMode},set:function(e){this._scopeBindingMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customHandler",{get:function(){return this._customHandler},set:function(e){this._customHandler=e},enumerable:!0,configurable:!0}),t}(wj.interop.PropDescBase),e.PropDesc=t,n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(wj.interop.EventDescBase),e.EventDesc=n,i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(wj.interop.ComplexPropDescBase),e.ComplexPropDesc=i}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),function(e){var t;!function(t){var n,i=function(){function i(){this.replace=!0,this.restrict="E",this.template="<div />",this.transclude=!1,this._props=[],this._events=[],this._complexProps=[];var e=this;this._dirId=++i._dirIdCounter+"",this.link=this._postLinkFn(),this.controller=["$scope","$parse","$element",function(t,n,r){e._$parse=n,this[i._cntrlScopeProp]=t,t[i._scopeChildrenProp]=[],e._controllerImpl(this,t,r)}],this._initDirective()}return Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){throw"Abstract method call"},enumerable:!0,configurable:!0}),i.prototype._getMetaDataId=function(){return this._controlConstructor},i.prototype._getMetaData=function(){return t.MetaFactory.getMetaData(this._getMetaDataId())},i.prototype._initDirective=function(){this._initSharedMeta(),this._prepareProps(),this._initEvents(),this._initScopeEvents(),this._initScopeDescription()},i.prototype._initSharedMeta=function(){var e,n,i,r=this._getMetaData();this._props=r.props,this._events=r.events,this._complexProps=r.complexProps,this._property=r.parentProperty,this._isPropertyArray=r.isParentPropertyArray,this._ownObject=r.ownsObject,this._parentReferenceProperty=r.parentReferenceProperty,this._ngModelProperty=r.ngModelProperty,e=t.MetaFactory.findProp("required",this._props),e&&(n=this._props.indexOf(e),n>-1&&(i=new t.PropDesc("wjRequired",wj.interop.PropertyType.Boolean),i.customHandler=function(e,t,n){t.required=n},this._props.splice(n+1,0,i)))},i.prototype._initProps=function(){},i.prototype._initEvents=function(){},i.prototype._createLink=function(){return new n},i.prototype._controllerImpl=function(){},i.prototype._initControl=function(e){try{var t=this._controlConstructor;return new t(e)}catch(n){return}},i.prototype._isChild=function(){return this._isParentInitializer()||this._isParentReferencer()},i.prototype._isParentInitializer=function(){return void 0!=this._property},i.prototype._isParentReferencer=function(){return void 0!=this._parentReferenceProperty},i.prototype._scopeToAttrName=function(e){var t,n,i=this.scope[e];return i?(t=1,n=i.length,2>n?e:("?"===i.charAt(1)&&(t=2),n===t?e:i.substr(t))):e},i.prototype._getComplexPropDesc=function(e){return t.MetaFactory.findComplexProp(e,this._complexProps)},i.prototype._initScopeEvents=function(){var e,n;for(e in this._events)n=this._events[e],this._props.push(new t.PropDesc(n.eventName,wj.interop.PropertyType.EventHandler))},i.prototype._initScopeDescription=function(){var e,t,n=this._props,r={},o=i._optionalAttr?"=?":"=";
if(null!=n){for(t=0;t<n.length;t++)e=n[t],r[e.propertyName]=e.scopeBindingMode,i._optionalAttr&&"="==e.scopeBindingMode&&(r[e.propertyName]="=?");r.required&&(r.wjRequired=r.required)}r.control=o,r[i._initPropAttr]=o,r[i._initEventAttr]="&",r[i._parPropAttr]="@",r[i._wjModelPropAttr]="@",this.scope=r},i.prototype._postLinkFn=function(){var t=this;return function(n,r,o,s){var a,l,c=t._createLink();if(c.directive=t,c.scope=n,c.tElement=r,c.tAttrs=o,e.isArray(s)){var u=r.parent(),h=u.isolateScope||u.scope,p=h.call(u);for(a in s)if(l=s[a],void 0!=l&&(l[i._cntrlScopeProp]===n&&(l=r.parent().controller(t._stripRequire(+a))),l&&l[i._cntrlScopeProp]===p)){c.controller=l;break}}else c.controller=s;c.ngModel=r.controller("ngModel"),c._link()}},i.prototype._prepareProps=function(){this._initProps();var e=[].concat(this._props);this._props.sort(function(t,n){var i=t.priority-n.priority;return i||(i=e.indexOf(t)-e.indexOf(n)),i})},i.prototype._stripRequire=function(e){if(this._stripReq||(this._stripReq=[],this._stripReq.length=this.require.length),!this._stripReq[e]){var t=/^[^A-Za-z]*(.*)/.exec(this.require[e]);this._stripReq[e]=t?t[1]:""}return this._stripReq[e]},i.prototype._getId=function(){return this._dirId},i._versionOk=function(e){var t,n=window.angular.version,i=[n.major,n.minor,n.dot],r=e.split(".");if(r.length!==i.length)throw"Unrecognizable version number.";for(t=0;t<r.length;t++){if(i[t]<r[t])return!1;if(i[t]>r[t])return!0}return!0},i._removeTransclude=function(e){var t,n;return e?(t=document.createElement("div"),t.innerHTML=e,n=t.querySelectorAll("[ng-transclude]"),[].forEach.call(n,function(e){e.removeAttribute("ng-transclude")}),t.innerHTML):e},i._parPropAttr="wjProperty",i._wjModelPropAttr="wjModelProperty",i._initPropAttr="isInitialized",i._initEventAttr="initialized",i._cntrlScopeProp="_cntrlScope",i._cntrlLinkProp="$_thisLink",i._scopeChildrenProp="$_childLinks",i._dirIdAttr="wj-directive-id",i._optionalAttr=i._versionOk("1.1.4"),i._dynaTemplates=i._optionalAttr,i._angStripPrefixes=["data","x"],i._dirIdCounter=0,i}();t.WjDirective=i,n=function(){function n(){this._nonAssignable={},this._definedProps={},this._definedEvents={},this._oldValues={},this._isInitialized=!1,this._hasTriggeredInitialized=!1,this._isNgModelInitialized=!1,this._scopeSuspend=0,this._suspendedEvents=[],this._areChlildrenReady=!1,this._isDestroyed=!1,this._isAppliedToParent=!1}return n.prototype._link=function(){var e,n,r=this.directive,o=this;this.tElement[0].setAttribute(i._dirIdAttr,r._getId()),this.directiveTemplateElement=r.replace?this.tElement:window.angular.element(this.tElement.children()[0]),this._initNonAssignable(),this._isChild()?(this._parentPropDesc=new t.ComplexPropDesc(r._property,r._isPropertyArray,r._ownObject),this.controller[i._cntrlScopeProp][i._scopeChildrenProp].push(this),e=this.controller[i._cntrlScopeProp],n=e[i._cntrlLinkProp],n&&n._areChlildrenReady&&this._parentReady(n)):(this._createInstance(),this._notifyReady(),this._prepareControl()),this._destroyEhUnreg=this.scope.$on("$destroy",function(){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];o._destroy()})},n.prototype._onChildrenReady=function(){},n.prototype._createInstance=function(){this.control=this._initControl(),this._safeApply(this.scope,"control",this.control)},n.prototype._parentReady=function(e){var t,n,r;if(this._isChild()){if(t=this,this._isAttrDefined(i._parPropAttr)&&!this.scope[i._parPropAttr])return void this.scope.$watch(i._parPropAttr,function(){t._parentReady(e)});n=this._getParentProp(),r=e.directive._getComplexPropDesc(n),r?this._parentPropDesc=r:this._parentPropDesc.propertyName=n,this.parent=e,this._useParentObj()?(this.control=e.control[n],this._safeApply(this.scope,"control",this.control)):this._createInstance(),this._notifyReady(),this._prepareControl(),this._initParent(),this.directiveTemplateElement[0].style.display="none",this._appliedToParent()}},n.prototype._initParent=function(){var e,t,n;if(!this._useParentObj()){var i=(this.directive,this._getParentProp()),r=this.parent.control,o=this.control;this._isParentInitializer()&&(this._isParentArray()?(e=r[i],t=this._getIndex(),(0>t||t>=e.length)&&(t=e.length),e.splice(t,0,o),n=this,this._siblingInsertedEH=this._siblingInserted.bind(this),this.tElement[0].addEventListener("DOMNodeInserted",this._siblingInsertedEH)):r[i]=o),this._isParentReferencer()&&!this._parentInCtor()&&(o[this._getParentReferenceProperty()]=r)}},n.prototype._destroy=function(){var t,n,i,r,o;this._isDestroyed||(this._isDestroyed=!0,t=this.control,this._destroyEhUnreg&&(this._destroyEhUnreg=null),this._siblingInsertedEH&&this.tElement[0].removeEventListener("DOMNodeInserted",this._siblingInsertedEH),this._isParentArray()&&!this.parent._isDestroyed&&(n=this.parent.control,i=this._getParentProp(),n&&i&&t&&(r=n[i],r&&(o=r.indexOf(t),o>=0&&r.splice(o,1)))),t instanceof e.Control&&setTimeout(function(){t.hostElement&&t.dispose()},0))},n.prototype._siblingInserted=function(e){if(e.target===this.tElement[0]){var t=this._getIndex(),n=this.parent.control[this._getParentProp()],i=this.control,r=n.indexOf(i);t>=0&&r>=0&&t!==r&&(n.splice(r,1),t=Math.min(t,n.length),n.splice(t,0,i))}},n.prototype._notifyReady=function(){var e,t;for(this.scope[i._cntrlLinkProp]=this,e=[].concat(this.scope[i._scopeChildrenProp]),t=0;t<e.length;t++)e[t]._parentReady(this);this._areChlildrenReady=!0,this._onChildrenReady()},n.prototype._initControl=function(){return this.directive._initControl(this._parentInCtor()?this.parent.control:this.directiveTemplateElement[0])},n.prototype._prepareControl=function(){this._addEventHandlers(),this._addWatchers()},n.prototype._setupScopeWithControlProperties=function(){for(var e,t,n,i,r,o,s=this.control,a=this.scope,l=this.directive._props,c=0;c<l.length;c++)n=l[c],"="===n.scopeBindingMode&&n.isNativeControlProperty&&n.shouldUpdateSource&&(i=n.propertyName,r=a[i],o=s[i],e=n.propertyType==wj.interop.PropertyType.Function,t=n.propertyType==wj.interop.PropertyType.EventHandler,!this._canApply(a,n.propertyName)||o==r||e||t||(a[n.propertyName]=o));a.$root.$$phase||a.$apply()},n.prototype._initNonAssignable=function(){var e,t=this.directive._$parse,n=this.directive.scope;for(var i in n)"="===n[i].charAt(0)&&(e=this.tAttrs[this.directive._scopeToAttrName(i)],(void 0===e||void 0==t(e).assign)&&(this._nonAssignable[i]=!0))},n.prototype._suspendScope=function(){this._scopeSuspend++},n.prototype._resumeScope=function(){this._scopeSuspend>0&&0==--this._scopeSuspend&&this._suspendedEvents.length>0&&this._updateScope()},n.prototype._isScopeSuspended=function(){return this._scopeSuspend>0},n.prototype._isAttrDefined=function(e){return null!=this.tAttrs.$attr[this.directive._scopeToAttrName(e)]},n.prototype._childInitialized=function(e){var t=this.scope[i._scopeChildrenProp],n=t.indexOf(e);n>=0&&(t.splice(n,1),this._checkRaiseInitialized())},n.prototype._thisInitialized=function(){this._checkRaiseInitialized()},n.prototype._initialized=function(){},n.prototype._appliedToParent=function(){this._isAppliedToParent=!0,this._checkRaiseInitialized()},n.prototype._checkRaiseInitialized=function(){if(!this._hasTriggeredInitialized&&0===this.scope[i._scopeChildrenProp].length&&this._isInitialized&&(!this._isChild()||this._isAppliedToParent)){this._hasTriggeredInitialized=!0,this._initialized(),this._safeApply(this.scope,i._initPropAttr,!0);var e=this.scope[i._initEventAttr],t=this;e&&setTimeout(function(){e({s:t.control,e:void 0})},0),this._isChild()&&this.parent&&this.parent._childInitialized(this)}},n.prototype._addWatchers=function(){var t,n,r,o,s,a=this,l=this.directive._props,c=this.scope;if(l){for(this.ngModel&&(t=this.ngModel,t.$pristine&&e.addClass(this.tElement[0],"ng-pristine"),t.$valid&&e.addClass(this.tElement[0],"ng-valid"),t.$untouched&&e.addClass(this.tElement[0],"ng-untouched"),t.$render=this._ngModelRender.bind(this),this._updateNgModelPropDesc(),this._isAttrDefined(i._wjModelPropAttr)&&c.$watch(i._wjModelPropAttr,function(){a._updateNgModelPropDesc(),a._ngModelRender()})),n=0;n<l.length;n++)o=l[n],r=o.propertyName,o.propertyType!==wj.interop.PropertyType.EventHandler&&this._isAttrDefined(r)&&(this._definedProps[r]=o);s=this.control,c.$watch(function(e){var t,n,i,r,o;if(!a._isDestroyed)try{t={};for(n in a._definedProps)e[n]!==a._oldValues[n]&&(t[n]=e[n]);for(n in t)if(i=t[n],r=a._oldValues[n],i!==r&&(a._oldValues[n]=i,a._isInitialized||void 0!==i)){var l=a._definedProps[n],c=a._nullOrValue(a._castValueToType(i,l)),u=s[n];u!=c&&(o=!1,null!=l.customHandler&&(o=l.customHandler(e,s,c,u,a)),l.isNativeControlProperty&&o!==!0&&(s[n]=c))}}finally{a._isInitialized||(a._isNgModelInitialized=!0,a.ngModel&&(void 0!==a.ngModel.$viewValue?a._ngModelRender():a._ngModelPropDesc&&(a.ngModel.$setViewValue(s[a._ngModelPropDesc.propertyName]),a.ngModel.$setPristine())),a._isInitialized=!0,a._setupScopeWithControlProperties(),a._thisInitialized())}})}},n.prototype._addEventHandlers=function(){for(var e,t=this.directive._events,n=0;n<t.length;n++)e=t[n],this._addEventHandler(e)},n.prototype._addEventHandler=function(e){var t,n=this,i=e.eventName,r=this.control[i];if(null==r)throw'Event "'+i+'" not found in '+n.constructor.name;if(t=this._isAttrDefined(i))this._definedEvents[i]=e;else if(!e.isPropChanged)return;var o=(this.scope,this.directive._props,this.control);r.addHandler(function(t,i){var r={eventDesc:e,s:t,e:i};n._isScopeSuspended()?n._suspendedEvents.push(r):n._updateScope(r)},o)},n.prototype._updateScope=function(e){var t,n,i,r,o,s,a,l,c;if(void 0===e&&(e=null),!this._isDestroyed){if(t=e?e.eventDesc.isPropChanged:this._suspendedEvents.some(function(e){return e.eventDesc.isPropChanged}),n=this,t)for(i=this.directive._props,r=0;r<i.length;r++)o=i[r],"="==o.scopeBindingMode&&o.isNativeControlProperty&&o.shouldUpdateSource&&(s=o.propertyName,a=this.control[s],this._shouldApply(this.scope,s,a)&&(this.scope[s]=a,this.directive._$parse(this.tAttrs[this.directive._scopeToAttrName(s)]).assign(this.scope.$parent,a)),this._ngModelPropDesc&&this._isInitialized&&this._ngModelPropDesc.propertyName==s&&this.ngModel.$viewValue!==a&&this.ngModel.$setViewValue(a));l=function(){for(var t=e?[e]:this._suspendedEvents,i=0;i<t.length;i++){var r=t[i],o=r.eventDesc.eventName,s=this.scope[o];n._definedEvents[o]&&s&&s({s:r.s,e:r.e})}e||(this._suspendedEvents.length=0)}.bind(this),t&&(this.scope.$root.$$phase?c=this.scope.$watch("value",function(){c()}):this.scope.$apply()),l()}},n.prototype._ngModelRender=function(){var e,t,n;this._isNgModelInitialized&&(e=this.ngModel.$viewValue,t=this._ngModelPropDesc,t&&(void 0!==e||this._isInitialized))&&(n=this._nullOrValue(this._castValueToType(e,t)),e!==this.control[t.propertyName]&&(this.control[t.propertyName]=e))},n.prototype._castValueToType=function(e,t){return t.castValueToType(e)},n.prototype._isChild=function(){return this.directive._isChild()},n.prototype._isParentInitializer=function(){return this.directive._isParentInitializer()},n.prototype._isParentReferencer=function(){return this.directive._isParentReferencer()},n.prototype._getParentProp=function(){return this._isParentInitializer()?this.scope[i._parPropAttr]||this.directive._property:void 0},n.prototype._getParentReferenceProperty=function(){return this.directive._parentReferenceProperty},n.prototype._useParentObj=function(){return!this._isParentReferencer()&&this._isParentInitializer()&&!this._parentPropDesc.isArray&&!this._parentPropDesc.ownsObject},n.prototype._isParentArray=function(){return this._isParentInitializer()&&this._parentPropDesc.isArray},n.prototype._parentInCtor=function(){return this._isParentReferencer()&&""==this._getParentReferenceProperty()},n.prototype._getNgModelProperty=function(){return this.scope[i._wjModelPropAttr]||this.directive._ngModelProperty},n.prototype._updateNgModelPropDesc=function(){var n=this._getNgModelProperty();this._ngModelPropDesc=e.isNullOrWhiteSpace(n)?null:t.MetaFactory.findProp(n,this.directive._props)},n.prototype._safeApply=function(e,t,n){return this._shouldApply(e,t,n)?(e[t]=n,e.$root.$$phase||e.$apply(),!0):!1},n.prototype._shouldApply=function(e,t,n){return this._canApply(e,t)&&n!=e[t]},n.prototype._canApply=function(e,t){return!this._nonAssignable[t]},n.prototype._nullOrValue=function(e){return void 0!=e?e:null},n.prototype._getIndex=function(){var e,t,n=this.tElement[0],r=n.parentElement;if(!r)return-1;var o=r.childNodes,s=-1,a=this.directive._getId();for(e=0;e<o.length;e++)if(t=o[e],1==t.nodeType&&t.getAttribute(i._dirIdAttr)==a&&(++s,t===n))return s;return-1},n}(),t.WjLink=n}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n=window.angular.module("wj.container",[]);n.directive("wjTooltip",[function(){return new i}]),n.directive("wjValidationError",[function(){return new o}]);var i=function(t){function n(){t.call(this),this.restrict="A",this.template=""}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.Tooltip},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return new e.Tooltip},n.prototype._createLink=function(){return new r},n}(t.WjDirective),r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._link=function(){e.prototype._link.call(this);var t=this.control,n=this;this.tAttrs.$observe("wjTooltip",function(e){t.setTooltip(n.tElement[0],e)})},t}(t.WjLink),o=function(e){function t(){e.call(this),this.restrict="A",this.template="",this.require="ngModel",this.scope=!1}return __extends(t,e),t.prototype._postLinkFn=function(){return function(e,t,n,i){var r="wjValidationError";e.$watch(n[r],function(e){var n="INPUT"==t[0].tagName?t[0]:t[0].querySelector("input");"boolean"==typeof e&&(e=e?"error":""),n&&n.setCustomValidity&&n.setCustomValidity(e),i&&i.$setValidity(r,e?!1:!0)})}},t.prototype._getMetaDataId=function(){return"ValidationError"},t}(t.WjDirective)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n=window.angular.module("wj.input",[]);e.input&&e.input.InputNumber&&(n.directive("wjAutoComplete",["$compile",function(e){return new o(e)}]),n.directive("wjCalendar",[function(){return new s}]),n.directive("wjColorPicker",[function(){return new a}]),n.directive("wjComboBox",["$compile",function(e){return new r(e)}]),n.directive("wjInputDate",[function(){return new v}]),n.directive("wjInputDateTime",[function(){return new y}]),n.directive("wjInputNumber",[function(){return new _}]),n.directive("wjInputMask",[function(){return new w}]),n.directive("wjInputTime",["$compile",function(e){return new b(e)}]),n.directive("wjInputColor",[function(){return new C}]),n.directive("wjListBox",[function(){return new l}]),n.directive("wjItemTemplate",["$compile",function(e){return new c(e)}]),n.directive("wjMenu",["$compile",function(e){return new h(e)}]),n.directive("wjMenuItem",[function(){return new d}]),n.directive("wjMenuSeparator",[function(){return new g}]),n.directive("wjContextMenu",[function(){return new m}]),n.directive("wjCollectionViewNavigator",[function(){return new E}]),n.directive("wjCollectionViewPager",[function(){return new P}]),n.directive("wjPopup",[function(){return new x}]),n.directive("wjMultiSelect",["$compile",function(e){return new S(e)}]));var i=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.DropDown},enumerable:!0,configurable:!0}),n}(t.WjDirective),r=function(t){function n(e){t.call(this),this._$compile=e,this.template="<div ng-transclude />",this.transclude=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.ComboBox},enumerable:!0,configurable:!0}),n}(i),o=function(t){function n(e){t.call(this,e)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.AutoComplete},enumerable:!0,configurable:!0}),n}(r),s=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.Calendar},enumerable:!0,configurable:!0}),n}(t.WjDirective),a=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.ColorPicker},enumerable:!0,configurable:!0}),n}(t.WjDirective),l=function(t){function n(){t.call(this),this.transclude=!0,this.template="<div ng-transclude />"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.ListBox},enumerable:!0,configurable:!0}),n}(t.WjDirective),c=function(e){function n(i){e.call(this),this._$compile=i,this.require=["?^wjListBox","?^wjMenu"],this.terminal=!0,t.WjDirective._dynaTemplates?(this.transclude=!1,this.priority=100,this.template=function(e,t){return t[n._itemTemplateProp]=e[0].innerHTML,"<div />"}):(this.transclude=!0,this.template="<div ng-transclude/>")}return __extends(n,e),n.prototype._initControl=function(){return{}},n.prototype._createLink=function(){return new u},n.prototype._getMetaDataId=function(){return"ItemTemplate"},n._itemTemplateProp="$__wjItemTemplate",n._itemScopeProp="$_itemScope",n}(t.WjDirective),u=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype._initParent=function(){n.prototype._initParent.call(this);var e=this.tAttrs[c._itemTemplateProp],i=this.parent.control,r=this._getListBox();this.itemTemplate=null!=e?e:t.WjDirective._removeTransclude(this.tElement[0].innerHTML),r.formatItem.addHandler(this._fmtItem,this),r.loadingItems.addHandler(this._loadingItems,this),this.parent._isInitialized&&i.invalidate()},i.prototype._destroy=function(){var e=this.parent&&this.parent.control,t=this._getListBox();t&&(t.formatItem.removeHandler(this._fmtItem,this),t.loadingItems.removeHandler(this._loadingItems,this)),n.prototype._destroy.call(this),this._tmplLink=null,e&&e.invalidate()},i.prototype._loadingItems=function(e){for(var t,n,i=e.hostElement.getElementsByClassName("wj-listbox-item"),r=i.length-1;r>=0;r--)t=i[r],n=t[c._itemScopeProp],n&&(t[c._itemScopeProp]=null,n.$destroy())},i.prototype._fmtItem=function(e,t){var n,i,r,o;this._tmplLink||(this._tmplLink=this.directive._$compile("<div>"+this.itemTemplate+"</div>")),n=t.item,i=this.scope.$parent.$new(),n[c._itemScopeProp]=i,i.$control=e,i.$item=t.data,i.$itemIndex=t.index,r=this._tmplLink(i,function(){})[0],1===n.childNodes.length?n.replaceChild(r,n.firstChild):(n.textContent="",n.appendChild(r)),o=40,clearTimeout(this._closingApplyTimeOut),this._closingApplyTimeOut=setTimeout(function(){i.$root.$$phase||i.$apply()},o)},i._invalidateControl=function(e){e&&e.invalidate()},i.prototype._getListBox=function(){var t=this.parent&&this.parent.control;return t?t instanceof e.input.ListBox?t:t.listBox:null},i}(t.WjLink),h=function(n){function i(e){n.call(this,e)}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.input.Menu},enumerable:!0,configurable:!0}),i.prototype._createLink=function(){return new p},i.prototype._initProps=function(){n.prototype._initProps.call(this);var e=this,i=t.MetaFactory.findProp("value",this._props);i.customHandler=function(t,n,i,r,o){e.updateControlValue(t,n,o)}},i.prototype.updateControlValue=function(e,t,n){null!=e.value&&(t.selectedValue=e.value,n.directive.updateHeader(e,t,n))},i.prototype.updateHeader=function(e,t){var n,i,r;t.header=e.header||"",n=t.selectedItem,"undefined"!=typeof e.value&&n&&t.displayMemberPath&&(i=n[d._itemLinkProp],r=i?i.linkedContent.innerHTML:n[t.displayMemberPath],null!=r&&(t.header+=": <b>"+r+"</b>"))},i}(r),p=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype._initControl=function(){var t=this,n=new e.input.Menu(this.directiveTemplateElement[0],{itemsSource:new e.collections.ObservableArray,selectedIndex:0,itemClicked:function(){t._safeApply(t.scope,"value",n.selectedValue)||t.scope.$root.$$phase||t.scope.$apply(),t.directive.updateHeader(t.scope,n,t)}.bind(t)});return n.listBox.formatItem.addHandler(t._fmtItem,this),n.listBox.loadingItems.addHandler(this._loadingItems,this),n},n.prototype._initialized=function(){this.directive.updateControlValue(this.scope,this.control,this)},n.prototype._fmtItem=function(e,t){var n,i,r=t.data[d._itemLinkProp];if(r){r.contentLink||(r.contentLink=this.directive._$compile("<div>"+r.itemTemplate+"</div>"));var o=this,s=t.item,a=r.scope.$parent.$new();s[d._itemScopeProp]=a,a.$control=this.control,a.$item=t.data,a.$itemIndex=t.index,n=r.linkedContent=r.contentLink(a,function(){})[0],1===s.childNodes.length?s.replaceChild(n,s.firstChild):(s.textContent="",s.appendChild(n)),i=40,clearTimeout(this._closingApplyTimeOut),this._closingApplyTimeOut=setTimeout(function(){a.$root.$$phase||a.$apply(),o.control.selectedItem&&o.directive.updateHeader(o.scope,o.control,o)},i)}},n.prototype._loadingItems=function(e){for(var t,n,i=e.hostElement.getElementsByClassName("wj-listbox-item"),r=i.length-1;r>=0;r--)t=i[r],n=t[d._itemScopeProp],n&&(t[c._itemScopeProp]=null,n.$destroy())},n}(t.WjLink);t.WjMenuLink=p;var d=function(e){function n(){e.call(this),this.require="^wjMenu",this.terminal=!0,t.WjDirective._dynaTemplates?(this.transclude=!1,this.priority=100,this.template=function(e,t){return t[c._itemTemplateProp]=e[0].innerHTML,"<div />"}):(this.transclude=!0,this.template="<div ng-transclude/>")}return __extends(n,e),n.prototype._createLink=function(){return new f(!1)},n.prototype._getMetaDataId=function(){return"MenuItem"},n.prototype._getId=function(){return n._directiveId},n._itemTemplateProp="$__wjMenuItemTemplate",n._itemScopeProp="$_menuItemScope",n._itemLinkProp="$_menuItemLink",n._directiveId="menuItemDir",n}(t.WjDirective),f=function(e){function n(t){e.call(this),this.isSeparator=t}return __extends(n,e),n.prototype._initControl=function(){var e,n=this.tAttrs[c._itemTemplateProp];return this.itemTemplate=this.isSeparator?'<div class="wj-state-disabled" style="width:100%;height:1px;background-color:lightgray"/>':null!=n?n:t.WjDirective._removeTransclude(this.tElement[0].innerHTML),e={value:null,cmd:null,cmdParam:null,header:this.itemTemplate},e[d._itemLinkProp]=this,e},n.prototype._initParent=function(){e.prototype._initParent.call(this);var t=this.parent.control;1==t.itemsSource.length&&t.selectedIndex<0&&(t.selectedIndex=0),t.displayMemberPath||(t.displayMemberPath="header"),t.selectedValuePath||(t.selectedValuePath="value"),t.commandPath||(t.commandPath="cmd"),t.commandParameterPath||(t.commandParameterPath="cmdParam")},n.prototype._destroy=function(){var t=this.parent&&this.parent.control;e.prototype._destroy.call(this),t&&t.invalidate()},n}(t.WjLink),g=function(e){function t(){e.call(this),this.template="<span />",this.require="^wjMenu"}return __extends(t,e),t.prototype._getMetaDataId=function(){return"MenuSeparator"},t.prototype._createLink=function(){return new f(!0)},t.prototype._getId=function(){return d._directiveId},t}(t.WjDirective),m=function(t){function n(){t.call(this),this.template=void 0,this.restrict="A",this.scope=!1}return __extends(n,t),n.prototype._getMetaDataId=function(){return"WjContextMenu"},n.prototype._postLinkFn=function(){return function(t,n,i){var r=e.getElement(i.wjContextMenu);n[0].addEventListener("contextmenu",function(t){var i=e.Control.getControl(r),o=i.dropDown;i&&o&&!e.closest(t.target,"[disabled]")&&(t.preventDefault(),i.owner=n[0],i.selectedIndex=-1,i.onIsDroppedDownChanging(new e.CancelEventArgs)&&(e.showPopup(o,t),i.onIsDroppedDownChanged(),o.focus()))})}},n}(t.WjDirective),v=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputDate},enumerable:!0,configurable:!0}),n}(i),y=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputDateTime},enumerable:!0,configurable:!0}),n}(v),_=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputNumber},enumerable:!0,configurable:!0}),n}(t.WjDirective),w=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputMask},enumerable:!0,configurable:!0}),n}(t.WjDirective),b=function(t){function n(e){t.call(this,e)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputTime},enumerable:!0,configurable:!0}),n}(r),C=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.InputColor},enumerable:!0,configurable:!0}),n}(i),x=function(n){function i(){n.call(this),this.transclude=!0,this.template="<div ng-transclude/>"}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.input.Popup},enumerable:!0,configurable:!0}),i.prototype._initProps=function(){n.prototype._initProps.call(this),t.MetaFactory.findProp("owner",this._props).customHandler=function(e,t,n){var i=e.modal;null==i&&(t.modal=n?!1:!0)}},i}(t.WjDirective),S=function(t){function n(e){t.call(this,e)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.input.MultiSelect},enumerable:!0,configurable:!0}),n}(r),E=function(e){function t(){e.call(this),this.template='<div class="wj-control wj-content wj-pager"><div class="wj-input-group"><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToFirst()" ng-disabled="cv.currentPosition <= 0"><span class="wj-glyph-left" style="margin-right:-4px"></span><span class="wj-glyph-left"></span> </button></span><span class="wj-input-group-btn"> <button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToPrevious()" ng-disabled="cv.currentPosition <= 0"><span class="wj-glyph-left"></span> </button></span><input type="text" class="wj-form-control" value=" {{cv.currentPosition + 1 | number}} / {{cv.itemCount | number}} " disabled /><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToNext()" ng-disabled="cv.currentPosition >= cv.itemCount - 1"><span class="wj-glyph-right"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToLast()" ng-disabled="cv.currentPosition >= cv.itemCount - 1"><span class="wj-glyph-right"></span><span class="wj-glyph-right" style="margin-left:-4px"></span></button></span></div></div>'}return __extends(t,e),t.prototype._getMetaDataId=function(){return"CollectionViewNavigator"},t.prototype._postLinkFn=function(){return function(){}},t}(t.WjDirective),P=function(e){function t(){e.call(this),this.template='<div class="wj-control wj-content wj-pager"><div class="wj-input-group"><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToFirstPage()"ng-disabled="cv.pageIndex <= 0"><span class="wj-glyph-left" style="margin-right:-4px"></span><span class="wj-glyph-left"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToPreviousPage()"ng-disabled="cv.pageIndex <= 0"><span class="wj-glyph-left"></span></button></span><input type="text" class="wj-form-control" value="{{cv.pageIndex + 1 | number}} / {{cv.pageCount | number}}" disabled /><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToNextPage()"ng-disabled="cv.pageIndex >= cv.pageCount - 1"><span class="wj-glyph-right"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToLastPage()"ng-disabled="cv.pageIndex >= cv.pageCount - 1"><span class="wj-glyph-right"></span><span class="wj-glyph-right" style="margin-left:-4px"></span></button></span></div></div>'}return __extends(t,e),t.prototype._getMetaDataId=function(){return"CollectionViewPager"},t.prototype._postLinkFn=function(){return function(){}},t}(t.WjDirective)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n=window.angular.module("wj.chart",[]);e.chart&&e.chart.FlexChart&&(n.directive("wjFlexChart",[function(){return new o}]),n.directive("wjFlexChartAxis",[function(){return new s}]),n.directive("wjFlexChartSeries",[function(){return new p}]),n.directive("wjFlexChartLegend",[function(){return new a}]),n.directive("wjFlexChartDataLabel",[function(){return new c}]),n.directive("wjFlexPieDataLabel",[function(){return new u}]),n.directive("wjFlexChartLineMarker",[function(){return new d}]),n.directive("wjFlexChartPlotArea",[function(){return new j}]),n.directive("wjFlexChartDataPoint",[function(){return new f}]),e.chart.interaction&&(n.directive("wjFlexChartRangeSelector",[function(){return new _}]),n.directive("wjFlexChartGestures",[function(){return new w}]),n.directive("wjFlexChartChartGestures",[function(){return new w}])),e.chart.annotation&&(n.directive("wjFlexChartAnnotationLayer",[function(){return new g}]),n.directive("wjFlexChartAnnotation",[function(){return new v}])),n.directive("wjFlexPie",[function(){return new b}]),e.chart.hierarchical&&n.directive("wjSunburst",[function(){return new C}]),e.chart.radar&&(n.directive("wjFlexRadar",[function(){return new x}]),n.directive("wjFlexRadarSeries",[function(){return new S}])),e.chart.finance&&(n.directive("wjFinancialChart",[function(){return new E}]),n.directive("wjFinancialChartSeries",[function(){return new P}]),e.chart.finance.analytics&&(n.directive("wjFlexChartFibonacci",[function(){return new M}]),n.directive("wjFlexChartFibonacciArcs",[function(){return new O}]),n.directive("wjFlexChartFibonacciFans",[function(){return new I}]),n.directive("wjFlexChartFibonacciTimeZones",[function(){return new F}]),n.directive("wjFlexChartAtr",[function(){return new H}]),n.directive("wjFlexChartCci",[function(){return new V}]),n.directive("wjFlexChartRsi",[function(){return new B}]),n.directive("wjFlexChartWilliamsR",[function(){return new U}]),n.directive("wjFlexChartMacd",[function(){return new W}]),n.directive("wjFlexChartMacdHistogram",[function(){return new q}]),n.directive("wjFlexChartStochastic",[function(){return new G}]),n.directive("wjFlexChartBollingerBands",[function(){return new K}]),n.directive("wjFlexChartEnvelopes",[function(){return new Y}]))),e.chart.analytics&&(n.directive("wjFlexChartTrendLine",[function(){return new T}]),n.directive("wjFlexChartMovingAverage",[function(){return new $}]),n.directive("wjFlexChartYFunctionSeries",[function(){return new D}]),n.directive("wjFlexChartParametricFunctionSeries",[function(){return new A}]),n.directive("wjFlexChartWaterfall",[function(){return new R}])),e.chart.animation&&n.directive("wjFlexChartAnimation",[function(){return new m}]));var i=function(n){function i(){n.call(this);this.template="<div ng-transclude />",this.transclude=!0}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.chart.FlexChartBase},enumerable:!0,configurable:!0}),i.prototype._initProps=function(){
n.prototype._initProps.call(this);var e=t.MetaFactory.findProp("tooltipContent",this._props);e.customHandler=function(e,t,n){null!=n&&(t.tooltip.content=n)}},i}(t.WjDirective),r=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.chart.FlexChartCore},enumerable:!0,configurable:!0}),i.prototype._initProps=function(){n.prototype._initProps.call(this);var e=t.MetaFactory.findProp("labelContent",this._props);e.customHandler=function(e,t,n){null!=n&&(t.dataLabel.content=n)}},i}(i),o=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.FlexChart},enumerable:!0,configurable:!0}),n}(r),s=function(t){function n(){t.call(this),this.require=["?^wjFlexChartSeries","?^wjFinancialChartSeries","?^wjFlexChart","?^wjFinancialChart","?^wjFlexRadar"],this.template='<div class="wjFlexChartAxis" />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.Axis},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(t.WjDirective),a=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFlexPie","?^wjSunburst","?^wjFinancialChart","?^wjFlexRadar"],this.template="<div />"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.Legend},enumerable:!0,configurable:!0}),n}(t.WjDirective),l=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFlexPie","?^wjSunburst"],this.template="<div />"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.DataLabelBase},enumerable:!0,configurable:!0}),n}(t.WjDirective),c=function(t){function n(){t.call(this),this.require="^wjFlexChart"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.DataLabel},enumerable:!0,configurable:!0}),n}(l),u=function(t){function n(){t.call(this),this.require=["^wjFlexPie","?^wjSunburst"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.PieDataLabel},enumerable:!0,configurable:!0}),n}(l),h=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart","?^wjFlexRadar"],this.template='<div class="wjSeriesBase" ng-transclude />',this.transclude=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.SeriesBase},enumerable:!0,configurable:!0}),n.prototype._getId=function(){return"series"},n}(t.WjDirective),p=function(t){function n(){t.call(this),this.require="^wjFlexChart",this.template='<div class="wjFlexChartSeries" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.Series},enumerable:!0,configurable:!0}),n}(h),d=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.LineMarker},enumerable:!0,configurable:!0}),n}(t.WjDirective),f=function(t){function n(){t.call(this),this.require=["?^wjFlexChartAnnotation"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.DataPoint},enumerable:!0,configurable:!0}),n}(t.WjDirective),g=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"],this.template='<div class="wjFlexChartAnnotationLayer" ng-transclude />',this.transclude=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.annotation.AnnotationLayer},enumerable:!0,configurable:!0}),n}(t.WjDirective),m=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFlexPie","?^wjSunburst","?^wjFinancialChart","?^wjFlexRadar"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.animation.ChartAnimation},enumerable:!0,configurable:!0}),n}(t.WjDirective),v=function(e){function t(){e.call(this),this.require="^wjFlexChartAnnotationLayer",this.template='<div class="wjFlexChartAnnotation" ng-transclude />',this.transclude=!0}return __extends(t,e),t.prototype._createLink=function(){return new y},t.prototype._getMetaDataId=function(){return"FlexChartAnnotation"},t}(t.WjDirective),y=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype._initControl=function(){return new e.chart.annotation[this.scope.type]},n}(t.WjLink),_=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.interaction.RangeSelector},enumerable:!0,configurable:!0}),n}(t.WjDirective),w=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"]}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.interaction.ChartGestures},enumerable:!0,configurable:!0}),n}(t.WjDirective),b=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.chart.FlexPie},enumerable:!0,configurable:!0}),i.prototype._initProps=function(){n.prototype._initProps.call(this);var e=t.MetaFactory.findProp("labelContent",this._props);e.customHandler=function(e,t,n){null!=n&&(t.dataLabel.content=n)}},i}(i),C=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.hierarchical.Sunburst},enumerable:!0,configurable:!0}),n}(b),x=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.radar.FlexRadar},enumerable:!0,configurable:!0}),n}(r),S=function(t){function n(){t.call(this),this.require="^wjFlexRadar",this.template='<div class="wjFlexRadarSeries" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.radar.FlexRadarSeries},enumerable:!0,configurable:!0}),n}(h),E=(function(t){function n(){t.call(this),this.require=["?^wjFlexRadarSeries","?^wjFlexRadar"],this.template='<div class="wjFlexRadarAxis" />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.radar.FlexRadarAxis},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(t.WjDirective),function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.FinancialChart},enumerable:!0,configurable:!0}),n}(r)),P=function(t){function n(){t.call(this),this.require="^wjFinancialChart",this.template='<div class="wjFinancialChartSeries" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.FinancialSeries},enumerable:!0,configurable:!0}),n}(h),k=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"],this.template='<div class="wjTrendLineBase" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.TrendLineBase},enumerable:!0,configurable:!0}),n}(h),T=function(t){function n(){t.call(this),this.template='<div class="wjTrendLine" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.TrendLine},enumerable:!0,configurable:!0}),n}(k),$=function(t){function n(){t.call(this),this.template='<div class="wjMovingAverage" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.MovingAverage},enumerable:!0,configurable:!0}),n}(k),D=function(t){function n(){t.call(this),this.template='<div class="wjYFunctionSeries" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.YFunctionSeries},enumerable:!0,configurable:!0}),n}(k),A=function(n){function i(){n.call(this),this.template='<div class="wjParametricFunctionSeries" ng-transclude />'}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.ParametricFunctionSeries},enumerable:!0,configurable:!0}),i.prototype._initProps=function(){n.prototype._initProps.call(this);var e=t.MetaFactory.findProp("func",this._props);e.customHandler=function(e,t,n){null!=n&&(t.xFunc=n)}},i}(k),R=function(t){function n(){t.call(this),this.require=["?^wjFlexChart","?^wjFinancialChart"],this.template='<div class="wjWaterfall" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.analytics.Waterfall},enumerable:!0,configurable:!0}),n}(h),j=function(t){function n(){t.call(this),this.require=["?^wjFlexChartPlotArea","?^wjFlexChart","?^wjFinancialChart"],this.template='<div class="wjFlexChartPlotArea" />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.PlotArea},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(t.WjDirective),M=function(t){function n(){t.call(this),this.require=["?^wjFinancialChart"],this.template='<div class="wjFlexChartFibonacci" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.Fibonacci},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(h),O=function(t){function n(){t.call(this),this.require=["?^wjFinancialChart"],this.template='<div class="wjFlexChartFibonacciArcs" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.FibonacciArcs},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(h),I=function(t){function n(){t.call(this),this.require=["?^wjFinancialChart"],this.template='<div class="wjFlexChartFibonacciFans" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.FibonacciFans},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(h),F=function(t){function n(){t.call(this),this.require=["?^wjFinancialChart"],this.template='<div class="wjFlexChartFibonacciTimeZones" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.FibonacciTimeZones},enumerable:!0,configurable:!0}),n.prototype._initControl=function(){return t.prototype._initControl.call(this,void 0)},n}(h),N=function(t){function n(){t.call(this),this.require="^wjFinancialChart",this.template='<div class="wjBaseOverlayIndicator" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.OverlayIndicatorBase},enumerable:!0,configurable:!0}),n}(h),L=function(t){function n(){t.call(this),this.template='<div class="wjBaseSingleOverlayIndicator" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.SingleOverlayIndicatorBase},enumerable:!0,configurable:!0}),n}(N),H=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartAtr" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.ATR},enumerable:!0,configurable:!0}),n}(L),V=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartCci" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.CCI},enumerable:!0,configurable:!0}),n}(L),B=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartRsi" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.RSI},enumerable:!0,configurable:!0}),n}(L),U=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartWilliamsR" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.WilliamsR},enumerable:!0,configurable:!0}),n}(L),z=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartBaseMacd" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.MacdBase},enumerable:!0,configurable:!0}),n}(N),W=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartMacd" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.Macd},enumerable:!0,configurable:!0}),n}(z),q=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartMacdHistogram" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.MacdHistogram},enumerable:!0,configurable:!0}),n}(z),G=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartStochastic" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.Stochastic},enumerable:!0,configurable:!0}),n}(N),K=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartBollingerBands" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.BollingerBands},enumerable:!0,configurable:!0}),n}(N),Y=function(t){function n(){t.call(this),this.template='<div class="wjFlexChartEnvelopes" ng-transclude />'}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.chart.finance.analytics.Envelopes},enumerable:!0,configurable:!0}),n}(N)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n=window.angular.module("wj.gauge",[]);e.gauge&&e.gauge.LinearGauge&&(n.directive("wjLinearGauge",[function(){return new r}]),n.directive("wjBulletGraph",[function(){return new o}]),n.directive("wjRadialGauge",[function(){return new s}]),n.directive("wjRange",[function(){return new a}]));var i=function(t){function n(){t.call(this),this.template="<div ng-transclude />",this.transclude=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.gauge.Gauge},enumerable:!0,configurable:!0}),n}(t.WjDirective),r=function(t){function n(){t.call(this)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.gauge.LinearGauge},enumerable:!0,configurable:!0}),n}(i),o=function(t){function n(){t.call(this)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.gauge.BulletGraph},enumerable:!0,configurable:!0}),n}(r),s=function(t){function n(){t.call(this)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.gauge.RadialGauge},enumerable:!0,configurable:!0}),n}(i),a=function(t){function n(){t.call(this),this.require=["?^wjLinearGauge","?^wjRadialGauge","?^wjBulletGraph"],this.template="<div ng-transclude />",this.transclude=!0,this._property="ranges",this._isPropertyArray=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.gauge.Range},enumerable:!0,configurable:!0}),n}(t.WjDirective)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n,i,r,o,s,a,l,c=window.angular.module("wj.grid",[]);e.grid&&e.grid.FlexGrid&&(c.directive("wjFlexGrid",["$compile","$interpolate",function(e,t){return new n(e,t)}]),c.directive("wjFlexGridColumn",["$compile",function(e){return new a(e)}]),c.directive("wjFlexGridCellTemplate",[function(){return new h}]),e.grid.filter&&c.directive("wjFlexGridFilter",[function(){return new d}]),e.grid.grouppanel&&c.directive("wjGroupPanel",[function(){return new f}]),e.grid.detail&&c.directive("wjFlexGridDetail",["$compile",function(e){return new g(e)}]),e.grid.sheet&&(c.directive("wjFlexSheet",["$compile","$interpolate",function(e,t){return new v(e,t)}]),c.directive("wjSheet",[function(){return new y}])),e.grid.multirow&&c.directive("wjMultiRow",["$compile","$interpolate",function(e,t){return new w(e,t)}])),n=function(n){function r(e,t){n.call(this),this._$compile=e,this._$interpolate=t;this.transclude=!0,this.template="<div ng-transclude />"}return __extends(r,n),Object.defineProperty(r.prototype,"_controlConstructor",{get:function(){return e.grid.FlexGrid},enumerable:!0,configurable:!0}),r.prototype._createLink=function(){return new i},r.prototype._initProps=function(){var e=t.MetaFactory.findProp("childItemsPath",this._props);e.scopeBindingMode="@",e.customHandler=function(e,t,n){if(n&&(n=n.trim(),n&&"["===n[0])){var i=e.$parent.$eval(n);return t.childItemsPath=i,!0}return!1}},r}(t.WjDirective),t.WjFlexGrid=n,i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initControl=function(){var t=e.prototype._initControl.call(this);return new o(t,this),t},t}(t.WjLink),t.WjFlexGridLink=i,r=e.grid&&e.grid.CellFactory,r||(e.grid={},e.grid.CellFactory=function(){}),o=function(t){function n(e,i){var r,o;if(t.call(this),this._lastApplyTimeStamp=0,this._noApplyLag=!1,this._startingEditing=!1,this._cellStampCounter=0,this._gridLink=i,this._rowHeightUpdates=new s(this),!n._templateTypes){n._templateTypes=[];for(r in u)isNaN(r)&&n._templateTypes.push(r)}o=this,this._baseCf=e.cellFactory,e.cellFactory=this,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),this._evtBlur=document.createEvent("HTMLEvents"),this._evtBlur.initEvent("blur",!1,!1),e.prepareCellForEdit.addHandler(function(){o._noApplyLag=!0}),e.cellEditEnded.addHandler(function(t,n){(n.range.col<0||!e.columns[n.range.col][h._getTemplContextProp(u.CellEdit)])&&(o._editChar=null),setTimeout(function(){o._noApplyLag=!1},300)}),e.beginningEdit.addHandler(function(){o._startingEditing=!0}),e.hostElement.addEventListener("keydown",function(){o._startingEditing=!1},!0),e.hostElement.addEventListener("keypress",function(t){var n=t.charCode>32?String.fromCharCode(t.charCode):null;n&&(!e.activeEditor||o._startingEditing?o._editChar=n:o._editChar&&(o._editChar+=n))},!0)}return __extends(n,t),n.prototype.updateCell=function(t,i,r,o,s){var a,l,c,p,d,f,g,m,v,y,_,w,b,C,x,S,E,P,k,T,$,D,A,R;this._cellStampCounter=(this._cellStampCounter+1)%1e7,a=o[n._cellStampProp]=this._cellStampCounter,o.style.overflow&&(o.style.overflow="");var j,M=this,O=t.grid,I=O.editRange,F=t.rows[i],N=F.dataItem,L=!1,H=!1,V=!1,B=!1;switch(t.cellType){case e.grid.CellType.Cell:I&&I.row===i&&I.col===r?(j=u.CellEdit,H=V=!0):F instanceof e.grid.GroupRow?(B=N instanceof e.collections.CollectionViewGroup,l=!(B||F.hasChildren),r==t.columns.firstVisibleIndex?j=l?u.Cell:u.GroupHeader:(j=l?u.Cell:u.Group,H=!0)):e.grid.detail&&e.grid.detail.DetailRow&&F instanceof e.grid.detail.DetailRow||(j=u.Cell);break;case e.grid.CellType.ColumnHeader:j=u.ColumnHeader;break;case e.grid.CellType.RowHeader:j=O.collectionView&&O.collectionView.currentEditItem===N?u.RowHeaderEdit:u.RowHeader,L=!0;break;case e.grid.CellType.TopLeft:j=u.TopLeft,L=!0;break;case e.grid.CellType.ColumnFooter:j=u.ColumnFooter,H=!0;break;case e.grid.CellType.BottomLeft:j=u.BottomLeft,L=!0}if(c=!1,null!=j&&(p=B&&j==u.GroupHeader?O.columns.getColumn(N.groupDescription.propertyName):r>=0&&r<t.columns.length?t.columns[r]:null,p&&(d=h._getTemplContextProp(j),f=(L?O:p)[d],f||(j===u.RowHeaderEdit?(j=u.RowHeader,d=h._getTemplContextProp(j),f=O[d]):(j===u.Group||j===u.GroupHeader)&&(B||(j=u.Cell,d=h._getTemplContextProp(j),f=p[d]))),f))){var U,z=M._getCellTemplate(f.cellTemplate),W=f.cellStyle,q=f.cellClass,G=!e.isNullOrWhiteSpace(z),K=!e.isNullOrWhiteSpace(W),Y=!e.isNullOrWhiteSpace(q);if(H&&(U=t.getCellData(i,r,!1)),G){g=o.getAttribute(e.grid.FlexGrid._WJS_MEASURE),m=g&&"true"===g.toLowerCase(),c=!0,V&&this._baseCf.updateCell(t,i,r,o,s,!0);var J=o[d]||{},X=J.column!==p||!J.cellScope||!J.cellScope.$root,Q=J.cellScope;X&&(this._doDisposeCell(o),J.cellScope=Q=f.templLink.scope.$parent.$new(),J.column=p,o[d]=J),v=Q.$row!==F||Q.$col!==p||Q.$item!==N||Q.$value!==U,v&&M._initCellScope(Q,F,p,N,U),y=f.cellLink,y||(y=f.cellLink=this._gridLink.directive._$compile('<div style="display:none"'+(K?' ng-style="'+W+'"':"")+(Y?' ng-class="'+q+'"':"")+">"+z+"</div>")),_=J.clonedElement,X&&(w=Q.$watch(function(){if(_&&(w(),_[0].style.display="",t.cellType===e.grid.CellType.ColumnHeader||t.cellType===e.grid.CellType.TopLeft)){var n=_[0].style,i=n.outlineColor,r=n.outlineWidth;n.outlineColor="white",n.outlineWidth="0px",setTimeout(function(){n.outlineColor=i,n.outlineWidth=r},0)}}),J.clonedElement=_=y(Q,function(){})),m&&(_[0].style.display=""),b=!1,V?(C=o.firstElementChild,C&&(o.focus(),C.style.display="none")):(b=1==o.childNodes.length,b||(o.textContent="")),b?_[0]!==o.firstChild&&o.replaceChild(_[0],o.firstChild):o.appendChild(_[0]),f.cellOverflow&&(o.style.overflow=f.cellOverflow),x=40,S=10,this._closingApplyTimeOut&&clearTimeout(this._closingApplyTimeOut),M._rowHeightUpdates.add({panel:t,cell:o,rng:s,cellStamp:a}),m||I||this._noApplyLag||v&&Date.now()-this._lastApplyTimeStamp>x?(clearTimeout(this._closingApplyTimeOut),Q.$root.$$phase||Q.$apply(),I||m||M._rowHeightUpdates.execute(),this._lastApplyTimeStamp=Date.now()):(clearTimeout(this._closingApplyTimeOut),this._closingApplyTimeOut=setTimeout(function(){clearTimeout(this._closingApplyTimeOut),Q.$root.$$phase||Q.$apply(),M._rowHeightUpdates.execute()},S)),setTimeout(function(){var n,i,r,l,c;if(M._updateRowHeight(t,o,s,a)){if(V)return M._rowHeightUpdates.clear(),O.refresh(),void O.startEditing()}else if(V&&(n=_[0].querySelectorAll("input")))for(i=0;i<n.length;i++)if(r=n[i],l=window.getComputedStyle(r),"none"!==l.display&&"visible"===l.visibility){c=function(){r.removeEventListener("focus",c),setTimeout(function(){M._editChar&&(r.value=M._editChar,M._editChar=null,e.setSelectionRange(r,r.value.length),r.dispatchEvent(M._evtInput))},50)},r.addEventListener("focus",c),r.focus();break}},0),V?(M._cellEditorScope=Q,E=function(n,s){var a,l;O.cellEditEnding.removeHandler(E),s.stayInEditMode||(a=e.getActiveElement(),a&&a.dispatchEvent(M._evtBlur),o.focus()),s.cancel||s.stayInEditMode||(s.cancel=!0,t.grid.setCellData(i,r,Q.$value)),l=o.querySelectorAll(".wj-dropdown"),[].forEach.call(l,function(t){var n=e.Control.getControl(t);n&&n instanceof e.input.DropDown&&(n.isDroppedDown=!1)})},O.cellEditEnding.addHandler(E),O.cellEditEnded.addHandler(function(){M._cellEditorScope=null})):this._baseCf.updateCell(t,i,r,o,s,!1)}}if(c||(this._doDisposeCell(o),this._baseCf.updateCell(t,i,r,o,s)),!G&&(K||Y)){var Z=M._initCellScope({},F,p,N,U),ee=K?this._gridLink.scope.$parent.$eval(W,Z):null,te=Y?this._gridLink.scope.$parent.$eval(q,Z):null;if(ee||te){for(P=document.createElement("div");o.firstChild;)P.appendChild(o.firstChild);if(o.appendChild(P),ee)for(k in ee)P.style[k]=ee[k];if(te){for(T=e.isArray(te)?te:[te],$="",D=0;D<T.length;D++)if(A=T[D])if(e.isString(A))$+=" "+A;else for(R in A)A[R]&&($+=" "+R);P.className=$}}}},n.prototype.getEditorValue=function(e){return this._cellEditorScope?this._cellEditorScope.$value:t.prototype.getEditorValue.call(this,e)},n.prototype.disposeCell=function(e){this._doDisposeCell(e)},n.prototype._doDisposeCell=function(e){for(var t,i,r=n._templateTypes,o=0;o<r.length;o++)t=h._getTemplContextProp(u[r[o]]),i=e[t],i&&i.cellScope&&i.cellScope.$root&&(i.cellScope.$destroy(),i.clonedElement&&(i.clonedElement.remove(),i.clonedElement=null),e[t]=null)},n.prototype._updateRowHeight=function(e,t,i,r){var o=t.scrollHeight,s=e.rows,a=i&&i.rowSpan||1;return r===t[n._cellStampProp]&&s.defaultSize*a<o?(s.defaultSize=o/a,!0):!1},n.prototype._initCellScope=function(e,t,n,i,r){return e.$row=t,e.$col=n,e.$item=i,e.$value=r,e},n.prototype._getCellTemplate=function(e){return e&&(e=e.replace(/ class\=\"ng\-scope\"( \"ng\-binding\")?/g,""),e=e.replace(/<span>\s*<\/span>/g,""),e=e.trim()),e},n._cellStampProp="__wjCellStamp",n}(e.grid.CellFactory),s=function(){function e(e){this._requests=[],this._timeOuts=[],this._cellFactory=e}return e.prototype.add=function(e){this._requests.push(e)},e.prototype.execute=function(){for(var e=this._requests;e.length>0;){var t=this._requests.shift(),n=this,i=function(e){return setTimeout(function(){if(n._cellFactory._updateRowHeight(e.panel,e.cell,e.rng,e.cellStamp))n.clear();else{var t=n._timeOuts.indexOf(i);t>-1&&n._timeOuts.splice(t,1)}},0)}(t);this._timeOuts.push(i)}},e.prototype.clear=function(){this._requests.splice(0,this._requests.length),this._clearTimeouts()},e.prototype._clearTimeouts=function(){for(var e=this._timeOuts,t=0;t<e.length;t++)clearTimeout(e[t]);e.splice(0,e.length)},e}(),r||(e.grid=null),a=function(n){function i(e){n.call(this),this._$compile=e,this.scope.dataMap+="map",this.scope.dataType+="type",this.require="^wjFlexGrid",this.terminal=!0,t.WjDirective._dynaTemplates?(this.transclude=!1,this.priority=100,this.template=function(e,t){return t[i._colTemplateProp]=e[0].innerHTML,'<div class="wjGridColumn"/>'}):(this.transclude=!0,this.template='<div class="wjGridColumn" ng-transclude/>')}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.grid.Column},enumerable:!0,configurable:!0}),i.prototype._initControl=function(){return new e.grid.Column},i.prototype._createLink=function(){return new l},i._colTemplateProp="$__wjColTemplate",i._colWjLinkProp="$__wjLink",i._cellCtxProp="$_cellCtxProp",i}(t.WjDirective),l=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype._initParent=function(){var e=this.parent.control;e.autoGenerateColumns&&(e.autoGenerateColumns=!1,this._safeApply(this.scope,"autoGenerateColumns",!1),e.columns.clear()),n.prototype._initParent.call(this);var t=h._getTemplContextProp(u.Cell),i=this.control[t],r=this[a._cellCtxProp];!i&&r&&(this.control[t]=r),this.control[a._colWjLinkProp]=this},i.prototype._link=function(){var i,r,o,s,l,c,u,p,d=this.tElement[0],f=this.tAttrs[a._colTemplateProp],g=null!=f?f:t.WjDirective._removeTransclude(d.innerHTML),m={};if(!e.isNullOrWhiteSpace(g)){for(i=document.createElement("div"),i.innerHTML=g,r=[],[].forEach.call(i.children,function(e){r.push(e)}),s=0;s<r.length;s++)l=r[s],l.tagName.toLocaleLowerCase()===h._tagName&&(o||(o=this.scope.$parent.$new()),i.removeChild(l),d.appendChild(l),this.directive._$compile(l)(o));c=i.innerHTML,e.isNullOrWhiteSpace(c)||(m.cellTemplate=c)}u=this.tAttrs.ngStyle,p=this.tAttrs.ngClass,u&&(m.cellStyle=u),p&&(m.cellClass=p),(m.cellTemplate||m.cellStyle||m.cellClass)&&(m.templLink=this,this[a._cellCtxProp]=m),n.prototype._link.call(this)},i}(t.WjLink),function(e){e[e.Cell=0]="Cell",e[e.CellEdit=1]="CellEdit",e[e.ColumnHeader=2]="ColumnHeader",e[e.RowHeader=3]="RowHeader",e[e.RowHeaderEdit=4]="RowHeaderEdit",e[e.TopLeft=5]="TopLeft",e[e.GroupHeader=6]="GroupHeader",e[e.Group=7]="Group",e[e.ColumnFooter=8]="ColumnFooter",e[e.BottomLeft=9]="BottomLeft"}(t.CellTemplateType||(t.CellTemplateType={}));var u=t.CellTemplateType,h=function(e){function n(){e.call(this),this.require=["?^wjFlexGridColumn","?^wjFlexGrid"],this.terminal=!0,t.WjDirective._dynaTemplates?(this.transclude=!1,this.priority=100,this.template=function(e,t){return t[a._colTemplateProp]=e[0].innerHTML,"<div />"}):(this.transclude=!0,this.template="<div ng-transclude/>")}return __extends(n,e),n._getTemplContextProp=function(e){return"$__cellTempl"+u[e]},n.prototype._initControl=function(){return{}},n.prototype._createLink=function(){return new p},n.prototype._getMetaDataId=function(){return"FlexGridCellTemplate"},n._tagName="wj-flex-grid-cell-template",n}(t.WjDirective),p=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype._initParent=function(){var r,o,s,l;if(n.prototype._initParent.call(this),r=this.scope.cellType){o=u[r];var c=this.tAttrs[a._colTemplateProp],p=null!=c?c:t.WjDirective._removeTransclude(this.tElement[0].innerHTML),d=this.control;e.isNullOrWhiteSpace(p)||(d.cellTemplate=p),s=this.tAttrs.ngStyle,l=this.tAttrs.ngClass,s&&(d.cellStyle=s),l&&(d.cellClass=l),(d.cellTemplate||d.cellStyle||d.cellClass)&&(d.templLink=this,this.parent.control[h._getTemplContextProp(o)]=d),i._invalidateGrid(this.parent.control)}},i.prototype._destroy=function(){var e=this.parent&&this.parent.control,t=this.scope.cellType;n.prototype._destroy.call(this),t&&(e[h._getTemplContextProp(u[t])]=void 0,i._invalidateGrid(e))},i._invalidateGrid=function(t){var n=t;n&&(n instanceof e.grid.Column&&(n=n.grid),n&&n.invalidate())},i}(t.WjLink),d=function(t){function n(){t.call(this),this.require="^wjFlexGrid",this.template="<div />"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.grid.filter.FlexGridFilter},enumerable:!0,configurable:!0}),n}(t.WjDirective),f=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.grid.grouppanel.GroupPanel},enumerable:!0,configurable:!0}),n}(t.WjDirective),g=function(n){function i(e){n.call(this),this._$compile=e,this.require="^wjFlexGrid",this.terminal=!0,t.WjDirective._dynaTemplates?(this.transclude=!1,this.priority=100,this.template=function(e,t){return t[i._detailTemplateProp]=e[0].innerHTML,"<div />"}):(this.transclude=!0,this.template="<div ng-transclude/>")}return __extends(i,n),Object.defineProperty(i.prototype,"_controlConstructor",{get:function(){return e.grid.detail.FlexGridDetailProvider},enumerable:!0,configurable:!0}),i.prototype._createLink=function(){return new m},i._detailTemplateProp="$__wjDetailTemplate",i._detailScopeProp="$_detailScope",i}(t.WjDirective),m=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._initParent=function(){var n;e.prototype._initParent.call(this);var i=this,r=this.tAttrs[g._detailTemplateProp],o=this.control;this.itemTemplate=this._getCellTemplate(null!=r?r:t.WjDirective._removeTransclude(this.tElement[0].innerHTML)),n=this._getCellTemplate(this.itemTemplate),this._tmplLink=this.directive._$compile("<div>"+n+"</div>"),o.createDetailCell=function(e,t){var n=i._getCellScope(i.scope.$parent,e,t),r=i._tmplLink(n,function(){})[0];return o.grid.hostElement.appendChild(r),n.$root.$$phase||n.$apply(),r.parentElement.removeChild(r),r},o.disposeDetailCell=function(e){e.detail&&window.angular.element(e.detail).scope().$destroy()},this.parent._isInitialized&&this.control&&this.control.invalidate();
},n.prototype._destroy=function(){var t=this.parent&&this.parent.control,n=this.control;n.createDetailCell=null,n.disposeDetailCell=null,e.prototype._destroy.call(this),this._tmplLink=null,t&&t.invalidate()},n.prototype._getCellScope=function(e,t,n){var i=e.$new();return i.$row=t,i.$col=n,i.$item=t.dataItem,i},n.prototype._getCellTemplate=function(e){return e&&(e=e.replace(/ng\-style/g,"style"),e=e.replace(/ class\=\"ng\-scope\"( \"ng\-binding\")?/g,""),e=e.replace(/<span>\s*<\/span>/g,"")),e},n}(t.WjLink),v=function(t){function n(e,n){t.call(this,e,n)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.grid.sheet.FlexSheet},enumerable:!0,configurable:!0}),n}(n),y=function(t){function n(){t.call(this),this.require="^wjFlexSheet"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.grid.sheet.Sheet},enumerable:!0,configurable:!0}),n.prototype._createLink=function(){return new _},n}(t.WjDirective),_=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initControl=function(){var t=e.prototype._initControl.call(this),n=this.scope,i=this.parent.control;return t.name=n.name,n.itemsSource?t.itemsSource=n.itemsSource:(t.rowCount=+n.rowCount,t.columnCount=+n.columnCount),i.sheets.push(t),t.selectionRanges.push(i.selection),t},t}(t.WjLink),w=function(t){function n(e,n){t.call(this,e,n)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.grid.multirow.MultiRow},enumerable:!0,configurable:!0}),n}(n)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n,i,r,o=window.angular.module("wj.olap",["wj.grid","wj.chart"]);e.olap&&e.olap.PivotGrid&&(o.directive("wjPivotGrid",["$compile","$interpolate",function(e,t){return new n(e,t)}]),o.directive("wjPivotChart",[function(){return new i}]),o.directive("wjPivotPanel",[function(){return new r}])),n=function(t){function n(e,n){t.call(this,e,n)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.olap.PivotGrid},enumerable:!0,configurable:!0}),n}(t.WjFlexGrid),t.WjPivotGrid=n,i=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.olap.PivotChart},enumerable:!0,configurable:!0}),n}(t.WjDirective),t.WjPivotChart=i,r=function(t){function n(){t.call(this),this.transclude=!0,this.template="<div ng-transclude />"}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.olap.PivotPanel},enumerable:!0,configurable:!0}),n}(t.WjDirective),t.WjPivotPanel=r}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},function(e){var t;!function(t){var n=window.angular.module("wj.viewer",[]);e.viewer&&e.viewer.ReportViewer&&n.directive("wjReportViewer",[function(){return new r}]),e.viewer&&e.viewer.PdfViewer&&n.directive("wjPdfViewer",[function(){return new o}]);var i=function(t){function n(){t.call(this),this.template="<div ng-transclude />",this.transclude=!0}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.viewer.ViewerBase},enumerable:!0,configurable:!0}),n}(t.WjDirective),r=function(t){function n(){t.call(this)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.viewer.ReportViewer},enumerable:!0,configurable:!0}),n}(i),o=function(t){function n(){t.call(this)}return __extends(n,t),Object.defineProperty(n.prototype,"_controlConstructor",{get:function(){return e.viewer.PdfViewer},enumerable:!0,configurable:!0}),n}(i)}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={})),function(e){var t;!function(){window.angular.module("wj",["wj.input","wj.grid","wj.chart","wj.container","wj.gauge","wj.olap","wj.viewer"])}(t=e.angular||(e.angular={}))}(wijmo||(wijmo={}));
//# sourceMappingURL=flexSheetJSLib.min.js.map
