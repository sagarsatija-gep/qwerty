

<!-- subheader-->
<div id="subheaderwrapper" class="subheadercontainer clearfix">
    <div class="row marginBottom0 extra-nav-wrap" scrolled>
        <div class="col s12">
            <div class="extra-nav-title">
                <a href="javascript:history.go(-1);" class="left white-text waves-circle waves-effect waves-light extra-nav-title--back left-panel" smart-tooltip position="bottom" delay="10" message="{{'Back'|| translate}}">
                    <i class="icon small">
                        <svg>
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon_Back"></use>
                        </svg>
                    </i>
                </a>
                <i class="icon small extra-nav-title--icon ng-scope">
                    <svg>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon_Order"></use>
                    </svg>
                </i>
                <span class="extra-nav-title--text ng-cloak">{{dataModel.orderData.DocumentNumber}} - {{dataModel.orderData.DocumentName}} ({{orderStatus}})</span>
            </div>




            <ul class="right extra-nav-right-icon right-panel">
                <li class="extra-nav-icon marginTop10" id="formSearchDv">
                </li>

                <li class="extra-nav-title--text marginLeft10">
                    <smart-dropdown config="{{dropDownConfig}}">
                        <a class='dropdown-button left btn-in-header white-text' href='javascript:void(0)' data-activates='dropdownUSD' data-constrainwidth="false" data-alignment="right">
                            <span>{{ 'USD' || translate }} {{ getTotalTax()  || translate | number:2 }}</span>
                            <i class="icon iconSmall white-text">
                                <svg>
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon_DropArrow"></use>
                                </svg>
                            </i>

                        </a>

                        <ul id="dropdownUSD" class="dropdown-content looup-data-summary lookup-popup fontNormal dropdown-content-medium dd-close-off paddingBtm0">
                            <li ng-repeat="item in taxConfig">
                                <div class="input-field col s12 detail-field-summary">
                                    <span class="left grey-text">{{item.dataName || translate}} ({{'USD' || translate}}) </span>
                                    <div class="right">
                                        <div class="right-align">
                                            {{ item.dataValue | number:2 }}
                                        </div>
                                        <div ng-if="item.taxEditable"><a href="javascript:void(0)" class="blue-text fontSize12" ng-click="makeEditCurrent($index)">{{'Prorate' || translate}}</a></div>
                                    </div>
                                    <div class="slider-pop" animate-on-load ng-show="item.makeEdit">
                                        <div class="well single-edit-panel paddingBtm10">
                                            <div class="single-edit-panel-input-box row">
                                                <smart-textfield class="col s12" label="{{'Prorate' || translate}}" ng-model="newTaxValue" focus="item.editableFieldFocus"></smart-textfield>
                                            </div>
                                            <div class="single-edit-panel-secondary-content">

                                                <a href="javascript:void(0)" class="waves-effect waves-circle circle  waves-effect-circle" ng-click="cancelupdateTaxValue($index)">
                                                    <i class="icon iconSmall blue-text padding0">
                                                        <svg>
                                                            <use xlink:href="#icon_Close"></use>
                                                        </svg>
                                                    </i>
                                                </a>
                                                <a href="javascript:void(0)" class="waves-effect waves-circle circle  waves-effect-circle" ng-click="updateTaxValue($index,newTaxValue)">
                                                    <i class="icon iconSmall blue-text padding0">
                                                        <svg>
                                                            <use xlink:href="#icon_Check"></use>
                                                        </svg>
                                                    </i>
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="input-field col s12 detail-field-summary"><span class="left grey-text">{{ "Order Total (USD)" || translate}}</span> <span class="right"> {{ getTotalTax()  || translate | number:2 }} </span> </div>
                            </li>

                            <li class="divider"></li>
                            <li>
                                <div class="input-field col s12 detail-field-summary"><span class="left grey-text">{{ " Total Received Amount (USD)" || translate}}</span> <span class="right"> 799.00 </span> </div>
                            </li>

                            <li>
                                <div class="input-field col s12 detail-field-summary"><span class="left grey-text">{{ " Total Invoiced Amount (USD)" || translate}}</span> <span class="right"> 900.00 </span> </div>
                            </li>


                            <li></li>
                        </ul>
                    </smart-dropdown>

                </li>
                <li class="extra-nav-icon">
                    <a href="javaScript:void(0)" class="waves-circle sh-icon waves-effect waves-light dropdown-button " ng-click="showCommentsPopupCallback(e)">
                        <i class="icon iconSmall white-text" message="Comments" smart-tooltip data-position="bottom" delay="50">
                            <svg><use xlink:href="{{ commentIcon }}"></use></svg>
                        </i>
                    </a>
                </li>
                <li class="extra-nav-title--text ">
                    |
                </li>
                <li class="extra-nav-icon ">
                    <smart-dropdown config="{{dropDownConfig}}">
                        <a href="javaScript:void(0);" class="waves-circle sh-icon waves-effect waves-light dropdown-button " data-alignment="right" data-activates='landingPageAction' data-constrainwidth="false">
                            <i class="icon iconSmall white-text" smart-tooltip message="Actions" data-position="bottom" data-delay="50">
                                <svg><use xlink:href="#icon_MenuKebab"></use></svg>
                            </i>
                        </a>
                        <ul class='dropdown-content' id="landingPageAction">
                            <li>
                                <a ui-sref="p2p.asn.new" class="grey-text text-darken-4">
                                    {{'Create ASN' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="trackStatusPopupCallback(e)">
                                    {{'Track Status' || translate}}
                                </a>
                            </li>
                            <li>
                                <a ui-sref="p2p.order.viewChanges({ changeType: 'reviewChange' })" class="grey-text text-darken-4">
                                    {{'Review Changes' || translate}}
                                </a>
                            </li>
                            <li>
                                <a ui-sref="p2p.order.viewChanges({changeType:'changeHistory'})" class="grey-text text-darken-4">
                                    {{'Change History' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="revokeChangeOrder(e)">
                                    {{'Revoke Change Order' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="resendOrderToSuppCall()">
                                    {{'Resend Order To Supplier' || translate}}
                                </a>

                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="copyOrder(e)">
                                    {{'Copy Order' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-show="orderStatus == 'DRAFT'" ng-click="cancelOrder(e)">
                                    {{'Cancel Order' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-show="orderStatus != 'DRAFT'" ng-click="restoreOrder(e)">
                                    {{'Restore Order' || translate}}
                                </a>
                            </li>
                            <li>
                                <a ui-sref="p2p.order.approval" class="grey-text text-darken-4">
                                    {{'Self Approve' || translate}}
                                </a>

                            </li>
                            <li>
                                <a ui-sref="p2p.order.approval" class="grey-text text-darken-4">
                                    {{'Manage Approval' || translate}}
                                </a>

                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="adhocApprovals(e)">
                                    {{'Ad-hoc Approvals' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="deleteOrder(e)">
                                    {{'Delete' || translate}}
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="grey-text text-darken-4" ng-click="exportPopupCallBack(e)">
                                    {{'Export Internal Copy' || translate}}
                                </a>
                            </li>
                        </ul>
                    </smart-dropdown>
                </li>

            </ul>

        </div>
    </div>
</div>
    <!-- end subheader-->
    <!-- body -- form widget -->
    <div class="row smartFormWidgetContainer paddingBtm40">
        <smart-form-widget form-config="config" search-holder="formSearchDv" model-data="dataModel" widget-panel-top="115"></smart-form-widget>
    </div>

    <!-- footer -->
    <footer class="page-footer bounceInUp animated">
        <div class="row">
            <div class="left-align col s3">
                <smart-button flat="true" config='{"title":"Print Preview","allignRight":"true"}' disable="false" callback="showOrderPreview"></smart-button>
            </div>
            <div class="right-align col s9">
                <smart-button flat="true" config='{"title":"CANCEL","allignRight":"false"}' disable="false"></smart-button>
                <smart-button config='{"title":"SAVE AS DRAFT","allignRight":"false"}' disable="false" class="whiteSecondaryBtn marginRight10"></smart-button>
                <smart-button config='{"title":"SUBMIT","allignRight":"false"}' disable="false" ng-click="submitReq()"></smart-button>
            </div>

        </div>
    </footer>

    <!-- popup -- comments -->
    <smart-popup template-url="{{commentsPopupUrl}}" show="{{showCommentsPopup}}" on-hide="commentsPopUpOnHideCallback(e)"></smart-popup>
    <!-- popup -- attchments -->
    <smart-popup template-url="shared/popup/views/popupUploadDoc.html" show="{{showUploadPopup}}" on-hide="hideUploadPopupCallback(e)"></smart-popup>
    <smart-popup template-url="shared/popup/views/popupUploadDoc.html" show="{{showUploadPopupfrmEmail}}" on-hide="hideUploadPopupfrmEmailCallback(e)"></smart-popup>

    <!-- popup -- manage approval  -->
    <smart-popup template-url="{{manageApprovalPopupPath}}" show='{{mngAppShow}}' on-hide="mngAppPopupOnHideCallback(e)" type="small"></smart-popup>
    <smart-popup template-url="shared/popup/views/popupResendOrderToSupplier.html" show='{{resendOptionShow}}' on-hide="resendOptionPopupOnHideCallback(e)" type="small"></smart-popup>
    <smart-popup template-url="shared/popup/views/popupERPReferenceLocation.html" show='{{erpRefShow}}' on-hide="erpRefPopupOnHideCallback(e)"></smart-popup>

    <!-- popup -- track status -->
    <!--<smart-popup template-url="{{trackStatusPopupUrl}}" show='{{trackStatusPopup}}' on-hide="trackStatusOnHideCallback(e)" type="large"></smart-popup>-->
    <smart-popup template-url="{{trackStatusPopupUrl}}" class="trackStatusPopup" expand-collapse="#trackStatusPopup" show='{{trackStatusPopup}}' on-hide="trackStatusOnHideCallback(e)"></smart-popup>
    <smart-popup template-url="shared/popup/views/popupEmailer.html" show='{{emailerPopup}}' on-hide="emailerPopupHideCallback(e)"></smart-popup>
    <!-- popup -- ad hoc Approvals -->
    <smart-popup template-url="{{adhocApprovalsPopupUrl}}" show='{{adhocApprovalsPopup}}' on-hide="adhocApprovalsOnHideCallback(e)"></smart-popup>
    <!--popup -- export internal copy-->
    <smart-popup template-url="p2p/order/views/exportInternalCopy.html" show="{{showExportInternalCopy}}" on-hide="hideExportInternalCopyCallback(e)" type="small"></smart-popup>
